/** @license (MIT) SPA.js | (c) Kumararaja */
/** @license (MIT) lodash | https://github.com/lodash/lodash/blob/master/LICENSE */
!function(){if(!window._){var b={MAX_INTEGER:17976931348623157e292,MAX_SAFE_INTEGER:9007199254740991,INFINITY:1/0,reIsDeepProp:/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp:/^\w*$/,reLeadingDot:/^\./,rePropName:/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar:/\\(\\)?/g,reIsUint:/^(?:0|[1-9]\d*)$/,reFlags:/\w*$/,spreadableSymbol:window.Symbol?Symbol.isConcatSpreadable:void 0,symToStringTag:window.Symbol?Symbol.toStringTag:void 0,nativeIsBuffer:window.Buffer?Buffer.isBuffer:void 0,Uint8Array:window.Uint8Array,Map:window.Map?window.Map:void 0,Set:window.Set?window.Set:void 0,nativeCreate:window.Object&&Object.create?Object.create:void 0,nativeGetSymbols:Object.getOwnPropertySymbols,arrayProto:Array.prototype,splice:Array.prototype.splice,funcProto:Function.prototype,objectProto:Object.prototype,objectCreate:Object.create,symbolProto:window.Symbol?Symbol.prototype:void 0,symbolValueOf:window.Symbol&&Symbol.prototype?Symbol.prototype.valueOf:void 0,symbolToString:window.Symbol&&Symbol.prototype?Symbol.prototype.toString:void 0,HASH_UNDEFINED:"__lodash_hash_undefined__",COMPARE_PARTIAL_FLAG:1,COMPARE_UNORDERED_FLAG:2,LARGE_ARRAY_SIZE:200,HOT_COUNT:800,HOT_SPAN:16,CLONE_DEEP_FLAG:1,CLONE_FLAT_FLAG:2,CLONE_SYMBOLS_FLAG:4,argsTag:"[object Arguments]",arrayTag:"[object Array]",asyncTag:"[object AsyncFunction]",boolTag:"[object Boolean]",dateTag:"[object Date]",domExcTag:"[object DOMException]",errorTag:"[object Error]",funcTag:"[object Function]",genTag:"[object GeneratorFunction]",mapTag:"[object Map]",numberTag:"[object Number]",nullTag:"[object Null]",objectTag:"[object Object]",promiseTag:"[object Promise]",proxyTag:"[object Proxy]",regexpTag:"[object RegExp]",setTag:"[object Set]",stringTag:"[object String]",symbolTag:"[object Symbol]",undefinedTag:"[object Undefined]",weakMapTag:"[object WeakMap]",weakSetTag:"[object WeakSet]",arrayBufferTag:"[object ArrayBuffer]",dataViewTag:"[object DataView]",float32Tag:"[object Float32Array]",float64Tag:"[object Float64Array]",int8Tag:"[object Int8Array]",int16Tag:"[object Int16Array]",int32Tag:"[object Int32Array]",uint8Tag:"[object Uint8Array]",uint8ClampedTag:"[object Uint8ClampedArray]",uint16Tag:"[object Uint16Array]",uint32Tag:"[object Uint32Array]",setToArray:function _setToArray(e){var t=-1,a=Array(e.size);return e.forEach(function(e){a[++t]=e}),a},apply:function _apply(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)},overArg:function _overArg(t,a){return function(e){return t(a(e))}},stubFalse:function _stubFalse(){return!1},stubArray:function _stubArray(){return[]},constant:function _constant(e){return function(){return e}},defineProperty:function(){try{var e=Object.defineProperty;return e({},"",{}),e}catch(e){}}(),baseCreate:function(e){var t=typeof e;if(null==e||"object"!=t&&"function"!=t)return{};if(Object.create)return Object.create(e);object.prototype=e;var a=new object;return object.prototype=void 0,a},isKeyable:function _isKeyable(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},getMapData:function _getMapData(e,t){var a=e.__data__;return b.isKeyable(t)?a["string"==typeof t?"string":"hash"]:a.map},typedArrayTags:{},cloneableTags:{}},h=b.nativeIsBuffer||b.stubFalse,i=b.objectProto.toString,a=b.objectProto.propertyIsEnumerable,v=b.objectProto.hasOwnProperty,r=b.nativeIsBuffer?Buffer.allocUnsafe:void 0,n=b.funcProto.toString,o=b.funcProto.toString.call(Object);b.typedArrayTags[b.float32Tag]=b.typedArrayTags[b.float64Tag]=b.typedArrayTags[b.int8Tag]=b.typedArrayTags[b.int16Tag]=b.typedArrayTags[b.int32Tag]=b.typedArrayTags[b.uint8Tag]=b.typedArrayTags[b.uint8ClampedTag]=b.typedArrayTags[b.uint16Tag]=b.typedArrayTags[b.uint32Tag]=!0,b.typedArrayTags[b.argsTag]=b.typedArrayTags[b.arrayTag]=b.typedArrayTags[b.arrayBufferTag]=b.typedArrayTags[b.boolTag]=b.typedArrayTags[b.dataViewTag]=b.typedArrayTags[b.dateTag]=b.typedArrayTags[b.errorTag]=b.typedArrayTags[b.funcTag]=b.typedArrayTags[b.mapTag]=b.typedArrayTags[b.numberTag]=b.typedArrayTags[b.objectTag]=b.typedArrayTags[b.regexpTag]=b.typedArrayTags[b.setTag]=b.typedArrayTags[b.stringTag]=b.typedArrayTags[b.weakMapTag]=!1,b.cloneableTags[b.argsTag]=b.cloneableTags[b.arrayTag]=b.cloneableTags[b.arrayBufferTag]=b.cloneableTags[b.dataViewTag]=b.cloneableTags[b.boolTag]=b.cloneableTags[b.dateTag]=b.cloneableTags[b.float32Tag]=b.cloneableTags[b.float64Tag]=b.cloneableTags[b.int8Tag]=b.cloneableTags[b.int16Tag]=b.cloneableTags[b.int32Tag]=b.cloneableTags[b.mapTag]=b.cloneableTags[b.numberTag]=b.cloneableTags[b.objectTag]=b.cloneableTags[b.regexpTag]=b.cloneableTags[b.setTag]=b.cloneableTags[b.stringTag]=b.cloneableTags[b.symbolTag]=b.cloneableTags[b.uint8Tag]=b.cloneableTags[b.uint8ClampedTag]=b.cloneableTags[b.uint16Tag]=b.cloneableTags[b.uint32Tag]=!0,b.cloneableTags[b.errorTag]=b.cloneableTags[b.funcTag]=b.cloneableTags[b.weakMapTag]=!1,b.baseSetToString=b.defineProperty?function(e,t){return b.defineProperty(e,"toString",{configurable:!0,enumerable:!1,value:b.constant(t),writable:!0})}:function(e){return e},b.shortOut=function _shortOut(a){var n=0,r=0;return function(){var e=Date.now(),t=b.HOT_SPAN-(e-r);if(r=e,0<t){if(++n>=b.HOT_COUNT)return arguments[0]}else n=0;return a.apply(void 0,arguments)}},b.overRest=function _overRest(i,o,s){return o=Math.max(void 0===o?i.length-1:o,0),function(){for(var e=arguments,t=-1,a=Math.max(e.length-o,0),n=Array(a);++t<a;)n[t]=e[o+t];t=-1;for(var r=Array(o+1);++t<o;)r[t]=e[t];return r[o]=s(n),b.apply(i,this,r)}},b.Hash=function _Hash(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var n=e[t];this.set(n[0],n[1])}},b.Hash.prototype.clear=function hashClear(){this.__data__=b.nativeCreate?b.nativeCreate(null):{},this.size=0},b.Hash.prototype.delete=function hashDelete(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},b.Hash.prototype.get=function hashGet(e){var t=this.__data__;if(b.nativeCreate){var a=t[e];return a===b.HASH_UNDEFINED?void 0:a}return v.call(t,e)?t[e]:void 0},b.Hash.prototype.has=function hashHas(e){var t=this.__data__;return b.nativeCreate?void 0!==t[e]:v.call(t,e)},b.Hash.prototype.set=function hashSet(e,t){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=b.nativeCreate&&void 0===t?b.HASH_UNDEFINED:t,this},b.ListCache=function _ListCache(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var n=e[t];this.set(n[0],n[1])}},b.ListCache.prototype.clear=function _listCacheClear(){this.__data__=[],this.size=0},b.ListCache.prototype.delete=function _listCacheDelete(e){var t=this.__data__,a=_assocIndexOf(t,e);return!(a<0)&&(a==t.length-1?t.pop():b.splice.call(t,a,1),--this.size,!0)},b.ListCache.prototype.get=function _listCacheGet(e){var t=this.__data__,a=_assocIndexOf(t,e);return a<0?void 0:t[a][1]},b.ListCache.prototype.has=function _listCacheHas(e){return-1<_assocIndexOf(this.__data__,e)},b.ListCache.prototype.set=function _listCacheSet(e,t){var a=this.__data__,n=_assocIndexOf(a,e);return n<0?(++this.size,a.push([e,t])):a[n][1]=t,this},b.Stack=function _Stack(e){var t=this.__data__=new b.ListCache(e);this.size=t.size},b.Stack.prototype.clear=function stackClear(){this.__data__=new b.ListCache,this.size=0},b.Stack.prototype.delete=function _stackDelete(e){var t=this.__data__,a=t.delete(e);return this.size=t.size,a},b.Stack.prototype.get=function _stackGet(e){return this.__data__.get(e)},b.Stack.prototype.has=function _stackHas(e){return this.__data__.has(e)},b.Stack.prototype.set=function _stackSet(e,t){var a=this.__data__;if(a instanceof b.ListCache){var n=a.__data__;if(!b.Map||n.length<b.LARGE_ARRAY_SIZE-1)return n.push([e,t]),this.size=++a.size,this;a=this.__data__=new b.MapCache(n)}return a.set(e,t),this.size=a.size,this},b.MapCache=function _MapCache(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var n=e[t];this.set(n[0],n[1])}},b.MapCache.prototype.clear=function _mapCacheClear(){this.size=0,this.__data__={hash:new b.Hash,map:new(b.Map||b.ListCache),string:new b.Hash}},b.MapCache.prototype.delete=function _mapCacheDelete(e){var t=b.getMapData(this,e).delete(e);return this.size-=t?1:0,t},b.MapCache.prototype.get=function _mapCacheGet(e){return b.getMapData(this,e).get(e)},b.MapCache.prototype.has=function _mapCacheHas(e){return b.getMapData(this,e).has(e)},b.MapCache.prototype.set=function _mapCacheSet(e,t){var a=b.getMapData(this,e),n=a.size;return a.set(e,t),this.size+=a.size==n?0:1,this},b.SetCache=function _SetCache(e){var t=-1,a=null==e?0:e.length;for(this.__data__=new b.MapCache;++t<a;)this.add(e[t])},b.SetCache.prototype.add=b.SetCache.prototype.push=function _setCacheAdd(e){return this.__data__.set(e,b.HASH_UNDEFINED),this},b.SetCache.prototype.has=function _setCacheHas(e){return this.__data__.has(e)},b.createSet=b.Set&&1/b.setToArray(new b.Set([,-0]))[1]==b.INFINITY?function(e){return new b.Set(e)}:function(){},b.getSymbols=b.nativeGetSymbols?function(t){return null==t?[]:(t=Object(t),_arrayFilter(b.nativeGetSymbols(t),function(e){return a.call(t,e)}))}:b.stubArray,b.setToString=b.shortOut(b.baseSetToString);var s=b.overArg(Object.keys,Object),l=b.overArg(Object.getPrototypeOf,Object),e=function createAssigner(s){return _baseRest(function(e,t){var a=-1,n=t.length,r=1<n?t[n-1]:void 0,i=2<n?t[2]:void 0;for(r=3<s.length&&"function"==typeof r?(n--,r):void 0,i&&isIterateeCall(t[0],t[1],i)&&(r=n<3?void 0:r,n=1),e=Object(e);++a<n;){var o=t[a];o&&s(e,o,a,r)}return e})}(function(e,t){_copyObject(t,_keysIn(t),e)}),t=_baseRest(function(e){return _baseUniq(_baseFlatten(e,1,_isArrayLikeObject,!0))}),m=b.nativeGetSymbols?function(e){for(var t=[];e;)_arrayPush(t,b.getSymbols(e)),e=l(e);return t}:b.stubArray,c=_flatRest(function(t,e){var a={};if(null==t)return a;var n=!1;e=_arrayMap(e,function(e){return e=_castPath(e,t),n=n||1<e.length,e}),_copyObject(t,_getAllKeysIn(t),a),n&&(a=_baseClone(a,CLONE_DEEP_FLAG|CLONE_FLAT_FLAG|CLONE_SYMBOLS_FLAG,_customOmitClone));for(var r=e.length;r--;)_baseUnset(a,e[r]);return a}),_=_baseIsArguments(function(){return arguments}())?_baseIsArguments:function(e){return _isObjectLike(e)&&v.call(e,"callee")&&!a.call(e,"callee")},u=function _createBaseEach(i,o){return function(e,t){if(null==e)return e;if(!_isArrayLike(e))return i(e,t);for(var a=e.length,n=o?a:-1,r=Object(e);(o?n--:++n<a)&&!1!==t(r[n],n,r););return e}}(function _baseForOwn(e,t){return e&&_baseFor(e,t,_keys)}),d={at:void 0,each:function _each(e,t){return(_isArray(e)?_arrayEach:u)(e,_getIteratee(t,3))},every:function _every(e,t,a){var n=_isArray(e)?_arrayEvery:_baseEvery;return a&&_isIterateeCall(e,t,a)&&(t=void 0),n(e,_getIteratee(t,3))},extend:e,filter:function _filter(e,t){return(_isArray(e)?_arrayFilter:_baseFilter)(e,_getIteratee(t,3))},find:function _find(e,t,a){var n=Object(e);if(!_isArrayLike(e)){var r=_getIteratee(t,3);e=_keys(e),t=function(e){return r(n[e],e,n)}}var i=_findIndex(e,t,a);return-1<i?n[r?e[i]:i]:void 0},findIndex:_findIndex,get:_get,getAllKeys:_getAllKeys,has:function _has(e,t){return null!=e&&_hasPath(e,t,_baseHas)},hasIn:_hasIn,indexOf:function _indexOf(e,t,a){var n=null==e?0:e.length;if(!n)return-1;var r=null==a?0:_toInteger(a);return r<0&&(r=Math.max(n+r,0)),_baseIndexOf(e,t,r)},isArray:_isArray,isArrayLike:_isArrayLike,isArrayLikeObject:_isArrayLikeObject,isBoolean:function _isBoolean(e){return!0===e||!1===e||_isObjectLike(e)&&_baseGetTag(e)==b.boolTag},isEmpty:function _isEmpty(e){var t=typeof e;return"undefined"==t||null==e||("string"==t||"[object Array]"===Object.prototype.toString.call(e)?!e.length:"object"==t&&!Object.keys(e).length)},isFunction:_isFunction,isIndex:_isIndex,isKey:_isKey,isLength:_isLength,isNumber:function _isNumber(e){return"number"==typeof e||_isObjectLike(e)&&_baseGetTag(e)==b.numberTag},isObject:_isObject,isObjectLike:_isObjectLike,isPlainObject:_isPlainObject,isPrototype:_isPrototype,isString:_isString,isSymbol:_isSymbol,isTypedArray:_isTypedArray,keys:_keys,keysIn:_keysIn,last:_last,map:function _map(e,t){return(_isArray(e)?_arrayMap:_baseMap)(e,_getIteratee(t,3))},max:function _max(e){return e&&e.length?function baseExtremum(e,t,a){for(var n=-1,r=e.length;++n<r;){var i=e[n],o=t(i);if(null!=o&&(void 0===s?o==o&&!_isSymbol(o):a(o,s)))var s=o,l=i}return l}(e,identity,baseGt):void 0},merge:void 0,omit:c,pick:void 0,property:_property,pull:void 0,pullAt:void 0,pullAll:_pullAll,range:function _range(e,t,a){return a&&"number"!=typeof a&&(a=void 0),e=_toFinite(e),void 0===t?(t=e,e=0):t=_toFinite(t),function _baseRange(e,t,a,n){for(var r=-1,i=Math.max(Math.ceil((t-e)/(a||1)),0),o=Array(i);i--;)o[n?i:++r]=e,e+=a;return o}(e,t,a=void 0===a?e<t?1:-1:_toFinite(a),!1)},remove:function _remove(e,t){var a=[];if(!e||!e.length)return a;var n=-1,r=[],i=e.length;for(t=_getIteratee(t,3);++n<i;){var o=e[n];t(o,n,e)&&(a.push(o),r.push(n))}return _basePullAt(e,r),a},some:function _some(e,t,a){var n=_isArray(e)?_arraySome:_baseSome;return a&&_isIterateeCall(e,t,a)&&(t=void 0),n(e,_getIteratee(t,3))},sortBy:void 0,union:t,uniq:function _uniq(e){return e&&e.length?_baseUniq(e):[]},zipObject:function _zipObject(e,t){return function _baseZipObject(e,t,a){var n=-1,r=e.length,i=t.length,o={};for(;++n<r;){var s=n<i?t[n]:void 0;a(o,e[n],s)}return o}(e||[],t||[],_assignValue)}};d.at=_flatRest(_baseAt),d.pull=_baseRest(_pullAll),d.pullAt=_flatRest(function(e,t){var a=null==e?0:e.length,n=_baseAt(e,t);return _basePullAt(e,_arrayMap(t,function(e){return _isIndex(e,a)?+e:e}).sort(_compareAscending)),n}),d.sortBy=_baseRest(function(e,t){if(null==e)return[];var a=t.length;return 1<a&&_isIterateeCall(e,t[0],t[1])?t=[]:2<a&&_isIterateeCall(t[0],t[1],t[2])&&(t=[t[0]]),_baseOrderBy(e,_baseFlatten(t,1),[])}),d.merge=function _createAssigner(s){return _baseRest(function(e,t){var a=-1,n=t.length,r=1<n?t[n-1]:void 0,i=2<n?t[2]:void 0;for(r=3<s.length&&"function"==typeof r?(n--,r):void 0,i&&_isIterateeCall(t[0],t[1],i)&&(r=n<3?void 0:r,n=1),e=Object(e);++a<n;){var o=t[a];o&&s(e,o,a,r)}return e})}(function(e,t,a){_baseMerge(e,t,a)}),d.pick=_flatRest(function(e,t){return null==e?{}:_basePick(e,t)}),d.forEach=d.each,window._||(window._=d)}function object(){}function baseGt(e,t){return t<e}function identity(e){return e}function _identity(e){return e}function _isIterateeCall(e,t,a){if(!_isObject(a))return!1;var n=typeof t;return!!("number"==n?_isArrayLike(a)&&_isIndex(t,a.length):"string"==n&&t in a)&&_eq(a[t],e)}function _baseRest(e,t){return b.setToString(b.overRest(e,t,_identity),e+"")}function _baseUniq(e,t,a){var n=-1,r=_arrayIncludes,i=e.length,o=!0,s=[],l=s;if(a)o=!1,r=_arrayIncludesWith;else if(i>=b.LARGE_ARRAY_SIZE){var c=t?null:b.createSet(e);if(c)return b.setToArray(c);o=!1,r=_cacheHas,l=new b.SetCache}else l=t?[]:s;e:for(;++n<i;){var u=e[n],d=t?t(u):u;if(u=a||0!==u?u:0,o&&d==d){for(var p=l.length;p--;)if(l[p]===d)continue e;t&&l.push(d),s.push(u)}else r(l,d,a)||(l!==s&&l.push(d),s.push(u))}return s}function _isArrayLikeObject(e){return _isObjectLike(e)&&_isArrayLike(e)}function _baseFlatten(e,t,a,n,r){var i=-1,o=e.length;for(a=a||_isFlattenable,r=r||[];++i<o;){var s=e[i];0<t&&a(s)?1<t?_baseFlatten(s,t-1,a,n,r):_arrayPush(r,s):n||(r[r.length]=s)}return r}function _flatten(e){return(null==e?0:e.length)?_baseFlatten(e,1):[]}function _baseGetAllKeys(e,t,a){var n=t(e);return _isArray(e)?n:_arrayPush(n,a(e))}function _getAllKeysIn(e){return _baseGetAllKeys(e,_keysIn,m)}function _baseUnset(e,t){return null==(e=function _parent(e,t){return t.length<2?e:_baseGet(e,function _baseSlice(e,t,a){var n=-1,r=e.length;t<0&&(t=r<-t?0:r+t);(a=r<a?r:a)<0&&(a+=r);r=a<t?0:a-t>>>0,t>>>=0;var i=Array(r);for(;++n<r;)i[n]=e[n+t];return i}(t,0,-1))}(e,t=_castPath(t,e)))||delete e[_toKey(_last(t))]}function _castPath(e,t){return _isArray(e)?e:_isKey(e,t)?[e]:function _strToPath(e){var r=[];b.reLeadingDot.test(e)&&r.push("");return e.replace(b.rePropName,function(e,t,a,n){r.push(a?n.replace(b.reEscapeChar,"$1"):t||e)}),r}(function _toString(e){return null==e?"":_baseToString(e)}(e))}function _flatRest(e){return b.setToString(b.overRest(e,void 0,_flatten),e+"")}function _isPlainObject(e){if(!_isObjectLike(e)||_baseGetTag(e)!=b.objectTag)return!1;var t=l(e);if(null===t)return!0;var a=v.call(t,"constructor")&&t.constructor;return"function"==typeof a&&a instanceof a&&n.call(a)==o}function _customOmitClone(e){return _isPlainObject(e)?void 0:e}function _copyArray(e,t){var a=-1,n=e.length;for(t=t||Array(n);++a<n;)t[a]=e[a];return t}function _copyObject(e,t,a,n){var r=!a;a=a||{};for(var i=-1,o=t.length;++i<o;){var s=t[i],l=n?n(a[s],e[s],s,a,e):void 0;void 0===l&&(l=e[s]),r?_baseAssignValue(a,s,l):_assignValue(a,s,l)}return a}function _cloneBuffer(e,t){if(t)return e.slice();var a=e.length,n=r?r(a):new e.constructor(a);return e.copy(n),n}function _initCloneObject(e){return"function"!=typeof e.constructor||_isPrototype(e)?{}:b.baseCreate(l(e))}function _cloneArrayBuffer(e){var t=new e.constructor(e.byteLength);return new b.Uint8Array(t).set(new b.Uint8Array(e)),t}function _cloneTypedArray(e,t){var a=t?_cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}function _mapToArray(e){var a=-1,n=Array(e.size);return e.forEach(function(e,t){n[++a]=[t,e]}),n}function _arrayReduce(e,t,a,n){var r=-1,i=null==e?0:e.length;for(n&&i&&(a=e[++r]);++r<i;)a=t(a,e[r],r,e);return a}function _addMapEntry(e,t){return e.set(t[0],t[1]),e}function _addSetEntry(e,t){return e.add(t),e}function _initCloneByTag(e,t,a,n){var r=e.constructor;switch(t){case b.numberTag:case b.stringTag:return new r(e);case b.boolTag:case b.dateTag:return new r(+e);case b.arrayBufferTag:return _cloneArrayBuffer(e);case b.float32Tag:case b.float64Tag:case b.int8Tag:case b.int16Tag:case b.int32Tag:case b.uint8Tag:case b.uint8ClampedTag:case b.uint16Tag:case b.uint32Tag:return _cloneTypedArray(e,n);case b.mapTag:return function _cloneMap(e,t,a){return _arrayReduce(t?a(_mapToArray(e),b.CLONE_DEEP_FLAG):_mapToArray(e),_addMapEntry,new e.constructor)}(e,n,a);case b.dataViewTag:return function _cloneDataView(e,t){var a=t?_cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}(e,n);case b.regexpTag:return function _cloneRegExp(e){var t=new e.constructor(e.source,b.reFlags.exec(e));return t.lastIndex=e.lastIndex,t}(e);case b.setTag:return function _cloneSet(e,t,a){return _arrayReduce(t?a(b.setToArray(e),b.CLONE_DEEP_FLAG):b.setToArray(e),_addSetEntry,new e.constructor)}(e,n,a);case b.symbolTag:return function _cloneSymbol(e){return b.symbolValueOf?Object(b.symbolValueOf.call(e)):{}}(e)}}function _assignValue(e,t,a){var n=e[t];v.call(e,t)&&_eq(n,a)&&(void 0!==a||t in e)||_baseAssignValue(e,t,a)}function _keys(e){return _isObject(e)?_baseKeys(e):_isString(e)?_baseKeys(e.split("")):[]}function _keysIn(e){return _isArrayLike(e)?function _arrayLikeKeys(e,t){var a=_isArray(e),n=!a&&_(e),r=!a&&!n&&h(e),i=!a&&!n&&!r&&_isTypedArray(e),o=a||n||r||i,s=o?function _baseTimes(e,t){var a=-1,n=Array(e);for(;++a<e;)n[a]=t(a);return n}(e.length,String):[],l=s.length;for(var c in e)!t&&!v.call(e,c)||o&&("length"==c||r&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||_isIndex(c,l))||s.push(c);return s}(e,!0):function _baseKeysIn(e){if(!_isObject(e))return function _nativeKeysIn(e){var t=[];if(null!=e)for(var a in Object(e))t.push(a);return t}(e);var t=_isPrototype(e),a=[];for(var n in e)("constructor"!=n||!t&&v.call(e,n))&&a.push(n);return a}(e)}function _getAllKeys(e){return _baseGetAllKeys(e,keys,b.getSymbols)}function _arrayEach(e,t){for(var a=-1,n=null==e?0:e.length;++a<n&&!1!==t(e[a],a,e););return e}function _baseClone(a,n,r,e,t,i){var o,s=n&CLONE_DEEP_FLAG,l=n&CLONE_FLAT_FLAG,c=n&CLONE_SYMBOLS_FLAG;if(r&&(o=t?r(a,e,t,i):r(a)),void 0!==o)return o;if(!_isObject(a))return a;var u=_isArray(a);if(u){if(o=function _initCloneArray(e){var t=e.length,a=e.constructor(t);return t&&"string"==typeof e[0]&&v.call(e,"index")&&(a.index=e.index,a.input=e.input),a}(a),!s)return _copyArray(a,o)}else{var d=_getTag(a),p=d==b.funcTag||d==b.genTag;if(h(a))return _cloneBuffer(a,s);if(d==b.objectTag||d==b.argsTag||p&&!t){if(o=l||p?{}:_initCloneObject(a),!s)return l?function _copySymbolsIn(e,t){return _copyObject(e,m(e),t)}(a,function _baseAssignIn(e,t){return e&&_copyObject(t,_keysIn(t),e)}(o,a)):function _copySymbols(e,t){return _copyObject(e,b.getSymbols(e),t)}(a,function _baseAssign(e,t){return e&&_copyObject(t,_keys(t),e)}(o,a))}else{if(!b.cloneableTags[d])return t?a:{};o=_initCloneByTag(a,d,_baseClone,s)}}var f=(i=i||new b.Stack).get(a);if(f)return f;i.set(a,o);var g=u?void 0:(c?l?_getAllKeysIn:_getAllKeys:l?_keysIn:_keys)(a);return _arrayEach(g||a,function(e,t){g&&(e=a[t=e]),_assignValue(o,t,_baseClone(e,n,r,t,a,i))}),o}function _isString(e){return"string"==typeof e||!_isArray(e)&&_isObjectLike(e)&&_baseGetTag(e)==b.stringTag}function _isObject(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function _isObjectLike(e){return null!=e&&"object"==typeof e}function _isFunction(e){return null!=e&&"function"==typeof e}function _isArray(e){return"[object Array]"===Object.prototype.toString.call(e)}function _isLength(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=b.MAX_SAFE_INTEGER}function _isIndex(e,t){return!!(t=null==t?b.MAX_SAFE_INTEGER:t)&&("number"==typeof e||b.reIsUint.test(e))&&-1<e&&e%1==0&&e<t}function _isArrayLike(e){return null!=e&&_isLength(e.length)&&!_isFunction(e)}function _isKey(e,t){if(_isArray(e))return!1;var a=typeof e;return"number"==a||"symbol"==a||"boolean"==a||null==e||(b.reIsPlainProp.test(e)||!b.reIsDeepProp.test(e)||null!=t&&e in Object(t))}function _isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||b.objectProto)}function _isSymbol(e){return"symbol"==typeof e||_isObjectLike(e)&&_getTag(e)==b.symbolTag}function _isTypedArray(e){return _isObjectLike(e)&&_isLength(e.length)&&!!b.typedArrayTags[_getTag(e)]}function _isFlattenable(e){return _isArray(e)||!!(b.spreadableSymbol&&e&&e[b.spreadableSymbol])}function _objectToString(e){return i.call(e)}function _isStrictComparable(e){return e==e&&!_isObject(e)}function _eq(e,t){return e===t||e!=e&&t!=t}function _assocIndexOf(e,t){for(var a=e.length;a--;)if(_eq(e[a][0],t))return a;return-1}function _baseIsNaN(e){return e!=e}function _toFinite(e){var t=b.INFINITY,a=b.MAX_INTEGER;return e?(e*=1)!==t&&e!==-t?e==e?e:0:(e<0?-1:1)*a:0===e?e:0}function _toKey(e){if("string"==typeof e)return e;var t=e+"";return"0"==t&&1/e==-b.INFINITY?"-0":t}function _baseToString(e){if("string"==typeof e)return e;if(_isArray(e))return _arrayMap(e,_baseToString)+"";var t=e+"";return"0"==t&&1/e==-b.INFINITY?"-0":t}function _toInteger(e){var t=_toFinite(e),a=t%1;return t==t?a?t-a:t:0}function _arrayMap(e,t){for(var a=-1,n=null==e?0:e.length,r=Array(n);++a<n;)r[a]=t(e[a],a,e);return r}function _last(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}function _hasPath(e,t,a){for(var n=-1,r=(t=_castPath(t,e)).length,i=!1;++n<r;){var o=_toKey(t[n]);if(!(i=null!=e&&a(e,o)))break;e=e[o]}return i||++n!=r?i:!!(r=null==e?0:e.length)&&_isLength(r)&&_isArray(e)}function _baseHas(e,t){return null!=e&&v.call(e,t)}function _baseHasIn(e,t){return null!=e&&t in Object(e)}function _hasIn(e,t){return null!=e&&_hasPath(e,t,_baseHasIn)}function _get(e,t,a){var n=null==e?void 0:_baseGet(e,t);return void 0===n?a:n}function _findIndex(e,t,a){var n=null==e?0:e.length;if(!n)return-1;var r=null==a?0:_toInteger(a);return r<0&&(r=Math.max(n+r,0)),_baseFindIndex(e,_getIteratee(t,3),r)}function _property(e){return _isKey(e)?function _baseProperty(t){return function(e){return null==e?void 0:e[t]}}(_toKey(e)):function _basePropertyDeep(t){return function(e){return _baseGet(e,t)}}(e)}function _pullAll(e,t){return e&&e.length&&t&&t.length?function _basePullAll(e,t,a,n){var r=n?_baseIndexOfWith:_baseIndexOf,i=-1,o=t.length,s=e;e===t&&(t=_copyArray(t));a&&(s=_arrayMap(e,_baseUnary(a)));for(;++i<o;)for(var l=0,c=t[i],u=a?a(c):c;-1<(l=r(s,u,l,n));)s!==e&&b.splice.call(s,l,1),b.splice.call(e,l,1);return e}(e,t):e}function _matchesStrictComparable(t,a){return function(e){return null!=e&&(e[t]===a&&(void 0!==a||t in Object(e)))}}function _basePick(a,e){return function _basePickBy(e,t,a){var n=-1,r=t.length,i={};for(;++n<r;){var o=t[n],s=_baseGet(e,o);a(s,o)&&_baseSet(i,_castPath(o,e),s)}return i}(a,e,function(e,t){return _hasIn(a,t)})}function _baseSet(e,t,a,n){if(!_isObject(e))return e;for(var r=-1,i=(t=_castPath(t,e)).length,o=i-1,s=e;null!=s&&++r<i;){var l=_toKey(t[r]),c=a;if(r!=o){var u=s[l];void 0===(c=n?n(u,l,s):void 0)&&(c=_isObject(u)?u:_isIndex(t[r+1])?[]:{})}_assignValue(s,l,c),s=s[l]}return e}function _baseIndexOf(e,t,a){return t==t?function _strictIndexOf(e,t,a){var n=a-1,r=e.length;for(;++n<r;)if(e[n]===t)return n;return-1}(e,t,a):_baseFindIndex(e,_baseIsNaN,a)}function _baseIndexOfWith(e,t,a,n){for(var r=a-1,i=e.length;++r<i;)if(n(e[r],t))return r;return-1}function _baseKeys(e){if(!_isPrototype(e))return s(e);var t=[];for(var a in Object(e))v.call(e,a)&&"constructor"!=a&&t.push(a);return t}function _baseGet(e,t){for(var a=0,n=(t=_castPath(t,e)).length;null!=e&&a<n;)e=e[_toKey(t[a++])];return a&&a==n?e:void 0}function _baseGetTag(e){return null==e?void 0===e?b.undefinedTag:b.nullTag:b.symToStringTag&&b.symToStringTag in Object(e)?_getRawTag(e):_objectToString(e)}function _getRawTag(e){var t=v.call(e,b.symToStringTag),a=e[b.symToStringTag];try{var n=!(e[b.symToStringTag]=void 0)}catch(e){}var r=i.call(e);return n&&(t?e[b.symToStringTag]=a:delete e[b.symToStringTag]),r}function _getTag(e){return null==e?void 0===e?b.undefinedTag:b.nullTag:b.symToStringTag&&b.symToStringTag in Object(e)?_getRawTag(e):_objectToString(e)}function _baseAssignValue(e,t,a){"__proto__"==t&&b.defineProperty?b.defineProperty(e,t,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[t]=a}function _baseAt(e,t){for(var a=-1,n=t.length,r=Array(n),i=null==e;++a<n;)r[a]=i?void 0:_get(e,t[a]);return r}function _arrayPush(e,t){for(var a=-1,n=t.length,r=e.length;++a<n;)e[r+a]=t[a];return e}function _arrayEvery(e,t){for(var a=-1,n=null==e?0:e.length;++a<n;)if(!t(e[a],a,e))return!1;return!0}function _arrayMap(e,t){for(var a=-1,n=null==e?0:e.length,r=Array(n);++a<n;)r[a]=t(e[a],a,e);return r}function _arraySome(e,t){for(var a=-1,n=null==e?0:e.length;++a<n;)if(t(e[a],a,e))return!0;return!1}function _arrayIncludes(e,t){return!!(null==e?0:e.length)&&-1<_baseIndexOf(e,t,0)}function _arrayIncludesWith(e,t,a){for(var n=-1,r=null==e?0:e.length;++n<r;)if(a(t,e[n]))return!0;return!1}function _arrayFilter(e,t){for(var a=-1,n=null==e?0:e.length,r=0,i=[];++a<n;){var o=e[a];t(o,a,e)&&(i[r++]=o)}return i}function _equalArrays(e,t,a,n,r,i){var o=a&b.COMPARE_PARTIAL_FLAG,s=e.length,l=t.length;if(s!=l&&!(o&&s<l))return!1;var c=i.get(e);if(c&&i.get(t))return c==t;var u=-1,d=!0,p=a&b.COMPARE_UNORDERED_FLAG?new b.SetCache:void 0;for(i.set(e,t),i.set(t,e);++u<s;){var f=e[u],g=t[u];if(n)var h=o?n(g,f,u,t,e,i):n(f,g,u,e,t,i);if(void 0!==h){if(h)continue;d=!1;break}if(p){if(!_arraySome(t,function(e,t){if(!_cacheHas(p,t)&&(f===e||r(f,e,a,n,i)))return p.push(t)})){d=!1;break}}else if(f!==g&&!r(f,g,a,n,i)){d=!1;break}}return i.delete(e),i.delete(t),d}function _cacheHas(e,t){return e.has(t)}function _compareAscending(e,t){if(e!==t){var a=void 0!==e,n=null===e,r=e==e,i=_isSymbol(e),o=void 0!==t,s=null===t,l=t==t,c=_isSymbol(t);if(!s&&!c&&!i&&t<e||i&&o&&l&&!s&&!c||n&&o&&l||!a&&l||!r)return 1;if(!n&&!i&&!c&&e<t||c&&a&&r&&!n&&!i||s&&a&&r||!o&&r||!l)return-1}return 0}function _baseFindIndex(e,t,a,n){for(var r=e.length,i=a+(n?1:-1);n?i--:++i<r;)if(t(e[i],i,e))return i;return-1}function _baseIsEqualDeep(e,t,a,n,r,i){var o=_isArray(e),s=_isArray(t),l=o?b.arrayTag:_getTag(e),c=s?b.arrayTag:_getTag(t);l=l==b.argsTag?b.objectTag:l,c=c==b.argsTag?b.objectTag:c;var u=l==b.objectTag,d=c==b.objectTag,p=l==c;if(p&&h(e)){if(!h(t))return!1;u=!(o=!0)}if(p&&!u)return i=i||new b.Stack,o||_isTypedArray(e)?_equalArrays(e,t,a,n,r,i):function _equalByTag(e,t,a,n,r,i,o){switch(a){case b.dataViewTag:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case b.arrayBufferTag:return!(e.byteLength!=t.byteLength||!i(new b.Uint8Array(e),new b.Uint8Array(t)));case b.boolTag:case b.dateTag:case b.numberTag:return _eq(+e,+t);case b.errorTag:return e.name==t.name&&e.message==t.message;case b.regexpTag:case b.stringTag:return e==t+"";case b.mapTag:var s=_mapToArray;case b.setTag:var l=n&b.COMPARE_PARTIAL_FLAG;if(s=s||b.setToArray,e.size!=t.size&&!l)return!1;var c=o.get(e);if(c)return c==t;n|=b.COMPARE_UNORDERED_FLAG,o.set(e,t);var u=_equalArrays(s(e),s(t),n,r,i,o);return o.delete(e),u;case b.symbolTag:if(b.symbolValueOf)return b.symbolValueOf.call(e)==b.symbolValueOf.call(t)}return!1}(e,t,l,a,n,r,i);if(!(a&b.COMPARE_PARTIAL_FLAG)){var f=u&&v.call(e,"__wrapped__"),g=d&&v.call(t,"__wrapped__");if(f||g)return r(f?e.value():e,g?t.value():t,a,n,i=i||new b.Stack)}return p&&function _equalObjects(e,t,a,n,r,i){var o=a&b.COMPARE_PARTIAL_FLAG,s=_getAllKeys(e),l=s.length;if(l!=_getAllKeys(t).length&&!o)return!1;for(var c=l;c--;){var u=s[c];if(!(o?u in t:v.call(t,u)))return!1}var d=i.get(e);if(d&&i.get(t))return d==t;var p=!0;i.set(e,t),i.set(t,e);for(var f=o;++c<l;){var g=e[u=s[c]],h=t[u];if(n)var m=o?n(h,g,u,t,e,i):n(g,h,u,e,t,i);if(!(void 0===m?g===h||r(g,h,a,n,i):m)){p=!1;break}f=f||"constructor"==u}if(p&&!f){var _=e.constructor,y=t.constructor;_!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof _&&_ instanceof _&&"function"==typeof y&&y instanceof y)&&(p=!1)}return i.delete(e),i.delete(t),p}(e,t,a,n,r,i=i||new b.Stack)}function _baseIsEqual(e,t,a,n,r){return e===t||(null==e||null==t||!_isObjectLike(e)&&!_isObjectLike(t)?e!=e&&t!=t:_baseIsEqualDeep(e,t,a,n,_baseIsEqual,r))}function _baseIsArguments(e){return _isObjectLike(e)&&_baseGetTag(e)==b.argsTag}function _baseMatches(t){var a=function _getMatchData(e){for(var t=_keys(e),a=t.length;a--;){var n=t[a],r=e[n];t[a]=[n,r,_isStrictComparable(r)]}return t}(t);return 1==a.length&&a[0][2]?_matchesStrictComparable(a[0][0],a[0][1]):function(e){return e===t||function _baseIsMatch(e,t,a,n){var r=a.length,i=r,o=!n;if(null==e)return!i;for(e=Object(e);r--;){var s=a[r];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++r<i;){var l=(s=a[r])[0],c=e[l],u=s[1];if(o&&s[2]){if(void 0===c&&!(l in e))return!1}else{var d=new b.Stack;if(n)var p=n(c,u,l,e,t,d);if(!(void 0===p?_baseIsEqual(u,c,b.COMPARE_PARTIAL_FLAG|b.COMPARE_UNORDERED_FLAG,n,d):p))return!1}}return!0}(e,t,a)}}function _baseIteratee(e){return"function"==typeof e?e:null==e?_identity:"object"==typeof e?_isArray(e)?function _baseMatchesProperty(a,n){return _isKey(a)&&_isStrictComparable(n)?_matchesStrictComparable(_toKey(a),n):function(e){var t=_get(e,a);return void 0===t&&t===n?_hasIn(e,a):_baseIsEqual(n,t,b.COMPARE_PARTIAL_FLAG|b.COMPARE_UNORDERED_FLAG)}}(e[0],e[1]):_baseMatches(e):_property(e)}function _getIteratee(e,t){var a=_baseIteratee;return arguments.length?a(e,t):a}function _basePullAt(e,t){for(var a=e?t.length:0,n=a-1;a--;){var r=t[a];if(a==n||r!==i){var i=r;_isIndex(r)?b.splice.call(e,r,1):_baseUnset(e,r)}}return e}function _baseUnary(t){return function(e){return t(e)}}function _baseFor(e,t,a,n){for(var r=-1,i=Object(e),o=a(e),s=o.length;s--;){var l=o[n?s:++r];if(!1===t(i[l],l,i))break}return e}function _baseEvery(e,n){var r=!0;return u(e,function(e,t,a){return r=!!n(e,t,a)}),r}function _baseMap(e,n){var r=-1,i=_isArrayLike(e)?Array(e.length):[];return u(e,function(e,t,a){i[++r]=n(e,t,a)}),i}function _baseSome(e,n){var r;return u(e,function(e,t,a){return!(r=n(e,t,a))}),!!r}function _baseOrderBy(e,a,n){var r=-1;return a=_arrayMap(a.length?a:[_identity],_baseUnary(_getIteratee())),function _baseSortBy(e,t){var a=e.length;for(e.sort(t);a--;)e[a]=e[a].value;return e}(_baseMap(e,function(t){return{criteria:_arrayMap(a,function(e){return e(t)}),index:++r,value:t}}),function(e,t){return function _compareMultiple(e,t,a){for(var n=-1,r=e.criteria,i=t.criteria,o=r.length,s=a.length;++n<o;){var l=_compareAscending(r[n],i[n]);if(l)return s<=n?l:l*("desc"==a[n]?-1:1)}return e.index-t.index}(e,t,n)})}function _baseFilter(e,n){var r=[];return u(e,function(e,t,a){n(e,t,a)&&r.push(e)}),r}function _assignMergeValue(e,t,a){(void 0===a||_eq(e[t],a))&&(void 0!==a||t in e)||_baseAssignValue(e,t,a)}function _baseMergeDeep(e,t,a,n,r,i,o){var s=e[a],l=t[a],c=o.get(l);if(c)_assignMergeValue(e,a,c);else{var u=i?i(s,l,a+"",e,t,o):void 0,d=void 0===u;if(d){var p=_isArray(l),f=!p&&h(l),g=!p&&!f&&_isTypedArray(l);u=l,p||f||g?u=_isArray(s)?s:_isArrayLikeObject(s)?_copyArray(s):f?_cloneBuffer(l,!(d=!1)):g?_cloneTypedArray(l,!(d=!1)):[]:_isPlainObject(l)||_(l)?_(u=s)?u=function _toPlainObject(e){return _copyObject(e,_keysIn(e))}(s):(!_isObject(s)||n&&_isFunction(s))&&(u=_initCloneObject(l)):d=!1}d&&(o.set(l,u),r(u,l,n,i,o),o.delete(l)),_assignMergeValue(e,a,u)}}function _baseMerge(n,r,i,o,s){n!==r&&_baseFor(r,function(e,t){if(_isObject(e))s=s||new b.Stack,_baseMergeDeep(n,r,t,i,_baseMerge,o,s);else{var a=o?o(n[t],e,t+"",n,r,s):void 0;void 0===a&&(a=e),_assignMergeValue(n,t,a)}},_keysIn)}}(),
/** @license (MIT) SPA.js (core) | https://github.com/sucom/SPA.js/blob/master/LICENSE */
function(){function io(){}for(var e,t=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],a=t.length,n=window.console=window.console||{};a--;)n[e=t[a]]||(n[e]=io);"none"in window||(window.none=""),"noop"in window||(window.noop=function(){})}(),function(){var Q=function(e){return e instanceof Q?e:this instanceof Q?void 0:new Q(e)};this.spa=this.__=this._$=Q,Q.VERSION="2.75.0-RC4";var e=Object.prototype.toString.call(window.app).slice(8,-1).toLowerCase();window.app&&/^html(.*)element$/i.test(e)&&(window.app={api:{}}),window.app=window.app||{api:{}},window.app.api=window.app.api||{};var ee,n,t=function(){try{var e=navigator.userAgent,t=e.indexOf("MSIE ");if(0<t)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(0<e.indexOf("Trident/")){var a=e.indexOf("rv:");return parseInt(e.substring(a+3,e.indexOf(".",a)),10)}}catch(e){}return 0}();function _sanitizeHTML(e){var t=document.createElement("div");return t.textContent=e,t.innerHTML}function _sanitizeScript(e){return(""+e).replace(/<\s*\/+\s*(\bscript\b)/gi,"&lt;/script&gt;</pre").replace(/<\s*(\bscript\b)/gi,"<pre>&lt;script")}function _sanitizeXSS(e){return _sanitizeScript(e).replace(/\s+on([a-z])\s*=/gi," on=").replace(/javascript:/gi,"js:")}function getMatchStr(e){switch(e){case"{":return"}";case"[":return"]";case"<":return">";default:return e}}function _isValidEvalStr(e){if(!Q.jsonDataSanityCheck)return!0;var t=e.indexOf("(");return!(0<=t&&e.indexOf(")",t)>t)||(console.warn("Insecured String with braces():",e),!1)}function __finalValue(e,t){var a=e,n=t,r=Array.prototype.slice.call(arguments,2);return _is(a,"string")&&(0<a.indexOf("(")&&(a=a.getLeftStr("(")),a=Q.findSafe(window,a.trim(),void 0)),_is(a,"function")&&1<arguments.length&&(a=a.apply(n,r)),a}function _initKeyTracking(){var e=arguments.length&&arguments[0]?arguments[0]:"[data-disable-keys],[data-focus-next],[data-focus-back]",t=$(2==arguments.length&&arguments[1]?arguments[1]:"body").find(e);Q.console.info("Finding Key-Tracking for element(s): "+e),t.each(function(e,t){$(t).keydown(Q._trackAndControlKey),Q.console.info("SPA is tracking keys on element:"),Q.console.info(t)})}Q.isIE=document.documentMode||t,Q.isNonIE=!Q.isIE,Q.noop=function(){},Q.debug=!1,Q.debugger={on:function(){Q.debug=!0},off:function(){Q.debug=!1},toggle:function(){Q.debug=!Q.debug}},Q.cOut=function(e,t){Q.debug&&console[e]&&console[e](1===t.length?t[0]:t)},Q.console={clear:function(){console.clear()},assert:function(){Q.cOut("assert",arguments)},count:function(){Q.cOut("count",arguments)},debug:function(){Q.cOut("debug",arguments)},dir:function(){Q.cOut("dir",arguments)},dirxml:function(){Q.cOut("dirxml",arguments)},error:function(){Q.cOut("error",arguments)},exception:function(){Q.cOut("exception",arguments)},group:function(){Q.cOut("group",arguments)},groupCollapsed:function(){Q.cOut("groupCollapsed",arguments)},groupEnd:function(){Q.cOut("groupEnd",arguments)},info:function(){Q.cOut("info",arguments)},log:function(){Q.cOut("log",arguments)},markTimeline:function(){Q.cOut("markTimeline",arguments)},profile:function(){Q.cOut("profile",arguments)},profileEnd:function(){Q.cOut("profileEnd",arguments)},table:function(){Q.cOut("table",arguments)},time:function(){Q.cOut("time",arguments)},timeEnd:function(){Q.cOut("timeEnd",arguments)},timeStamp:function(){Q.cOut("timeStamp",arguments)},trace:function(){Q.cOut("trace",arguments)},warn:function(){Q.cOut("warn",arguments)}},Q.ajaxPreProcess,Q.onInit,Q.onInitComplete,Q.onReady,Q.onUrlChange,Q.onUrlHashChange,Q.onReload,Date.prototype.yyyymmdd=function(e){var t=this.getMonth()+1,a=this.getDate();return[this.getFullYear(),(9<t?"":"0")+t,(9<a?"":"0")+a].join(e||"")},Date.prototype.hhmmss=function(e){var t=this.getHours(),a=this.getMinutes(),n=this.getSeconds();return[(9<t?"":"0")+t,(9<a?"":"0")+a,(9<n?"":"0")+n].join(e||"")},String.prototype.trimLeftStr=function(e){return(""+this).replace(new RegExp("^["+(e||"\\s")+"]+","g"),"")},String.prototype.trimRightStr=function(e){return(""+this).replace(new RegExp("["+(e||"\\s")+"]+$","g"),"")},String.prototype.trimStr=function(e){return(""+this).trimLeftStr(e).trimRightStr(e)},String.prototype.getLeftStr=function(e){return"string"==typeof e&&(e=(""+this).indexOf(e)),e?(""+this).substr(0,e):""},String.prototype.getRightStr=function(e){var t=1;return"string"==typeof e&&(t=e.length,e=(""+this).indexOf(e)),e<0?"":(""+this).substr(e+t)},String.prototype.isBlankStr=function(){return""==(""+this).trimStr()},String.prototype.ifBlankStr=function(e,t){return e=void 0===e?"":e,t=void 0===t?(""+this).trimStr():t,(""+this).isBlankStr()?e:t},String.prototype.isNumberStr=function(){var e=(""+this).trim(),t=e.replace(/[0-9]/g,"").replace(".","").trimStr(),a=e[0];return e&&(0==t.length||1==t.length&&("+"==a||"-"==a))},String.prototype.normalizeStr=function(){return(""+this).trimStr().replace(/\s+/g," ")},String.prototype.beginsWithStr=function(e,t){t=t?"i":"";var a=new RegExp("^"+e,t);return!!(""+this).normalizeStr().match(a)},String.prototype.beginsWithStrIgnoreCase=function(e){var t=new RegExp("^"+e,"i");return!!(""+this).normalizeStr().match(t)},String.prototype.endsWithStr=function(e,t){t=t?"i":"";var a=new RegExp(e+"$",t);return!!(""+this).normalizeStr().match(a)},String.prototype.endsWithStrIgnoreCase=function(e){var t=new RegExp(e+"$","i");return!!(""+this).normalizeStr().match(t)},String.prototype.containsStr=function(e,t){return t=t?"gi":"g",new RegExp(""+e,t).test(""+this)},String.prototype.containsStrIgnoreCase=function(e){return new RegExp(""+e,"gi").test(""+this)},String.prototype.equals=function(e){return""+this==e},String.prototype.equalsIgnoreCase=function(e){return String((""+this).toLowerCase())==String(e).toLowerCase()},String.prototype.toProperCase=function(e){return(void 0===e||e?(""+this).normalizeStr():""+this).toLowerCase().replace(/^(.)|\s(.)/g,function(e){return e.toUpperCase()})},String.prototype.toTitleCase=function(e){return(void 0===e||e?(""+this).normalizeStr():""+this).toLowerCase().replace(/^(.)|\s(.)/g,function(e){return e.toUpperCase()})},String.prototype.capitalize=function(){return(""+this).charAt(0).toUpperCase()+(""+this).slice(1)},String.prototype.unCapitalize=function(){return(""+this).charAt(0).toLowerCase()+(""+this).slice(1)},String.prototype.sanitizeHTML=function(){return _sanitizeHTML(""+this)},Q.sanitizeHTML=_sanitizeHTML,String.prototype.sanitizeScript=function(){return _sanitizeScript(""+this)},Q.sanitizeScript=_sanitizeScript,String.prototype.sanitizeXSS=function(){return _sanitizeXSS(""+this)},Q.sanitizeXSS=_sanitizeXSS,String.prototype.splitToArray=String.prototype.toArray=function(e){return Q.isBlank(""+this)?[]:(""+this).split(e)},String.prototype.extractStrBetweenIn=function(e,t,a){e=e||((e=(""+this).match(/[^a-z0-9\:\.\/\\]/i))?e[0]:""),t=t||getMatchStr(e);var n=(""+this).match(RegExp("\\"+e+"([^\\"+e+"\\"+t+"].*?)\\"+t,"g"))||[];return a&&!Q.isBlank(n)&&(n=n.__unique()),n},String.prototype.extractStrBetweenEx=function(e,t,a){var n="\\"+(e=e||((e=(""+this).match(/[^a-z0-9\:\.\/\\]/i))?e[0]:""))+"\\"+(t=t||getMatchStr(e)),r=new RegExp("["+n+"]","g"),i=((""+this).match(new RegExp("\\"+e+"([^"+n+"].*?)\\"+t,"g"))||[]).map(function(e){return e.replace(r,"")});return a&&!Q.isBlank(i)&&(i=i.__unique()),i},Q.strToNative=function(e){var t=e.trim();switch(!0){case function isNumeric(){var e=t.replace(/[0-9]/g,"");return!!t.length&&(!e.length||("-"==e||"+"==e||"."==e))}():return 1*t;case function isBoolean(){return"true"==t||"false"==t}():return"true"==t;case function isObject(){return"{"==t[0]&&"}"==t[t.length-1]}():return t.toJSON();case function isArray(){return"["==t[0]&&"]"==t[t.length-1]}():return("{xArr:"+t+"}").toJSON().xArr;default:return e}},String.prototype.toNative=function(){return Q.strToNative(""+this)},Q.extractStrBetweenIn=function(e,t,a,n){return(e||"").extractStrBetweenIn(t,a,n)},Q.extractStrBetweenEx=function(e,t,a,n){return(e||"").extractStrBetweenEx(t,a,n)},Q.strToArray=function(e){return"string"==typeof e&&(e=[e]),e},Q.jsonDataSanityCheck,Q.toJSON=function(t,e){var a;if(_.isString(t)){if(!_isValidEvalStr(a=t.trimStr().trimStr(",").trimStr(";")))return t;if(a.match(/^\</))return t;if(!(a.containsStr("{")||a.containsStr(":")||a.containsStr("\\[")||a.containsStr("'")||a.containsStr('"'))){if(a.containsStr(",")||a.containsStr(";"))return a.replace(/ /g,"").replace(/;/g,",").split(",");if(!e)return Q.strToNative(a);a="{"+e+":"+a+"}"}a.containsStr(":")&&!a.containsStr(",")&&a.containsStr(";")&&(a=a.replace(/\;/g,",")),a.beginsWithStr("{")||a.beginsWithStr("\\[")?a.beginsWithStr("{")&&!a.containsStr(":")&&a.containsStr("=")&&(a=""+a.replace(/=/g,":")):a=a.containsStr(":")?"{"+a+"}":a.containsStr("=")?"{"+a.replace(/=/g,":")+"}":"["+a+"]",!a.beginsWithStr("{")&&e&&(a="{"+e+":"+a+"}")}var n={};try{n=!_.isString(t)&&_.isObject(t)?t:Q.isBlank(t)?null:Function('"use strict";return ('+a+")")()}catch(e){console.error('Error JSON Parse: Invalid String >> "'+t+'"\n>> '+e.stack.substring(0,e.stack.indexOf("\n")))}return n},String.prototype.toJSON=function(){return Q.toJSON(""+this)},String.prototype.toBoolean=function(){var e=!0;switch((""+this).trimStr().toLowerCase()){case"":case"0":case"-0":case"nan":case"null":case"false":case"undefined":e=!1}return e=e&&!(""+this).trimStr().beginsWithStr("-")},Boolean.prototype.toValue=function(e,t){return void 0===e&&(e=!0),void 0===t&&(t=!1),(""+this).valueOf()?e:t},Boolean.prototype.toHtml=function(e,t){return $((""+this).valueOf()?e:t).html()},String.prototype.padStr=function(e,t,a){e=e||"",t=t||1,a=a||2;for(var n="",r=0;r<t;r++)n+=e;return(-1===a||2===a?n:"")+""+this+(1===a||2===a?n:"")},Q.lastSplitResult=[],Q.getOnSplit=Q.pickOnSplit=function(e,t,a){return Q.lastSplitResult=e.split(t),Q.getOnLastSplit(a)},Q.getOnLastSplit=Q.pickOnLastSplit=function(e){return e<0?_.last(Q.lastSplitResult):Q.lastSplitResult[e]},Q.isBlank=Q.isEmpty=function(e){var t=!0;if(null!=e)switch(!0){case _.isString(e):t=0==e.trimStr().length;break;case _.isFunction(e):t=!1;break;case _.isArray(e):case _.isObject(e):t=_.isEmpty(e);break;default:t=0==(""+e).trimStr().length}return t},Q.isNumber=function(e){return(""+e).isNumberStr()},Q.toBoolean=function(e){var t=!0;switch((""+e).trimStr().toLowerCase()){case"":case"0":case"-0":case"nan":case"null":case"false":case"undefined":t=!1}return t},Q.toInt=function(e){return e=(""+e).replace(/[^+-0123456789.]/g,""),e=Q.isBlank(e)?"0":0<=e.indexOf(".")?e.substring(0,e.indexOf(".")):e,parseInt(1*e,10)},Q.toFloat=function(e){return e=(""+e).replace(/[^+-0123456789.]/g,""),e=Q.isBlank(e)?"0":e,parseFloat(1*e)},Q.toString=function(e){Q.console.warn("spa.toString is deprecated. use spa.toStr instead.");var t=""+e;return _.isObject(e)&&(t=JSON.stringify(e)),t},Q.toStr=function(e){var t=""+e;return _.isObject(e)&&(t=JSON.stringify(e)),t},Q.dotToX=function(e,t){return e.replace(/\./g,t)},Q.dotToCamelCase=function(e){var t=e.replace(/\./g," ").toProperCase().replace(/ /g,"");return t[0].toLowerCase()+t.substring(1)},Q.dotToTitleCase=function(e){return e.replace(/\./g," ").toProperCase().replace(/ /g,"")},Q.toDottedPath=function(e){return(e||"").trim().replace(/]/g,"").replace(/(\[)|(\\)|(\/)/g,".").replace(/(\.+)/g,".").trimStr("\\.")},Q.ifBlank=Q.ifEmpty=Q.ifNull=function(e,t,a){return t=(""+(t||"")).trimStr(),a=void 0===a?(""+e).trimStr():a,Q.isBlank(e)?t:a},Q.now=function(){return""+(new Date).getTime()},Q.year=function(e){return e=e||0,(new Date).getFullYear()+Q.toInt(e)},Q.sizeOf=function _sizeOf(e,t){var n=0;function sizeOf(e){if(null!=e)switch(typeof e){case"number":n+=8;break;case"string":n+=2*e.length;break;case"boolean":n+=4;break;case"object":var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t||"Array"===t)for(var a in e)e.hasOwnProperty(a)&&(n+=2*a.length,sizeOf(e[a]));else n+=2*e.toString().length}return n}return Q.is(t,"undefined")||t?function formatByteSize(e){return e<1024?e+" B":e<1048576?(e/1024).toFixed(3)+" KB":e<1073741824?(e/1048576).toFixed(3)+" MB":(e/1073741824).toFixed(3)+" GB"}(sizeOf(e)):sizeOf(e)},Q.range=function(e){var t=e.toUpperCase().split(".."),a=""+t[0],n=""+t[1],r="1";0<n.indexOf(":")&&(n=""+t[1].split(":")[0],r=""+t[1].split(":")[1]),0<=a.indexOf("Y")&&(a=Q.year(a.split(/[^0-9+-]/)[1])),0<=n.indexOf("Y")&&(n=Q.year(n.split(/[^0-9+-]/)[1]));var i=Q.toInt(a),o=Q.toInt(n),s=Q.toInt(r);return n<a?_.range(o,i+1,s).reverse():_.range(i,o+1,s)},Q.checkAndPreventKey=function(e,t){var a=0<=(t=t||"").indexOf("+shift"),n=""+e.keyCode,r=0<=t.padStr(",").indexOf(n.padStr(","))&&(a?!!e.shiftKey:!e.shiftKey);return r&&(e.preventDefault(),Q.console.info("Key ["+n+(a?"+Shift":"")+"] has been disabled in this element.")),r},Q._trackAndControlKey=function(e){var t=e.currentTarget,a=$(t),n=(""+a.data("disableKeys")).toLowerCase();Q.checkAndPreventKey(e,n);var r=!Q.isBlank((""+a.data("focusNext")).replace(/undefined/,"").toLowerCase()),i=!Q.isBlank((""+a.data("focusBack")).replace(/undefined/,"").toLowerCase());r&&Q.checkAndPreventKey(e,"9")&&$(a.data("focusNext")).get(0).focus(),i&&Q.checkAndPreventKey(e,"9,+shift")&&$(a.data("focusBack")).get(0).focus()},Q.initKeyTracking=_initKeyTracking,Q.getDocObj=function(e){var t="object"==typeof e?e:(e.beginsWithStr("#")?"":"#")+e;return $(t).get(0)},Q.getDocObjs=function(e){var t=(e.beginsWithStr("#")?"":"#")+e;return $(t).get()},Q.hasCssRule=function(e){var t=!1;if(e){e=e.split(",");for(var a=0;a<document.styleSheets.length;a++){var n=document.styleSheets[a].rules||document.styleSheets[a].cssRules;if(t)break;for(var r in n)if(t=t||"string"==typeof n[r].selectorText&&0<=e.indexOf(n[r].selectorText))break}}return t},Q.getCssRule=function(e){var t,a;if(e)for(var n=0;n<document.styleSheets.length;n++){var r=document.styleSheets[n].rules||document.styleSheets[n].cssRules;if(t)break;for(var i in r)if(t=t||"string"==typeof r[i].selectorText&&e==r[i].selectorText){a=r[i];break}}return a},Q.setFocus=function(e,t){var a=Q.getDocObj(e);a&&(a.focus(),t&&a.select())},Q.isElementExist=function(e){return!$.isEmptyObject($(e).get())},Q.swapClass=Q.swapObjClass=function(e,t,a){$(e).removeClass(t),$(e).addClass(a)},Q.docObjValue=function(e,t){var a=Q.getDocObj(e),n="";return a&&(n=a.value,2===arguments.length&&(a.value=t)),n},Q.optionSelectedIndex=function(e,t){var a=-1,n=Q.getDocObj(e);return n&&(a=n.selectedIndex,2===arguments.length&&(n.selectedIndex=t)),a},Q.optionIndexOfValue=function(e,t){var a=-1,n=Q.getDocObj(e);if(n)for(var r=0;r<n.length;r++)if((""+t).equalsIgnoreCase(n.options[r].value)){a=r;break}return a},Q.optionIndexOfText=function(e,t){var a=-1,n=Q.getDocObj(e);if(n)for(var r=0;r<n.length;r++)if(t.equalsIgnoreCase(n.options[r].text)){a=r;break}return a},Q.optionIndexOfValueBeginsWith=function(e,t){var a=-1,n=Q.getDocObj(e);if(n)for(var r=0;r<n.length;r++)if(n.options[r].value.beginsWithStrIgnoreCase(t)){a=r;break}return a},Q.optionsSelectedValues=function(e,t){return e=(e.beginsWithStr("#")?"":"#")+e,t=t||",",$.map($(e+" option:selected"),function(e){return e.value}).join(t)},Q.optionsSelectedTexts=function(e,t){return e=(e.beginsWithStr("#")?"":"#")+e,t=t||",",$.map($(e+" option:selected"),function(e){return e.text}).join(t)},Q.optionValueOfIndex=function(e,t){var a="",n=Q.getDocObj(e);return n&&0<=t&&t<n.length&&(a=n.options[t].value),a},Q.optionTextOfIndex=function(e,t){var a="",n=Q.getDocObj(e);return n&&0<=t&&t<n.length&&(a=n.options[t].text),a},Q.selectOptionForValue=function(e,t){var a=-1,n=Q.getDocObj(e);return n&&(a=Q.optionIndexOfValue(e,t),n.selectedIndex=a),a},Q.selectOptionForValueBeginsWith=function(e,t){var a=-1,n=Q.getDocObj(e);return n&&(a=Q.optionIndexOfValueBeginsWith(e,t),n.selectedIndex=a),a},Q.selectOptionsForValues=function(e,t,a){t=((a=a||",")+t+a).toLowerCase();var n,r=Q.getDocObj(e);if(r)for(var i=0;i<r.length;i++)n=(a+r.options[i].value+a).toLowerCase(),r.options[i].selected=0<=t.indexOf(n)},Q.selectOptionForText=function(e,t){var a=-1,n=Q.getDocObj(e);return n&&(a=Q.optionIndexOfText(e,t),n.selectedIndex=a),a},Q.selectOptionsAll=function(e){var t=Q.getDocObj(e);if(t)for(var a=0;a<t.length;a++)t.options[a].selected=!0},Q.selectOptionsNone=function(e){var t=Q.getDocObj(e);if(t)for(var a=0;a<t.length;a++)t.options[a].selected=!1},Q.optionsReduceToLength=function(e,t){t=t||0;var a=Q.getDocObj(e);a&&(Q.selectOptionsNone(e),a.length=t)},Q.optionsRemoveAll=function(e){Q.optionsReduceToLength(e,0)},Q.optionRemoveForIndex=function(e,t){e=(e.beginsWithStr("#")?"":"#")+e;var a=Q.getDocObj(e);a&&((""+t).equalsIgnoreCase("first")&&(t=0),(""+t).equalsIgnoreCase("last")&&(t=a.length-1),a.remove(t))},Q.optionRemoveForValue=function(e,t){Q.optionRemoveForIndex(e,Q.optionIndexOfValue(e,t))},Q.optionRemoveForText=function(e,t){Q.optionRemoveForIndex(e,Q.optionIndexOfText(e,t))},Q.optionRemoveForValueBeginsWith=function(e,t){Q.optionRemoveForIndex(e,Q.optionIndexOfValueBeginsWith(e,t))},Q.optionAppend=function(e,t,a,n){var r=-1,i=Q.getDocObj(e);if(i)if(void 0===n){var o=i.length;i.length=o+1,i.options[o].value=t,i.options[o].text=a,r=o}else $(i).find("option").eq(n).before('<option value="'+t+'">'+a+"</option>"),r=n;return r},Q.optionsLoad=function(a,e,t,n){if(t=t||0,n=n||0,_.isString(e)&&0<e.indexOf("..")&&(e=Q.range(e)),0<=t&&Q.optionsReduceToLength(a,t),_.isArray(e))_.each(e,function(e){Q.optionAppend(a,e,e)});else if(0<n){var r=[];for(var i in e)r.push({key:i,value:e[i]});var o=_.sortBy(r,["","key","value"][n]);_.each(o,function(e){Q.optionAppend(a,e.key,e.value)})}else _.each(e,function(e,t){Q.optionAppend(a,t,e)})},Q.checkedState=function(e,t){var a=!1,n=Q.getDocObj(e);return n&&(a=n.checked,2===arguments.length&&(n.checked=t)),a},Q.isChecked=function(e,t){return 0<$(e).find("input[name="+t+"]:checked").length},Q.radioSelectedValue=function(e,t){var a=$(e).find("input[name="+t+"]:checked").val();return a||""},Q.radioClearSelection=function(e,t){$(e).find("input[name="+t+"]:checked").attr("checked",!1)},Q.radioSelectForValue=function(e,t,a){$(e).find("input[name="+t+"]:radio").each(function(e){e.checked=e.value.equalsIgnoreCase(a)})},Q.checkboxCheckedValues=function(e,t,a){return a=a||",",$(e).find("input[name="+t+"]:checked").map(function(){return this.value}).get().join(a)},Q.sleep=function(e){var t=new Date;for(t.setTime(t.getTime()+1e3*e);(new Date).getTime()<t.getTime(););},Q.filterJSON=function(e,n){return $(e).filter(function(e,t){for(var a in n)if(!t[a].toString().match(n[a]))return null;return t})},Q.randomPassword=function(e,t){for(var a=t||"9a8b77C8D9E8dkfhseidF7G6H5QJ3c6d5e4f32L3M4N5P6Qg2h3i4j5kV6W5X4Y3Z26m7n8p9q8r7s6t5u4v3w2x3y4z5A6BK7R8S9T8U7",n="",r=0;r<(e||8);r++){var i=Math.floor(Math.random()*a.length);n+=a.charAt(i)}return n},Q.rand=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},Q.htmlEncode=function(e){return $("<div/>").text(e).html()},Q.htmlDecode=function(e){return $("<div/>").html(e).text()},Q.appendToObj=function(e,t,a){_.has(e,t)?(_.isArray(e[t])||(e[t]=[e[t]]),e[t].push(a)):e[t]=a},Q.parseKeyStr=function(e,t){return(t?e.toLowerCase():e).replace(/[^_0-9A-Za-z\$\[\]\?\*\-]/g,"")};var p={};function _$qrySelector(e){if(Q.is(e,"string")){var t,a,n=e.trim().split(" "),r=n[0];/app\.(.+)\./.test(r)?(t=r.split(".")[1],n[0]=n[0].replace("app."+t+".",'[data-rendered-component="'+r.split(".")[1]+'"] '),e=n.join(" ")):r.beginsWithStr("\\$")&&(0<(t=r.substr(1)).indexOf(":")?(a=Q.toInt(t.getRightStr(":").trim()),t=t.getLeftStr(":"),n[0]='[data-rendered-component="'+t+'"]:eq('+a+")"):n[0]='[data-rendered-component="'+t+'"]',e=n.join(" "))}return e}function _toQueryString(n){return _.isObject(n)?Object.keys(n).reduce(function(e,t,a){return[e,0===a?"":"&",t=encodeURIComponent(t),"=",_.isArray(n[t])?n[t].map(function(e){return encodeURIComponent(e)}).join(","):encodeURIComponent(n[t])].join("")},""):""}function _is(e,t){return 0<=(""+t).toLowerCase().indexOf(of(e))}function _isObjHasKeys(e,t,l){function checkForAll(e,t){for(var a,n=t.split(","),r="",i=0,o=!0,s=0;s<n.length;s++)(r=n[s].trim())&&(i++,a=l&&(0<r.indexOf(".")||0<r.indexOf("["))?Q.hasKey(e,r):e.hasOwnProperty(r),o=o&&a);return i&&o}var a=!1;if(is(e,"object")&&t)switch(!0){case 0<(t=""+t).indexOf("&"):a=checkForAll(e,t.replace(/\&/g,","));break;case 0<t.indexOf("|"):a=function checkForAny(e,t){for(var a,n=t.split(","),r="",i=0,o=!1,s=0;s<n.length&&((r=n[s].trim())&&(i++,a=l&&(0<r.indexOf(".")||0<r.indexOf("["))?Q.hasKey(e,r):e.hasOwnProperty(r),o=o||a),!o);s++);return i&&o}(e,t.replace(/\|/g,","));break;default:a=checkForAll(e,t)}return a}function _getFullPath4Component(e,t){var a=e;if(t=(t||"").replace(/[^a-z0-9]/gi,"/"),0<=".{$".indexOf(e[0])){var n=e.split("/"),r=n[0].replace(/[\{\}]/g,""),i="$"==r||"."==r?t:r.replace(/[\{\$\}]/,""),o=Q.defaults.components.inFolder?i+"/":"";n[0]=(Q.defaults.components.rootPath+o).trimRightStr("/"),a=n.join("/")}return a}Q.setObjProperty=function(e,t,a,n){n=n||!1;var r,i,o,s,l=e,c=0<=(t=""+t).indexOf(".")||t==t.toUpperCase()?t.split("."):t.split(/(?=[A-Z])/),u=$.trim(t.replace(/[0-9A-Za-z\[\]\?\*\_]/g,""));u&&""!=u&&(c=t.split(u[0]));for(var d="";1<c.length;)r=Q.parseKeyStr(c.shift(),n),""!=$.trim(r)&&(d+=r.replace(/[\?\[\]\*\_]/g,""),l=0<r.indexOf("[")&&r.indexOf("]")==r.length-1?(o=(i=r.substring(0,r.length-1).replace(/\[/g,".").split("."))[0],s=i[1],void 0===l[o]&&(l[o]=[]),s.replace(/[0-9]/g,"")&&(s=s.replace(/[^0-9]/g,""),p.hasOwnProperty(d)?s=p[d]:void 0===l[o][s]&&(p[d]=l[o].length,s=l[o].length)),void 0===l[o][s]&&(l[o][s]={}),l[o][s]):(void 0===l[r]&&(l[r]={}),l[r]));return r=Q.parseKeyStr(c.shift(),n),Q.appendToObj(l,r,a),e},Q.setSimpleObjProperty=function(e,t,a){for(var n,r=e,i=(t=""+t).split(".");1<i.length;)n=Q.parseKeyStr(i.shift(),!1),""!=$.trim(n)&&(void 0===r[n]&&(r[n]={}),r=r[n]);return r[n=Q.parseKeyStr(i.shift(),!1)]=a,e},Q.objProp=Q.objProperty=Q.objectProp=Q.objectProperty=function(){var e=arguments[0],t=arguments[1],a=arguments[2];return 3==arguments.length?Q.setSimpleObjProperty(e,t,a):2==arguments.length?Q.findSafe(e,t):e},Q.extract=function _extract(){var e=Array.prototype.slice.call(arguments);try{Q.is(e[0],"object")||e.unshift({}),Q.is(e[1],"string")&&(e[1]=e[1].split(","))}catch(e){console.error("Invalid arguments",e)}if(Q.is(e[0],"object")&&Q.is(e[1],"array")){var a,n,r,i,o,s,l=e[0],t=e[1],c=e.slice(2);return c.unshift(window),_.each(t,function(e){if(e=(e||"").trim(),!(o=!(e&&"@0"!=e))&&(/^\@([0-9])+/.test(e)&&((i=n=(e.getRightStr(".")||"").trim())?e=i+":"+e:(_.merge(l,c[Q.toInt(e)]),o=!0)),!o)){if(a=e.split(":"),n=(a[0]||"").trim(),r=Q.toInt((a[1]||"").split(".")[0]),i=((a[1]||"").getRightStr(".")||"").trim(),n=n||i,s=i?Q.findSafe(c[r],i):r?c[r]:{},n.endsWithStr("\\+")){n=n.trimRightStr("+");var t=Q.findSafe(l,n);switch(Q.of(t)){case"object":Q.is(s,"object")&&(s=_.merge({},t,s));break;case"array":s=Q.is(s,"array")?t.concat(s):t.push(s)}}Q.setSimpleObjProperty(l,n,s)}}),l}console.error("Invalid arguments.")},Q.setElValue=function(e,t){var a=$(_$qrySelector(e));switch((e=a.get(0)).tagName.toUpperCase()){case"INPUT":switch(e.type.toLowerCase()){case"text":case"password":case"hidden":case"color":case"date":case"datetime":case"datetime-local":case"email":case"month":case"number":case"search":case"tel":case"time":case"url":case"range":case"button":case"submit":case"reset":a.val(t),a.isEnabled()&&a.trigger("keyup");break;case"checkbox":case"radio":e.checked=e.value.equalsIgnoreCase(t),e.checked&&a.isEnabled()&&a.trigger("click")}break;case"SELECT":Q.selectOptionForValue(e,t),a.isEnabled()&&a.trigger("change");break;case"TEXTAREA":a.val(t),a.isEnabled()&&a.trigger("keyup");break;default:a.html(Q.sanitizeXSS(t)),a.val(t),a.isEnabled()&&a.trigger("keyup")}},Q.getElValue=function(e,t){if(e=$(_$qrySelector(e)).get(0)){var a,n,r;switch(e.tagName.toUpperCase()){case"INPUT":switch(e.type.toLowerCase()){case"checkbox":n=$(e).data("unchecked"),r="true"==e.value||"false"!=e.value&&e.value,a=e.checked?r:void 0===n?"":n;break;case"radio":a=e.checked?e.value:"";break;default:a=$(e).val()}break;case"SELECT":a=$.map($(e).find("option:selected"),function(e){return e.value}).join(",");break;case"TEXTAREA":a=$(e).val();break;default:a=t?$(e).text():$(e).html()}return a}},Q.serialize=function(e,t,a){_.isBoolean(e)&&(a=e,e=""),_.isBoolean(t)&&(a=t,t=""),e=e||"body";var n,r,i,o,s={},l=t?'[data-serialize-context*="'+t+'"]':"";return $(e).find("[data-serialize]"+l+",input[name]"+l+",select[name]"+l+",textarea[name]"+l).each(function(e,t){i=$(t).data(),n=t.name||i.serialize,o=i.serializeType?i.serializeType.equalsIgnoreCase("text"):a,r=Q.getElValue(t,o),s.hasOwnProperty(n)?Q.isBlank(r)||(Q.isBlank(s[n])?s[n]=r:_.isArray(s[n])?s[n].push(r):s[n]=[s[n],r]):s[n]=r}),s},Q.serializeToQueryString=function(e,t){return Q.toQueryString(Q.serialize(e,t))},Q.serializeDisabled=function(e){var t="";return $(e).find("[disabled][name]").each(function(){t+=(t?"&":"")+$(this).attr("name")+"="+Q.getElValue(this)}),t},Q.serializeForms=function(e,t){var a,n,r=$(e).serialize();return $(e).find("input[data-unchecked]:checkbox:enabled:not(:checked)[name]").each(function(){n=$(this).data("unchecked"),r+=(r?"&":"")+$(this).attr("name")+"="+(void 0===n?"":n)}),t&&(a=Q.serializeDisabled(e),r+=(r&&a?"&":"")+a),r},Q.queryStringToJson=Q.queryStringToObject=function(e){var t={},a=e||location.search,n=(""+a).indexOf("?"),r=(""+a).indexOf("&");return a&&0<a.length&&0<=n&&(0==n||n<r)&&(a=a.substring(n+1)),_.each(a.split("&"),function(e){(e=e.split("="))[0]&&Q.appendToObj(t,e[0],decodeURIComponent(e[1]||""))}),t},Q.toQueryString=Q.ObjectToQueryString=Q.objectToQueryString=Q.JsonToQueryString=Q.jsonToQueryString=_toQueryString,$.fn.serializeUncheckedCheckboxes=function(e){var a,n,r,i,o="object"==typeof e,s=o?e:{},l=o&&!e?"":e;return $(this).find("input[data-unchecked]:checkbox:enabled:not(:checked)[name]").each(function(e,t){a=$(t),r=a.attr("name"),n=a.data("unchecked"),i=void 0===n?"":n,o?Q.appendToObj(s,r,i):l+=(l?"&":"")+r+"="+i}),o?s:l},Q.serializeUncheckedCheckboxes=function(e,t){return $(e).serializeUncheckedCheckboxes(t)},$.fn.serializeFormToJSON=$.fn.serializeFormToObject=function(e,t,a){var n,r,i=this.serializeArray(),o=$(this).data(),s="object"==typeof e?e:{},l="boolean"==typeof e?e:t||!1,c=o.serializeIgnorePrefix,u=o.hasOwnProperty("typeNative");return p={},a&&(c=a),$.each(i,function(){n=c?this.name.replace(c,""):this.name,s=Q.setObjProperty(s,n,u?this.value.toNative():this.value,l)}),$(this).find("input[data-unchecked]:checkbox:enabled:not(:checked)[name]").each(function(){(n=$(this).attr("name"))&&(r=$(this).data("unchecked"),c&&(n=n.replace(c,"")),r=""+(void 0===r?"":r),s=Q.setObjProperty(s,n,u?r.toNative():r,l))}),s},Q.serializeFormToJSON=Q.serializeFormToObject=function(e,t,a,n){return $(e).serializeFormToJSON(t,a,n)},$.fn.serializeFormToSimpleJSON=$.fn.serializeFormToSimpleObject=function(e,t){var a,n,r,i,o=this.serializeArray(),s="object"==typeof e?e:{},l="boolean"==typeof e?e:t||!1;return $.each(o,function(){Q.appendToObj(s,this.name,this.value)}),l&&$(this).find("[disabled][name]").each(function(){Q.appendToObj(s,this.name,Q.getElValue(this))}),$(this).find("input[data-unchecked]:checkbox:enabled:not(:checked)[name]").each(function(){r=$(this).attr("name"),i=""+(void 0===(i=$(this).data("unchecked"))?"":i),Q.appendToObj(s,r,i)}),$(this).find("[data-to-json-group][name]").each(function(){a=this.name,(n=$(this).data("toJsonGroup"))&&(s[n]||(s[n]={}),Q.appendToObj(s[n],a,Q.getElValue(this)))}),s},Q.serializeFormToSimpleJSON=Q.serializeFormToSimpleObject=function(e,t,a){return $(e).serializeFormToSimpleJSON(t,a)},Q.findSafe=Q.findInObj=Q.findInObject=Q.locateSafe=Q.valueOfPath=Q.find=Q.locate=function(e,t,a){if(is(e,"window|array|object|function|global")&&t){var n=_.map(t.split("|"),function(e){return e.trim()});t=n.shift();var r,i=n.join("|");if(0<=t.indexOf("*"))r=function(e,t){var a;if("object"==typeof e||"function"==typeof e)if(e.hasOwnProperty(t))a=e[t];else for(var n=Object.keys(e),r=0;is(a,"undefined")&&r<n.length;)a=arguments.callee(e[n[r++]],t);return a}(e,t.replace(/\*/g,""));else{var o=0,s=Q.toDottedPath(t).split("."),l=s.length;for(r=e;o<l;o++)if(is(r,"object|window|function|global"))r=r[s[o].trim()];else{if(!is(r,"array")){r=void 0;break}r=r[Q.toInt(s[o])]}}return is(r,"undefined")?i?Q.findSafe(e,i,a):is(a,"function")?a.call(e,e,t):a:r}return 3==arguments.length?is(a,"function")?a.call(e,e,t):a:e},Q.has=Q.hasKey=function(e,t){var a=e,n=!1;try{n=!!_isValidEvalStr(t)&&void 0!==Q.find(a,t)}catch(e){console.warn("Key["+t+"] error in object.\n"+e.stack)}return n},Q.of=of=function _of(e){return Object.prototype.toString.call(e).replace(/\[object /,"").replace(/\]/,"").toLowerCase()},Q.is=is=_is,Q.hasPrimaryKeys=function _spa_hasPrimaryKeys(e,t){return _isObjHasKeys(e,t)},Q.hasKeys=function _spa_hasKeys(e,t){return _isObjHasKeys(e,t,!0)},Q.keysDottedAll=function(e){var t=Q.keysDotted(e);return t&&!_.isEmpty(t)&&(t=Q.toDottedPath(t.join(",")).split(",")),t},Q.keysDotted=function(e){var n,r,i,o=[];return function(e,t){if(t=t||"","object"!=typeof e)return;for(var a in e)i=t.substring(1),n=Q.isNumber(a)?"[":".",r=i&&"["==n?"]":"",arguments.callee(e[a],t+n+a+r)&&o.push(i+(i?n:"")+a+r)}(e=e||{}),o},Q.keysCamelCase=function(e){return _.map(Q.keysDotted(e),function(e){var t=e.replace(/\./g," ").toProperCase().replace(/ /g,"");return t[0].toLowerCase()+t.substring(1)})},Q.keysTitleCase=function(e){return _.map(Q.keysDotted(e),function(e){return e.replace(/\./g," ").toProperCase().replace(/ /g,"")})},Q.keys_=function(e){return _.map(Q.keysDotted(e),function(e){return e.replace(/\./g,"_")})},Object.defineProperties(Array.prototype,{__now:{value:function(){return JSON.parse(JSON.stringify(this))},enumerable:!1,configurable:!1},__clone:{value:function(){return JSON.parse(JSON.stringify(this))},enumerable:!1,configurable:!1},__toObject:{value:function(a){var n={};return this.forEach(function(e,t){a?n[e]=t:n[t]=e}),n},enumerable:!1,configurable:!1},__unique:{value:function(){return this.filter(function(e,t,a){return a.indexOf(e)===t})},enumerable:!1,configurable:!1},__rotate:{value:function(e){if(0<(e=e||1))for(;e--;)this.push(this.shift());else if(e<0)for(;e++;)this.unshift(this.pop());return this},enumerable:!1,configurable:!1},__isFirst:{value:function(e,t){var a=this[0];return t&&(a=a.toLowerCase(),e=e.toLowerCase()),a==e},enumerable:!1,configurable:!1},__isLast:{value:function(e,t){var a=this[this.length-1];return t&&(a=a.toLowerCase(),e=e.toLowerCase()),a==e},enumerable:!1,configurable:!1},__has:{value:function(e,t){var a;function optionsHas(e){return 0<=t.indexOf(e)}if(t=(t||"").trim()){t.indexOf("i")&&Q.is(e,"string")&&(e=e.toLowerCase());for(var n=0;n<this.length;n++){var r=this[n];switch(t.indexOf("i")&&Q.is(r,"string")&&(r=r.toLowerCase()),!0){case optionsHas("b"):case optionsHas("^"):a=optionsHas("~")?e.beginsWithStr(r):r.beginsWithStr(e);break;case optionsHas("e"):case optionsHas("$"):a=optionsHas("~")?e.endsWithStr(r):r.endsWithStr(e);break;case optionsHas("c"):case optionsHas("*"):a=optionsHas("~")?0<=e.indexOf(r):0<=r.indexOf(e);break;case optionsHas("<"):a=r<e;break;case optionsHas("<="):a=r<=e;break;case optionsHas(">"):a=e<r;break;case optionsHas(">="):a=e<=r;break;default:a=r==e}if(a)break}}else a=0<=this.indexOf(e);return a},enumerable:!1,configurable:!1}}),Object.defineProperties(Object.prototype,{__now:{value:function(){return JSON.parse(JSON.stringify(this))},enumerable:!1,configurable:!1},__clone:{value:function _obj_clone(){return JSON.parse(JSON.stringify(this))},enumerable:!1,configurable:!1},__keys:{value:function _obj_keys(e){return e?Q.keysDotted(this):Object.keys(this)},enumerable:!1,configurable:!1},__keysAll:{value:function _obj_keysAll(){return Q.keysDotted(this)},enumerable:!1,configurable:!1},__hasKey:{value:function _obj_hasKey(e){return Q.hasKey(this,e)},enumerable:!1,configurable:!1},__hasKeys:{value:function _obj_hasKeys(e){return _isObjHasKeys(this,e,!0)},enumerable:!1,configurable:!1},__hasPrimaryKeys:{value:function _obj_hasPrimaryKeys(e){return _isObjHasKeys(this,e)},enumerable:!1,configurable:!1},__valueOf:{value:function _obj_getValueOf(e,t){return Q.findSafe(this,e,t)},enumerable:!1,configurable:!1},__merge:{value:function _obj_merge(){return Array.prototype.unshift.call(arguments,this),_.merge.apply(void 0,arguments)},enumerable:!1,configurable:!1},__stringify:{value:function(){return JSON.stringify(this)},enumerable:!1,configurable:!1},__toQueryString:{value:function(){return Q.toQueryString(this)},enumerable:!1,configurable:!1},__extract:{value:function(){return Array.prototype.unshift.call(arguments,this),Q.extract.apply(this,arguments)},enumerable:!1,configurable:!1}}),$.ajaxSetup({converters:{"text javascript":function(){},"text spaComponent":function(){}},dataFilter:function(e,t){return"javascript"!==t&&"spaComponent"!==t||(function _ajaxScriptHandle(e){if(e.trim()){var t=document.createElement("script");t.setAttribute("id","js-"+Q.now()),Q.defaults.csp.nonce&&t.setAttribute("nonce",Q.defaults.csp.nonce),t.text=e,document.head.appendChild(t).parentNode.removeChild(t)}}(e),e=""),e}}),$.cachedScript=function(e,t){return Q.console.log("Ajax for script:",e,"options:",t),!(e=_getFullPath4Component(e,t?t.spaComponent:"")).endsWithStrIgnoreCase(".js")&&e.indexOf("?")<0&&(e+=Q.defaults.components.scriptExt),(t=t||{}).hasOwnProperty("cache")||(t.cache=!0),t.hasOwnProperty("dataType")||(t.dataType="javascript"),t=$.extend(t,{url:e}),Q.console.info("Loading Script('"+e+"') ..."),$.ajax(t)},$.cachedStyle=function(a,e,t){var n=$("#"+a,"head");return(t=t||{}).hasOwnProperty("cache")||(t.cache=!0),n.length||(t.cache=Q.defaults.components.offline),t=$.extend(t,{dataType:"text",url:e,success:function(e){n.remove();var t=Q.defaults.csp.nonce?' nonce="'+Q.defaults.csp.nonce+'"':"";$("head").append('<style id="'+a+'" type="text/css"'+t+">"+e+"</style>")}}),Q.console.info("Loading style('"+e+"') ... "),$.ajax(t)},Q.addScriptTag=function(e,t){if(e=e.replace(/#/,""),Q.console.group("spaAddScriptTag"),Q.isElementExist("#spaScriptsContainer")||(Q.console.info("#spaScriptsContainer NOT Found! Creating one..."),$("body").append("<div id='spaScriptsContainer' style='display:none' rel='Dynamic Scripts Container'></div>")),Q.isElementExist("#"+e))Q.console.info("script ["+e+"] already found in local.");else{Q.console.info("script ["+e+"] NOT found. Added script tag with src ["+t+"]");var a=t?' src="'+t+'"':"",n=Q.defaults.csp.nonce?' nonce="'+Q.defaults.csp.nonce+'"':"";$("#spaScriptsContainer").append('<script id="'+e+'" type="text/javascript"'+a+n+"><\/script>")}Q.console.groupEnd("spaAddScriptTag")},Q.addStyle=function(e,t){e=e.replace(/#/,""),Q.console.group("spaAddStyle"),Q.isElementExist("#spaStylesContainer")||(Q.console.info("#spaStylesContainer NOT Found! Creating one..."),$("body").append("<div id='spaStylesContainer' style='display:none' rel='Dynamic Styles Container'></div>")),Q.isElementExist("#"+e)?Q.console.info("style ["+e+"] already found in local."):(Q.console.info("style ["+e+"] NOT found. Added link tag with href ["+t+"]"),$("#spaStylesContainer").append("<link id='"+e+"' rel='stylesheet' type='text/css' href='"+t+"'/>")),Q.console.groupEnd("spaAddStyle")},Q.loadScript=function(a,n,e,t,r){return a=a.replace(/#/,""),e=e||!1,t=t||[],Q.console.group("spaScriptsLoad"),Q.isBlank(n)?Q.console.error("script path ["+n+"] for ["+a+"] NOT defined."):e?Q.addScriptTag(a,n):t.push($.cachedScript(n,r).done(function(e,t){Q.console.info("Loaded script ["+a+"] from ["+n+"]. STATUS: "+t)})),Q.console.groupEnd("spaScriptsLoad"),t},Q.getComponentsFullPath=function(e){return e=Q.strToArray(Q.toJSON(e)),_.map(e,function(e){return Q.defaults.components.rootPath+(Q.defaults.components.inFolder||/[^a-z0-9]/gi.test(e)?e:"")+"/"+function _getComponentFileName(e){if(/[^a-z0-9]/gi.test(e)){var t=e.split(/[^a-z0-9]/gi);return t[t.length-1]}return e}(e)+Q.defaults.components.scriptExt})},Q.loadComponents=function(e,t,a){var n=_.filter(Q.strToArray(Q.toJSON(e)),function(e){return!Q.components.hasOwnProperty(e.replace(/[^a-z0-9]/gi,"_"))}),r=Q.getComponentsFullPath(n);Q.loadScripts(r,t,a)},Q.loadScripts=function(e,t,a){if(e=Q.strToArray(Q.toJSON(e)),!Q.isBlank(e)){var n=[];_.each(e,function(a){n.push($.cachedScript(a).done(function(e,t){Q.console.info("Loaded script from ["+a+"]. STATUS: "+t)}).fail(function(){Q.console.info("Failed Loading script from ["+a+"].")}))}),$.when.apply($,n).then(function(){Q.renderUtils.runCallbackFn(t)}).fail(function(){Q.renderUtils.runCallbackFn(a)})}},Q.loadScriptsSync=function(e,t,a){if(e=Q.strToArray(Q.toJSON(e)),Q.isBlank(e))Q.renderUtils.runCallbackFn(t);else{var n=!0,r=e.shift();r?(/^~/.test(r)&&(n=!1,r=r.substr(1)),Q.console.info("Load script from   ["+r+"], cache:",n),$.cachedScript(r,{cache:n}).done(function(){Q.console.info("Loaded script from ["+r+"]"),Q.loadScriptsSync(e,t,a)}).fail(function(){console.error("Failed Loading script from ["+r+"].",arguments),Q.renderUtils.runCallbackFn(a)})):Q.loadScriptsSync(e,t,a)}},Q.loadStyle=function(a,n,e,t){if(a=a.replace(/#/,""),e=!!e,t=t||[],Q.console.group("spaStylesLoad"),Q.isBlank(n))Q.console.error("style path ["+n+"] for ["+a+"] NOT defined.");else{var r=!e;e&&($("#"+a,"head").length?Q.console.info("Style('"+n+"') already loaded."):r=!0),r&&t.push($.cachedStyle(a,n,{cache:Q.defaults.components.offline}).done(function(e,t){Q.console.info("Loaded style ["+a+"] from ["+n+"]. STATUS: "+t)}))}return Q.console.groupEnd("spaStylesLoad"),t},Q.addTemplateScript=function(e,t,a){e=e.replace(/#/,""),a=a||"x-template",Q.isElementExist("#spaViewTemplateContainer")||(Q.console.info("#spaViewTemplateContainer NOT Found! Creating one..."),$("body").append("<div id='spaViewTemplateContainer' style='display:none' rel='Template Container'></div>")),Q.console.info("Adding <script id='"+e+"' type='text/"+a+"'>");var n="_BlockedScript_";t=t.replace(/<(\s)*script/gi,"<"+n+' src-ref="'+e+'"').replace(/<(\s)*(\/)(\s)*script/gi,"</"+n).replace(/<(\s)*link/gi,"<_LINKTAGINTEMPLATE_").replace(/<(\s)*(\/)(\s)*link/gi,"</_LINKTAGINTEMPLATE_");var r=Q.defaults.csp.nonce?' nonce="'+Q.defaults.csp.nonce+'"':"";$("#spaViewTemplateContainer").append('<script id="'+e+'" type="text/'+a+'"'+r+">"+t+"<\/script>")},Q.updateTemplateScript=function(e,t,a){e=e.replace(/#/,"");var n=$("#spaViewTemplateContainer").find("#"+e);n.length&&n.remove(),Q.addTemplateScript(e,t,a)},Q.loadTemplate=function(n,r,i,e,t,a,o){if(n=n.replace(/#/g,""),r=r.ifBlankStr("inline").trimStr(),i=i||"x-template",e=e||"#DummyInlineTemplateContainer",t=t||[],o=o||{},Q.console.group("spaTemplateAjaxQue"),Q.isElementExist("#"+n)){var s=$("#"+n);if(a)Q.console.warn("Reload Template["+n+"] of ["+i+"]"),s.remove(),t=Q.loadTemplate(n,r,i,e,t,a,o);else if(Q.isBlank(s.html())){Q.console.warn("Template["+n+"] of ["+i+"] script found EMPTY!");var l=""+s.attr("path");Q.isBlank(l)||(i=(s.attr("type")||"").ifBlankStr(i).toLowerCase().replace(/text\//gi,""),Q.console.info("prepare/remove to re-load Template["+n+"]  of ["+i+"] from external path: ["+l+"]"),s.remove(),t=Q.loadTemplate(n,l,i,e,t,a,o))}else Q.console.info("Template["+n+"]  of ["+i+"] already found in local.")}else if(Q.console.info("Template["+n+"] of ["+i+"] NOT found. Source ["+r+"]"),r&&"undefined"==r)Q.addTemplateScript(n,"",i),Q.console.info("Loaded Empty Template["+n+"] of ["+i+"]");else if(r.equalsIgnoreCase("inline")||r.beginsWithStr("#")){var c=r.equalsIgnoreCase("inline")?e:r,u=$(c),d=u.html();Q.isBlank(d)?Q.console.error("Template["+n+"] of ["+i+"] NOT defined inline in ["+c+"]."):(Q.addTemplateScript(n,d,i),r.equalsIgnoreCase("inline")&&u.html(""))}else if(r.equalsIgnoreCase("none"))Q.console.warn("Template["+n+"] of ["+i+"] defined as NONE. Ignoring template.");else if(r.equalsIgnoreCase("script"))Q.console.error("Template["+n+"] of ["+i+"] NOT defined in <script>.");else{var p=String(o.method||"get").toLowerCase();o.params&&(r=Q.api.url(r,o.params)),Q.console.warn(">>>>>>>>>> Making New Template Request");var f=$.ajax({url:r,method:p,headers:o.headers,data:o.payload,cache:Q.defaults.components.offline,dataType:"html",onTmplError:o.onError,success:function(e){Q.addTemplateScript(n,e,i),Q.console.info("Loaded Template["+n+"] of ["+i+"] from ["+r+"]")},error:function(e,t,a){this.onTmplError&&_is(this.onTmplError,"function")&&this.onTmplError.call(this,e,t,a),Q.console.error("Failed Loading Template["+n+"] of ["+i+"] from ["+r+"]. ["+t+":"+a+"]")}});t.push(f)}return Q.console.groupEnd("spaTemplateAjaxQue"),t},Q.urlParams=function(e){e=(e=e||window.location.search||"").beginsWithStr("\\?")||e.indexOf("//")<7?e.substr(e.indexOf("?")+1):e;var n={};return e.replace(/([^&=]+)=?([^&]*)(?:&+|$)/g,function(e,t,a){(n[t]=n[t]||[]).push(decodeURIComponent(a))}),_.each(n,function(e,t){n[t]=_.isArray(e)&&1==e.length?e[0]:e}),n},Q.urlParam=function(e,t){return Q.urlParams(t)[e]};var d="";function _getAboluteUrl(e,t){return(e||"").trimRightStr("/")+"/"+(t||"").trimLeftStr("/")}function _setLang(e,t,a){if(e){if(Q.i18n.onLangChange){var n=Q.i18n.onLangChange,r=Q.is(n,"function")?n.call(void 0,e,a):e;e=Q.is(r,"string")?r:e}$("html").attr("lang",e.replace("_","-")),Q.i18n.setLanguage(e,_.merge({},Q.defaults.lang,Q.findSafe(window,"app.conf.lang",{}),Q.findSafe(window,"app.lang",{}),t||{}))}}function _pipeSort(e,t){var a=e;if(Q.is(e,"array"))a=e.sort(),t&&(a=a.reverse());else if(Q.is(e,"string")){var n;switch(!0){case 0<=e.indexOf(","):n=",";break;case 0<=e.indexOf(" "):n=" "}n&&(a=e.split(n).sort().join(n),t&&(a=a.reverse()))}return a}function _defaultAttr(e){var t="html";switch(e.tagName.toUpperCase()){case"INPUT":switch(e.type.toLowerCase()){case"checkbox":case"radio":t="$";break;default:t="value"}break;case"TEXTAREA":t="value";break;case"SELECT":t="$"}return t}function _unmaskHandlebars(e){return e.replace(/(\/)*&gt;/g,">").replace(/ _XHBTINSPA_--(>|&gt;)/gi,"").replace(/(>|&gt;)(<|&lt;)!--_XHBTINSPA_/gi,"").replace(/<IMG-X-TMP /gi,"<img ").replace(/<IFRAME-X-TMP /gi,"<iframe ").replace(/<\/IFRAME-X-TMP/gi,"</iframe")}Q.getLocHash=function(e){var t=(d||window.location.hash).replace("#","");return t||Q.is(e,"undefined")||"#"==e||(t=window.location.pathname.replace(/(\/)*(index|default)\.([a-z])*/i,"").replace(e.replace(/\s*/g,"").trimRightStr("/"),"")),t},Q.urlHash=function(e,t){var a=Q.getLocHash(t);if(e||_.isNumber(e)){var n=(a=a.beginsWithStr("/")?a.substring(a.indexOf("/")+"/".length):a).length?a.split("/"):[];_.isNumber(e)?a=e<0?n[n.length-1]:n&&n.length>e?n[e]:"":_.isArray(e)?a=0===e.length?n:_.zipObject(e,n):_.isString(e)&&"?"==e&&(a=a.containsStr("\\?")?Q.getOnSplit(a,"?",1):"")}return a},Q.urlHashFull=function(e){return _getAboluteUrl(e=e||"#",Q.urlHash("",e))},Q.hashParam=function(e){var t=""+Q.urlHash("?");return void 0===e||Q.isBlank(t)||(t=Q.urlParam(""+e,t)),t},Q.i18n={},Q.i18n.loaded=!1,Q.i18n.settings={name:"Language",path:"language/",ext:".txt",encoding:"UTF-8",cache:!0,async:!0,mode:"map",callback:null},Q.i18n.browserLang=function(){return navigator&&(navigator.language||navigator.userLanguage)||"en_US"},Q.i18n.setLanguage=function(e,t){$.i18n&&($.i18n.map={},e=(e||Q.i18n.browserLang()).replace(/-/g,"_"),t=$.extend(Q.i18n.settings,t),$.i18n.properties({name:t.name,language:e,path:t.path,ext:t.ext,encoding:t.encoding,cache:t.cache,async:t.async,mode:t.mode,callback:function(){Q.isElementExist("#i18nSpaRunTime")||$("body").append('<div id="i18nSpaRunTime" style="display:none"></div>'),$.i18n.loaded=void 0===$.i18n.loaded?!$.isEmptyObject($.i18n.map):$.i18n.loaded,Q.i18n.loaded=Q.i18n.loaded||$.i18n.loaded,1<e.length&&!$.i18n.loaded&&(Q.console.warn("Error Loading Language File ["+e+"]. Loading default."),Q.i18n.setLanguage("_",t)),Q.i18n.apply(),t.callback&&t.callback($.i18n.loaded)}}))},Q.i18n.setLang=function(e,t){_setLang(e,t)},Q.i18n.value=function(e){return(e=(""+e).replace(/i18n:/i,"").trim()).beginsWithStrIgnoreCase("@")&&(e=e.substr(1).trim(),e=Q.findSafe(window,e,e)),function _i18nValue(e){var t=e;try{(t=(""+(!Q.i18n.loaded&&window.Liferay?Liferay.Language.get(e):$.i18n.prop(e))).trim()).beginsWithStr("\\[")&&t.endsWithStr("]")&&(t=function _stripEnds(e){return e.substring(1,e.length-1)}(t))}catch(e){console.warn("i18n lookup error:"+e.stack)}return t}(e)},Q.strBindData=function(t,a,n,r){t=""+t,n=n||"{",r=r||"}";var e=Q.extractStrBetweenEx(t,n,r,!0);return t&&!Q.isBlank(e)&&Q.is(a,"object")&&_.each(e,function(e){t=t.replace(new RegExp(n+"\\s*("+e.trim()+")\\s*"+r,"g"),Q.findSafe(a,e,""))}),t},String.prototype.bindData=function(e){return Q.strBindData(""+this,e)},Q.i18n.text=function(e,t){var a=Q.i18n.value(e);if(t&&Q.is(t,"object")){var n="",r="";_.each(_.keys(t),function(e){n=""+t[e],r=n.trim(),n&&(r.beginsWithStrIgnoreCase("i18n:")||r.beginsWithStrIgnoreCase("@"))&&(n=Q.i18n.value(r)),a=a.replace(new RegExp("{\\s*("+e.trim()+")\\s*}","g"),n)})}var i,o=[e];return function parseMessage(t){var e=Q.extractStrBetweenEx(t,"{","}",!0);return Q.isBlank(e)?t:(_.each(e,function(e){(i=i||0<=o.indexOf(e))||(o.push(e),t=t.replace(new RegExp("{\\s*("+e.trim()+")\\s*}","g"),Q.i18n.value(e)))}),i?(console.error("i18nKey circular issue found:",o.join(" > ")),t):parseMessage(t))}(a)},Q.i18n.update=function(e,t,a){t=t||"";var n,r,i=$(e),o=i.attr("data-i18n")||"",s="";if(Q.isBlank(o)||0==t.indexOf(":")||0==t.indexOf("=")||o.indexOf(":")<=0&&t.indexOf(":")<=0)s=t.trimLeftStr(":").trimLeftStr("=");else{n=0<o.indexOf(":")?Q.toJSON(o||{}):{html:o.trimLeftStr(":").replace(/'/g,"")},r=0<t.indexOf(":")?Q.toJSON(t||{}):{html:t.trimLeftStr(":").replace(/'/g,"")},_.each(Object.keys(n),function(t){_.each(t.split("_"),function(e){e&&(n[e]=n[t])})}),_.each(Object.keys(r),function(t){_.each(t.split("_"),function(e){e&&(r[e]=r[t])})});var l=_.merge({},n,r);_.each(Object.keys(l),function(e){e.indexOf("_")<=0&&(s+=e+":'"+l[e]+"',")}),s=s.trimRightStr(",")}return i.attr("data-i18n",s).data("i18n",s),(a||Q.is(a,"undefined"))&&Q.i18n.apply(e),i},Q.i18n.apply=Q.i18n.render=function(e,t){if(Q.i18n.loaded||window.Liferay){t=t||"";var a=(e=e||"html").beginsWithStr("<");a&&($("#i18nSpaRunTime").html(e),e="#i18nSpaRunTime");var n=$(e).find(t+"[data-i18n]");n.length||(n=$(e).filter(t+"[data-i18n]")),n.each(function(e,t){var n=$(t),a=n.data("i18n")||"";a&&!a.containsStr(":")&&(a="html:'"+a+"'");var r=Q.toJSON(a||"{}"),i=r.data||r.i18ndata;i?(delete r.data,delete r.i18ndata):i=Q.toJSON(n.data("i18nData")||"{}"),r&&!$.isEmptyObject(r)&&_.each(_.keys(r),function(e){var t=r[e],a=Q.i18n.text(t,i);_.each(e.split("_"),function(e){switch(e.toLowerCase()){case"html":n.html(Q.sanitizeXSS(a));break;case"text":n.text(a);break;default:n.attr(e,a)}})})})}if(a)return $("#i18nSpaRunTime").html()},$.fn.extend({i18n:function(e){return this.each(function(){e&&$(this).attr("data-i18n",e).data("i18n",e),Q.i18n.apply(this)}),this}}),Q.pipes={trim:function(e){return(""+e).trim()},trimLeft:function(e){return(""+e).trimLeftStr()},trimRight:function(e){return(""+e).trimRightStr()},normalize:function(e){return(""+e).normalizeStr()},toLowerCase:function(e){return(""+e).toLowerCase()},toUpperCase:function(e){return(""+e).toUpperCase()},toTitleCase:function(e){return(""+e).toTitleCase()},capitalize:function(e){return(""+e).capitalize()},unCapitalize:function(e){return(""+e).unCapitalize()},not:function(e){return!e},sort:function(e){return _pipeSort(e)},sortAsc:function(e){return _pipeSort(e)},sortDesc:function(e){return _pipeSort(e,!0)},reverse:function(e){var t=e;if(Q.is(e,"array"))t=e.reverse();else if(Q.is(e,"string")){var a;switch(!0){case 0<=e.indexOf(","):a=",";break;case 0<=e.indexOf(" "):a=" "}a&&(t=e.split(a).reverse().join(a))}return t}},Q.dataBind=Q.bindData=function(e,t,a,n){e=e||"body",a=a||"";var r,i,o=Q.is(e,"string")&&/\s*</.test(e);if(o){i="_BlockedScriptInTemplate_";var s=e.replace(/<\s*script/gi,"<"+i).replace(/<\s*(\/)\s*script/gi,"</"+i);r=$('<div style="display:none">'+s+"</div>")}else r=$(e);if(Q.isBlank(t))return r;var l="";"$"==a[0]&&(l=a.substr(1).trim(),a="");var d,c,p,f,g,h,m,y,b,v,S=(l=l||r.attr("data-rendered-component"))||"_unknown_",O=_.merge({__computed__:{}},t),u=r.find(a+"[data-bind]");function _getValue(e){return"#"==(e=(e||"").trim())[0]?e:Q.findSafe(O,e)}function _templateDynId(e,t){return["_runTimeTemplate",e,l,t.replace(/[^a-z0-9]/gi,"_"),Q.now()].join("_")}function _inlineTemplate(e,t){return Q.compiledTemplates4DataBind.hasOwnProperty(S)||(Q.compiledTemplates4DataBind[S]={}),Q.compiledTemplates4DataBind[S][e]=Handlebars.compile(_unmaskHandlebars(t))}if(u.length||(u=r.filter(a+"[data-bind]")),u.length&&!o&&l&&(u=u.filter(function(){return $(this).closest("[data-rendered-component]").attr("data-rendered-component")==l})),_.each(u,function(u){d=$(u),(c=d.data("bind")||"")&&!c.containsStr(":")&&(c=_defaultAttr(u)+":'"+c+"'"),p=Q.toJSON(c||"{}"),b=Q.renderUtils.getFn(d.attr("data-bind-callback")||""),p&&!$.isEmptyObject(p)&&_.each(_.keys(p),function(e){f=(p[e]+"|").split("|"),g=f.shift().trim(),v="!"==g[0],m=v?!_getValue(g=g.substr(1).trim()):_getValue(g),Q.is(m,"undefined|null")&&(m="");for(var t=0;t<f.length;t++)(h=f[t].trim())&&("."==h[0]&&(h="spa.pipes"+h),m="!"==h[0]?"!"==h?!m:("."==(h=h.substr(1).trim())[0]&&(h="spa.pipes"+h),!Q.renderUtils.runCallbackFn(h,["(...)",m,g,O,u],u)):Q.renderUtils.runCallbackFn(h,["(...)",m,g,O,u],u));_.each(e.split("_"),function(e){var t="";if(e=e.trim(),!Q.is(m,"undefined"))switch(e.toLowerCase()){case"html":d.html(Q.sanitizeXSS(m));break;case"text":d.text(m);break;case"$":if(/checkbox|radio/i.test(u.type)){switch(Q.of(m)){case"boolean":u.checked=m;break;default:u.checked=u.value.equalsIgnoreCase(""+m)}u.checked?u.setAttribute("checked",""):u.removeAttribute("checked")}else/select/i.test(u.tagName)&&console.warn("TODO: data-bind:select");break;case"if":t=g.replace(/[^a-z0-9]/gi,"_"),O.__computed__[t]=m;var a,n=d.attr("data-bind-template");if(n)a=Q.compiledTemplates4DataBind[S][n];else{var r="{{#if __computed__."+t+" }}"+d.html().trim()+"{{/if}}";a=_inlineTemplate(n=_templateDynId("if",g),r),d.attr("data-bind-template",n)}d.html(a(O));break;case"repeat":t=g.replace(/[^a-z0-9]/gi,"_"),O.__computed__[t]=m;var i,o=d.attr("data-bind-template");if(o)i=Q.compiledTemplates4DataBind[S][o];else{var s=(p.repeatAs||"").replace(/[,|:]/g," ").normalizeStr(),l="{{#each __computed__."+t+(s?" as |"+s+"|":"")+" }}"+d.html().trim()+"{{/each}}";i=_inlineTemplate(o=_templateDynId("repeat",g),l),d.attr("data-bind-template",o)}d.html(i(O));break;case"repeatAs":break;default:switch(!0){case/^\./.test(e):var c=e.replace(/[\.\,]/g," ").normalizeStr();d[m?"addClass":"removeClass"](c);break;default:d.attr(e,m),e.beginsWithStr("data-")&&(y=Q.dotToCamelCase(e.getRightStr("-").replace(/-/g,".")))&&d.data(y,m)}}}),b&&b.call(u,u)})}),!n&&!o&&r.is("[data-rendered-component]")){var C=r.attr("data-rendered-component");if(!Q.isBlank(C)){var k="app."+C+".bindCallback";Q.renderUtils.runCallbackFn(k,O,app[C])}}if(!o){var T,w=r.find("[data-rendered-component]").filter(function(){return this.hasAttribute("data-spa-component-$data")||this.hasAttribute("data-spa-$data")||this.hasAttribute("spa-$data")});if(w.length)w.each(function(){T=function _get$dataInAttr(e,t,a){var n,r,i,o,s,l="app."+(t=t.replace(/[^a-z0-9]/gi,"_"))+".";Q.is(a,"object")&&(Q.tempBind$data.hasOwnProperty(t)||(Q.tempBind$data[t]={}),Q.tempBind$data[t].$data=_.merge({},Q.findSafe(app,t+".$data",{}),a),l="spa.tempBind$data."+t+".");n=$(e),r=n.data(),i=(n.attr("data-spa-component")||"").split("|"),(o=(i[1]||"").trim())&&(/\:\s*\$data/.test(o)&&(o=o.replace(/\:\s*\$data/g,":"+l+"$data")),o=Q.toJSON(o));var c=n.attr("data-spa-component-options")||n.attr("data-spa-$options")||n.attr("spa-$options")||"{}";if((s=_.merge({},o,r,Q.toJSON(c))).hasOwnProperty("data")&&Q.is(s.data,"string")){var u=s.data.trim();/^\$data/.test(u)&&(u=l+u),s.data=_.merge({},Q.findSafe(window,u,{}))}var d=(n.attr("data-spa-component-$data")||n.attr("data-spa-$data")||n.attr("spa-$data")||"").trim();d&&(/\:\s*\$data/.test(d)&&(d=d.replace(/\:\s*\$data/g,":"+l+"$data")),Q.isBlank(s.data)?s.data=Q.toJSON(d):_.merge(s.data,Q.toJSON(d)));if(!Q.isBlank(s.data)&&s.data.hasOwnProperty("$data")){var p=_.merge({},s.data.$data);delete s.data.$data,_.merge(s.data,p)}return s.hasOwnProperty("data")?s.data:{}}(this,l,t),Q.bindData(this,T)})}return O=null,o?r.html().replace(new RegExp(i,"g"),"script"):r},Q.bindTemplateData=function(e,t){var a=e;if(/^\s*#[a-z]+/i.test(e)&&(a=$(e).html()),Q.isBlank(t))return a;if(/ data-bind\s*=/i.test(a)&&(a=Q.bindData(e,t)),/{{(.+)}}/.test(a))if("undefined"!=typeof Handlebars&&Handlebars)try{a=Handlebars.compile(a)(t)}catch(e){console.log("Error Handlebars compile/bind.",e)}else console.warn("Handlebars Template Library not found!");return a},Q.togglePassword=function(e){if(!$(e).next(".icon.eye").length){var t=$('<i class="icon eye"></i>');t.on("click",function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();var t=$(this).prevAll(".toggle-password"),a="text"==t.attr("type")?"password":"text";t.attr("type",a).toggleClass("text")}),$(t).insertAfter(e)}},Q.initTogglePassword=function(e){$(e||"body").find(".toggle-password").each(function(e,t){Q.console.info("Initializing toggle password",t),Q.togglePassword(t)})},Q.isElValueChanged=function(e){var a,t,n=$(e);if(n.length)if("checkbox"==(t=n[0]).type)a=t.checked!=t.defaultChecked;else if("radio"==t.type)$(t).closest("form").find(':radio[name="'+t.name+'"]').each(function(e,t){a=a||t.checked!=t.defaultChecked});else if(0<="INPUT,TEXTAREA".indexOf(t.tagName))a=t.value!=t.defaultValue;else if("SELECT"==t.tagName){var r,i,o,s=0;for(r=0,i=t.options.length;r<i;r++)o=t.options[r],a=a||o.selected!=o.defaultSelected,o.defaultSelected&&(s=r);a&&!t.multiple&&(a=s!=t.selectedIndex)}return a},Q.resetElDefaultValue=function(e){var t,a=$(e);if(a.length)if(t=a[0],0<",checkbox,radio".indexOf(t.type))t.defaultChecked=t.checked;else if(0<",INPUT,TEXTAREA".indexOf(t.tagName))t.defaultValue=t.value;else if("SELECT"==t.tagName){var n,r,i;for(n=0,r=t.options.length;n<r;n++)(i=t.options[n]).defaultSelected=i.selected}},Q.updateTrackFormCtrls=function(e){if(e){var a,n,r,i,t=$(e),o=t.find(".tracking-change.changed").length,s=Q.validateForm("#"+t.attr("id")),l=!(Q.isBlank(s)||1==s[0].errcode)||t.find(".validation-error,.validation-pending").length,c=0<o&&!l,u=!l,d=t.find(".ctrl-on-change,.ctrl-on-validate");t.attr("data-changed",o).data("changed",o),d.each(function(e,t){a=$(t),n=a.hasClass("ctrl-on-change")?c:u,r=a.attr("onBeforeChange"),Q.isBlank(r)||(0<r.indexOf("(")&&(r=r.getLeftStr("(")),i=Q.findSafe(window,r.trim(),void 0),n=Q.is(i,"function")?!!i.call(t,n):n),a.is(":disabled")==n&&(a.prop("disabled",!n).addClass(n?"":"disabled").removeClass(n?"disabled":""),a.trigger("change"))})}},Q.trackFormElChange=function _trackFormElChange(e,t){function eTrackChange(e){if("change"==e.type||e.key&&(1==e.key.length||0<="BackspaceDelete".indexOf(e.key))){var t,a=!1,n=$(this).closest("form"),r=n.find(".tracking-change.changed").length;if("checkbox"==this.type)a=this.checked!=this.defaultChecked;else if("radio"==this.type)n.find(':radio[name="'+this.name+'"]').each(function(e,t){t.checked==t.defaultChecked&&$(t).removeClass("changed"),a=a||t.checked!=t.defaultChecked});else if(0<="INPUT,TEXTAREA".indexOf(this.tagName))a=this.value!=this.defaultValue,t="change"!=e.type;else if("SELECT"==this.tagName){var i,o,s,l=0;for(i=0,o=this.options.length;i<o;i++)s=this.options[i],a=a||s.selected!=s.defaultSelected,s.defaultSelected&&(l=i);a&&!this.multiple&&(a=l!=this.selectedIndex)}$(this)[a?"addClass":"removeClass"]("changed"),Q.updateTrackFormCtrls(n),null!=r&&t&&n.trigger("change")}}$(t||"body").find(e).each(function(e,t){"FORM"==t.tagName.toUpperCase()?Q.trackFormElChange($(t).find(".track-change").length?".track-change":"input,textarea,select",t):function elTrackChange(e){var t="change",a=$(e);if(0<",checkbox,radio".indexOf(e.type))e.defaultChecked=e.checked;else if(0<",INPUT,TEXTAREA".indexOf(e.tagName))e.defaultValue=e.value,t="keyup change";else{if("SELECT"!=e.tagName)return!1;var n,r,i;for(n=0,r=e.options.length;n<r;n++)(i=e.options[n]).defaultSelected=i.selected}a.removeClass("track-change changed"),Q.updateTrackFormCtrls(a.closest("form")),e.className.indexOf("tracking-change")<0&&a.addClass("tracking-change").on(t,eTrackChange);return!0}(t)})},Q.initTrackFormElChanges=function(e){$(e||"body").find("form.track-changes,form:has(.ctrl-on-change,.track-change)").each(function(e,t){Q.console.info("Initializing Form Elements Track: Form ["+(t.id||t.name)+"]"),Q.trackFormElChange(t)})},Q.getModifiedElement=function(e){var t,a=void 0,n=$(e||"form:not([data-ignore-change]) :input:not(:disabled,:button,[data-ignore-change])");return _.every(n,function(e){return t||(e.tagName.match(/^(select|textarea)$/i)&&e.value!=e.defaultValue?t=!0:e.tagName.match(/^input$/i)&&(e.type.match(/^(checkbox|radio)$/i)&&e.checked!=e.defaultChecked?t=!0:e.type.match(/^(text|password|hidden|color|email|month|number|tel|time|url|range|date|datetime|datetime-local)$/i)&&e.value!=e.defaultValue&&(t=!0)),t&&(a=e)),!t}),a},Q.getModifiedElements=function(e){var a,n=[];return $(e||"form:not([data-ignore-change]) :input:not(:disabled,:button,[data-ignore-change])").each(function(e,t){a=!1,t.tagName.match(/^(select|textarea)$/i)&&t.value!=t.defaultValue?a=!0:t.tagName.match(/^input$/i)&&(t.type.match(/^(checkbox|radio)$/i)&&t.checked!=t.defaultChecked?a=!0:t.type.match(/^(text|password|hidden|color|email|month|number|tel|time|url|range|date|datetime|datetime-local)$/i)&&t.value!=t.defaultValue&&(a=!0)),a&&n.push(t)}),n},Q.initTrackElValueChanges=Q.resetElementsDefaultValue=function(e){$(e||"form :input:not(:disabled)").each(function(e,t){t.defaultValue=t.value,t.tagName.match(/^input$/i)&&t.type.match(/^(checkbox|radio)$/i)&&t.checked!=t.defaultChecked&&(t.defaultChecked=t.checked)})},Q.trash={container:[],push:function(e){this.container.push(e)},empty:function(){this.container=[]},pick:function(e){return e?this.container[e]:this.container}},Q.fillData=function(c,u,e){var t="object"==typeof c;u&&"object"==typeof u&&(e=u,u=null),u=u||"body";var d={dataParams:{},method:"GET",async:!0,dataCache:!1,keyFormat:"aBc",selectPattern:"[name='?']",formatterCommon:null,formatterOnKeys:null,resetElDefault:!0,resetElDefaultInContext:!0,keysMap:{}};$.extend(d,e),t||$.ajax({url:c,method:(""+(d.method||"GET")).toUpperCase(),data:d.dataParams,cache:d.dataCache,async:d.async,dataType:"text",success:function(e){c=Q.toJSON(""+e),t="object"==typeof c,function _fillData(){var l=d.keyFormat;l=null!=(l=null!=l.match(/^[a-z]/)?"aBc":l).match(/^[A-Z]/)?"AbC":l;var e=Q.keysDotted(c);Q.console.group("fillData"),Q.console.info(e),_.each(e,function(e){Q.console.group(">>"+e);var t=""+(e.replace(/[\[\]]/g,"_")||""),a=e.replace(/\[[0-9]+\]/g,""),n=/\[[0-9]+\]/.test(e);switch(l){case"_":t=Q.dotToX(t,"_"),a=Q.dotToX(a,"_");break;case"AbC":t=Q.dotToTitleCase(t),a=Q.dotToTitleCase(a);break;default:t=Q.dotToCamelCase(t),a=Q.dotToCamelCase(a)}var r={patternKey:t+(n?" || "+a:""),formatterKey:a,isArrayChild:n};Q.trash.push(r),Q.console.info(r),Q.trash.empty();var i=d.selectPattern.replace(/\?/g,t);(d.keysMap[t]||d.keysMap[a])&&(d.keysMap[t]=d.keysMap[t]||{},d.keysMap[a]=d.keysMap[a]||{},d.keysMap[t].pattern=d.keysMap[t].pattern||d.keysMap[a].pattern,d.keysMap[t].pattern&&(i=d.keysMap[t].pattern.replace(/\?/g,t)),d.keysMap[a].formatter&&(d.formatterOnKeys=d.formatterOnKeys||{},d.formatterOnKeys[a]=d.keysMap[a].formatter));var o=$(u).find(i).length;Q.console.info(">> "+i+" found: "+o);var s=null;0<o&&(s=Q.find(c,e),!d.formatterOnKeys&&d.formatterCommon&&(s=d.formatterCommon(s,e,c)),d.formatterOnKeys&&(d.formatterOnKeys[a]?s=d.formatterOnKeys[a](s,e,c):d.formatterCommon&&(s=d.formatterCommon(s,e,c))),Q.console.info({value:s})),$(u).find(i).each(function(e,t){switch(Q.console.info(t),t.tagName.toUpperCase()){case"INPUT":switch(t.type.toLowerCase()){case"text":case"password":case"hidden":case"color":case"date":case"datetime":case"datetime-local":case"email":case"month":case"number":case"search":case"tel":case"time":case"url":case"range":case"button":case"submit":case"reset":$(t).val(s),!d.resetElDefaultInContext&&d.resetElDefault&&(t.defaultValue=t.value);break;case"checkbox":case"radio":t.checked=t.value.equalsIgnoreCase(s),!d.resetElDefaultInContext&&d.resetElDefault&&(t.defaultChecked=t.checked)}break;case"SELECT":Q.selectOptionForValue(t,s),!d.resetElDefaultInContext&&d.resetElDefault&&(t.defaultValue=t.value);break;case"TEXTAREA":$(t).val(s),!d.resetElDefaultInContext&&d.resetElDefault&&(t.defaultValue=t.value);break;default:$(t).html(Q.sanitizeXSS(s))}}),Q.console.groupEnd(">>"+e)}),Q.console.groupEnd("fillData"),d.resetElDefaultInContext&&Q.resetElementsDefaultValue(u+" :input")}()},error:function(e,t,a){Q.console.error("Failed loading data from ["+c+"]. ["+t+":"+a+"]"),Q.is(app.api.onError,"function")?app.api.onError.call(this,e,t,a):Q.api.onReqError.call(this,e,t,a)}})},Q.toRenderDataStructure=function(t,e,a){function hF(t,a){return a&&Object.keys(a).length&&_.each(Object.keys(a),function(e){t=t.replace(new RegExp("{"+e+"}","gi"),a[e])}),t}var n={},r={},i={},o={};switch(e&&(o=_.isString(e)?Q.queryStringToJson(e):_.isObject(e)?e:{}),!0){case _.isString(t):t.containsStr("\\|")&&(n.dataModel=Q.getOnSplit(t,"|",0),t=Q.getOnLastSplit(1)),n.dataUrl=hF(t,a),_.isEmpty(o)||(n.dataParams=o);break;case _.isArray(t):r={urls:[]},i={},_.each(t,function(e){i={url:hF(e,a),params:o},e.containsStr("\\|")&&(i.target=Q.getOnSplit(e,"|",0),i.url=hF(Q.getOnLastSplit(1),a)),r.urls.push(i)});break;case _.isObject(t):r={urls:[]},i={},_.each(_.keys(t),function(e){i={name:e,url:hF(t[e],a),params:o},t[e].containsStr("\\|")&&(i.target=Q.getOnSplit(t[e],"|",0),i.url=hF(Q.getOnLastSplit(1),a)),r.urls.push(i)})}return _.isEmpty(r.urls)||(n.dataCollection=r),n};var r={};function _adjustComponentOptions(e,t){var a="_rtt_"+e,n="";if(t&&_.isObject(t)&&Q.hasPrimaryKeys(t,"template|templateStr|templateString|templateUrl")){if(t.hasOwnProperty("template")){var r=t.template.trim();r.beginsWithStr("#")&&!r.containsStr(" ")||(t.templateStr=t.template)}if(Q.hasPrimaryKeys(t,"templateStr|templateString"))n=t.templateStr||t.templateString||"",Q.updateTemplateScript(a,n),t.template="#"+a;else if(Q.hasPrimaryKeys(t,"templateUrl")){var i=(t.templateUrl||"").trim();if(i&&/^(\.\/)/.test(i)){var o=/[^a-z0-9]/gi.test(e);i=Q.defaults.components.rootPath+(Q.defaults.components.inFolder||o?e.replace(/[^a-z0-9]/gi,"/")+"/":"")+i.substr(2)}t.template=i}}return t&&_.isObject(t)&&!Q.hasPrimaryKeys(t,"data|dataUrl")&&Q.hasPrimaryKeys(Q.api.urls,"$"+e)&&(t.dataUrl="@$"+e),Q.console.log("$ Adj.Options>>>>",e,t?t.__now():t),t}Q.env="",Q.compiledTemplates4DataBind={},Q.compiledTemplates={},Q.viewModels={},Q.renderHistory={},Q.renderHistoryMax=0,Q.components={},Q.tempBind$data={},Q.defaults={components:{templateEngine:"handlebars",rootPath:"app/components/",inFolder:!0,templateExt:".html",scriptExt:".js",templateScript:!1,templateCache:!0,dataPreRequest:"",render:"",callback:"",extend$data:!0,offline:!1},routes:{base:"#",attr:{route:"data-spa-route",params:"data-spa-route-params",onNavAway:"onNavAway"},className:{hide:"HIDE-SPA-NAV",block:"BLOCK-SPA-NAV",allow:"ALLOW-SPA-NAV"}},lang:{path:"app/language/",ext:".txt",cache:!0,async:!0},validation:{xss:{on:"input_onBlur",fn:"_check.xss",msg:"i18n:invalid.input"}},csp:{nonce:""},set:function(e,t){return Q.is(e,"object")?(e.hasOwnProperty("set")&&delete e.set,_.merge(this,e)):"string"==typeof e&&("components.extend$data"==e?Q.defaults.components.extend$data=t:Q.setSimpleObjProperty(this,e,t)),this}};var l="api,debug,lang";function _spaComponentOp(){var t=this.action;if(arguments.length){var e=arguments;1==arguments.length&&(_.isArray(arguments[0])?e=arguments[0]:_.isString(arguments[0])&&(e=arguments[0].split(","))),Q.console.log(e),e&&e.length&&_.each(e,function(e){Q.console.info(t+" spa-component:["+e.trim()+"]"),Q[t](e.trim())})}}function _spaRenderRefreshComponents(){var t=this.action;if(arguments.length){var a=arguments;1==arguments.length&&(a=_.isArray(arguments[0])?arguments[0]:_.isString(arguments[0])?arguments[0].split(","):arguments[0]),Q.is(a,"object")?_.each(Object.keys(a),function(e){Q.console.info("Rendering spa-component:["+e+"]"),Q[t](e,a[e])}):a&&a.length&&_.each(a,function(e){Q.console.info("Rendering spa-component:["+e+"]"),Q[t](e.trim())})}}function _spaTagsSelector(e){return e.split(",").map(function(e){return e.trim()+"[src]:not([data-spa-component])"}).join(",")}function _disabledElClick(e){var t=$(this);if(t.hasClass("disabled")||t.is("[disabled]")||t.is(":disabled"))return e.preventDefault(),e.stopPropagation(),void e.stopImmediatePropagation();var a=this.getAttribute("onclickthis");if(a&&"null"!=a&&"undefined"!=a)try{t.renameAttr("onclickthis","onclick").trigger("click").renameAttr("onclick","onclickthis")}catch(e){console.error(e.stack.substring(0,e.stack.indexOf("\n"))+"! Failed to trigger [onclick(:->onclickthis)] event on Element:\n",this)}}function _initSpaElements(e){var t=$(e||"body"),a=t.find("form:not([onsubmit])"),n=u?".no-spa-route":"",r=t.find('a[href]:not([href^="#"]):not([href^="javascript:"]):not([target])'+n),i=t.find("a:not([href]):not(.no-link)"),o=t.find("[onclick]:not(:input):not(["+A+"]):not([onclickthis])");a.filter(function(){return!$(this).closest("pre").length}).attr("onsubmit","return false;").addClass("spa-form"),r.filter(function(){return!$(this).closest("pre").length}).attr("target","_blank").addClass("spa-external-link"),i.filter(function(){return!$(this).closest("pre").length}).attr("href","javascript:;").addClass("spa-link"),o.filter(function(){return!$(this).closest("pre").length}).addClass("as-btn").renameAttr("onclick","onclickthis").on("click",_disabledElClick)}function _initFormValidation(e){var t,a,n,r=$(e),i=Q.findSafe(Q,"_validate.defaults.offline",!0);if(1==r.length){if((t=r.attr("id")||"")||(t=r.attr("name")||"spaForm"+Q.now(),r.attr("id",t)),a=r.data(),n=r.has(".ctrl-on-change,.ctrl-on-validate").length,i){var o=(r.attr("data-validate-defaults")||"").trim();if(o){if(o.indexOf("offline")<0)if(o.endsWithStr("}")){var s=o.lastIndexOf("}");o=[o.slice(0,s),",offline:true",o.slice(s)].join("")}else o+=",offline:true";r.attr("data-validate-defaults",o)}else r.attr("data-validate-defaults","{offline:true}")}r.is("[data-validate-form]")||r.attr("data-validate-form",""),r.attr("data-validation-initialized",""),r.attr("onsubmit")||r.attr("onsubmit","return false;"),r.on("change",function(){Q.updateTrackFormCtrls(this)}),r.find("textarea,input:not(:checkbox),input:not(:radio)").filter(":not([data-validate])").each(function(){this.setAttribute("data-validate","{onInput:{fn:_check.noop}}")});var l="",c=Q.defaults.validation.xss,u=(r.attr("data-validate-xss")||"").trim(),d=(c.msg||"").trim();/msg\s*:/g.test(u)&&((d=Q.toJSON(u).msg)?u="on":d="Invalid input."),d&&!(u.equalsIgnoreCase("off")||u.equalsIgnoreCase("no")||u.equalsIgnoreCase("skip")||u.equalsIgnoreCase("false"))&&(l=4<u.length?","+u:",on"+c.on.capitalize()+":{fn:'"+c.fn+"',msg:'"+d+"'}");var p,f="onFocus:{fn:_clearSpaValidateMsg,offline:false}"+l,g=(r.attr("data-validate-common")||"").trim();if(g){if(g.indexOf("_clearSpaValidateMsg")<0)p="{"==g[0]?(g[0]=",","{"+f+g):"{"+f+","+g+"}",r.attr("data-validate-common",p)}else r.attr("data-validate-common","{"+f+"}");Q.initDataValidation("#"+((a.validateForm||a.validateScope||"").replace(/[#onRender]/gi,"")||t)),!r.hasClass("track-changes")&&n&&Q.trackFormElChange(e),"onRender".equalsIgnoreCase(a.validateForm)&&Q.validateForm("#"+t,!0,!0)}}function _isLiveApiUrl(e,t){var a="",n=t||Q.findSafe(window,"app.api.liveApiPrefix",""),r=e.beginsWithStr("!");if(e=e.trimLeftStr("!"),n){var i,o,s=[],l=0;if(Q.is(n,"string")?s=n.split(","):Q.is(n,"array")&&(s=n),0<(i=s.length))for(;!a&&l<i;)a=(o=s[l++].trim())?e.beginsWithStr(o)?o:!_isRelativePath(e)&&0<e.indexOf(o)?o:"":"";else a=e.beginsWithStr(n)?n:!_isRelativePath(e)&&0<e.indexOf(n)?n:""}else r&&(a="??");return a}function _isRelativePath(e){var t=e.getLeftStr(6).toLowerCase();return!(t.beginsWithStr("http:")||t.beginsWithStr("https:")||t.beginsWithStr("//"))}function _isFn(e){return"function"==typeof e}function _isObj(e){return"object"==typeof e}function _ajax(t){var a={url:"",responseType:"json",async:!0,cache:!1,method:"GET",headers:{},auth:null,timeout:0,success:null,error:null,finally:null},n=a.responseType.toUpperCase(),e={TEXT:"text/plain",HTML:"text/html",CSS:"text/css",CSV:"text/csv",XML:"text/xml",JSON:"application/json",PDF:"application/pdf",ZIP:"application/zip"}[n]||a.responseType,r={};Object.keys(t||{}).forEach(function(e){a[e]=t[e]}),a.method=a.method.toUpperCase(),_isFn(a.headers)&&(a.headers=a.headers.call(void 0,a)),_isObj(a.headers)&&Object.keys(a.headers).forEach(function(e){r[e]=a.headers[e]}),e&&(r["Content-Type"]=e),r["Cache-Control"]=a.cache?"max-age=86400000":"no-cache, no-store, must-revalidate, max-age=0",r.Expires=a.cache?new Date((new Date).setDate((new Date).getDate()+1)).toUTCString():"0",a.cache||(r.Pragma="no-cache");var i,o,s=new XMLHttpRequest;(s.requestOptions=a).timeout&&(s.timeout=a.timeout),Object.keys(a).forEach(function(t){var e=t.toLowerCase();"onreadystatechange"===e&&_isFn(a[t])?o=a[t]:0===e.indexOf("on")&&_isFn(a[t])&&(s[e]=function(e){a[t].call(a,s,e)})}),s.onreadystatechange=function(e){if(o&&o.call(a,s,e),4===s.readyState){var t=s.responseText;if(200<=s.status&&s.status<300){if("JSON"===n)try{t=t&&JSON.parse(t)}catch(e){t=s.responseText,console.warn("Invalid JSON response.",t,s,e)}_isFn(a.success)&&a.success.call(a,t,s.status,s)}else _isFn(a.error)&&a.error.call(a,s.status,s.statusText,s);_isFn(a.finally)&&a.finally.call(a,t,s.status,s)}},a.hasOwnProperty("data")&&"GET"===a.method&&(i=_isObj(a.data)?_toQueryString(a.data):""+a.data)&&(a.url+=(a.url.indexOf("?")<0?"?":/\?$|\&$/.test(a.url)?"":"&")+i);try{a.auth&&_isObj(a.auth)?a.auth.hasOwnProperty("user")&&(a.auth.hasOwnProperty("pwd")?s.open(a.method,a.url,a.async,a.auth.user,a.auth.pwd):s.open(a.method,a.url,a.async,a.auth.user)):s.open(a.method,a.url,a.async),Object.keys(r).forEach(function(e){s.setRequestHeader(e,r[e])}),"GET"!==a.method&&a.hasOwnProperty("data")?(i=_isObj(a.data)?JSON.stringify(a.data):a.data,s.send(i)):s.send()}catch(e){console.warn("Ajax-Exception",s,e)}return s}function _mockFinalUrl(e,t,a){if(e=e||"/",t=t||"","??"===(a=a||_isLiveApiUrl(e))){var n=e.indexOf("//");n<0?e=(a="/MOCK-ROOT/")+e.trimLeftStr("/"):a=e.substring(0,e.indexOf("/",n+2)+1)}var r="",i=Q.findSafe(app,"api.mockBaseUrl")||Q.findSafe(Q,"api.mockBaseUrl")||"",o=i?"":(Q.findSafe(app,"api.mockRootFolder")||Q.findSafe(Q,"api.mockRootFolder")||"api_").trimRightStr("/")+"/",s=Q.findSafe(app,"api.mockDataFile")||Q.findSafe(Q,"api.mockDataFile")||"";r=(e||"").replace(/[\{\}]/g,"").replace(RegExp("(.*)(/*)"+a.trimLeftStr("/")),o).replace(/(\/)*\?/,t+"/"+s+"?").replace(/\?$/,"");if(i){i=i.trimRightStr("/")+"/";var l=r.indexOf("//");l<0?r=i+r:l<7&&(r=i+r.substr(r.indexOf("/",r.indexOf("//")+2)+1))}return r}function _ajaxPrefilter(t,e,a){t.url.beginsWithStr(Q.api.urlKeyIndicator)&&(t.url=Q.api.url(t.url.trimLeftStr(Q.api.urlKeyIndicator),t.data));var n,r=t.url;Q.findSafe(window,"app.api.reqHeaders")&&(t.beforeSend=function(e){!function _ajaxSetReqHeaders(t,e){var a=Q.findSafe(window,"app.api.reqHeaders"),n=is(a,"function")?a(t,e):a;is(n,"object")?_.forEach(Object.keys(n),function(e){t.setRequestHeader(e,n[e])}):is(n,"string")&&(_isLiveApiUrl(e.url)?(e.data=e.data||"",e.data+=(Q.isBlank(e.data)?"":"&")+n):t.setRequestHeader("reqHeadersInLiveUrl",n))}(e,t)}),"script"==t.dataType||t.hasOwnProperty("error")||(t.error=app.api.onError||Q.api.onReqError);var i,o="",s=/({+)([^}])*(}+)/;if(Q.api.mock||app.api.mock||r.beginsWithStr("!"))if(r.beginsWithStr("~"))t.url=(_isRelativePath(r.trimLeftStr("~"))&&Q.api.baseUrl||"")+r.trimLeftStr("~")+(Q.api.liveUrlSuffix||""),Q.api.baseUrl&&(t.crossDomain=!0);else{var l=("/"+t.type.toUpperCase()).replace("/GET","");if(t.type="GET",o=_isLiveApiUrl(r),r=r.trimLeftStr("!"),o){if(r.containsStr("\\?")||(r=r.trimRightStr("/")+"?"),s.test(r)){Q.console.log("URL has undefined params >>",r,t.data);try{i=Q.is(t.data,"string")?JSON.parse(t.data):t.data,r=Q.api.url(r.replace(/{{/g,"{").replace(/}}/g,"}"),i)}catch(e){}Q.console.log("Updated URL>>",r)}var c=_mockFinalUrl(r,l,o);t.url=c,(app.debug||Q.debug)&&console.warn(">>>>>>Intercepting Live API URL: ["+r+"] ==> ["+c+"]"),n=!0}}else o=_isLiveApiUrl(r),(app.debug||Q.debug)&&console.log("actualUrl:"+r+",baseUrl:"+Q.api.baseUrl+",liveApiPrefix:"+o),o&&(t.url=(_isRelativePath(r)&&Q.api.baseUrl||"")+r+(Q.api.liveUrlSuffix||""),Q.api.baseUrl&&(t.crossDomain=!0));if(Q.console.log("Remove mock params if any in URL>",t.url),t.url=t.url.replace(/{{([^}])*}}(\/*)/g,""),s.test(t.url)){Q.console.log("URL has undefined params>",t.url,t.data);try{i=Q.is(t.data,"string")?JSON.parse(t.data):t.data,t.url=Q.api.url(t.url.replace(/{</g,"{").replace(/>}/g,"}"),i)}catch(e){}}Q.console.log("Final Ajax URL>",t.url),(s.test(t.url)||/<([^>])*>/.test(t.url))&&(console.warn("URL has undefined params >>",t.url,t.data),t.url=t.url.replace(/[{<>}]/g,"_"));var u=app.api.defaultPayload||Q.api.defaultPayload;if(u){var d,p,f=Q.of(t.data),g="string"==f?Q.toJSON(t.data):t.data;Q.is(u,"function")?(d=u.call(t,g,t),Q.is(d,"object")&&(p=JSON.parse(JSON.stringify(d)),Q.isBlank(p)||(t.data="string"==f?JSON.stringify(p):p))):(p=Q.is(u,"object|array")?JSON.parse(JSON.stringify(u)):u,p=Q.is(p,"object|array")&&Q.is(g,"object|array")?_.merge({},p,g):p,t.data=Q.isBlank(p)||"string"!=f?p:JSON.stringify(p))}if(Q.ajaxPreProcess&&Q.ajaxPreProcess(t,e,a),(Q.isBlank(t.data)||Q.is(t.data,"string")&&!/[a-z0-9]/i.test(t.data))&&(Q.console.log("REMVOING EMPTY PAYLOAD"),delete t.data),n){var h=Q.is(t.data,"string")?t.data:JSON.stringify(t.data);h&&Q.is(h,"string")&&6144<h.length&&(h="LAREGE-PAYLOAD-WITH-CHAR-LENGTH:"+h.length),t.headers=_.merge({},t.headers,{"Z-Live-URL":r,"Z-Payload":h}),delete t.data}(app.debug||Q.debug)&&console.log("ajax Options",t)}Q.component=Q.$=Q.registerComponent=function(e,t){var a=!!t,n=e;if(t=t||{},e)if(_is(e,"object")&&(e=(t=_.merge({},e)).name||t.componentName||"spaComponent"+Q.now(),t.componentName=e,n=e),_is(n,"string")){if(0<=l.indexOf(n))console.error("Invalid component name "+n+". Cannot create Reserved components:"+l.join());else if(is(n,"string")&&n&&(n=n.trim())){if(!a){var r,i,o=-1;return 0<n.indexOf(" ")&&(r=n.getRightStr(" ").trim(),n=n.getLeftStr(" ")),0<n.indexOf(":")&&(o=Q.toInt(n.getRightStr(":").trim()),n=n.getLeftStr(":")),n=n.replace(/[^a-z0-9]/gi,"_"),Q.components[n]||console.warn('Unknown SPA Component "'+(e.getLeftStr(" ")||e)+'"'),(i=$('[data-rendered-component="'+n+'"]')).length&&0<=o&&(i=$(i[o])),r&&i.length&&(i="<"==r[0]?(r=r.getRightStr(0).trim(),i.find("[data-rendered-component]").length?i.find(r).filter(function(){return $(this).closest("[data-rendered-component]").data("renderedComponent")==n}):i.find(r)):i.find(r)),i}if(/[^a-z0-9\/]/gi.test(n)||!/^([a-z])/i.test(n))return void console.error('Invalid component name "'+n+'" to create. Component name must contain only Alphanumeric (a-z A-Z 0-9) and must begin with alphabet (a-z A-Z).');if(/[^a-z0-9]/gi.test(n)&&(n=n.replace(/[^a-z0-9]/gi,"_")),Q.components[n])return;t.componentName=n,t.hasOwnProperty("beforeRender")||(t.beforeRender="app."+n+".onRender"),t.hasOwnProperty("renderCallback")||(t.renderCallback="app."+n+".renderCallback"),t.hasOwnProperty("require")&&Q.loadComponents(t.require,function(){Q.console.log("Required components successfully loaded.")},function(){Q.console.log("Failed to load required components.")}),t=_adjustComponentOptions(n,t);var s=_.merge({},t);_.each(["target","template","templateCache","templateScript","templateUrl","templateUrlMethod","templateUrlParams","templateUrlPayload","templateUrlHeaders","onTemplateUrlError","style","styleCache","styles","stylesCache","scripts","scriptsCache","require","dataPreRequest","data","skipDataBind","dataCollection","dataUrl","dataUrlMethod","dataUrlParams","dataUrlHeaders","defaultPayload","stringifyPayload","dataParams","dataType","dataModel","dataCache","dataUrlCache","dataDefaults","data_","dataExtra","dataXtra","onDataUrlError","onError","dataValidate","dataProcess","dataPreProcessAsync","beforeRender","beforeRefresh","componentName"],function(e){delete t[e]}),is(t.renderCallback,"string")&&delete t.renderCallback,_.each(Object.keys(t),function(e){delete s[e]}),s.renderCallback="app."+n+".renderCallback",Q.components[n]=s,Q.extendComponent(e,t)}}else console.error("Invalid ComponentName:",n);else console.error("Missing ComponentName to register.")},Q.$$=Q.registerComponents=function(){if(arguments.length){var t=arguments;1==arguments.length&&(t=_.isArray(arguments[0])?arguments[0]:_.isString(arguments[0])?arguments[0].split(","):arguments[0]),Q.is(t,"object")?_.each(Object.keys(t),function(e){Q.console.info("Registering spa-component:["+e+"]"),Q.registerComponent(e,t[e])}):t&&t.length&&_.each(t,function(e){Q.console.info("Registering spa-component:["+e+"]"),Q.registerComponent(e.trim())})}},Q.extendComponent=Q.$extend=Q.module=function(e,t){if(t=t||{},e)if(is(e,"object")&&(e=(t=_.merge({},e)).name||t.componentName||"spaComponent"+Q.now(),t.componentName=e),is(e,"string")&&e){if(e=e.trim()){if(0<=l.indexOf(e))return void console.error("Invalid component name "+e+". Cannot extend Reserved components: "+l.join());if(/[^a-z0-9\/]/gi.test(e)||!/^([a-z])/i.test(e))return void console.error('Invalid component name "'+e+'" to extend. Component name must contain only Alphanumeric (a-z A-Z 0-9) and must begin with alphabet (a-z A-Z).');/[^a-z0-9]/gi.test(e)&&(e=e.replace(/[^a-z0-9]/gi,"_")),window.app=window.app||{},window.app[e]=window.app[e]||{},t&&_.isFunction(t)&&(t=t.call(Q.components[e]||{})),t=Q.is(t,"object")?t:{},Q.components[e]||(Q.components[e]={componentName:e,beforeRender:"app."+e+".onRender",renderCallback:"app."+e+".renderCallback"}),Q.components[e]&&(t.__prop__&&_.merge(Q.components[e],$.extend({},t.__prop__)),t.__prop__=Q.components[e]),$.extend(window.app[e],t),window["$$"+e]=window.app[e]}}else console.error("Invalid ComponentName:",e);else console.error("Missing ComponentName to extend.")},Q.extendComponents=Q.$$extend=function(){if(arguments.length){var t=arguments;1==arguments.length&&(t=_.isArray(arguments[0])?arguments[0]:_.isString(arguments[0])?arguments[0].split(","):arguments[0]),Q.is(t,"object")?_.each(Object.keys(t),function(e){Q.console.info("Extend spa-component:["+e+"]"),Q.extendComponent(e,t[e])}):t&&t.length&&_.each(t,function(e){Q.console.info("Extend spa-component:["+e+"]"),Q.extendComponent(e.trim())})}},Q.$bind=function(e,t){e=String(e).replace(/[^a-z0-9]/gi,"_"),Q.isBlank(t)&&(t=Q.findSafe(app,e+".$data",{})),Q.$(e).spaBindData(t)},Q.$data=function(t,e,a){var n;if(t=((t=String(t).replace(/[^a-z0-9]/gi,"_"))||"").trim(),a=a||"update",t)if(app.hasOwnProperty(t)){if(n=Q.findSafe(app,t+".$data"),e){if(n=function update$data(e){return Q.is(e,"object")&&(["update","merge"].__has(a,"i")?_.merge(app[t].$data,e):["*","reset","replace","overwrite"].__has(a,"i")&&(app[t].$data=e)),app[t].is$DataUpdated=Q.components[t].is$DataUpdated=!0,app[t].$data}(Q.is(e,"function")?e.call(app[t],app[t].$data):e),Q.$(t).is(":visible")){var r=Q.components[t],i=r.dataCache,o=(r.on$dataChange||"").trim().toLowerCase();i&&o&&["render","refresh","bind"].__has(o)&&(Q.console.log(t+"$"+o+" on $data update ..."),Q["$"+o](t)),Q.renderUtils.runCallbackFn("app."+t+".$dataChangeCallback",app[t].$data,app[t])}else console.log("Component is not visible! Skipped $on$dataChange.");Q.$dataNotify(t)}}else Q.console.warn("SPA Component[",t,"] is not loaded.");return n},Q.$dataWatch=function(e,t,a){if((e=String(e).replace(/[^a-z0-9]/gi,"_"))&&t&&Q.is(a,"function"))return r.hasOwnProperty(e)||(r[e]={}),r[e].hasOwnProperty(t)?void console.warn("$dataWatch [",t,"] already exists in spa$[",e,"]"):(r[e][t]=a,!0)},Q.$dataUnwatch=function(e,t){var a;return(e=String(e).replace(/[^a-z0-9]/gi,"_"))&&t&&r.hasOwnProperty(e)&&("*"==t&&(delete r[e],a=!0),r[e].hasOwnProperty(t)&&(delete r[e][t],a=!0)),a||console.warn("$dataWatch [",t,"] does not exist in spa$[",e,"]"),a},Q.$dataNotify=function(t,e){if((t=String(t).replace(/[^a-z0-9]/gi,"_"))&&r.hasOwnProperty(t)){var a=Object.keys(r[t]);e&&(a=e.split(",")),_.each(a,function(e){e=(e||"").trim(),r[t].hasOwnProperty(e)&&r[t][e].call(void 0,app[t].$data,app[t],e)})}},Q.$renderCount=function(e){return Q.findSafe(window,"app."+String(e).replace(/[^a-z0-9]/gi,"_")+".__renderCount__",0)},Q.removeComponent=function(e,n){var t;function isOk2Remove$(e){e=String(e).replace(/[^a-z0-9]/gi,"_").trim();var t,a=Q.isBlank(e);return a||(t=Q.renderUtils.runCallbackFn("app."+e+".onRemove",n||"_script_",app[e]),(a=Q.is(t,"undefined")||Q.is(t,"boolean")&&t)||Q.console.warn("Remove $"+e+" request denied onRemove()")),a}if(e=(e||"").replace(/[^a-z0-9]/gi,"_").trim(),n=n&&(e==n?"_self_":n),e){var a=$('[data-rendered-component="'+e+'"]');if(a.length){var r=a.find("[data-rendered-component]").map(function(){return $(this).attr("data-rendered-component")});(0==r.length||_.every(r,function(e){return isOk2Remove$(e)}))&&isOk2Remove$(e)&&(a.html("").text("").val("").data("renderedComponent","").removeAttr("data-rendered-component"),t=!0)}else t=!0}return Q.is(t,"boolean")&&t},Q.destroyComponent=function(e){var t;if((e=(e||"").replace(/[^a-z0-9]/gi,"_").trim())&&Q.removeComponent(e)&&(delete app[e],Q.components[e])){var a=Q.findSafe(Q.components[e],"template","");a&&!a.beginsWithStr("#")&&(a="#__tmpl_"+(""+a).replace(/[^a-z0-9]/gi,"_")),$("script"+a).remove(),delete Q.components[e],delete Q.compiledTemplates4DataBind[e],delete Q.compiledTemplates[e],delete r[e],t=!0}return t},Q.showComponent=function(e,t){var a=(e||"").replace(/[^a-z0-9]/gi,"_").trim();if(a){var n=$('[data-rendered-component="'+a+'"]');n.length?n.show():Q.$render(e,t)}},Q.hideComponent=function(e){(e=(e||"").replace(/[^a-z0-9]/gi,"_").trim())&&$('[data-rendered-component="'+e+'"]').hide()},Q.disableComponent=function(e){(e=(e||"").replace(/[^a-z0-9]/gi,"_").trim())&&$('[data-rendered-component="'+e+'"]').css("pointer-events","none").addClass("disabled").attr("disabled","disabled")},Q.enableComponent=function(e){(e=(e||"").replace(/[^a-z0-9]/gi,"_").trim())&&$('[data-rendered-component="'+e+'"]').css("pointer-events","auto").removeClass("disabled").removeAttr("disabled")},Q.removeComponents=Q.$remove=Q.$$remove=function(){_spaComponentOp.apply({action:"removeComponent"},arguments)},Q.destroyComponents=Q.$destroy=Q.$$destroy=function(){_spaComponentOp.apply({action:"destroyComponent"},arguments)},Q.showComponents=Q.$show=Q.$$show=function(){_spaComponentOp.apply({action:"showComponent"},arguments)},Q.hideComponents=Q.$hide=Q.$$hide=function(){_spaComponentOp.apply({action:"hideComponent"},arguments)},Q.enableComponents=Q.$enable=Q.$$enable=function(){_spaComponentOp.apply({action:"enableComponent"},arguments)},Q.disableComponents=Q.$disable=Q.$$disable=function(){_spaComponentOp.apply({action:"disableComponent"},arguments)},Q.refreshComponent=Q.$refresh=function(e,t){e&&(t=t||{},Q.is(t,"object")&&(t.hasOwnProperty("beforeRender")||(t.beforeRender=t.beforeRefresh||"app."+e.replace(/[^a-z0-9]/gi,"_")+".onRefresh"),t.hasOwnProperty("renderCallback")||(t.renderCallback=t.refreshCallback||"app."+e.replace(/[^a-z0-9]/gi,"_")+".refreshCallback"),t.isRefreshCall=!0,Q.console.info("Calling refreshComponent: "+e+" with below options"),Q.console.info(t),Q.$render(e,t)))},Q.renderComponent=Q.$render=function(e,n){if(n=n||{},e){var r=e;is(e,"object")&&(n=_.merge({},e),e=n.name||n.componentName||"spaComponent"+Q.now(),n.componentName=e,r=e);var t=!n._reqFrTag_;if(_is(e,"string")){if("$"==(e=e.trim())[0]&&(t=!0),!(n&&is(n,"object")&&n.isRefreshCall)&&Q.$renderCount(r)&&Q.findSafe(window,"app."+r+".refreshCallback",""))return Q.console.info("Component ["+e+"] has been rendered already. Refreshing instead of re-render."),void Q.refreshComponent(r,n);if(Q.console.info("Called renderComponent: "+e+" with options",n),!t&&/[^a-z0-9]/gi.test(r)){var a,i=r;if(r[0]===Q.api.urlKeyIndicator&&(a=r.trimLeftStr(Q.api.urlKeyIndicator),i=Q.api.urls[a]||""),n.componentUrl=i,Q.console.info("Called to render ServerComponent: ["+r+"] with options",n),a&&!i&&console.warn("ComponentURL undefined: app.api.urls."+a),i){var o=n.targetEl,s=__finalValue(Q.toJSON(n.urlHeaders),n),l=__finalValue(Q.toJSON(n.urlParams),n),c=__finalValue(Q.toJSON(n.urlPayload),n),u=(n.urlMethod||"GET").toLowerCase(),d="false"!==String(n.urlCache||"false").toLowerCase(),p=Q.api.url(i,l),f=__finalValue(n.urlError);Q.console.log("Loading ServerComponent ..."),Q.api[u](p,c,function _onSuccess(e){$(o).html(e),Q.renderComponentsInHtml(o)},function _onFail(e,t,a){this.onError&&_is(this.onError,"function")?this.onError.call(this,e,t,a):(console.warn("Unable to load ServerComponent."),console.error(String(t).toUpperCase()+":"+a,e))},{ajaxOptions:{dataType:"html",headers:s,cache:d,onError:f}})}}else{var g=/[^a-z0-9]/gi.test(e);g&&(r=e.replace(/[\s\$]/g,"").replace(/[^a-z0-9]/gi,"_"));var h="_rtt_"+r,m="";n=_adjustComponentOptions(r,n);var y=g?r.replace(/[^a-z0-9]/gi,"/"):r,b=r;if(g){var v=r.split("_");b=v[v.length-1]}function jH(){if(Q.console.info("_renderComp: "+r+" with below options"),Q.console.info(n),!Q.components[r].hasOwnProperty("template"))if(Q.components[r].hasOwnProperty("templateStr")||Q.components[r].hasOwnProperty("templateString"))m=Q.components[r].templateStr||Q.components[r].templateString||"",Q.updateTemplateScript(h,m),Q.components[r].template="#"+h;else if(Q.hasPrimaryKeys(Q.components[r],"templateUrl")){var e=(Q.components[r].templateUrl||"").trim();e&&/^(\.\/)/.test(e)&&(e=S+e.substr(2)),Q.components[r].template=e}else Q.components[r].template=C;Q.console.info("render-options: spa.components["+r+"]"),Q.console.info(Q.components[r]);var t=n&&n.saveOptions?Q.components[r]:$.extend({},Q.components[r]);if(n&&(n.hasOwnProperty("mountComponent")||delete t.mountComponent,$.extend(t,n),Q.console.info("Extended> render-options: spa.components["+r+"]"),Q.console.info(t)),t.hasOwnProperty("style")&&Q.is(t.style,"string")&&(t.dataStyles={},t.dataStyles[r+"Style"]="."==t.style||"$"==t.style?O+".css":/^(\.\/)/.test(t.style)?S+t.style.substr(2):t.style,delete t.style,Q.console.info("Using component style for ["+r+"]"),Q.console.info(t)),t&&_.isObject(t)&&t.dataCache){var a=Q.findSafe(app,r+".$data",{});Q.isBlank(a)?(t.dataCache=!1,Q.console.log("dataCache:false; Using/Ajaxing new data ...")):(t.data=a,t.dataProcess=!1,Q.console.log("dataCache:true; Using $data and ingored data + dataProcess ..."))}Q.render(t)}function kH(){T?Q.console.info("Loaded component ["+r+"] source from ["+T+"]"):Q.console.info("Skipped Loading component ["+r+"] source from script file."),Q.console.info("In Source> spa.components["+r+"]"),Q.console.info(Q.components[r]),Q.components.hasOwnProperty(r)||(Q.console.warn("spa.components["+r+"] NOT DEFINED in ["+(T||"spa.components")+"]. Creating *NEW*"),Q.isBlank(n)&&(n={}),n.hasOwnProperty("componentName")||(n.componentName=r),Q.components[r]=n,Q.console.info("NEW> spa.components["+r+"]"),Q.console.info(Q.components[r])),jH()}var S=Q.defaults.components.rootPath+(Q.defaults.components.inFolder||g?y+"/":""),O=S+b,C=O+Q.defaults.components.templateExt,k=Q.defaults.components.scriptExt,T=n&&_.isObject(n)&&n.hasOwnProperty("script")?n.script:k?O+k:"";Q.components.hasOwnProperty(r)?(Q.console.info("Re-rending spa.components["+r+"]"),Q.console.info(Q.components[r]),jH()):T?(Q.console.info("Attempt to load component ["+e+"]'s properties from ["+T+"]"),$.cachedScript(T,{spaComponent:y,dataType:"spaComponent",success:kH,cache:Q.defaults.components.offline}).done(Q.noop).fail(function(){Q.console.info("Attempt to Load component ["+e+"]'s properties from ["+T+"] has FAILED. Not to worry. Continuing to render with default properties."),kH()})):kH()}}else console.error("Invalid ComponentName:",e)}else console.error("Missing ComponentName to render.")},Q.renderComponents=Q.$$render=function(){_spaRenderRefreshComponents.apply({action:"renderComponent"},arguments)},Q.refreshComponents=Q.$$refresh=function(){_spaRenderRefreshComponents.apply({action:"refreshComponent"},arguments)},Q.renderComponentsInHtml=function(e,s){e=e||"body",s=(s||"").trim();var t=_spaTagsSelector("spa-template,x-template");$(e).find(t).each(function(){this.setAttribute("data-spa-component",this.getAttribute("src")),this.setAttribute("data-skip-data-bind","true"),this.setAttribute("data-template-script","true"),this.style.display="none"});var a=_spaTagsSelector("spa-html,x-html");$(e).find(a).each(function(){var e=this.getAttribute("src");if(("$"===e[0]||!/[^a-z0-9]/gi.test(e))&&!Q.components[e.replace(/[^a-z0-9]/gi,"_")]){var t={templateScript:!0};!(this.hasAttribute("data")||this.hasAttribute("data-url"))?t.skipDataBind=!0:this.hasAttribute("data-url")||(t.data=this.hasAttribute("data")?Q.toJSON(this.getAttribute("data")):{}),Q.$(e,t)}this.setAttribute("data-spa-component",e)});var n=_spaTagsSelector("spa-component,x-component");$(e).find(n).each(function(){this.setAttribute("data-spa-component",this.getAttribute("src"))});var l,c,u,d,p,f,g,r=$(e).find("[data-spa-component]");r.length&&r.each(function(e,t){if(l=$(t),g=l.data(),c=(l.attr("data-spa-component")||"").split("|"),u=c[0].trim(),(d=(c[1]||"").trim())&&(/\:\s*\$data/.test(d)&&(d=d.replace(/\:\s*\$data/g,":app."+s+".$data")),d=Q.toJSON(d)),u){if(!Q.components[u]&&(t.hasAttribute("no-script")||t.hasAttribute("noscript")||t.hasAttribute("nojs")||t.hasAttribute("no-js"))&&Q.$(u,{}),!t.id){var a=String(u).trim();"$"==a[0]&&(a=a.replace(/[^a-z0-9]/gi,"_")),a=a.replace(/[^a-z0-9_]/gi,""),f="spaCompContainer_"+a+"_"+($("body").find("[rel=spaComponentContainer_"+a+"]").length+1),t.id=f,t.setAttribute("rel","spaComponentContainer_"+a)}var n=l.attr("data-spa-component-options")||l.attr("data-spa-$options")||l.attr("spa-$options")||"{}";if(p=_.merge({target:"#"+t.id,targetEl:t,spaComponent:u.trim(),_reqFrTag_:1},d,g,Q.toJSON(n)),(t.hasAttribute("skipDataBind")||t.hasAttribute("skip-data-bind"))&&(p.skipDataBind=!0),p.hasOwnProperty("data")&&Q.is(p.data,"string")){var r=p.data.trim();/^\$data/.test(r)&&(r="app."+s+"."+r),p.data=_.merge({},Q.findSafe(window,r,{}))}var i=(l.attr("data-spa-component-$data")||l.attr("data-spa-$data")||l.attr("spa-$data")||"").trim();if(i&&(/\:\s*\$data/.test(i)&&(i=i.replace(/\:\s*\$data/g,":app."+s+".$data")),Q.isBlank(p.data)?p.data=Q.toJSON(i):_.merge(p.data,Q.toJSON(i))),!Q.isBlank(p.data)&&p.data.hasOwnProperty("$data")){var o=_.merge({},p.data.$data);delete p.data.$data,_.merge(p.data,o)}p.hasOwnProperty("data")&&(p.data_=_.merge({},p.data),delete p.data),Q.console.log("inner-component",u,"options:",p),Q.renderComponent(u,p)}})},Q.renderUtils={array2ObjWithKeyPrefix:function(e,t,a){var n={};return _.each(e,function(e){(e=(""+e).trimStr())&&(n[t+(e.equals(".")?a:e).replace(/[^a-z0-9]/gi,"_")]=""+e)}),Q.console.log([t,n]),n},getFn:function(e){var t=e;return e&&_.isString(e)&&(t=Q.findSafe(window,e)),t&&_.isFunction(t)?t:void 0},runCallbackFn:function(e,t,a){if(e){var n,r=e,i=a;if(_.isString(r)&&(i||(e.match("]$")?n=e.substring(0,e.lastIndexOf("[")):0<e.indexOf(".")&&(n=e.substring(0,e.lastIndexOf("."))),i=n?Q.findSafe(window,n):window),r=Q.findSafe(window,r)),r){if(_.isFunction(r))return Q.console.info("calling callback: "+e),Q.is(t,"array")&&"(...)"==t[0]?(t.shift(),r.apply(i,t)):r.call(i,t);Q.console.error("CallbackFunction <"+e+" = "+r+"> is NOT a valid FUNCTION.")}else Q.console.warn("CallbackFunction <"+e+"> is NOT defined.")}},registerComponentEvents:function(r){var e;r&&app[r]&&app[r].hasOwnProperty("events")&&_.each(Object.keys(app[r].events),function(n){app[r].events[n].hasOwnProperty("target")&&!Q.isBlank(app[r].events[n].target)&&(e=app[r].events[n].target,Q.$(r+" "+e).filter(":not([spa-events-"+n+'="'+r+'"])').attr("spa-events-"+n,r).each(function(e,a){_.each(Object.keys(app[r].events[n]),function(t){0==t.indexOf("on")&&_.each(t.split("_"),function(e){Q.console.log("registering component ["+r+"] event: "+n+"-"+e),$(a).on(e.trimLeftStr("on").toLowerCase(),app[r].events[n][t])})})}))})}},Q.render=function(B,M){if(Q.console.log("spa.render",B,M),arguments.length){if(1!==arguments.length||"object"!=typeof B){M&&function transOptions(a){_.each({template:"dataTemplate",templates:"dataTemplates",templateCache:"dataTemplatesCache",templatesCache:"dataTemplatesCache",html:"dataTemplate",htmls:"dataTemplates",htmlCache:"dataTemplatesCache",htmlsCache:"dataTemplatesCache",script:"dataScripts",scripts:"dataScripts",scriptCache:"dataScriptsCache",scriptsCache:"dataScriptsCache",style:"dataStyles",styles:"dataStyles",styleCache:"dataStylesCache",stylesCache:"dataStylesCache",renderType:"dataRenderType",beforeRender:"dataBeforeRender",dataRenderCallBack:"dataRenderCallback",renderCallback:"dataRenderCallback",renderCallBack:"dataRenderCallback",callback:"dataRenderCallback",callBack:"dataRenderCallback",onRemove:"dataRemoveCallback",dataRenderMode:"dataRenderMode",renderMode:"dataRenderMode",renderId:"dataRenderId"},function(e,t){a.hasOwnProperty(t)&&(a[e]=M[t],delete a[t])})}(M);var z={id:"",view:{},model:{},cron:"",elDataAttr:{},target:B,iOptions:M},H=[],V=!1,e=Q.isElementExist(B);e&&(z.elDataAttr=$(B).data());var J=1<arguments.length,K=J&&M.hasOwnProperty("data"),q=M&&M.componentName?M.componentName:"",G={data:{},dataPreRequest:Q.defaults.components.dataPreRequest,dataUrl:"",dataUrlParams:{},dataUrlMethod:"GET",dataUrlErrorHandle:"",dataUrlHeaders:{},dataParams:{},dataType:"",dataExtra:{},dataXtra:{},data_:{},dataDefaults:{},dataModel:"",dataValidate:!1,dataProcess:"",dataUrlCache:!1,dataCache:!1,extend$data:Q.defaults.components.extend$data,dataCollection:{},dataTemplates:{},dataTemplate:"",dataTemplatesCache:!0,templateScript:!1,templateEngine:"",dataScripts:{},dataScriptsCache:!0,dataStyles:{},dataStylesCache:!0,dataBeforeRender:"",dataRenderCallback:"",dataRemoveCallback:"",dataRenderMode:"",skipDataBind:!1,render:"",dataRenderId:""};if(e||(Q.isElementExist("#spaRunTimeHtmlContainer")||$("body").append("<div id='spaRunTimeHtmlContainer' style='display:none;'></div>"),$("#spaRunTimeHtmlContainer").append("<div id='"+B.replace(/\#/gi,"")+"'></div>")),J){var t={dataTemplatesCache:Q.defaults.components.templateCache},a=(M=_.merge({},t,M)).hasOwnProperty("saveOptions")&&M.saveOptions;for(var n in M)G[n]=M[n],a&&"data"!==n&&"saveOptions"!==n&&$(B).data(""+(""+(_.at(""+n,4)||"")).toLowerCase()+n.slice(5),Q.toStr(M[n]))}Q.console.log(q+".$"+(G.isRefreshCall?"refresh":"render")+" with options:",G,"$data",Q.findSafe(app,q+".$data"));var W=$(B),r=W.attr("data-rendered-component")||"",i=r==q;if(_isSpaNavBlocked(W)){Q.console.log("Component container [",B,"] blocks navigation.");var o=W.hasClass(k)?W:W.find(T);if(1<o.length&&(o=$(o[0])),o.length){var s,l,c=(o.attr(E)||"").trim();if(c){if("#"==c[0]||">"==c[0]){var u=">"==c[0]?c.substr(1).trim():c,d=o.find(u).filter(":not(.disabled):not(:disabled)");if(d.length)return void d.trigger("click")}else if((s=Q.findSafe(window,c.split("(")[0].split(";")[0]))&&Q.is(s,"function")&&(l=s.call(app[r],app[r],app[q])),s&&(!Q.is(l,"boolean")||!l))return}else if((s=Q.findSafe(app,r+".onNavBlock"))&&Q.is(s,"function")&&(l=s.call(app[r],app[r],app[q])),s&&(!Q.is(l,"boolean")||!l))return}Q.console.log("Render continues.")}i&&(Q.console.log("$refresh - Auto-Detected",q,G),"auto".equalsIgnoreCase(""+G.render)&&(Q.console.log("Finding for refresh events."),_fixRefreshCalls("dataBeforeRender",".onRender","onRefresh"),_fixRefreshCalls("dataRenderCallback",".renderCallback","refreshCallback")));function bJ(e){return(""+W.data(e)).replace(/undefined/,"")}function cJ(e,t){return Q.isBlank(G[e])?bJ(t):G[e]}var p=cJ("dataRenderId","renderId");z.id=p.ifBlankStr("spaRender"+Q.now()+Q.rand(1e3,9999));var X=cJ("dataRenderMode","renderMode")||"replace";Q.console.log("Render Mode: <"+X+">");var Y="x-spa-template",Z=(G.templateEngine||Q.defaults.components.templateEngine||"handlebars").toLowerCase();if(Q.console.group("spaLoadingViewScripts"),J&&M.hasOwnProperty("dataScriptsCache"))Q.console.info("Override [data-scripts-cache] with user option [dataScriptsCache]: "+G.dataScriptsCache);else{var f=bJ("scriptsCache");Q.isBlank(f)||(G.dataScriptsCache=f.toBoolean(),Q.console.info("Override [data-scripts-cache] with [data-scripts-cache] option in tag-attribute: "+G.dataScriptsCache))}var g=bJ("scripts");g&&Q.isBlank((g||"").replace(/[^:'\"]/g,""))&&(g="'"+g.split(",").join("','")+"'");var h,m,y=Q.toJSON(g||"{}");if(!_.isObject(G.dataScripts)&&_.isString(G.dataScripts)&&(g=(G.dataScripts||"").trimStr(),Q.isBlank((g||"").replace(/[^:'\"]/g,""))&&(g="'"+g.split(",").join("','")+"'"),G.dataScripts=Q.toJSON(g)),$.isEmptyObject(G.dataScripts)||(y=G.dataScripts),_.isArray(y)&&_.remove(y,function(e){return!e}),Q.console.info(y),g=[],y&&!$.isEmptyObject(y)){if(_.isArray(y)){Q.console.info("Convert array of script(s) without scriptID to object with scriptID(s).");var b=Q.renderUtils.array2ObjWithKeyPrefix(y,"__scripts_",B);Q.console.info("Scripts(s) with scriptID(s)."),Q.console.log(b),y=_.isEmpty(b)?{}:b}Q.console.info("External scripts to be loaded [cache:"+G.dataScriptsCache+"] along with view container ["+B+"] => "+JSON.stringify(y)),h=_.keys(y)}else Q.console.info("No scripts defined [data-scripts] in view container ["+B+"] to load.");if(Q.console.groupEnd("spaLoadingViewScripts"),h)g=_.map(h,function(e){return!(m=_getFullPath4Component(y[e],q)).endsWithStrIgnoreCase(".js")&&m.indexOf("?")<0&&(m+=Q.defaults.components.scriptExt),(G.dataScriptsCache?"":"~")+m});return Q.console.log("component [",q,"] scripts:",g),Q.loadScriptsSync(g,function _onScriptsLoadComplete(){Q.console.info("External Scripts Loaded."),!ee&&Object.keys(app.api).length&&_initApiUrls();var e=G?G.dataPreRequest:"";if(Q.is(e,"string")&&(e=Q.renderUtils.getFn(e)),Q.is(e,"function"))try{var t=e.call(app[q]);t&&Q.is(t,"object")&&Object.keys(t).forEach(function(e){0==e.indexOf("data")&&(G[e]=t[e])})}catch(e){console.error("dataPreRequest-Error in app."+q,e)}Q.console.group("spaDataModel");var d,a,n=cJ("dataModel","model"),r=cJ("dataUrl","url"),i=K||r.beginsWithStrIgnoreCase("local:"),o=r.beginsWithStrIgnoreCase("local:")?r.replace(/local:/gi,""):"data",s=function _appApiDefaultPayload(){var e=Q.findSafe(app,"api.ajaxOptions.defaultPayload",{});return Q.is(e,"function")?e():Q.is(e,"object")?_.merge({},e):e}(),p=G&&G.hasOwnProperty("stringifyPayload")?G.stringifyPayload:Q.findSafe(app,"api.ajaxOptions.stringifyPayload");n=n.ifBlankStr(o),d=n.replace(/\./g,"_");var f={};if(K)f[d]=Q.is(G.data,"function")?G.data():G.data,Q.console.info("Loaded data model ["+n+"] from argument");else{if(J&&M.hasOwnProperty("dataCache"))Q.console.info("Override [data-cache] with user option [dataCache]: "+G.dataCache);else{var l=bJ("cache");Q.isBlank(l)||(G.dataCache=l.toBoolean(),Q.console.info("Override [data-cache] with [data-cache] option in tag-attribute: "+G.dataCache))}if(Q.isBlank(r)){f[d]={};var g=bJ("collection");g=g&&Q.toJSON(g),Q.isBlank(G.dataCollection)||(g=G.dataCollection),_.isArray(g)&&(g={urls:g});var c=g.urls;if(Q.isBlank(c))Q.console.warn("Model Data ["+n+"] or [data-url] or [data-collection] NOT found! Check the arguments or html markup. Rendering with options."),f[d]=_.merge({},G.dataDefaults,G.data_,G.dataExtra,G.dataXtra);else if(_.isArray(c)){Q.console.info("Processing data-URLs");var h=0,m=g.nameprefix||"data";_.each(c,function(l){var e=m+h,c=_.has(l,"name")?(""+l.name).replace(/[^a-zA-Z0-9]/gi,""):_.has(l,"target")?""+l.target:e,u=_.has(l,"url")?l.url:_.has(l,"path")?l.path:"";if(c.containsStr(".")&&(c=_.last(c.split("."),1)),c=c.ifBlankStr(e),Q.console.info("processing data-api for: "+c),Q.console.log(l),u){_.has(l,"urlParams")&&(u=Q.api.url(u,l.urlParams));var t=_.has(l,"headers")?l.headers:G.dataUrlHeaders;Q.isBlank(t)&&(t=Q.findSafe(window,"app.api.ajaxOptions.headers",{})),a=_.has(l,"params")?l.params:_.has(l,"data")?l.data:{},_.has(l,"defaultPayload")||Q.isBlank(s)||(a=_.merge({},s,!Q.isBlank(a)&&Q.is(a,"object")?a:{})),!Q.isBlank(a)&&p&&(a=JSON.stringify(a)),H.push($.ajax({url:u,method:(""+(l.method||"GET")).toUpperCase(),headers:Q.is(t,"function")?t():t,data:a,cache:_.has(l,"cache")?l.cache:G.dataCache,dataType:_.has(l,"type")?l.type:G.dataType||Q.findSafe(window,"app.api.ajaxOptions.dataType","text"),success:function(e,t,a){var n,r=_.has(l,"target")?""+l.target:"",i=Q.is(e,"string")?Q.toJSON(""+e,"data"):e;if(0<r.indexOf("."))n=Q.hasKey(i,r)?Q.find(i,r):i;else try{n=i.hasOwnProperty(r)?i[r]:i}catch(e){console.warn("Error in Data Model ["+r+"] in URL ["+u+"].\n"+e.stack)}f[d][c]?(f[d][c]=[f[d][c]],f[d][c].push(n)):f[d][c]=n,Q.console.info("Loaded data model ["+c+"] from ["+u+"]");var o=l.success||l.onsuccess||l.onSuccess;if(o=o||(g.success||g.onsuccess||g.onSuccess))if(_.isFunction(o))o.call(this,i,l,t,a);else if(_.isString(o)){var s=Q.findSafe(window,o);"function"==typeof s?s.call(this,i,l,t,a):Q.console.log("Unknown ajax success handle: "+o)}},error:function(e,t,a){Q.console.warn("Error processing data-api ["+u+"]");var n=l.error||l.onerror||l.onError;if(!n){n=g.error||g.onerror||g.onError;var r=G.dataUrlErrorHandle||G.onDataUrlError||G.onError;!n&&r&&(n=r)}if(n){if(_.isFunction(n))n.call(this,e,t,a);else if(_.isString(n)){var i=Q.findSafe(window,n);"function"==typeof i?i.call(this,oResult,l):Q.console.log("Unknown ajax error handle: "+n)}}else Q.is(app.api.onError,"function")?app.api.onError.call(this,e,t,a):Q.api.onReqError.call(this,e,t,a)}}))}else Q.console.error("data-api-url not found. Please check the arguments or html markup. Skipped this data-api request");h++})}else Q.console.warn("Invalid [data-urls].Check the arguments or html markup. Rendering with empty data {}.")}else if(r.beginsWithStrIgnoreCase("local:")){var u=r.replace(/local:/gi,""),y={};if(_isValidEvalStr(u)){try{y=Function('"use strict";return ('+u+")")()}catch(e){console.error("Error in spa.$('"+G.componentName+"'): Invalid Data Model >> \"local:"+u+'"\n>> '+e.stack.substring(0,e.stack.indexOf("\n")))}Q.console.info("Using LOCAL Data Model: "+u)}if(!i&&0<n.indexOf("."))f[d]=Q.hasKey(y,n)?Q.find(y,n):y;else try{f[d]=y.hasOwnProperty(n)?y[n]:y}catch(e){console.warn("Error in Data Model ["+n+"] in Local Object ["+u+"].\n"+e.stack)}}else{Q.isBlank(G.dataUrlParams)||(r=Q.api.url(r,G.dataUrlParams)),Q.console.info("Request Data ["+n+"] [cache:"+(G.dataUrlCache||G.dataCache)+"] from URL =>"+r);var b=G.dataUrlHeaders;Q.isBlank(b)&&(b=Q.findSafe(window,"app.api.ajaxOptions.headers",{})),a=G.dataParams,G.hasOwnProperty("defaultPayload")||Q.isBlank(s)||(a=_.merge({},s,!Q.isBlank(a)&&Q.is(a,"object")?a:{})),!Q.isBlank(a)&&p&&(a=JSON.stringify(a));var v={url:r,method:(""+(cJ("dataUrlMethod","urlMethod")||"GET")).toUpperCase(),headers:Q.is(b,"function")?b():b,data:a,cache:G.dataUrlCache||G.dataCache,dataType:G.dataType||Q.findSafe(window,"app.api.ajaxOptions.dataType","text"),success:function(e){var t=Q.is(e,"string")?Q.toJSON(""+e,"data"):e,a=cJ("dataValidate","validate");if(0<n.indexOf("."))f[d]=Q.hasKey(t,n)?Q.find(t,n):t;else try{"data"!=n||t.hasOwnProperty(n)||(d=n="Data"),f[d]=!a&&t.hasOwnProperty(n)?t[n]:t}catch(e){console.error("Error in Data Model ["+n+"] in URL ["+r+"].\n"+e.stack)}Q.console.info("Loaded data model ["+n+"] from ["+r+"]")},error:function(e,t,a){var n=cJ("dataUrlErrorHandle","urlErrorHandle");if(Q.isBlank(n))Q.is(app.api.onError,"function")?app.api.onError.call(this,e,t,a):Q.api.onReqError.call(this,e,t,a);else{var r=Q.findSafe(window,n);"function"==typeof r?r.call(this,e,t,a):Q.console.log("Unknown ajax error handle: "+n)}}};H.push($.ajax(v))}}Q.console.info("End of Data Processing"),Q.console.log({o:f}),Q.console.groupEnd("spaDataModel");var S=bJ("template")||bJ("html"),O=bJ("templates")||bJ("htmls");O&&Q.isBlank((O||"").replace(/[^:'\"]/g,""))&&(O="'"+O.split(",").join("','")+"'");var C=Q.toJSON(O||"{}");if(!_.isObject(G.dataTemplates)&&_.isString(G.dataTemplates)&&(O=(G.dataTemplates||"").trimStr(),Q.isBlank((O||"").replace(/[^:'\"]/g,""))&&(O="'"+O.split(",").join("','")+"'"),G.dataTemplates=Q.toJSON(O)),$.isEmptyObject(G.dataTemplates)||(C=G.dataTemplates,O=""+JSON.stringify(C)),(_.isEmpty(Q.toJSON((O||"").trimStr()))||_.isArray(C)&&1==C.length&&Q.isBlank(C[0]))&&(C={},O=""),Q.console.info("Templates:"),Q.console.info(C),_.isArray(C)&&!_.isEmpty(C)){Q.console.info("Array of template(s) without templateID(s).");var k=Q.renderUtils.array2ObjWithKeyPrefix(C,"__tmpl_",B);Q.console.info("Template(s) with template ID(s)."),Q.console.log(k),O=_.isEmpty(k)?(C={},""):(C=k,""+JSON.stringify(C))}if(!C||$.isEmptyObject(C)){C={};var T=G.dataTemplate,w="",A="";Q.isBlank(T)&&(Q.isBlank(S)||(Q.console.info("Template to load from location <"+S+">"),T=S)),T=(T||"").trimStr(),Q.console.info("Primary Template: <"+T+">"),Q.isBlank(T)||T.equalsIgnoreCase("inline")||T.equals(".")?(Q.console.info("Using target container (inline) content as template."),w="_tmplInline_"+B.trimStr("#")):T.beginsWithStr("#")?(Q.console.info("Using page container <"+T+"> content as template."),w=T.trimStr("#")):(Q.console.info("External path <"+T+"> content as template."),w="__tmpl_"+(""+T).replace(/[^a-z0-9]/gi,"_"),A=T),C[w]=A.replace(/['\"]/g,""),Q.console.info(C)}if(Q.console.group("spaView"),C&&!$.isEmptyObject(C)){Q.console.info("Templates of ["+Y+"] to be used in view container ["+B+"] => "+JSON.stringify(C));var x=_.keys(C);if(Q.console.group("spaLoadingTemplates"),Q.console.group("spaLoadingTemplatesCache"),J&&M.hasOwnProperty("dataTemplatesCache"))Q.console.info("Override [data-templates-cache] with user option [dataTemplatesCache]: "+G.dataTemplatesCache);else{var E=bJ("templatesCache")||bJ("templateCache")||bJ("htmlsCache")||bJ("htmlCache");Q.isBlank(E)||(G.dataTemplatesCache=E.toBoolean(),Q.console.info("Override [data-templates-cache] with [data-templates-cache] option in tag-attribute: "+G.dataTemplatesCache))}Q.console.groupEnd("spaLoadingTemplatesCache"),Q.console.info("Load Templates"),Q.console.info(C);var j=G.templateUrlPayload;j&&(_is(j,"function")||_is(j,"string")&&j.indexOf("=")<0)&&(j=__finalValue(j,G));var P={method:G.templateUrlMethod,params:__finalValue(G.templateUrlParams,G),payload:j,headers:__finalValue(G.templateUrlHeaders,G),onError:__finalValue(G.onTemplateUrlError||G.onError)};_.each(x,function(e,t){Q.console.info([t,e,C[e],Y,B,G]),H=Q.loadTemplate(e,C[e],Y,B,H,!G.dataTemplatesCache,P)});var R="#"+x[0].trimStr("#");if(Q.console.info("External Data/Templates Loading Status: "+JSON.stringify(H)),Q.console.groupEnd("spaLoadingTemplates"),Q.console.info("Render TemplateID: "+R),Q.console.group("spaLoadingViewStyles"),J&&M.hasOwnProperty("dataStylesCache"))Q.console.info("Override [data-styles-cache] with user option [dataStylesCache]: "+G.dataStylesCache);else{var I=bJ("stylesCache");Q.isBlank(I)||(G.dataStylesCache=I.toBoolean(),Q.console.info("Override [data-styles-cache] with [data-styles-cache] option in tag-attribute: "+G.dataStylesCache))}var N=bJ("styles");N&&Q.isBlank((N||"").replace(/[^:'\"]/g,""))&&(N="'"+N.split(",").join("','")+"'");var L=Q.toJSON(N||"{}");if($.isEmptyObject(G.dataStyles)||(L=G.dataStyles),_.isArray(L)&&_.remove(L,function(e){return!e}),L&&!$.isEmptyObject(L)){if(_.isArray(L)){Q.console.info("Convert array of style(s) without styleID to object with styleID(s).");var U=Q.renderUtils.array2ObjWithKeyPrefix(L,"__styles_",B);Q.console.info("Style(s) with styleID(s)."),Q.console.log(U),L=_.isEmpty(U)?{}:U}Q.console.info("External styles to be loaded [cache:"+G.dataStylesCache+"] along with view container ["+B+"] => "+JSON.stringify(L));var D,F=_.keys(L);Q.console.group("spaLoadingStyles"),_.each(F,function(e){D=_getFullPath4Component(L[e],q),H=Q.loadStyle(e,D,G.dataStylesCache,H)}),Q.console.info("External Styles Loading Status: "+JSON.stringify(H)),Q.console.groupEnd("spaLoadingStyles")}else Q.console.info("No styles defined [data-styles] in view container ["+B+"] to load.");Q.console.groupEnd("spaLoadingViewStyles"),$.when.apply($,H).then(function(){Q.console.group("spaRender["+Z+"] - spa.renderHistory["+z.id+"]"),Q.console.info("Rendering "+B+" using master template: "+R);try{var E,j=!1,e=!cJ("dataValidate","validate");if(!e){Q.console.info("Validating Data");var t=cJ("dataValidate","validate");t&&_.isString(t)&&(t=Q.findSafe(window,t)),e=t&&_.isFunction(t)?t.call(f[d],f[d]):Q.api.isCallSuccess(f[d])}var P=f[d];e?$.when.apply($,function _dataPreProcessAsync(){var e,t=cJ("dataPreProcessAsync","preProcessAsync");if(t&&_.isString(t)&&(t=Q.findSafe(window,t)),z.modelOriginal=$.extend({},P),z.model=P,t&&_.isFunction(t)){j=!0;var a=$.extend({},app[q]||{},M||{});e=t.call(a,P),(j=!Q.is(e,"undefined"))||(e=[]),j&&(E=!Q.is(e,"array")||Q.is(e,"array")&&1==e.length,Q.is(e,"array")||(e=[e]))}return e}()).done(function(){var a=Array.prototype.slice.call(arguments);j&&(Q.console.log(q,".dataPreProcessAsync() =>",a.__now()),E&&1<a.length&&"success"==a[1]?(a[0]=Q.toJSON(a[0]),a.splice(1)):_.each(a,function(e,t){e&&Q.is(e,"array")&&1<e.length&&"success"==e[1]&&(a[t]=Q.toJSON(e[0]))}),Q.console.log(a.__now()));var e,t=cJ("dataProcess","process");if(t&&_.isString(t)&&(t=Q.findSafe(window,t)),z.modelOriginal=$.extend({},P),z.model=P,t&&_.isFunction(t)){var n=$.extend({},app[q]||{},M||{});a.unshift(P),e=t.apply(n,a)}else j&&(Q.console.warn(q,".dataPreProcessAsync without dataProcess. Merging responses."),a.unshift(P),_.merge.apply(_,a));if(z.model=Q.is(e,"undefined")?P:e,_.isObject(z.model)||(z.model=z.modelOriginal),Q.console.log(q,"Final Template Data:",z.model),q){if(is(app,"object")&&app.hasOwnProperty(q)){var r=_.merge({},is(z.model,"object")?z.model:{_noname:z.model});r.hasOwnProperty("spaComponent")?app[q].$data={}:app[q].$data=G.extend$data?_.merge({},G.dataDefaults,G.data_,G.dataExtra,G.dataXtra,G.dataParams,r):{},app[q].__global__=window||{}}z.model._this=_.merge({},Q.findSafe(window,"app."+q,{})),z.model._this_=_.merge({},Q.components[q]||{},M)}z.model._global_=window||{};var i,o=z.model,s=($(R).html()||"").replace(/_LINKTAGINTEMPLATE_/g,"link"),l=G.templateScript||Q.defaults.components.templateScript,c=(s=l?s.replace(/_BlockedScript_ src-ref="([^"])*"/g,"script").replace(/_BlockedScript_/g,"script"):s.replace(/<\/_BlockedScript_>/g,"&lt;/_BlockedScript_&gt;")).match(/({\s*\@\$(.*?)\s*})/g);!G.skipDataBind&&c&&_.forEach(c,function(e){s=s.replace(new RegExp(e.replace(/\$/,"\\$"),"g"),e.replace(/{\s*\$this|{\s*\@\$/g,"_global_.app.").replace(/}/,".").replace(/\s/g,"").replace(/\.\./,"."+(q||"")+"."))});var u,d,p=s.match(/({\s*\$(.*?)\s*})/g);if(!G.skipDataBind&&p&&_.forEach(p,function(e){s=s.replace(new RegExp(e.replace(/\$/,"\\$"),"g"),e.replace(/{\s*\$this|{\s*\$/g,"app.").replace(/}/,".").replace(/\s/g,"").replace(/\.\./,"."+(q||"")+"."))}),i=s,Q.console.log("Template Source:",s),Q.console.log("DATA for Template:",o),!Q.isBlank(o))if(G.skipDataBind)Q.console.log("Skipped Data Binding.");else{if(G.dataTemplatesCache||(delete Q.compiledTemplates4DataBind[q],delete Q.compiledTemplates[q]),!Q.compiledTemplates4DataBind.hasOwnProperty(q)&&/ data-bind\s*=/i.test(s)){s=function _maskHandlebars(e){return e.replace(/<img /gi,"<IMG-X-TMP ").replace(/<iframe /gi,"<IFRAME-X-TMP ").replace(/<\/iframe/gi,"</IFRAME-X-TMP").replace(/{{/g,">\x3c!--_XHBTINSPA_{{").replace(/}}/g,"}} _XHBTINSPA_--\x3e")}(s),Q.console.log("TemplateBeforeBind",s);var f=is(o,"object")?_.merge({},G.dataDefaults,G.data_,G.dataExtra,G.dataXtra,G.dataParams,o):o;Q.console.log("SPA built-in binding ... ...",f),s=_unmaskHandlebars(s=Q.bindData(s,f,"$"+q)),Q.console.log("TemplateAfterBind",s),Q.compiledTemplates4DataBind.hasOwnProperty(q)||(Q.compiledTemplates4DataBind[q]={}),u=!0}if(0<=Z.indexOf("handlebar")||0<=Z.indexOf("{"))if("undefined"!=typeof Handlebars&&Handlebars){Q.console.log("Data bind using handlebars.js.",s);try{var g=Q.compiledTemplates[q]||Handlebars.compile(s),h=is(o,"object")?_.merge({},z,G.dataDefaults,G.data_,G.dataExtra,G.dataXtra,G.dataParams,o):o;d=h,Q.compiledTemplates.hasOwnProperty(q)||(Q.compiledTemplates[q]=g),i=g(h),Q.console.log(i)}catch(e){console.error("Error in Template",e)}}else Q.console.error("handlebars.js is not loaded.")}Q.console.log("Template Compiled:",i),V=!1,z.view=i.replace(/\_\{/g,"{{").replace(/\}\_/g,"}}");var m=q?_.merge({},app[q]||{},{__prop__:_.merge({},M||{})}):{};m.__prop__&&m.__prop__.data&&(delete m.__prop__.data._global_,delete m.__prop__.data._this_,delete m.__prop__.data._this),z.model&&(delete z.model._global_,delete z.model._this_,delete z.model._this),Q.renderUtils.runCallbackFn(Q.defaults.components.render,O,m);var y,b,v,S=cJ("dataBeforeRender","beforeRender");if(S){var O={template:s,data:z.model,view:z.view};if(y=Q.renderUtils.runCallbackFn(S,O,m),!Q.is(y,"undefined"))switch(Q.of(y)){case"string":z.view=y;break;case"boolean":b=!y}}if(v=z.view.beginsWithStr("\x3c!----\x3e"),b)z={},Q.console.warn("Render aborted by "+S);else if(!v){var C=W.attr("data-rendered-component");C&&!Q.removeComponent(C,q)&&(b=!0,z={},Q.console.warn("Render $"+q+" aborted by $"+C+".onRemove()"))}if(!b){if(v)Q.console.log("Rendering component [",q,"] view aborted.");else{var k=cJ("dataRenderType","renderType");switch(Q.console.log("Injecting component in DOM (",B,")."+(k||"html")),k){case"value":$(B).val(z.view);break;case"text":$(B).text(z.view);break;default:switch(V=!0){case X.equalsIgnoreCase("append"):$(B).append(z.view);break;case X.equalsIgnoreCase("prepend"):$(B).prepend(z.view);break;default:$(B).html(z.view)}}}$(B).attr("data-rendered-component",q).data("renderedComponent",q),function _$renderCountUpdate(e){e=String(e).replace(/[^a-z0-9]/gi,"_"),app[e]&&(app[e].__renderCount__=Q.toInt(Q.$renderCount(e))+1)}(q),Q.console.info("Render: SUCCESS");var T=_.keys(Q.renderHistory),w=T.length;if(w>Q.renderHistoryMax&&$.each(T.splice(0,w-Q.renderHistoryMax),function(e,t){delete Q.renderHistory[t]}),z.cron=""+Q.now(),0<Q.renderHistoryMax&&(Q.renderHistory[z.id]=z),V&&!v&&(Q.renderUtils.registerComponentEvents(q),$(B).find(".lang-icon,.lang-text,[data-i18n-lang]").length&&Q.i18n.displayLang(),_init_SPA_DOM_(B),u||Q.bindData(B,d,"",!0),Q.i18n.apply(B),function _routeReloadUrl(e){var t=(Q.sesStore.get("_spaReloadUrl")||"").trim();if(e&&0!=t.indexOf(e))return;if(t)return Q.sesStore.remove("_spaReloadUrl"),t=t.replace(/.*#/gi,""),Q.route(t,!0),!0}(q)))return z;Q.console.log(z);var A=bJ("renderCallback");G.dataRenderCallback&&(A=G.dataRenderCallback);var x=_.isString(A)&&A.equalsIgnoreCase("off");Q.console.info("Processing callback: "+A),x||Q.renderUtils.runCallbackFn(A,z),Q.renderUtils.runCallbackFn(Q.defaults.components.callback,z,m),V&&!v&&($(B).find("[rel='spaRender'],[data-render],[data-sparender],[data-spa-render]").spaRender(),Q.renderComponentsInHtml(B,q))}}):Q.is(app.api.onResError,"function")?app.api.onResError(f[d],"Invalid-Data",void 0):Q.api.onResError(f[d],"Invalid-Data",void 0)}catch(e){console.error(e)}Q.console.groupEnd("spaRender["+Z+"] - spa.renderHistory["+z.id+"]")}).fail(function(){console.error("External Data|Template|Style|Script Loading failed! Unexpected!! Check the template Path / Network. Rendering aborted.")})}else Q.console.error("No templates defined [data-templates] in view container ["+B+"] to render. Check HTML markup.");Q.console.groupEnd("spaView")},function _onScriptsLoadFailed(){console.error("External Scripts Loading Failed! Unexpected!? Check the Script Path/Network.")}),z}if((M=_.merge({},B)).hasOwnProperty("target"))B=M.target,delete M.target;else{var v=$('[data-rendered-component="'+M.componentName+'"]').attr("id");(B=(v?"#":"")+v)||(Q.console.warn("Render target is missing."),B="dynRender_"+Q.now()+"_"+Q.rand(1e3,9999))}Q.render(B,M)}function _fixRefreshCalls(e,t,a){Q.is(G[e],"string")&&G[e]=="app."+q+t&&app[q].hasOwnProperty(a)&&(G[e]="app."+q+"."+a)}},Q.initElementsIn=_initSpaElements,Q.setElIdIfNot=function(e){var t=$(e);return Q.isBlank(t.attr("id"))&&t.attr("id","_el_"+Q.now()+"_"+Q.rand(1e3,9999)),t.attr("id")},Q.Foundation={autoReflow:!1},Q.reflowFoundation=function(e){"Foundation"in window&&Q.Foundation.autoReflow&&$(e||document).foundation("reflow")},$.expr[":"].regex=function(e,t,a){var n=a[3].split(","),r=/^(data|css):/,i={method:n[0].match(r)?n[0].split(":")[0]:"attr",property:n.shift().replace(r,"")};return new RegExp(n.join("").replace(/^\s+|\s+$/g,""),"ig").test($(e)[i.method](i.property))},$.fn.extend({spaRender:function(e){this.each(function(){!function __renderView(e,t){var a=Q.setElIdIfNot(e);return t&&!$.isEmptyObject(t)?Q.render("#"+a,t):Q.render("#"+a)}(this,e)})}}),$.extend({spaRender:function(e,t){$(e).spaRender(t)}}),$.fn.extend({renameAttr:function(e,t){return this.each(function(){this.setAttribute(t,this.getAttribute(e)),this.removeAttribute(e)}),this},spa$:function(){return this.map(function(){return $(this).closest("[data-rendered-component]")})},spa$name:function(){var e=this.map(function(){return $(this).closest("[data-rendered-component]").attr("data-rendered-component")});return 1==e.length?e[0]:e},spaBindData:function(e,t){return Q.bindData(this,e,t)},inBlockedSpaNavContainer:function(){return!!this.closest(T).length},blockNav:function(){return _blockSpaNavigation(this),this},allowNav:function(){return _allowSpaNavigation(this),this},isNavBlocked:function(){return _isSpaNavBlocked(this)},isNavAllowed:function(){return _isSpaNavAllowed(this)},disable:function(e){return e||Q.is(e,"undefined")?this.css("pointer-events","none").addClass("disabled").attr("disabled","disabled"):this.enable(!0)},enable:function(e){return e||Q.is(e,"undefined")?this.css("pointer-events","auto").removeClass("disabled").removeAttr("disabled"):this.disable(!0)},value:function(e,t){return Q.is(e,"undefined")?this.val():(this.each(function(){$(this).val(e).trigger(t||"change")}),this)},htm:function(e){return Q.is(e,"undefined")?this.html():(this.each(function(){$(this).html(Q.sanitizeScript(e))}),this)},dataJSON:function(e,t,a){var n;if(arguments.length){if(n=Q.toJSON(this.data(e)),n=Q.is(n,"object")?n:{},!Q.is(t,"undefined")){n=a?t:_.merge(n,t);var r=JSON.stringify(n),i=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();this.attr("data-"+i,r).data(e,r)}}else n=this.data();return n},isDisabled:function(e){var t=this.hasClass("disabled")||this.is("[disabled]");return t&&e&&e.call(this,this),t},isEnabled:function(e){var t=!this.isDisabled();return t&&e&&e.call(this,this),t},trackChanges:function(){Q.trackFormElChange(this)},isChanged:function(e){var t="ALL"==(e=(e||"ANY").toUpperCase()),a=!t,n=!1,r=this;if(r.length)for(var i=0;i<r.length;i++){var o=r[i].tagName.toUpperCase();if("FORM"==o)n=$(r[i]).find("input,textarea,select").isChanged(e);else if(0<"/INPUT/TEXTAREA/SELECT/".indexOf(o)){if(n=Q.isElValueChanged(r[i]),a&&n)break;if(t&&!n)break}}return n},initSpaRoutes:function(){_initRouteHash(this)},initFormValidation:function(){var e=this.filter("form");if(!e.length)return"Form Not Found";e.each(function(e,t){_initFormValidation(t)})},validateForm:function(e,t,a){var n,r=this;if(1<r.length)n=[{errcode:1,errmsg:"Too many forms to validate."}];else if(1==r.length){var i="#"+r.attr("id");if("FORM"==(r.prop("tagName")||"").toUpperCase())if(Q.is(e,"string")){var o=r.find(e).map(function(){return this.id}).get().join();n=Q.validateForm(i,o,t,a)}else n=Q.validateForm(i,e,t);else n=[{errcode:1,errmsg:"NOT a FORM"}]}else n=[{errcode:1,errmsg:"Form Not Found."}];return n},updateValidation:function(a,n){this.each(function(e,t){Q._validate._showValidateMsg(t,n,a)})},updateValidationPromise:function(e,t,a){Q.updateValidationPromise(e,this,a,t)}}),Q.initDataValidation=function(){Q.console.log("include validate framework lib (spa-validate.js) to use this feature!")},Q.doDataValidation=function(){Q.console.log("include validate framework lib (spa-validate.js) to use this feature!")},Q.properties={version:Q.VERSION},Q.api={baseUrl:"",liveUrlSuffix:"",urls:{},mock:!1,mockBaseUrl:"",mockRootFolder:"api_",mockDataFile:"data.json",defaultPayload:!1,forceParamValuesInMockUrls:!1,urlKeyIndicator:"@",url:function(e,t){e=(e||"").trimLeftStr(Q.api.urlKeyIndicator),t=t||{};var a,n,r=Q.api.urls[e]||e,i=r.beginsWithStr("!")||Q.api.mock||app.api.mock,o=r.beginsWithStr("!!")||r.beginsWithStr("~")||Q.api.forceParamValuesInMockUrls,s=_.uniq(r.extractStrBetweenIn("{","}"));return Q.isBlank(s)||_.each(s,function(e){(a=e.replace(/[{}<>]/g,""))&&(n=Q.findSafe(t,a,t._undefined),n=i&&!o?e.containsStr(">")?n:"_"+a:n,r=r.replace(new RegExp(e.replace(/([^a-zA-Z0-9])/g,"\\$1"),"g"),n))}),r},success:function(e){return[e,"success"]},isCallSuccess:function(){return!0},onReqError:function(e,t,a){Q.console.error([e,t,a]),Q.console.error($(e.responseText).text())},onResError:function(){},_call:function(n){var e=Q.findSafe(window,"app.api.ajaxOptions",{}),t=Q.is(n,"object")&&n.hasOwnProperty("error")?n.error:app.api.onError||Q.api.onReqError;if((n=$.extend({},e,n,{error:t,success:function(e,t,a){e=_.isString(e)&&"html"!=String(this.dataType).toLowerCase()?Q.toJSON(e):e,Q.api.isCallSuccess(e)?n._success.call(this,e,t,a):Q.is(app.api.onResError,"function")?app.api.onResError.call(this,e,t,a):Q.api.onResError.call(this,e,t,a)}})).dataType||(n.dataType="text"),"json".equalsIgnoreCase(n.dataType)&&!n.contentType&&(n.contentType="application/json"),n.data&&Q.is(n.data,"object")&&n.stringifyPayload&&(delete n.stringifyPayload,n.data=JSON.stringify(n.data)),n.defaultPayload){var a=Q.of(n.data),r=n.defaultPayload,i=Q.is(r,"function")?r(o):Q.is(r,"object")?_.merge({},r):r,o="string"==a?Q.toJSON(n.data):n.data;if(Q.is(i,"object")){var s=Q.is(o,"object")?_.merge({},i,o):i;Q.isBlank(s)||"string"!=a||(s=JSON.stringify(s)),n.data=s}}return n.url.beginsWithStr(Q.api.urlKeyIndicator)&&(n.url=Q.api.url(n.url.trimLeftStr(Q.api.urlKeyIndicator),n.data)),(app.debug||Q.debug)&&console.info(["API(ajax) call with options",n]),$.ajax(n)},_params2AxOptions:function(){var t,a,n,r,i={method:"GET",url:"",data:{},_success:function(){},async:!0};return _.each(arguments,function(e){switch(!0){case _.isString(e):t="url",i.url&&(a=!0,t="data");break;case Q.is(e,"function"):t=r?"error":(r=!0,"_success");break;case _.isBoolean(e):t="async";break;case _.isObject(e):a||e.__hasPrimaryKeys("ajaxOptions|dataUrlParams")?(t="axOptions",n=e.hasOwnProperty("ajaxOptions")?e.ajaxOptions:e):(t="data",a=!0);break;default:t="unknown"}"axOptions"!=t&&(i[t]=e)}),n&&(n.dataUrlParams&&((""+i.url).beginsWithStr(Q.api.urlKeyIndicator)&&(i.url=Q.api.url(i.url.trimLeftStr(Q.api.urlKeyIndicator),n.dataUrlParams)),delete n.dataUrlParams),_.merge(i,n)),Q.console.log("API ajax options >>"),Q.console.log(i),i},get:function(){return Q.api._call(Q.api._params2AxOptions.apply(void 0,arguments))},post:function(){return Q.api._call($.extend(Q.api._params2AxOptions.apply(void 0,arguments),{method:"POST"}))},put:function(){return Q.api._call($.extend(Q.api._params2AxOptions.apply(void 0,arguments),{method:"PUT"}))},del:function(){return Q.api._call($.extend(Q.api._params2AxOptions.apply(void 0,arguments),{method:"DELETE"}))},mix:function(){for(var e=[],t=arguments[arguments.length-1],a=0;a<arguments.length;a++)Q.is(arguments[a],"array")?e=e.concat(arguments[a]):Q.is(arguments[a],"function")||e.push(arguments[a]);return $.when.apply($,e).done(function(){var a=Array.prototype.slice.call(arguments);1==e.length&&1<a.length&&"success"==a[1]?(a[0]=Q.toJSON(a[0]),a.splice(1)):_.each(a,function(e,t){e&&Q.is(e,"array")&&1<e.length&&"success"==e[1]&&(a[t]=Q.toJSON(e[0]))}),t&&Q.is(t,"function")&&t.apply(void 0,a)})}},Q.i18n.onLangChange,Q.i18n.displayLang=function(){var e=$("html").attr("lang");if(e){var t=e,a=e.replace("-","_"),n=$('[data-i18n-lang="'+t+'"],[data-i18n-lang="'+a+'"]'),r=($("body").attr("i18n-lang-key-prefix")||"lang.name.")+a,i="-";$(".lang-text").attr("data-i18n",r).data("i18n",r),$("[data-i18n-lang]").removeClass("active"),n.length&&(n.addClass("active"),i=($(n[0]).data("i18nLang")||"").replace(/[a-z]/gi,""),$(".lang-icon").removeClass(Array.prototype.join.call($("[data-i18n-lang]").map(function(e,t){return $(t).data("i18nLang")})," "))),$(".lang-icon").addClass("-"==i?t:a),Q.i18n.apply(".lang-text")}return e},Q.ajax=_ajax,Q.mockSysTest=function _mockSysTest(){app.api&&_ajax({url:_mockFinalUrl(),method:"HEAD",error:function(){var e=Q.findSafe(app,"api.mockBaseUrl")||Q.findSafe(Q,"api.mockBaseUrl")||"",t=(e||location.origin).trimRightStr("/")+"/",a=e?"":(Q.findSafe(app,"api.mockRootFolder")||Q.findSafe(Q,"api.mockRootFolder")||"api_").trimRightStr("/"),n=prompt("Enter Mock Root Address: http[s]://server.address[:port]/root-folder",t+a);if(n){var r=n.indexOf("/",8),i=0<r?n.slice(0,r):n,o=0<r?n.substr(r+1):"";app.api.mockBaseUrl=i==location.origin?"":i,app.api.mockRootFolder=o,_mockSysTest()}}})};var f={},a={pub:function(a,e,n,r){var i,o;Q.is(e,"function")?(r=n,n=e):i=e;var s,l,c=0,u=[];return _.each(f[a],function(t){try{c++,s=t.fn,l=null,s&&(l=s.call(i||{},a,i,n,r)),u.push({id:""+(t.name||c),response:l}),!o&&Q.is(l,"boolean")&&(o=!l)}catch(e){console.warn("Execution error in subscribed function:"+t.name+" on-"+a),console.error(e.stack)}}),o?r&&Q.is(r,"function")&&r(u):n&&Q.is(n,"function")&&n(u),u},sub:function(e,t,a){return f.hasOwnProperty(e)||(f[e]=[]),f[e].push({fn:t,name:a}),f[e].length},unSub:function(e,t){var a=!1;return f.hasOwnProperty(e)&&(a=!0,t?f[e][t-1]=null:f[e]=[]),a}};Q.event={on:a.sub,off:a.unSub,trigger:a.pub,announce:a.pub};var h,i,m="#",o="",y=!0,g=[],b=100,v=!1,S="",s="",O=!1,C="",c="",k="",T="",w="",A="",x="",u=!1,E="";function _blockSpaNavigation(e){var t=$(e||"body :first");return t.addClass(k),h=_isSpaNavBlocked()||!0,t}function _allowSpaNavigation(e){var t=$(e||T);return t.removeClass(k),t.find(T).removeClass(k),h=_isSpaNavBlocked(),t}function _isToShowSpaNav(){return!i}function _isSpaNavBlocked(e){if(e){var t=$(e);return t.hasClass(k)||0<t.find(T).length}return!!$(T).length}function _isSpaNavAllowed(e){return!_isSpaNavBlocked(e)}function _onpageshow(){!function _blockBrowserNav(){h&&_replaceUrlHash(S)}()}var j="x"+Q.now();function _onPopStateChange(e){!function _routeSpaUrlOnHashChange(){var e=Q.urlHashFull(m);Q.console.log("on Hash Change: Url To [",e,"] from[",S,"] on click:",v," block-Navigation:",h,"isDelayed:",O),!v&&h?(Q.console.log("-------------\x3e",S,e,O,C),Q.console.log("lastBlocked:",c),c=c||S,"#"==m[0]?(_replaceUrlHash(O?C:S,e),c==e&&_handleNavAwayEvent(e)):(_replaceUrlHash(O?C:S,e),_handleNavAwayEvent(e))):(Q.console.log("Triggering next hash... by href:",u,"autoRoute:",y,"byClick",v),_triggerNextHash(y||!v))}(),s=s&&s!=j?(Q.console.warn("Blocked:",s),j):(s!=j&&(Q.onUrlHashChange?Q.onUrlHashChange(Q.urlHash([],m),e):Q.onUrlChange&&Q.onUrlChange(Q.urlHash([],m),e)),"")}function _onWindowReload(){var e,t;switch(Q.onReload&&(e=Q.onReload()),Q.of(e)){case"boolean":if(!e)return t="spa.message.on.window.reload",Q.i18n.text(t).replace(t,"");break;case"string":return(e=e.trim())&&(t=e.beginsWithIgnoreCase("i18n")?e.replace(/i18n(:)*/i,""):"")?Q.i18n.text(t).replace(t):e;default:if(t="spa.message.on.window.reload",h)return Q.i18n.text(t).replace(t,"")}}function _handleNavAwayEvent(e,t){var a,n,r,i,o,s;c=e,Q.console.log("Trying to navigate away from:["+S+"] To:["+e+"] by",t),$(T).each(function(){a=$(this),"#"==(n=(a.attr(E)||"").trim())[0]||">"==n[0]?(r=">"==n[0]?n.substr(1).trim():n,(i=a.find(r).filter(":not(.disabled):not(:disabled)")).length&&(t&&(s="id:'"+t.attr("id")+"', spaRoute:'"+t.attr(A)+"'"),i.data("navToUrl",e).attr("data-nav-to-url",e),i.data("navBy",s).attr("data-nav-by",s),i.trigger("click"))):(o=Q.findSafe(window,n.split("(")[0].split(";")[0]))&&Q.is(o,"function")&&o.call(a,e,a,t)})}Q.blockNav=_blockSpaNavigation,Q.allowNav=_allowSpaNavigation,Q.isNavBlocked=_isSpaNavBlocked,Q.isNavAllowed=_isSpaNavAllowed,Q.isToShowNav=_isToShowSpaNav,Q.isInBlockedSpaNavContainer=function _inBlockedSpaNavContainer(e){return!!$(e).closest(T).length},window.onerror=function(e,t,a){console.warn("Invalid Content: Check the network/path/content.",e,t,a)};var P=[];function _processDynHash(e,t){var a=0<=e.indexOf(":"),n=t;if(Q.is(t,"boolean")&&(n=t?"click":""),a){var r,i,o=a?e.split(":")[0]:"",s={},l=0<e.indexOf("&")?e.split("&"):0<e.indexOf(",")?e.split(","):[e];_.each(l,function(e){r=e.split(":")[0],i=e.getRightStr(":"),s[r]=decodeURIComponent(i)});var c=$("["+A+'*="/'+o+':"]['+x+"]"),u=(c.attr(x)||"").trim();if(a=!Q.isBlank(u)){P.push(e);var d=Q.toJSON(u);_.each(d,function(e,t){if(e=e.trim(),/(^app\.(.)+\.)|(^\$)|(^\#)/.test(e))Q.setElValue(e,s[t]);else if(/^fn:/i.test(e)){var a=e.split(" ")[0].getRightStr(":").trim().split("(")[0];(a=a?Q.findSafe(window,a):"")&&Q.is(a,"function")?a(t,s[t]):console.warn("Not a function",e)}}),n&&c.isEnabled()&&!c.hasClass("AUTO-ROUTING")&&c.trigger(n)}}return a}function _triggerNextHash(e){e&&!function _initAutoRoute(){g=[],b=50}(),y=Q.is(e,"undefined")?y:e;var t,a,n,r=Q.urlHash([],m),i=r.length-1;if(b<0&&(y=!1),y){b--;for(var o=i;0<=o&&(n=r[o-1]||"",y&&0<n.indexOf(":")&&!g.__has(n)&&o--,t=r[o],a=o==i,y&&!g.__has(t));o--)if(t){var s=0<=t.indexOf(":"),l=s?t.split(":")[0]:"",c="["+A+'$="/'+t+'"]:not(:disabled):not(.disabled):not(.AUTO-ROUTING):first';s&&(c="["+A+'*="/'+l+':"]['+x+"]");var u=$(c);if(u.length){if(s=s&&_processDynHash(t),g.push(t),y=!a,u.isEnabled()&&!u.hasClass("AUTO-ROUTING")&&u.addClass("AUTO-ROUTING").trigger(u.data("routeEvent")||"click"),a){d="";break}o+=2}}}v=!1}function _updateBrowserAddress(e,t){Q.console.log("_updateBrowserAddress >>>>>>>>>[",e,"]delay:",t,"prev:",S);var a="#"==m[0];if(e)if(S=e,a){Q.console.log(e);var n=$("#_spaRouteLink_");n.length||(n=$('<a id="_spaRouteLink_" href=""></a>'),$("body").append(n)),Q.console.log("################# "+e),n.attr("href",e)[0].click()}else Q.console.log(e),"#"!=(e=e.trimLeftStr("/"))[0]&&(e="//"+window.location.host+_getAboluteUrl("/",e),Q.console.log("updating the address bar with >>>>>",e)),Q.console.log(">>>>>>>>>>>>>>>>> "+e),history.pushState(null,null,e)}function _replaceUrlHash(e,t){e!=t&&(Q.console.log("attempt to set URL:",e,"insteadOf",t),s=t,_updateBrowserAddress(e))}function _getNewMatchingRoutes(e){if(!(e=(e||"").trim()))return[];var t=Q.urlHash([],m),a=e.trimStr("/").split("/"),n=[],r=a[0];function getMatchHash(e,t){var a=t,n=t.getLeftStr("*");if(n)for(var r=0;r<e.length;r++)if(e[r].beginsWithStr(n)){a=e[r];break}return a}var i=t.indexOf(r);if(0<r.indexOf("*")){r=r.getLeftStr("*");for(var o=0;o<t.length;o++)if(t[o].beginsWithStr(r)){i=o;break}}if(0<=i){for(var s,l=t.splice(i),c=0;c<a.length;c++)s=a[c].indexOf("*"),n[c]=s<0?a[c]:s?getMatchHash(l,a[c]):l[c];n=t.concat(n)}else n="/"==e[0]?a:t.concat(a);return n}function _onRouteElClick(e){var a,n,r,i,o,t,s,l=Q.urlHash([],m),c=$(this),u=this.getAttribute("onrouteclick")||"";if(c.hasClass("disabled")||c.is(":disabled"))return e.stopImmediatePropagation(),e.stopPropagation(),void e.preventDefault();function update(e,t){"#"==(a=(e||"").trim())[0]&&(a=a.substr(1)),n="<"==a[0],r=">"==a[0],i=t||a[r?1:0],o=a.substr(r?2:1),s=!1}"#"!=m[0]&&e.preventDefault(),update(c.attr(A),c.attr("data-route-dir"));var d=(c.attr(x)||"").trim();if(d){var p,f=Q.toJSON(d);_.each(f,function(e,t){if(/(^app\.(.)+\.)|(^\$)|(^\#)/.test((p=e).trim()))p=Q.getElValue(e);else if(/^fn:/i.test(e.trim())){var a=e.split(" ")[0].getRightStr(":").trim().split("(")[0];(a=a?Q.findSafe(window,a):"")&&Q.is(a,"function")?p=a(t):console.warn("Not a function",e)}o=o.replace(new RegExp(t+":","g"),t+":"+encodeURIComponent(p))})}if(u&&"null"!=u&&"undefined"!=u&&!(c.hasClass("disabled")||c.is("[disabled]")||c.is(":disabled")))try{c.renameAttr("onrouteclick","onclick").trigger("click").renameAttr("onclick","onrouteclick")}catch(e){console.error(e.stack.substring(0,e.stack.indexOf("\n"))+"! Failed to trigger [onclick(:->onrouteclick)] event on Element:\n",this)}if(c.hasClass("AUTO-ROUTING"))c.removeClass("AUTO-ROUTING");else{switch("^"==i&&(Q.isBlank(l)?update(a.substr(1)):(e.preventDefault(),s=!0,i="/",o=Q.urlHash("",m))),"#/-<>".indexOf(i)<0&&(o=i+o,i="?"),i){case"#":case"/":l=_getNewMatchingRoutes(o);break;case"-":var g=Q.toInt(o.replace(/[^0-9]/g,""))||1;l.length&&(l.length=l.length-g);break;case"<":t=S;break;case"?":l=_getNewMatchingRoutes(o)}n||(t=_getAboluteUrl(m,l.join("/"))),h&&(n||c.hasClass(w)||c.inBlockedSpaNavContainer()||(r=!0,_handleNavAwayEvent(t,c))),Q.console.log("Routing to...",t,"delay:",r,"prev:",S),function _updateUrlHash(e,t,a){Q.console.log("Updating url with:",e,"delay:",t,"autoRoute:",a),y=a,C=(O=t)?S:"",t?S=e:(v=!0,Q.isToShowNav()?y||_updateBrowserAddress(e,t):S=e)}(t,r,s)}}function _onRouteAutoReg(){Q.route(this.getAttribute(A+"-AUTO").substr(1))}function _initRouteHash(e){$(e||"body").find("["+A+'^="*"]:not(.ROUTE):not(.ROUTE-AUTO)').renameAttr(A,A+"-AUTO").addClass("ROUTE-AUTO").on("click",_onRouteAutoReg);var t,a,n,r=$(e||"body").find("["+A+"]:not(.ROUTE)").renameAttr("onclick","onrouteclick").addClass("ROUTE").off("click",_onRouteElClick).on("click",_onRouteElClick);u&&r.length&&r.each(function(){t=$(this),a=t.attr("href").replace(/\s*/g,"").trim(),n="","#"==a[0]?0<="^><-".indexOf(a[1])&&(n=a[1],a=a.substr(2)):0<="^".indexOf(a[0])&&(n=a[0],a=a.substr(1)),t.attr("href","#"+a).removeAttr("target").attr("data-route-dir",n)});_triggerNextHash(),h=Q.isNavBlocked()}function _routeToUrl(e){if(e=(e||"").trim()){var t,a,n=e[0],r=1;switch("#/-<>".indexOf(n)<0&&(n="?",r=0),t=e.substr(r),n){case"/":a=_getNewMatchingRoutes(t);break;case"-":a=Q.urlHash([],m);var i=Q.toInt(e.replace(/[^0-9]/g,""))||1;a.length&&(a.length=a.length-i);break;case"?":a=_getNewMatchingRoutes(t);break;default:a=[t]}return _getAboluteUrl(m,a.join("/"))}}function _StoreMgmt(r){function _set(t,e){function _store(e,t){r.setItem(""+e,JSON.stringify(t))}1==arguments.length?_type(t,"object")?Object.keys(t).forEach(function(e){_store(e,t[e])}):_type(t,"array")&&t.forEach(function(e,t){_store(t,e)}):2==arguments.length&&_store(t,e)}function _get(e){return 0==arguments.length?_all():1!=arguments.length?_all.apply(null,arguments):_type(e,"string")?0<e.indexOf(",")?_all.apply(null,e.split(",")):JSON.parse(r.getItem(e)):_type(e,"array")?_all.apply(null,e):void 0}function _all(){var t=arguments.length,a=Array.prototype.slice.call(arguments).map(function(e){return(""+e).trim()}),n={};return Object.keys(r).forEach(function(e){(!t||-1<a.indexOf(e))&&(n[e]=_get(e))}),n}function _clear(){if(arguments.length){var t=Array.prototype.slice.call(arguments).map(function(e){return(""+e).trim()});Object.keys(r).forEach(function(e){t.indexOf(e)<0&&r.removeItem(e)})}else r.clear()}function _type(e,t){var a=Object.prototype.toString.call(e).split(" ")[1].toLowerCase().replace(/\]$/gi,"");return 2==arguments.length?-1<(""+t).toLowerCase().indexOf(a):a}function pS(e,t){return 0==arguments.length?_all():1==arguments.length?_type(e,"object|array")?(_set(e),e):_get(e):2==arguments.length?(_set(e,t),_get(e)):void 0}return pS.set=_set,pS.get=_get,pS.getAll=_all,pS.remove=function _remove(e){function _removeItems(){arguments.length&&Array.prototype.slice.call(arguments).forEach(function(e){r.removeItem(e)})}0==arguments.length?_clear():1==arguments.length?_type(e,"string")?0<e.indexOf(",")?_removeItems.apply(null,e.split(",")):function _removeItem(e){r.removeItem(e)}(e):_type(e,"array")&&_removeItems.apply(null,e):_removeItems.apply(null,arguments)},pS.removeAll=_clear,pS.removeExcept=_clear,pS.clear=_clear,pS.clearExcept=_clear,pS}Q.parseRoutes=_getNewMatchingRoutes;try{Q.sesStore=_StoreMgmt(sessionStorage)}catch(e){console.warn("No Access to sessionStorage.",e)}try{Q.locStore=_StoreMgmt(localStorage)}catch(e){console.warn("No Access to localStorage.",e)}function _onViewDataChange(){var e=this,t=$(e),a=Q.getElValue(e),n={},r=t.spa$()[0],i=t.spa$name(),o="2way".equalsIgnoreCase(Q.components[i].dataBindType);e.classList.add("DATA-MODEL-CHANGE-SRC");var s=function _getBindKeyOf(e,t){var a,n,r=e.getAttribute("data-bind"),i="";return r&&!r.containsStr(":")&&(r=_defaultAttr(e)+":'"+r+"'"),(a=Q.toJSON(r||"{}"))&&!$.isEmptyObject(a)&&_.some(_.keys(a),function(e){return!i&&new RegExp(t,"i").test(e)&&(n=a[e].split("|"),i=n.shift().trim()),!!i}),i}(e,"value|$");Q.setSimpleObjProperty(n,s,a),o&&(_.merge(Q.$data(i),n),app[i].is$DataUpdated=Q.components[i].is$DataUpdated=!0),Q.bindData(r,n,'[data-bind*="'+s+'"]:not(.DATA-MODEL-CHANGE-SRC)',!0),e.classList.remove("DATA-MODEL-CHANGE-SRC"),o&&Q.renderUtils.runCallbackFn("app."+i+".$dataChangeCallback",app[i].$data,app[i])}function _initDataBind(e,t){function _bindEvent(e,t){$(e).on((e.getAttribute("data-bind-event")||t).toLowerCase(),_onViewDataChange)}var a="[data-bind]:not(.SPA-DATA-BOUND)",n=$(e||"body").find((t||"")+" "+a);n.length||t||(n=$(e+a)),n.length&&(n.filter("textarea,input:not([type=radio]):not([type=checkbox])").addClass("SPA-DATA-BOUND").each(function(){_bindEvent(this,"keyup")}),n.filter("select,input[type=radio],input[type=checkbox]").addClass("SPA-DATA-BOUND").each(function(){_bindEvent(this,"change")}))}function _init_SPA_DOM_(e){Q.reflowFoundation(e),_initKeyTracking("",e),function _initKeyPauseEvent(e){$(e||"body").find("[onKeyPause]:not([onKeyPauseReg])").each(function(e,t){$(t).attr("onKeyPauseReg","").on("input propertychange paste",function(){var a=this,e=1*((""+a.getAttribute("data-pause-time")).replace(/[^0-9]/g,"")||"1250");n&&clearTimeout(n),n=setTimeout(function(){var e=a.getAttribute("onKeyPause").split("(")[0],t=Q.findSafe(window,e);t&&t.call(a,a)},e)})})}(e),_initSpaElements(e),Q.initTrackFormElChanges(e),function _initFormValidationInScope(e){Q.hasOwnProperty("initDataValidation")?$(e||"body").find("[data-validate-form],[data-validate-scope],form:has([data-validate])").filter(":not([data-validation-initialized])").each(function(e,t){_initFormValidation(t)}):console.warn("SPA validation module is not loaded.")}(e),_initRouteHash(e),Q.initTogglePassword(e),_initDataBind(e),function _processDynHashInUrl(){for(var e,t=Q.urlHash([],m),a="",n=0;n<t.length;n++)a=t[n],0<=(e=P.indexOf(a))?P.splice(e,1):_processDynHash(a,n==t.length-1)}()}function _init_SPA_(){!function _ctrlBrwowserNav(){window.onpageshow=_onpageshow,Q.isIE?window.onhashchange=_onPopStateChange:window.onpopstate=_onPopStateChange,is(window,"window")&&(window.onbeforeunload=_onWindowReload)}(),function init_i18n_Lang(){$(document).on("click","[data-i18n-lang]",function(){var e=$(this).data(),a=e.i18nLang||"",n=(e.i18nLang||"").replace("-","_"),r=($("body").attr("i18n-lang-key-prefix")||"lang.name.")+n;_setLang(n,{callback:function(){var e="-",t=$("[data-i18n-lang]:first");t.length&&(e=(t.data("i18nLang")||"").replace(/[a-z]/gi,"")),$(".lang-text").attr("data-i18n",r).data("i18n",r),$(".lang-icon").removeClass(Array.prototype.join.call($("[data-i18n-lang]").map(function(e,t){return $(t).data("i18nLang")})," ")).addClass("_"==e?n:a),$("[data-i18n-lang]").removeClass("active"),$('[data-i18n-lang="'+a+'"],[data-i18n-lang="'+n+'"]').addClass("active"),Q.i18n.apply(".lang-text")}})});var e=($("body").attr("i18n-lang")||"").replace(/ /g,""),t=e.split(",")[0];if(e){if("*"==t&&(t=Q.i18n.browserLang(),(","+e.toLowerCase()+",").indexOf(","+t.toLowerCase()+",")<0)){t=t.getLeftStr(2).toLowerCase();for(var a=e.split(","),n="",r="",i=0;i<a.length;i++)if(0==(n=(a[i]||"").trim()).toLowerCase().indexOf(t)){r=n;break}t=r||(e.split(",")[1]||"")}t&&(_setLang(t,{},!0),setTimeout(function(){Q.i18n.displayLang()},500))}}(),_init_SPA_DOM_("body"),Q.i18n.apply("body")}function _initApiUrls(){(ee=!!Object.keys(app.api).length)&&Q.console.log("Initializing app.api");var e=Q.findSafe(window,"app.api.baseUrl");Q.isBlank(e)||(Q.api.baseUrl=e);var t=Q.findSafe(window,"app.api.urls");if(Q.isBlank(Q.api.urls)&&!Q.isBlank(t)&&(Q.api.urls=app.api.urls),!Q.isBlank(Q.api.urls)){var a=Q.findSafe(window,"app.api.liveApiPrefix|app.api.mockRootAtPaths");if(!Q.isBlank(a)){var n,r,i=is(a,"array")?a:(""+a).split(",");_.each(i,function(a,e){a=a.trim(),"!"!=(n=a[0])&&"~"!=n||(a=a.substr(1),_.each(Q.api.urls,function(e,t){"!"!=(r=e[0])&&"~"!=r&&(0==e.indexOf(a)||0<e.indexOf("/"+a))&&(Q.api.urls[t]=n+e)})),i[e]=a}),app.api.liveApiPrefix=i,delete app.api.mockRootAtPaths}}}function _initSpaApp(){function runSpaEvent(e){if(Q[e])return Q[e]()}$.when(runSpaEvent("onInit")).done(function initSpaModules(){if(Q.env&&"dev".equalsIgnoreCase(Q.env)){var e={components:{templateCache:!(Q.api.mock=!0),callback:function(){console.log("spa$>",this.__prop__.componentName)}}};Q.defaults.set(e)}$.when(_init_SPA_()).done(function(){$.when(runSpaEvent("onInitComplete")).done(function(){$.when(runSpaEvent("onReady")).done(Q.renderComponentsInHtml)})})})}function _initSpaDefaults(){var t,e=$("body"),a=e[0],n=e.data();Q.isBlank(n)||(n.spaDefaults=Q.toJSON(a.getAttribute("data-spa-defaults")||{}),_.each(Object.keys(Q.defaults),function(e){e.equalsIgnoreCase("set")||(t=n.spaDefaults[e]||n["spaDefaults"+e.toTitleCase()],Q.isBlank(t)||_.merge(Q.defaults[e],Q.toJSON(t)))})),function _initRoutesDefaults(){S=Q.urlHashFull(m),m=(Q.findSafe(Q,"defaults.routes.base","")||"#").trim(),k=(Q.findSafe(Q,"defaults.routes.className.block","")||"BLOCK-SPA-NAV").trim(),T="."+k,w=(Q.findSafe(Q,"defaults.routes.className.allow","")||"ALLOW-SPA-NAV").trim(),o=(Q.findSafe(Q,"defaults.routes.className.hide","")||"HIDE-SPA-NAV").trim(),A=(Q.findSafe(Q,"defaults.routes.attr.route","")||"data-spa-route").trim(),x=(Q.findSafe(Q,"defaults.routes.attr.params","")||"data-spa-route-params").trim(),u=A.equalsIgnoreCase("href"),E=(Q.findSafe(Q,"defaults.routes.attr.onNavAway","")||"onNavAway").trim(),i=$("body").hasClass(o)}(),_initApiUrls()}Q.reload=function(e){e&&Q.sesStore.set("_spaReloadUrl",e||""),Q.allowNav(),window.location.reload()},Q.hasReloadUrl=function(){return!!(Q.sesStore.get("_spaReloadUrl")||"").trim()},Q.initRoutes=_initRouteHash,Q.route=function _routeNewUrl(e,t){var a=_routeToUrl(e);if(Q.console.log("Route:",e,"URL:",a),a)if(!t&&h)_handleNavAwayEvent(a);else{var n=function _$routeElement(e){return $("["+A+'$="'+e.trim()+'"].ROUTE:first')}(e);n.length?n.hasClass("disabled")||n.is("[disabled]")?console.warn("Route:",e,"is disabled."):n.click():(_isToShowSpaNav()?_updateBrowserAddress(a):d=a,"/"==e.trim()?(Q.allowNav(),window.location.reload()):_onPopStateChange())}},Q.routeUrl=_routeToUrl,Q.routeEl=function _$routeElements(e){return $("["+A+'$="'+e.trim()+'"].ROUTE')},Q.initDataBind=_initDataBind,Q.async=function(n){var r=Array.prototype.slice.call(arguments,1);setTimeout(function fnAsyc(){var e=n.apply(void 0,r),t=r.length,a=t?r[t-1]:"";a&&Q.is(a,"function")&&a(e)},0)},$(document).ready(function(){_initSpaDefaults(),Q.debug=Q.urlParam("spa.debug")||Q.hashParam("spa.debug")||Q.debug,$.ajaxPrefilter(_ajaxPrefilter),_initSpaApp()})}(),spa.console.info("spa loaded.");