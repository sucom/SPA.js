/** @license (MIT) SPA.js | (c) Kumararaja */
/** @license (MIT) SPA.js (core) | https://github.com/sucom/SPA.js/blob/master/LICENSE */
!function(){function b(){}for(var e,t=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],a=t.length,n=window.console=window.console||{};a--;)n[e=t[a]]||(n[e]=b);"none"in window||(window.none=""),"noop"in window||(window.noop=function(){})}(),function(){var e=this,Y=function(e){return e instanceof Y?e:this instanceof Y?void 0:new Y(e)};e.spa=e.__=e._$=Y,Y.VERSION="2.75.0-RC6";var t=Object.prototype.toString.call(window.app).slice(8,-1).toLowerCase();window.app&&/^html(.*)element$/i.test(t)&&(window.app={api:{}}),window.app=window.app||{api:{}},window.app.api=window.app.api||{};var ee,n,a=function(){try{var e=navigator.userAgent,t=e.indexOf("MSIE ");if(0<t)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(0<e.indexOf("Trident/")){var a=e.indexOf("rv:");return parseInt(e.substring(a+3,e.indexOf(".",a)),10)}}catch(e){}return 0}();function _sanitizeHTML(e){var t=document.createElement("div");return t.textContent=e,t.innerHTML}function _sanitizeScript(e){return(""+e).replace(/<\s*\/+\s*(\bscript\b)/gi,"&lt;/script&gt;</pre").replace(/<\s*(\bscript\b)/gi,"<pre>&lt;script")}function _sanitizeXSS(e){return _sanitizeScript(e).replace(/\s+on([a-z])\s*=/gi," on=").replace(/javascript:/gi,"js:")}function getMatchStr(e){switch(e){case"{":return"}";case"[":return"]";case"<":return">";default:return e}}function _isValidEvalStr(e){if(!Y.jsonDataSanityCheck)return!0;var t=e.indexOf("(");return!(0<=t&&e.indexOf(")",t)>t)||(console.warn("Insecured String with braces():",e),!1)}function __finalValue(e,t){var a=e,n=t,r=Array.prototype.slice.call(arguments,2);return _is(a,"string")&&(0<a.indexOf("(")&&(a=a.getLeftStr("(")),a=Y.findSafe(window,a.trim(),void 0)),_is(a,"function")&&1<arguments.length&&(a=a.apply(n,r)),a}function _initKeyTracking(){var e=arguments.length&&arguments[0]?arguments[0]:"[data-disable-keys],[data-focus-next],[data-focus-back]",t=$(2==arguments.length&&arguments[1]?arguments[1]:"body").find(e);Y.console.info("Finding Key-Tracking for element(s): "+e),t.each(function(e,t){$(t).keydown(Y._trackAndControlKey),Y.console.info("SPA is tracking keys on element:"),Y.console.info(t)})}Y.isIE=document.documentMode||a,Y.isNonIE=!Y.isIE,Y.noop=function(){},Y.debug=!1,Y.debugger={on:function(){Y.debug=!0},off:function(){Y.debug=!1},toggle:function(){Y.debug=!Y.debug}},Y.cOut=function(e,t){Y.debug&&console[e]&&console[e](1===t.length?t[0]:t)},Y.console={clear:function(){console.clear()},assert:function(){Y.cOut("assert",arguments)},count:function(){Y.cOut("count",arguments)},debug:function(){Y.cOut("debug",arguments)},dir:function(){Y.cOut("dir",arguments)},dirxml:function(){Y.cOut("dirxml",arguments)},error:function(){Y.cOut("error",arguments)},exception:function(){Y.cOut("exception",arguments)},group:function(){Y.cOut("group",arguments)},groupCollapsed:function(){Y.cOut("groupCollapsed",arguments)},groupEnd:function(){Y.cOut("groupEnd",arguments)},info:function(){Y.cOut("info",arguments)},log:function(){Y.cOut("log",arguments)},markTimeline:function(){Y.cOut("markTimeline",arguments)},profile:function(){Y.cOut("profile",arguments)},profileEnd:function(){Y.cOut("profileEnd",arguments)},table:function(){Y.cOut("table",arguments)},time:function(){Y.cOut("time",arguments)},timeEnd:function(){Y.cOut("timeEnd",arguments)},timeStamp:function(){Y.cOut("timeStamp",arguments)},trace:function(){Y.cOut("trace",arguments)},warn:function(){Y.cOut("warn",arguments)}},Y.ajaxPreProcess,Y.onInit,Y.onInitComplete,Y.onReady,Y.onUrlChange,Y.onUrlHashChange,Y.onReload,Date.prototype.yyyymmdd=function(e){var t=this.getMonth()+1,a=this.getDate();return[this.getFullYear(),(9<t?"":"0")+t,(9<a?"":"0")+a].join(e||"")},Date.prototype.hhmmss=function(e){var t=this.getHours(),a=this.getMinutes(),n=this.getSeconds();return[(9<t?"":"0")+t,(9<a?"":"0")+a,(9<n?"":"0")+n].join(e||"")},String.prototype.trimLeftStr=function(e){return(""+this).replace(new RegExp("^["+(e||"\\s")+"]+","g"),"")},String.prototype.trimRightStr=function(e){return(""+this).replace(new RegExp("["+(e||"\\s")+"]+$","g"),"")},String.prototype.trimStr=function(e){return(""+this).trimLeftStr(e).trimRightStr(e)},String.prototype.getLeftStr=function(e){return"string"==typeof e&&(e=(""+this).indexOf(e)),e?(""+this).substr(0,e):""},String.prototype.getRightStr=function(e){var t=1;return"string"==typeof e&&(t=e.length,e=(""+this).indexOf(e)),e<0?"":(""+this).substr(e+t)},String.prototype.isBlankStr=function(){return""==(""+this).trimStr()},String.prototype.ifBlankStr=function(e,t){return e=void 0===e?"":e,t=void 0===t?(""+this).trimStr():t,(""+this).isBlankStr()?e:t},String.prototype.isNumberStr=function(){var e=(""+this).trim(),t=e.replace(/[0-9]/g,"").replace(".","").trimStr(),a=e[0];return e&&(0==t.length||1==t.length&&("+"==a||"-"==a))},String.prototype.normalizeStr=function(){return(""+this).trimStr().replace(/\s+/g," ")},String.prototype.beginsWithStr=function(e,t){t=t?"i":"";var a=new RegExp("^"+e,t);return!!(""+this).normalizeStr().match(a)},String.prototype.beginsWithStrIgnoreCase=function(e){var t=new RegExp("^"+e,"i");return!!(""+this).normalizeStr().match(t)},String.prototype.endsWithStr=function(e,t){t=t?"i":"";var a=new RegExp(e+"$",t);return!!(""+this).normalizeStr().match(a)},String.prototype.endsWithStrIgnoreCase=function(e){var t=new RegExp(e+"$","i");return!!(""+this).normalizeStr().match(t)},String.prototype.containsStr=function(e,t){return t=t?"gi":"g",new RegExp(""+e,t).test(""+this)},String.prototype.containsStrIgnoreCase=function(e){return new RegExp(""+e,"gi").test(""+this)},String.prototype.equals=function(e){return""+this==e},String.prototype.equalsIgnoreCase=function(e){return String((""+this).toLowerCase())==String(e).toLowerCase()},String.prototype.toProperCase=function(e){return(void 0===e||e?(""+this).normalizeStr():""+this).toLowerCase().replace(/^(.)|\s(.)/g,function(e){return e.toUpperCase()})},String.prototype.toTitleCase=function(e){return(void 0===e||e?(""+this).normalizeStr():""+this).toLowerCase().replace(/^(.)|\s(.)/g,function(e){return e.toUpperCase()})},String.prototype.capitalize=function(){return(""+this).charAt(0).toUpperCase()+(""+this).slice(1)},String.prototype.unCapitalize=function(){return(""+this).charAt(0).toLowerCase()+(""+this).slice(1)},String.prototype.sanitizeHTML=function(){return _sanitizeHTML(""+this)},Y.sanitizeHTML=_sanitizeHTML,String.prototype.sanitizeScript=function(){return _sanitizeScript(""+this)},Y.sanitizeScript=_sanitizeScript,String.prototype.sanitizeXSS=function(){return _sanitizeXSS(""+this)},Y.sanitizeXSS=_sanitizeXSS,String.prototype.splitToArray=String.prototype.toArray=function(e){return Y.isBlank(""+this)?[]:(""+this).split(e)},String.prototype.extractStrBetweenIn=function(e,t,a){e=e||((e=(""+this).match(/[^a-z0-9\:\.\/\\]/i))?e[0]:""),t=t||getMatchStr(e);var n=(""+this).match(RegExp("\\"+e+"([^\\"+e+"\\"+t+"].*?)\\"+t,"g"))||[];return a&&!Y.isBlank(n)&&(n=n.__unique()),n},String.prototype.extractStrBetweenEx=function(e,t,a){var n="\\"+(e=e||((e=(""+this).match(/[^a-z0-9\:\.\/\\]/i))?e[0]:""))+"\\"+(t=t||getMatchStr(e)),r=new RegExp("["+n+"]","g"),i=((""+this).match(new RegExp("\\"+e+"([^"+n+"].*?)\\"+t,"g"))||[]).map(function(e){return e.replace(r,"")});return a&&!Y.isBlank(i)&&(i=i.__unique()),i},Y.strToNative=function(e){var t=e.trim();switch(!0){case function isNumeric(){var e=t.replace(/[0-9]/g,"");return!!t.length&&(!e.length||("-"==e||"+"==e||"."==e))}():return 1*t;case function isBoolean(){return"true"==t||"false"==t}():return"true"==t;case function isObject(){return"{"==t[0]&&"}"==t[t.length-1]}():return t.toJSON();case function isArray(){return"["==t[0]&&"]"==t[t.length-1]}():return("{xArr:"+t+"}").toJSON().xArr;default:return e}},String.prototype.toNative=function(){return Y.strToNative(""+this)},Y.extractStrBetweenIn=function(e,t,a,n){return(e||"").extractStrBetweenIn(t,a,n)},Y.extractStrBetweenEx=function(e,t,a,n){return(e||"").extractStrBetweenEx(t,a,n)},Y.strToArray=function(e){return"string"==typeof e&&(e=[e]),e},Y.jsonDataSanityCheck,Y.toJSON=function(t,e){var a;if(_.isString(t)){if(!_isValidEvalStr(a=t.trimStr().trimStr(",").trimStr(";")))return t;if(a.match(/^\</))return t;if(!(a.containsStr("{")||a.containsStr(":")||a.containsStr("\\[")||a.containsStr("'")||a.containsStr('"'))){if(a.containsStr(",")||a.containsStr(";"))return a.replace(/ /g,"").replace(/;/g,",").split(",");if(!e)return Y.strToNative(a);a="{"+e+":"+a+"}"}a.containsStr(":")&&!a.containsStr(",")&&a.containsStr(";")&&(a=a.replace(/\;/g,",")),a.beginsWithStr("{")||a.beginsWithStr("\\[")?a.beginsWithStr("{")&&!a.containsStr(":")&&a.containsStr("=")&&(a=""+a.replace(/=/g,":")):a=a.containsStr(":")?"{"+a+"}":a.containsStr("=")?"{"+a.replace(/=/g,":")+"}":"["+a+"]",!a.beginsWithStr("{")&&e&&(a="{"+e+":"+a+"}")}var n={};try{n=!_.isString(t)&&_.isObject(t)?t:Y.isBlank(t)?null:Function('"use strict";return ('+a+")")()}catch(e){console.error('Error JSON Parse: Invalid String >> "'+t+'"\n>> '+e.stack.substring(0,e.stack.indexOf("\n")))}return n},String.prototype.toJSON=function(){return Y.toJSON(""+this)},String.prototype.toBoolean=function(){var e=!0;switch((""+this).trimStr().toLowerCase()){case"":case"0":case"-0":case"nan":case"null":case"false":case"undefined":e=!1}return e=e&&!(""+this).trimStr().beginsWithStr("-")},Boolean.prototype.toValue=function(e,t){return void 0===e&&(e=!0),void 0===t&&(t=!1),(""+this).valueOf()?e:t},Boolean.prototype.toHtml=function(e,t){return $((""+this).valueOf()?e:t).html()},String.prototype.padStr=function(e,t,a){e=e||"",t=t||1,a=a||2;for(var n="",r=0;r<t;r++)n+=e;return(-1===a||2===a?n:"")+""+this+(1===a||2===a?n:"")},Y.lastSplitResult=[],Y.getOnSplit=Y.pickOnSplit=function(e,t,a){return Y.lastSplitResult=e.split(t),Y.getOnLastSplit(a)},Y.getOnLastSplit=Y.pickOnLastSplit=function(e){return e<0?_.last(Y.lastSplitResult):Y.lastSplitResult[e]},Y.isBlank=Y.isEmpty=function(e){var t=!0;if(null!=e)switch(!0){case _.isString(e):t=0==e.trimStr().length;break;case _.isFunction(e):t=!1;break;case _.isArray(e):case _.isObject(e):t=_.isEmpty(e);break;default:t=0==(""+e).trimStr().length}return t},Y.isNumber=function(e){return(""+e).isNumberStr()},Y.toBoolean=function(e){var t=!0;switch((""+e).trimStr().toLowerCase()){case"":case"0":case"-0":case"nan":case"null":case"false":case"undefined":t=!1}return t},Y.toInt=function(e){return e=(""+e).replace(/[^+-0123456789.]/g,""),e=Y.isBlank(e)?"0":0<=e.indexOf(".")?e.substring(0,e.indexOf(".")):e,parseInt(1*e,10)},Y.toFloat=function(e){return e=(""+e).replace(/[^+-0123456789.]/g,""),e=Y.isBlank(e)?"0":e,parseFloat(1*e)},Y.toString=function(e){Y.console.warn("spa.toString is deprecated. use spa.toStr instead.");var t=""+e;return _.isObject(e)&&(t=JSON.stringify(e)),t},Y.toStr=function(e){var t=""+e;return _.isObject(e)&&(t=JSON.stringify(e)),t},Y.dotToX=function(e,t){return e.replace(/\./g,t)},Y.dotToCamelCase=function(e){var t=e.replace(/\./g," ").toProperCase().replace(/ /g,"");return t[0].toLowerCase()+t.substring(1)},Y.dotToTitleCase=function(e){return e.replace(/\./g," ").toProperCase().replace(/ /g,"")},Y.toDottedPath=function(e){return(e||"").trim().replace(/]/g,"").replace(/(\[)|(\\)|(\/)/g,".").replace(/(\.+)/g,".").trimStr("\\.")},Y.ifBlank=Y.ifEmpty=Y.ifNull=function(e,t,a){return t=(""+(t||"")).trimStr(),a=void 0===a?(""+e).trimStr():a,Y.isBlank(e)?t:a},Y.now=function(){return""+(new Date).getTime()},Y.year=function(e){return e=e||0,(new Date).getFullYear()+Y.toInt(e)},Y.sizeOf=function _sizeOf(e,t){var n=0;function sizeOf(e){if(null!=e)switch(typeof e){case"number":n+=8;break;case"string":n+=2*e.length;break;case"boolean":n+=4;break;case"object":var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t||"Array"===t)for(var a in e)e.hasOwnProperty(a)&&(n+=2*a.length,sizeOf(e[a]));else n+=2*e.toString().length}return n}return Y.is(t,"undefined")||t?function formatByteSize(e){return e<1024?e+" B":e<1048576?(e/1024).toFixed(3)+" KB":e<1073741824?(e/1048576).toFixed(3)+" MB":(e/1073741824).toFixed(3)+" GB"}(sizeOf(e)):sizeOf(e)},Y.range=function(e){var t=e.toUpperCase().split(".."),a=""+t[0],n=""+t[1],r="1";0<n.indexOf(":")&&(n=""+t[1].split(":")[0],r=""+t[1].split(":")[1]),0<=a.indexOf("Y")&&(a=Y.year(a.split(/[^0-9+-]/)[1])),0<=n.indexOf("Y")&&(n=Y.year(n.split(/[^0-9+-]/)[1]));var i=Y.toInt(a),o=Y.toInt(n),s=Y.toInt(r);return n<a?_.range(o,i+1,s).reverse():_.range(i,o+1,s)},Y.checkAndPreventKey=function(e,t){var a=0<=(t=t||"").indexOf("+shift"),n=""+e.keyCode,r=0<=t.padStr(",").indexOf(n.padStr(","))&&(a?!!e.shiftKey:!e.shiftKey);return r&&(e.preventDefault(),Y.console.info("Key ["+n+(a?"+Shift":"")+"] has been disabled in this element.")),r},Y._trackAndControlKey=function(e){var t=e.currentTarget,a=$(t),n=(""+a.data("disableKeys")).toLowerCase();Y.checkAndPreventKey(e,n);var r=!Y.isBlank((""+a.data("focusNext")).replace(/undefined/,"").toLowerCase()),i=!Y.isBlank((""+a.data("focusBack")).replace(/undefined/,"").toLowerCase());r&&Y.checkAndPreventKey(e,"9")&&$(a.data("focusNext")).get(0).focus(),i&&Y.checkAndPreventKey(e,"9,+shift")&&$(a.data("focusBack")).get(0).focus()},Y.initKeyTracking=_initKeyTracking,Y.getDocObj=function(e){var t="object"==typeof e?e:(e.beginsWithStr("#")?"":"#")+e;return $(t).get(0)},Y.getDocObjs=function(e){var t=(e.beginsWithStr("#")?"":"#")+e;return $(t).get()},Y.hasCssRule=function(e){var t=!1;if(e){e=e.split(",");for(var a=0;a<document.styleSheets.length;a++){var n=document.styleSheets[a].rules||document.styleSheets[a].cssRules;if(t)break;for(var r in n)if(t=t||"string"==typeof n[r].selectorText&&0<=e.indexOf(n[r].selectorText))break}}return t},Y.getCssRule=function(e){var t,a;if(e)for(var n=0;n<document.styleSheets.length;n++){var r=document.styleSheets[n].rules||document.styleSheets[n].cssRules;if(t)break;for(var i in r)if(t=t||"string"==typeof r[i].selectorText&&e==r[i].selectorText){a=r[i];break}}return a},Y.setFocus=function(e,t){var a=Y.getDocObj(e);a&&(a.focus(),t&&a.select())},Y.isElementExist=function(e){return!$.isEmptyObject($(e).get())},Y.swapClass=Y.swapObjClass=function(e,t,a){$(e).removeClass(t),$(e).addClass(a)},Y.docObjValue=function(e,t){var a=Y.getDocObj(e),n="";return a&&(n=a.value,2===arguments.length&&(a.value=t)),n},Y.optionSelectedIndex=function(e,t){var a=-1,n=Y.getDocObj(e);return n&&(a=n.selectedIndex,2===arguments.length&&(n.selectedIndex=t)),a},Y.optionIndexOfValue=function(e,t){var a=-1,n=Y.getDocObj(e);if(n)for(var r=0;r<n.length;r++)if((""+t).equalsIgnoreCase(n.options[r].value)){a=r;break}return a},Y.optionIndexOfText=function(e,t){var a=-1,n=Y.getDocObj(e);if(n)for(var r=0;r<n.length;r++)if(t.equalsIgnoreCase(n.options[r].text)){a=r;break}return a},Y.optionIndexOfValueBeginsWith=function(e,t){var a=-1,n=Y.getDocObj(e);if(n)for(var r=0;r<n.length;r++)if(n.options[r].value.beginsWithStrIgnoreCase(t)){a=r;break}return a},Y.optionsSelectedValues=function(e,t){return e=(e.beginsWithStr("#")?"":"#")+e,t=t||",",$.map($(e+" option:selected"),function(e){return e.value}).join(t)},Y.optionsSelectedTexts=function(e,t){return e=(e.beginsWithStr("#")?"":"#")+e,t=t||",",$.map($(e+" option:selected"),function(e){return e.text}).join(t)},Y.optionValueOfIndex=function(e,t){var a="",n=Y.getDocObj(e);return n&&0<=t&&t<n.length&&(a=n.options[t].value),a},Y.optionTextOfIndex=function(e,t){var a="",n=Y.getDocObj(e);return n&&0<=t&&t<n.length&&(a=n.options[t].text),a},Y.selectOptionForValue=function(e,t){var a=-1,n=Y.getDocObj(e);return n&&(a=Y.optionIndexOfValue(e,t),n.selectedIndex=a),a},Y.selectOptionForValueBeginsWith=function(e,t){var a=-1,n=Y.getDocObj(e);return n&&(a=Y.optionIndexOfValueBeginsWith(e,t),n.selectedIndex=a),a},Y.selectOptionsForValues=function(e,t,a){t=((a=a||",")+t+a).toLowerCase();var n,r=Y.getDocObj(e);if(r)for(var i=0;i<r.length;i++)n=(a+r.options[i].value+a).toLowerCase(),r.options[i].selected=0<=t.indexOf(n)},Y.selectOptionForText=function(e,t){var a=-1,n=Y.getDocObj(e);return n&&(a=Y.optionIndexOfText(e,t),n.selectedIndex=a),a},Y.selectOptionsAll=function(e){var t=Y.getDocObj(e);if(t)for(var a=0;a<t.length;a++)t.options[a].selected=!0},Y.selectOptionsNone=function(e){var t=Y.getDocObj(e);if(t)for(var a=0;a<t.length;a++)t.options[a].selected=!1},Y.optionsReduceToLength=function(e,t){t=t||0;var a=Y.getDocObj(e);a&&(Y.selectOptionsNone(e),a.length=t)},Y.optionsRemoveAll=function(e){Y.optionsReduceToLength(e,0)},Y.optionRemoveForIndex=function(e,t){e=(e.beginsWithStr("#")?"":"#")+e;var a=Y.getDocObj(e);a&&((""+t).equalsIgnoreCase("first")&&(t=0),(""+t).equalsIgnoreCase("last")&&(t=a.length-1),a.remove(t))},Y.optionRemoveForValue=function(e,t){Y.optionRemoveForIndex(e,Y.optionIndexOfValue(e,t))},Y.optionRemoveForText=function(e,t){Y.optionRemoveForIndex(e,Y.optionIndexOfText(e,t))},Y.optionRemoveForValueBeginsWith=function(e,t){Y.optionRemoveForIndex(e,Y.optionIndexOfValueBeginsWith(e,t))},Y.optionAppend=function(e,t,a,n){var r=-1,i=Y.getDocObj(e);if(i)if(void 0===n){var o=i.length;i.length=o+1,i.options[o].value=t,i.options[o].text=a,r=o}else $(i).find("option").eq(n).before('<option value="'+t+'">'+a+"</option>"),r=n;return r},Y.optionsLoad=function(a,e,t,n){if(t=t||0,n=n||0,_.isString(e)&&0<e.indexOf("..")&&(e=Y.range(e)),0<=t&&Y.optionsReduceToLength(a,t),_.isArray(e))_.each(e,function(e){Y.optionAppend(a,e,e)});else if(0<n){var r=[];for(var i in e)r.push({key:i,value:e[i]});var o=_.sortBy(r,["","key","value"][n]);_.each(o,function(e){Y.optionAppend(a,e.key,e.value)})}else _.each(e,function(e,t){Y.optionAppend(a,t,e)})},Y.checkedState=function(e,t){var a=!1,n=Y.getDocObj(e);return n&&(a=n.checked,2===arguments.length&&(n.checked=t)),a},Y.isChecked=function(e,t){return 0<$(e).find("input[name="+t+"]:checked").length},Y.radioSelectedValue=function(e,t){var a=$(e).find("input[name="+t+"]:checked").val();return a||""},Y.radioClearSelection=function(e,t){$(e).find("input[name="+t+"]:checked").attr("checked",!1)},Y.radioSelectForValue=function(e,t,a){$(e).find("input[name="+t+"]:radio").each(function(e){e.checked=e.value.equalsIgnoreCase(a)})},Y.checkboxCheckedValues=function(e,t,a){return a=a||",",$(e).find("input[name="+t+"]:checked").map(function(){return this.value}).get().join(a)},Y.sleep=function(e){var t=new Date;for(t.setTime(t.getTime()+1e3*e);(new Date).getTime()<t.getTime(););},Y.filterJSON=function(e,n){return $(e).filter(function(e,t){for(var a in n)if(!t[a].toString().match(n[a]))return null;return t})},Y.randomPassword=function(e,t){for(var a=t||"9a8b77C8D9E8dkfhseidF7G6H5QJ3c6d5e4f32L3M4N5P6Qg2h3i4j5kV6W5X4Y3Z26m7n8p9q8r7s6t5u4v3w2x3y4z5A6BK7R8S9T8U7",n="",r=0;r<(e||8);r++){var i=Math.floor(Math.random()*a.length);n+=a.charAt(i)}return n},Y.rand=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},Y.htmlEncode=function(e){return $("<div/>").text(e).html()},Y.htmlDecode=function(e){return $("<div/>").html(e).text()},Y.appendToObj=function(e,t,a){_.has(e,t)?(_.isArray(e[t])||(e[t]=[e[t]]),e[t].push(a)):e[t]=a},Y.parseKeyStr=function(e,t){return(t?e.toLowerCase():e).replace(/[^_0-9A-Za-z\$\[\]\?\*\-]/g,"")};var u={};function _$qrySelector(e){if(Y.is(e,"string")){var t,a,n=e.trim().split(" "),r=n[0];/app\.(.+)\./.test(r)?(t=r.split(".")[1],n[0]=n[0].replace("app."+t+".",'[data-rendered-component="'+r.split(".")[1]+'"] '),e=n.join(" ")):r.beginsWithStr("\\$")&&(0<(t=r.substr(1)).indexOf(":")?(a=Y.toInt(t.getRightStr(":").trim()),t=t.getLeftStr(":"),n[0]='[data-rendered-component="'+t+'"]:eq('+a+")"):n[0]='[data-rendered-component="'+t+'"]',e=n.join(" "))}return e}function _toQueryString(n){return _.isObject(n)?Object.keys(n).reduce(function(e,t,a){return[e,0===a?"":"&",t=encodeURIComponent(t),"=",_.isArray(n[t])?n[t].map(function(e){return encodeURIComponent(e)}).join(","):encodeURIComponent(n[t])].join("")},""):""}function _is(e,t){return 0<=(""+t).toLowerCase().indexOf(of(e))}function _isObjHasKeys(e,t,l){function checkForAll(e,t){for(var a,n=t.split(","),r="",i=0,o=!0,s=0;s<n.length;s++)(r=n[s].trim())&&(i++,a=l&&(0<r.indexOf(".")||0<r.indexOf("["))?Y.hasKey(e,r):e.hasOwnProperty(r),o=o&&a);return i&&o}var a=!1;if(is(e,"object")&&t)switch(!0){case 0<(t=""+t).indexOf("&"):a=checkForAll(e,t.replace(/\&/g,","));break;case 0<t.indexOf("|"):a=function checkForAny(e,t){for(var a,n=t.split(","),r="",i=0,o=!1,s=0;s<n.length&&((r=n[s].trim())&&(i++,a=l&&(0<r.indexOf(".")||0<r.indexOf("["))?Y.hasKey(e,r):e.hasOwnProperty(r),o=o||a),!o);s++);return i&&o}(e,t.replace(/\|/g,","));break;default:a=checkForAll(e,t)}return a}function _getFullPath4Component(e,t){var a=e;if(t=(t||"").replace(/[^a-z0-9]/gi,"/"),0<=".{$".indexOf(e[0])){var n=e.split("/"),r=n[0].replace(/[\{\}]/g,""),i="$"==r||"."==r?t:r.replace(/[\{\$\}]/,""),o=Y.defaults.components.inFolder?i+"/":"";n[0]=(Y.defaults.components.rootPath+o).trimRightStr("/"),a=n.join("/")}return a}Y.setObjProperty=function(e,t,a,n){n=n||!1;var r,i,o,s,l=e,c=0<=(t=""+t).indexOf(".")||t==t.toUpperCase()?t.split("."):t.split(/(?=[A-Z])/),d=$.trim(t.replace(/[0-9A-Za-z\[\]\?\*\_]/g,""));d&&""!=d&&(c=t.split(d[0]));for(var p="";1<c.length;)r=Y.parseKeyStr(c.shift(),n),""!=$.trim(r)&&(p+=r.replace(/[\?\[\]\*\_]/g,""),l=0<r.indexOf("[")&&r.indexOf("]")==r.length-1?(o=(i=r.substring(0,r.length-1).replace(/\[/g,".").split("."))[0],s=i[1],void 0===l[o]&&(l[o]=[]),s.replace(/[0-9]/g,"")&&(s=s.replace(/[^0-9]/g,""),u.hasOwnProperty(p)?s=u[p]:void 0===l[o][s]&&(u[p]=l[o].length,s=l[o].length)),void 0===l[o][s]&&(l[o][s]={}),l[o][s]):(void 0===l[r]&&(l[r]={}),l[r]));return r=Y.parseKeyStr(c.shift(),n),Y.appendToObj(l,r,a),e},Y.setSimpleObjProperty=function(e,t,a){for(var n,r=e,i=(t=""+t).split(".");1<i.length;)n=Y.parseKeyStr(i.shift(),!1),""!=$.trim(n)&&(void 0===r[n]&&(r[n]={}),r=r[n]);return r[n=Y.parseKeyStr(i.shift(),!1)]=a,e},Y.objProp=Y.objProperty=Y.objectProp=Y.objectProperty=function(){var e=arguments[0],t=arguments[1],a=arguments[2];return 3==arguments.length?Y.setSimpleObjProperty(e,t,a):2==arguments.length?Y.findSafe(e,t):e},Y.extract=function _extract(){var e=Array.prototype.slice.call(arguments);try{Y.is(e[0],"object")||e.unshift({}),Y.is(e[1],"string")&&(e[1]=e[1].split(","))}catch(e){console.error("Invalid arguments",e)}if(Y.is(e[0],"object")&&Y.is(e[1],"array")){var a,n,r,i,o,s,l=e[0],t=e[1],c=e.slice(2);return c.unshift(window),_.each(t,function(e){if(e=(e||"").trim(),!(o=!(e&&"@0"!=e))&&(/^\@([0-9])+/.test(e)&&((i=n=(e.getRightStr(".")||"").trim())?e=i+":"+e:(_.merge(l,c[Y.toInt(e)]),o=!0)),!o)){if(a=e.split(":"),n=(a[0]||"").trim(),r=Y.toInt((a[1]||"").split(".")[0]),i=((a[1]||"").getRightStr(".")||"").trim(),n=n||i,s=i?Y.findSafe(c[r],i):r?c[r]:{},n.endsWithStr("\\+")){n=n.trimRightStr("+");var t=Y.findSafe(l,n);switch(Y.of(t)){case"object":Y.is(s,"object")&&(s=_.merge({},t,s));break;case"array":s=Y.is(s,"array")?t.concat(s):t.push(s)}}Y.setSimpleObjProperty(l,n,s)}}),l}console.error("Invalid arguments.")},Y.setElValue=function(e,t){var a=$(_$qrySelector(e));switch((e=a.get(0)).tagName.toUpperCase()){case"INPUT":switch(e.type.toLowerCase()){case"text":case"password":case"hidden":case"color":case"date":case"datetime":case"datetime-local":case"email":case"month":case"number":case"search":case"tel":case"time":case"url":case"range":case"button":case"submit":case"reset":a.val(t),a.isEnabled()&&a.trigger("keyup");break;case"checkbox":case"radio":e.checked=e.value.equalsIgnoreCase(t),e.checked&&a.isEnabled()&&a.trigger("click")}break;case"SELECT":Y.selectOptionForValue(e,t),a.isEnabled()&&a.trigger("change");break;case"TEXTAREA":a.val(t),a.isEnabled()&&a.trigger("keyup");break;default:a.html(Y.sanitizeXSS(t)),a.val(t),a.isEnabled()&&a.trigger("keyup")}},Y.getElValue=function(e,t){if(e=$(_$qrySelector(e)).get(0)){var a,n,r;switch(e.tagName.toUpperCase()){case"INPUT":switch(e.type.toLowerCase()){case"checkbox":n=$(e).data("unchecked"),r="true"==e.value||"false"!=e.value&&e.value,a=e.checked?r:void 0===n?"":n;break;case"radio":a=e.checked?e.value:"";break;default:a=$(e).val()}break;case"SELECT":a=$.map($(e).find("option:selected"),function(e){return e.value}).join(",");break;case"TEXTAREA":a=$(e).val();break;default:a=t?$(e).text():$(e).html()}return a}},Y.serialize=function(e,t,a){_.isBoolean(e)&&(a=e,e=""),_.isBoolean(t)&&(a=t,t=""),e=e||"body";var n,r,i,o,s={},l=t?'[data-serialize-context*="'+t+'"]':"";return $(e).find("[data-serialize]"+l+",input[name]"+l+",select[name]"+l+",textarea[name]"+l).each(function(e,t){i=$(t).data(),n=t.name||i.serialize,o=i.serializeType?i.serializeType.equalsIgnoreCase("text"):a,r=Y.getElValue(t,o),s.hasOwnProperty(n)?Y.isBlank(r)||(Y.isBlank(s[n])?s[n]=r:_.isArray(s[n])?s[n].push(r):s[n]=[s[n],r]):s[n]=r}),s},Y.serializeToQueryString=function(e,t){return Y.toQueryString(Y.serialize(e,t))},Y.serializeDisabled=function(e){var t="";return $(e).find("[disabled][name]").each(function(){t+=(t?"&":"")+$(this).attr("name")+"="+Y.getElValue(this)}),t},Y.serializeForms=function(e,t){var a,n,r=$(e).serialize();return $(e).find("input[data-unchecked]:checkbox:enabled:not(:checked)[name]").each(function(){n=$(this).data("unchecked"),r+=(r?"&":"")+$(this).attr("name")+"="+(void 0===n?"":n)}),t&&(a=Y.serializeDisabled(e),r+=(r&&a?"&":"")+a),r},Y.queryStringToJson=Y.queryStringToObject=function(e){var t={},a=e||location.search,n=(""+a).indexOf("?"),r=(""+a).indexOf("&");return a&&0<a.length&&0<=n&&(0==n||n<r)&&(a=a.substring(n+1)),_.each(a.split("&"),function(e){(e=e.split("="))[0]&&Y.appendToObj(t,e[0],decodeURIComponent(e[1]||""))}),t},Y.toQueryString=Y.ObjectToQueryString=Y.objectToQueryString=Y.JsonToQueryString=Y.jsonToQueryString=_toQueryString,$.fn.serializeUncheckedCheckboxes=function(e){var a,n,r,i,o="object"==typeof e,s=o?e:{},l=o&&!e?"":e;return $(this).find("input[data-unchecked]:checkbox:enabled:not(:checked)[name]").each(function(e,t){a=$(t),r=a.attr("name"),n=a.data("unchecked"),i=void 0===n?"":n,o?Y.appendToObj(s,r,i):l+=(l?"&":"")+r+"="+i}),o?s:l},Y.serializeUncheckedCheckboxes=function(e,t){return $(e).serializeUncheckedCheckboxes(t)},$.fn.serializeFormToJSON=$.fn.serializeFormToObject=function(e,t,a){var n,r,i=this.serializeArray(),o=$(this).data(),s="object"==typeof e?e:{},l="boolean"==typeof e?e:t||!1,c=o.serializeIgnorePrefix,d=o.hasOwnProperty("typeNative");return u={},a&&(c=a),$.each(i,function(){n=c?this.name.replace(c,""):this.name,s=Y.setObjProperty(s,n,d?this.value.toNative():this.value,l)}),$(this).find("input[data-unchecked]:checkbox:enabled:not(:checked)[name]").each(function(){(n=$(this).attr("name"))&&(r=$(this).data("unchecked"),c&&(n=n.replace(c,"")),r=""+(void 0===r?"":r),s=Y.setObjProperty(s,n,d?r.toNative():r,l))}),s},Y.serializeFormToJSON=Y.serializeFormToObject=function(e,t,a,n){return $(e).serializeFormToJSON(t,a,n)},$.fn.serializeFormToSimpleJSON=$.fn.serializeFormToSimpleObject=function(e,t){var a,n,r,i,o=this.serializeArray(),s="object"==typeof e?e:{},l="boolean"==typeof e?e:t||!1;return $.each(o,function(){Y.appendToObj(s,this.name,this.value)}),l&&$(this).find("[disabled][name]").each(function(){Y.appendToObj(s,this.name,Y.getElValue(this))}),$(this).find("input[data-unchecked]:checkbox:enabled:not(:checked)[name]").each(function(){r=$(this).attr("name"),i=""+(void 0===(i=$(this).data("unchecked"))?"":i),Y.appendToObj(s,r,i)}),$(this).find("[data-to-json-group][name]").each(function(){a=this.name,(n=$(this).data("toJsonGroup"))&&(s[n]||(s[n]={}),Y.appendToObj(s[n],a,Y.getElValue(this)))}),s},Y.serializeFormToSimpleJSON=Y.serializeFormToSimpleObject=function(e,t,a){return $(e).serializeFormToSimpleJSON(t,a)},Y.findSafe=Y.findInObj=Y.findInObject=Y.locateSafe=Y.valueOfPath=Y.find=Y.locate=function(e,t,a){if(is(e,"window|array|object|function|global")&&t){var n=_.map(t.split("|"),function(e){return e.trim()});t=n.shift();var r,i=n.join("|");if(0<=t.indexOf("*"))r=function(e,t){var a;if("object"==typeof e||"function"==typeof e)if(e.hasOwnProperty(t))a=e[t];else for(var n=Object.keys(e),r=0;is(a,"undefined")&&r<n.length;)a=arguments.callee(e[n[r++]],t);return a}(e,t.replace(/\*/g,""));else{var o=0,s=Y.toDottedPath(t).split("."),l=s.length;for(r=e;o<l;o++)if(is(r,"object|window|function|global"))r=r[s[o].trim()];else{if(!is(r,"array")){r=void 0;break}r=r[Y.toInt(s[o])]}}return is(r,"undefined")?i?Y.findSafe(e,i,a):is(a,"function")?a.call(e,e,t):a:r}return 3==arguments.length?is(a,"function")?a.call(e,e,t):a:e},Y.has=Y.hasKey=function(e,t){var a=e,n=!1;try{n=!!_isValidEvalStr(t)&&void 0!==Y.find(a,t)}catch(e){console.warn("Key["+t+"] error in object.\n"+e.stack)}return n},Y.of=of=function _of(e){return Object.prototype.toString.call(e).replace(/\[object /,"").replace(/\]/,"").toLowerCase()},Y.is=is=_is,Y.hasPrimaryKeys=function _spa_hasPrimaryKeys(e,t){return _isObjHasKeys(e,t)},Y.hasKeys=function _spa_hasKeys(e,t){return _isObjHasKeys(e,t,!0)},Y.keysDottedAll=function(e){var t=Y.keysDotted(e);return t&&!_.isEmpty(t)&&(t=Y.toDottedPath(t.join(",")).split(",")),t},Y.keysDotted=function(e){var n,r,i,o=[];return function(e,t){if(t=t||"","object"!=typeof e)return;for(var a in e)i=t.substring(1),n=Y.isNumber(a)?"[":".",r=i&&"["==n?"]":"",arguments.callee(e[a],t+n+a+r)&&o.push(i+(i?n:"")+a+r)}(e=e||{}),o},Y.keysCamelCase=function(e){return _.map(Y.keysDotted(e),function(e){var t=e.replace(/\./g," ").toProperCase().replace(/ /g,"");return t[0].toLowerCase()+t.substring(1)})},Y.keysTitleCase=function(e){return _.map(Y.keysDotted(e),function(e){return e.replace(/\./g," ").toProperCase().replace(/ /g,"")})},Y.keys_=function(e){return _.map(Y.keysDotted(e),function(e){return e.replace(/\./g,"_")})},Object.defineProperties(Array.prototype,{__now:{value:function(){return JSON.parse(JSON.stringify(this))},enumerable:!1,configurable:!1},__clone:{value:function(){return JSON.parse(JSON.stringify(this))},enumerable:!1,configurable:!1},__toObject:{value:function(a){var n={};return this.forEach(function(e,t){a?n[e]=t:n[t]=e}),n},enumerable:!1,configurable:!1},__unique:{value:function(){return this.filter(function(e,t,a){return a.indexOf(e)===t})},enumerable:!1,configurable:!1},__rotate:{value:function(e){if(0<(e=e||1))for(;e--;)this.push(this.shift());else if(e<0)for(;e++;)this.unshift(this.pop());return this},enumerable:!1,configurable:!1},__isFirst:{value:function(e,t){var a=this[0];return t&&(a=a.toLowerCase(),e=e.toLowerCase()),a==e},enumerable:!1,configurable:!1},__isLast:{value:function(e,t){var a=this[this.length-1];return t&&(a=a.toLowerCase(),e=e.toLowerCase()),a==e},enumerable:!1,configurable:!1},__has:{value:function(e,t){var a;function optionsHas(e){return 0<=t.indexOf(e)}if(t=(t||"").trim()){t.indexOf("i")&&Y.is(e,"string")&&(e=e.toLowerCase());for(var n=0;n<this.length;n++){var r=this[n];switch(t.indexOf("i")&&Y.is(r,"string")&&(r=r.toLowerCase()),!0){case optionsHas("b"):case optionsHas("^"):a=optionsHas("~")?e.beginsWithStr(r):r.beginsWithStr(e);break;case optionsHas("e"):case optionsHas("$"):a=optionsHas("~")?e.endsWithStr(r):r.endsWithStr(e);break;case optionsHas("c"):case optionsHas("*"):a=optionsHas("~")?0<=e.indexOf(r):0<=r.indexOf(e);break;case optionsHas("<"):a=r<e;break;case optionsHas("<="):a=r<=e;break;case optionsHas(">"):a=e<r;break;case optionsHas(">="):a=e<=r;break;default:a=r==e}if(a)break}}else a=0<=this.indexOf(e);return a},enumerable:!1,configurable:!1}}),Object.defineProperties(Object.prototype,{__now:{value:function(){return JSON.parse(JSON.stringify(this))},enumerable:!1,configurable:!1},__clone:{value:function _obj_clone(){return JSON.parse(JSON.stringify(this))},enumerable:!1,configurable:!1},__keys:{value:function _obj_keys(e){return e?Y.keysDotted(this):Object.keys(this)},enumerable:!1,configurable:!1},__keysAll:{value:function _obj_keysAll(){return Y.keysDotted(this)},enumerable:!1,configurable:!1},__hasKey:{value:function _obj_hasKey(e){return Y.hasKey(this,e)},enumerable:!1,configurable:!1},__hasKeys:{value:function _obj_hasKeys(e){return _isObjHasKeys(this,e,!0)},enumerable:!1,configurable:!1},__hasPrimaryKeys:{value:function _obj_hasPrimaryKeys(e){return _isObjHasKeys(this,e)},enumerable:!1,configurable:!1},__valueOf:{value:function _obj_getValueOf(e,t){return Y.findSafe(this,e,t)},enumerable:!1,configurable:!1},__merge:{value:function _obj_merge(){return Array.prototype.unshift.call(arguments,this),_.merge.apply(void 0,arguments)},enumerable:!1,configurable:!1},__stringify:{value:function(){return JSON.stringify(this)},enumerable:!1,configurable:!1},__toQueryString:{value:function(){return Y.toQueryString(this)},enumerable:!1,configurable:!1},__extract:{value:function(){return Array.prototype.unshift.call(arguments,this),Y.extract.apply(this,arguments)},enumerable:!1,configurable:!1}}),$.ajaxSetup({converters:{"text javascript":function(){},"text spaComponent":function(){}},dataFilter:function(e,t){return"javascript"!==t&&"spaComponent"!==t||(function _ajaxScriptHandle(e){if(e.trim()){var t=document.createElement("script");t.setAttribute("id","js-"+Y.now()),Y.defaults.csp.nonce&&t.setAttribute("nonce",Y.defaults.csp.nonce),t.text=e,document.head.appendChild(t).parentNode.removeChild(t)}}(e),e=""),e}}),$.cachedScript=function(e,t){return Y.console.log("Ajax for script:",e,"options:",t),!(e=_getFullPath4Component(e,t?t.spaComponent:"")).endsWithStrIgnoreCase(".js")&&e.indexOf("?")<0&&(e+=Y.defaults.components.scriptExt),(t=t||{}).hasOwnProperty("cache")||(t.cache=!0),t.hasOwnProperty("dataType")||(t.dataType="javascript"),t=$.extend(t,{url:e}),Y.console.info("Loading Script('"+e+"') ..."),$.ajax(t)},$.cachedStyle=function(a,e,t){var n=$("#"+a,"head");return(t=t||{}).hasOwnProperty("cache")||(t.cache=!0),n.length||(t.cache=Y.defaults.components.offline),t=$.extend(t,{dataType:"text",url:e,success:function(e){n.remove();var t=Y.defaults.csp.nonce?' nonce="'+Y.defaults.csp.nonce+'"':"";$("head").append('<style id="'+a+'" type="text/css"'+t+">"+e+"</style>")}}),Y.console.info("Loading style('"+e+"') ... "),$.ajax(t)},Y.addScriptTag=function(e,t){if(e=e.replace(/#/,""),Y.console.group("spaAddScriptTag"),Y.isElementExist("#spaScriptsContainer")||(Y.console.info("#spaScriptsContainer NOT Found! Creating one..."),$("body").append("<div id='spaScriptsContainer' style='display:none' rel='Dynamic Scripts Container'></div>")),Y.isElementExist("#"+e))Y.console.info("script ["+e+"] already found in local.");else{Y.console.info("script ["+e+"] NOT found. Added script tag with src ["+t+"]");var a=t?' src="'+t+'"':"",n=Y.defaults.csp.nonce?' nonce="'+Y.defaults.csp.nonce+'"':"";$("#spaScriptsContainer").append('<script id="'+e+'" type="text/javascript"'+a+n+"><\/script>")}Y.console.groupEnd("spaAddScriptTag")},Y.addStyle=function(e,t){e=e.replace(/#/,""),Y.console.group("spaAddStyle"),Y.isElementExist("#spaStylesContainer")||(Y.console.info("#spaStylesContainer NOT Found! Creating one..."),$("body").append("<div id='spaStylesContainer' style='display:none' rel='Dynamic Styles Container'></div>")),Y.isElementExist("#"+e)?Y.console.info("style ["+e+"] already found in local."):(Y.console.info("style ["+e+"] NOT found. Added link tag with href ["+t+"]"),$("#spaStylesContainer").append("<link id='"+e+"' rel='stylesheet' type='text/css' href='"+t+"'/>")),Y.console.groupEnd("spaAddStyle")},Y.loadScript=function(a,n,e,t,r){return a=a.replace(/#/,""),e=e||!1,t=t||[],Y.console.group("spaScriptsLoad"),Y.isBlank(n)?Y.console.error("script path ["+n+"] for ["+a+"] NOT defined."):e?Y.addScriptTag(a,n):t.push($.cachedScript(n,r).done(function(e,t){Y.console.info("Loaded script ["+a+"] from ["+n+"]. STATUS: "+t)})),Y.console.groupEnd("spaScriptsLoad"),t},Y.getComponentsFullPath=function(e){return e=Y.strToArray(Y.toJSON(e)),_.map(e,function(e){return Y.defaults.components.rootPath+(Y.defaults.components.inFolder||/[^a-z0-9]/gi.test(e)?e:"")+"/"+function _getComponentFileName(e){if(/[^a-z0-9]/gi.test(e)){var t=e.split(/[^a-z0-9]/gi);return t[t.length-1]}return e}(e)+Y.defaults.components.scriptExt})},Y.loadComponents=function(e,t,a){var n=_.filter(Y.strToArray(Y.toJSON(e)),function(e){return!Y.components.hasOwnProperty(e.replace(/[^a-z0-9]/gi,"_"))}),r=Y.getComponentsFullPath(n);Y.loadScripts(r,t,a)},Y.loadScripts=function(e,t,a){if(e=Y.strToArray(Y.toJSON(e)),!Y.isBlank(e)){var n=[];_.each(e,function(a){n.push($.cachedScript(a).done(function(e,t){Y.console.info("Loaded script from ["+a+"]. STATUS: "+t)}).fail(function(){Y.console.info("Failed Loading script from ["+a+"].")}))}),$.when.apply($,n).then(function(){Y.renderUtils.runCallbackFn(t)}).fail(function(){Y.renderUtils.runCallbackFn(a)})}},Y.loadScriptsSync=function(e,t,a){if(e=Y.strToArray(Y.toJSON(e)),Y.isBlank(e))Y.renderUtils.runCallbackFn(t);else{var n=!0,r=e.shift();r?(/^~/.test(r)&&(n=!1,r=r.substr(1)),Y.console.info("Load script from   ["+r+"], cache:",n),$.cachedScript(r,{cache:n}).done(function(){Y.console.info("Loaded script from ["+r+"]"),Y.loadScriptsSync(e,t,a)}).fail(function(){console.error("Failed Loading script from ["+r+"].",arguments),Y.renderUtils.runCallbackFn(a)})):Y.loadScriptsSync(e,t,a)}},Y.loadStyle=function(a,n,e,t){if(a=a.replace(/#/,""),e=!!e,t=t||[],Y.console.group("spaStylesLoad"),Y.isBlank(n))Y.console.error("style path ["+n+"] for ["+a+"] NOT defined.");else{var r=!e;e&&($("#"+a,"head").length?Y.console.info("Style('"+n+"') already loaded."):r=!0),r&&t.push($.cachedStyle(a,n,{cache:Y.defaults.components.offline}).done(function(e,t){Y.console.info("Loaded style ["+a+"] from ["+n+"]. STATUS: "+t)}))}return Y.console.groupEnd("spaStylesLoad"),t},Y.addTemplateScript=function(e,t,a){e=e.replace(/#/,""),a=a||"x-template",Y.isElementExist("#spaViewTemplateContainer")||(Y.console.info("#spaViewTemplateContainer NOT Found! Creating one..."),$("body").append("<div id='spaViewTemplateContainer' style='display:none' rel='Template Container'></div>")),Y.console.info("Adding <script id='"+e+"' type='text/"+a+"'>");var n="_BlockedScript_";t=t.replace(/<(\s)*script/gi,"<"+n+' src-ref="'+e+'"').replace(/<(\s)*(\/)(\s)*script/gi,"</"+n).replace(/<(\s)*link/gi,"<_LINKTAGINTEMPLATE_").replace(/<(\s)*(\/)(\s)*link/gi,"</_LINKTAGINTEMPLATE_");var r=Y.defaults.csp.nonce?' nonce="'+Y.defaults.csp.nonce+'"':"";$("#spaViewTemplateContainer").append('<script id="'+e+'" type="text/'+a+'"'+r+">"+t+"<\/script>")},Y.updateTemplateScript=function(e,t,a){e=e.replace(/#/,"");var n=$("#spaViewTemplateContainer").find("#"+e);n.length&&n.remove(),Y.addTemplateScript(e,t,a)},Y.loadTemplate=function(n,r,i,e,t,a,o){if(n=n.replace(/#/g,""),r=r.ifBlankStr("inline").trimStr(),i=i||"x-template",e=e||"#DummyInlineTemplateContainer",t=t||[],o=o||{},Y.console.group("spaTemplateAjaxQue"),Y.isElementExist("#"+n)){var s=$("#"+n);if(a)Y.console.warn("Reload Template["+n+"] of ["+i+"]"),s.remove(),t=Y.loadTemplate(n,r,i,e,t,a,o);else if(Y.isBlank(s.html())){Y.console.warn("Template["+n+"] of ["+i+"] script found EMPTY!");var l=""+s.attr("path");Y.isBlank(l)||(i=(s.attr("type")||"").ifBlankStr(i).toLowerCase().replace(/text\//gi,""),Y.console.info("prepare/remove to re-load Template["+n+"]  of ["+i+"] from external path: ["+l+"]"),s.remove(),t=Y.loadTemplate(n,l,i,e,t,a,o))}else Y.console.info("Template["+n+"]  of ["+i+"] already found in local.")}else if(Y.console.info("Template["+n+"] of ["+i+"] NOT found. Source ["+r+"]"),r&&"undefined"==r)Y.addTemplateScript(n,"",i),Y.console.info("Loaded Empty Template["+n+"] of ["+i+"]");else if(r.equalsIgnoreCase("inline")||r.beginsWithStr("#")){var c=r.equalsIgnoreCase("inline")?e:r,d=$(c),p=d.html();Y.isBlank(p)?Y.console.error("Template["+n+"] of ["+i+"] NOT defined inline in ["+c+"]."):(Y.addTemplateScript(n,p,i),r.equalsIgnoreCase("inline")&&d.html(""))}else if(r.equalsIgnoreCase("none"))Y.console.warn("Template["+n+"] of ["+i+"] defined as NONE. Ignoring template.");else if(r.equalsIgnoreCase("script"))Y.console.error("Template["+n+"] of ["+i+"] NOT defined in <script>.");else{var u=String(o.method||"get").toLowerCase();o.params&&(r=Y.api.url(r,o.params)),Y.console.warn(">>>>>>>>>> Making New Template Request");var f=$.ajax({url:r,method:u,headers:o.headers,data:o.payload,cache:Y.defaults.components.offline,dataType:"html",onTmplError:o.onError,success:function(e){Y.addTemplateScript(n,e,i),Y.console.info("Loaded Template["+n+"] of ["+i+"] from ["+r+"]")},error:function(e,t,a){this.onTmplError&&_is(this.onTmplError,"function")&&this.onTmplError.call(this,e,t,a),Y.console.error("Failed Loading Template["+n+"] of ["+i+"] from ["+r+"]. ["+t+":"+a+"]")}});t.push(f)}return Y.console.groupEnd("spaTemplateAjaxQue"),t},Y.urlParams=function(e){e=(e=e||window.location.search||"").beginsWithStr("\\?")||e.indexOf("//")<7?e.substr(e.indexOf("?")+1):e;var n={};return e.replace(/([^&=]+)=?([^&]*)(?:&+|$)/g,function(e,t,a){(n[t]=n[t]||[]).push(decodeURIComponent(a))}),_.each(n,function(e,t){n[t]=_.isArray(e)&&1==e.length?e[0]:e}),n},Y.urlParam=function(e,t){return Y.urlParams(t)[e]};var p="";function _getAboluteUrl(e,t){return(e||"").trimRightStr("/")+"/"+(t||"").trimLeftStr("/")}function _setLang(e,t,a){if(e){if(Y.i18n.onLangChange){var n=Y.i18n.onLangChange,r=Y.is(n,"function")?n.call(void 0,e,a):e;e=Y.is(r,"string")?r:e}$("html").attr("lang",e.replace("_","-")),Y.i18n.setLanguage(e,_.merge({},Y.defaults.lang,Y.findSafe(window,"app.conf.lang",{}),Y.findSafe(window,"app.lang",{}),t||{}))}}function _pipeSort(e,t){var a=e;if(Y.is(e,"array"))a=e.sort(),t&&(a=a.reverse());else if(Y.is(e,"string")){var n;switch(!0){case 0<=e.indexOf(","):n=",";break;case 0<=e.indexOf(" "):n=" "}n&&(a=e.split(n).sort().join(n),t&&(a=a.reverse()))}return a}function _defaultAttr(e){var t="html";switch(e.tagName.toUpperCase()){case"INPUT":switch(e.type.toLowerCase()){case"checkbox":case"radio":t="$";break;default:t="value"}break;case"TEXTAREA":t="value";break;case"SELECT":t="$"}return t}function _unmaskHandlebars(e){return e.replace(/(\/)*&gt;/g,">").replace(/ _XHBTINSPA_--(>|&gt;)/gi,"").replace(/(>|&gt;)(<|&lt;)!--_XHBTINSPA_/gi,"").replace(/<IMG-X-TMP /gi,"<img ").replace(/<IFRAME-X-TMP /gi,"<iframe ").replace(/<\/IFRAME-X-TMP/gi,"</iframe")}Y.getLocHash=function(e){var t=(p||window.location.hash).replace("#","");return t||Y.is(e,"undefined")||"#"==e||(t=window.location.pathname.replace(/(\/)*(index|default)\.([a-z])*/i,"").replace(e.replace(/\s*/g,"").trimRightStr("/"),"")),t},Y.urlHash=function(e,t){var a=Y.getLocHash(t);if(e||_.isNumber(e)){var n=(a=a.beginsWithStr("/")?a.substring(a.indexOf("/")+"/".length):a).length?a.split("/"):[];_.isNumber(e)?a=e<0?n[n.length-1]:n&&n.length>e?n[e]:"":_.isArray(e)?a=0===e.length?n:_.zipObject(e,n):_.isString(e)&&"?"==e&&(a=a.containsStr("\\?")?Y.getOnSplit(a,"?",1):"")}return a},Y.urlHashFull=function(e){return _getAboluteUrl(e=e||"#",Y.urlHash("",e))},Y.hashParam=function(e){var t=""+Y.urlHash("?");return void 0===e||Y.isBlank(t)||(t=Y.urlParam(""+e,t)),t},Y.i18n={},Y.i18n.loaded=!1,Y.i18n.settings={name:"Language",path:"language/",ext:".txt",encoding:"UTF-8",cache:!0,async:!0,mode:"map",callback:null},Y.i18n.browserLang=function(){return navigator&&(navigator.language||navigator.userLanguage)||"en_US"},Y.i18n.setLanguage=function(e,t){$.i18n&&($.i18n.map={},e=(e||Y.i18n.browserLang()).replace(/-/g,"_"),t=$.extend(Y.i18n.settings,t),$.i18n.properties({name:t.name,language:e,path:t.path,ext:t.ext,encoding:t.encoding,cache:t.cache,async:t.async,mode:t.mode,callback:function(){Y.isElementExist("#i18nSpaRunTime")||$("body").append('<div id="i18nSpaRunTime" style="display:none"></div>'),$.i18n.loaded=void 0===$.i18n.loaded?!$.isEmptyObject($.i18n.map):$.i18n.loaded,Y.i18n.loaded=Y.i18n.loaded||$.i18n.loaded,1<e.length&&!$.i18n.loaded&&(Y.console.warn("Error Loading Language File ["+e+"]. Loading default."),Y.i18n.setLanguage("_",t)),Y.i18n.apply(),t.callback&&t.callback($.i18n.loaded)}}))},Y.i18n.setLang=function(e,t){_setLang(e,t)},Y.i18n.value=function(e){return(e=(""+e).replace(/i18n:/i,"").trim()).beginsWithStrIgnoreCase("@")&&(e=e.substr(1).trim(),e=Y.findSafe(window,e,e)),function _i18nValue(e){var t=e;try{(t=(""+(!Y.i18n.loaded&&window.Liferay?Liferay.Language.get(e):$.i18n.prop(e))).trim()).beginsWithStr("\\[")&&t.endsWithStr("]")&&(t=function _stripEnds(e){return e.substring(1,e.length-1)}(t))}catch(e){console.warn("i18n lookup error:"+e.stack)}return t}(e)},Y.strBindData=function(t,a,n,r){t=""+t,n=n||"{",r=r||"}";var e=Y.extractStrBetweenEx(t,n,r,!0);return t&&!Y.isBlank(e)&&Y.is(a,"object")&&_.each(e,function(e){t=t.replace(new RegExp(n+"\\s*("+e.trim()+")\\s*"+r,"g"),Y.findSafe(a,e,""))}),t},String.prototype.bindData=function(e){return Y.strBindData(""+this,e)},Y.i18n.text=function(e,t){var a=Y.i18n.value(e);if(t&&Y.is(t,"object")){var n="",r="";_.each(_.keys(t),function(e){n=""+t[e],r=n.trim(),n&&(r.beginsWithStrIgnoreCase("i18n:")||r.beginsWithStrIgnoreCase("@"))&&(n=Y.i18n.value(r)),a=a.replace(new RegExp("{\\s*("+e.trim()+")\\s*}","g"),n)})}var i,o=[e];return function parseMessage(t){var e=Y.extractStrBetweenEx(t,"{","}",!0);return Y.isBlank(e)?t:(_.each(e,function(e){(i=i||0<=o.indexOf(e))||(o.push(e),t=t.replace(new RegExp("{\\s*("+e.trim()+")\\s*}","g"),Y.i18n.value(e)))}),i?(console.error("i18nKey circular issue found:",o.join(" > ")),t):parseMessage(t))}(a)},Y.i18n.update=function(e,t,a){t=t||"";var n,r,i=$(e),o=i.attr("data-i18n")||"",s="";if(Y.isBlank(o)||0==t.indexOf(":")||0==t.indexOf("=")||o.indexOf(":")<=0&&t.indexOf(":")<=0)s=t.trimLeftStr(":").trimLeftStr("=");else{n=0<o.indexOf(":")?Y.toJSON(o||{}):{html:o.trimLeftStr(":").replace(/'/g,"")},r=0<t.indexOf(":")?Y.toJSON(t||{}):{html:t.trimLeftStr(":").replace(/'/g,"")},_.each(Object.keys(n),function(t){_.each(t.split("_"),function(e){e&&(n[e]=n[t])})}),_.each(Object.keys(r),function(t){_.each(t.split("_"),function(e){e&&(r[e]=r[t])})});var l=_.merge({},n,r);_.each(Object.keys(l),function(e){e.indexOf("_")<=0&&(s+=e+":'"+l[e]+"',")}),s=s.trimRightStr(",")}return i.attr("data-i18n",s).data("i18n",s),(a||Y.is(a,"undefined"))&&Y.i18n.apply(e),i},Y.i18n.apply=Y.i18n.render=function(e,t){if(Y.i18n.loaded||window.Liferay){t=t||"";var a=(e=e||"html").beginsWithStr("<");a&&($("#i18nSpaRunTime").html(e),e="#i18nSpaRunTime");var n=$(e).find(t+"[data-i18n]");n.length||(n=$(e).filter(t+"[data-i18n]")),n.each(function(e,t){var n=$(t),a=n.data("i18n")||"";a&&!a.containsStr(":")&&(a="html:'"+a+"'");var r=Y.toJSON(a||"{}"),i=r.data||r.i18ndata;i?(delete r.data,delete r.i18ndata):i=Y.toJSON(n.data("i18nData")||"{}"),r&&!$.isEmptyObject(r)&&_.each(_.keys(r),function(e){var t=r[e],a=Y.i18n.text(t,i);_.each(e.split("_"),function(e){switch(e.toLowerCase()){case"html":n.html(Y.sanitizeXSS(a));break;case"text":n.text(a);break;default:n.attr(e,a)}})})})}if(a)return $("#i18nSpaRunTime").html()},$.fn.extend({i18n:function(e){return this.each(function(){e&&$(this).attr("data-i18n",e).data("i18n",e),Y.i18n.apply(this)}),this}}),Y.pipes={trim:function(e){return(""+e).trim()},trimLeft:function(e){return(""+e).trimLeftStr()},trimRight:function(e){return(""+e).trimRightStr()},normalize:function(e){return(""+e).normalizeStr()},toLowerCase:function(e){return(""+e).toLowerCase()},toUpperCase:function(e){return(""+e).toUpperCase()},toTitleCase:function(e){return(""+e).toTitleCase()},capitalize:function(e){return(""+e).capitalize()},unCapitalize:function(e){return(""+e).unCapitalize()},not:function(e){return!e},sort:function(e){return _pipeSort(e)},sortAsc:function(e){return _pipeSort(e)},sortDesc:function(e){return _pipeSort(e,!0)},reverse:function(e){var t=e;if(Y.is(e,"array"))t=e.reverse();else if(Y.is(e,"string")){var a;switch(!0){case 0<=e.indexOf(","):a=",";break;case 0<=e.indexOf(" "):a=" "}a&&(t=e.split(a).reverse().join(a))}return t}},Y.dataBind=Y.bindData=function(e,t,a,n){e=e||"body",a=a||"";var r,i,o=Y.is(e,"string")&&/\s*</.test(e);if(o){i="_BlockedScriptInTemplate_";var s=e.replace(/<\s*script/gi,"<"+i).replace(/<\s*(\/)\s*script/gi,"</"+i);r=$('<div style="display:none">'+s+"</div>")}else r=$(e);if(Y.isBlank(t))return r;var l="";"$"==a[0]&&(l=a.substr(1).trim(),a="");var p,c,u,f,h,m,g,v,y,b,S=(l=l||r.attr("data-rendered-component"))||"_unknown_",C=_.merge({__computed__:{}},t),d=r.find(a+"[data-bind]");function _getValue(e){return"#"==(e=(e||"").trim())[0]?e:Y.findSafe(C,e)}function _templateDynId(e,t){return["_runTimeTemplate",e,l,t.replace(/[^a-z0-9]/gi,"_"),Y.now()].join("_")}function _inlineTemplate(e,t){return Y.compiledTemplates4DataBind.hasOwnProperty(S)||(Y.compiledTemplates4DataBind[S]={}),Y.compiledTemplates4DataBind[S][e]=Handlebars.compile(_unmaskHandlebars(t))}if(d.length||(d=r.filter(a+"[data-bind]")),d.length&&!o&&l&&(d=d.filter(function(){return $(this).closest("[data-rendered-component]").attr("data-rendered-component")==l})),_.each(d,function(d){p=$(d),(c=p.data("bind")||"")&&!c.containsStr(":")&&(c=_defaultAttr(d)+":'"+c+"'"),u=Y.toJSON(c||"{}"),y=Y.renderUtils.getFn(p.attr("data-bind-callback")||""),u&&!$.isEmptyObject(u)&&_.each(_.keys(u),function(e){f=(u[e]+"|").split("|"),h=f.shift().trim(),b="!"==h[0],g=b?!_getValue(h=h.substr(1).trim()):_getValue(h),Y.is(g,"undefined|null")&&(g="");for(var t=0;t<f.length;t++)(m=f[t].trim())&&("."==m[0]&&(m="spa.pipes"+m),g="!"==m[0]?"!"==m?!g:("."==(m=m.substr(1).trim())[0]&&(m="spa.pipes"+m),!Y.renderUtils.runCallbackFn(m,["(...)",g,h,C,d],d)):Y.renderUtils.runCallbackFn(m,["(...)",g,h,C,d],d));_.each(e.split("_"),function(e){var t="";if(e=e.trim(),!Y.is(g,"undefined"))switch(e.toLowerCase()){case"html":p.html(Y.sanitizeXSS(g));break;case"text":p.text(g);break;case"$":if(/checkbox|radio/i.test(d.type)){switch(Y.of(g)){case"boolean":d.checked=g;break;default:d.checked=d.value.equalsIgnoreCase(""+g)}d.checked?d.setAttribute("checked",""):d.removeAttribute("checked")}else/select/i.test(d.tagName)&&console.warn("TODO: data-bind:select");break;case"if":t=h.replace(/[^a-z0-9]/gi,"_"),C.__computed__[t]=g;var a,n=p.attr("data-bind-template");if(n)a=Y.compiledTemplates4DataBind[S][n];else{var r="{{#if __computed__."+t+" }}"+p.html().trim()+"{{/if}}";a=_inlineTemplate(n=_templateDynId("if",h),r),p.attr("data-bind-template",n)}p.html(a(C));break;case"repeat":t=h.replace(/[^a-z0-9]/gi,"_"),C.__computed__[t]=g;var i,o=p.attr("data-bind-template");if(o)i=Y.compiledTemplates4DataBind[S][o];else{var s=(u.repeatAs||"").replace(/[,|:]/g," ").normalizeStr(),l="{{#each __computed__."+t+(s?" as |"+s+"|":"")+" }}"+p.html().trim()+"{{/each}}";i=_inlineTemplate(o=_templateDynId("repeat",h),l),p.attr("data-bind-template",o)}p.html(i(C));break;case"repeatAs":break;default:switch(!0){case/^\./.test(e):var c=e.replace(/[\.\,]/g," ").normalizeStr();p[g?"addClass":"removeClass"](c);break;default:p.attr(e,g),e.beginsWithStr("data-")&&(v=Y.dotToCamelCase(e.getRightStr("-").replace(/-/g,".")))&&p.data(v,g)}}}),y&&y.call(d,d)})}),!n&&!o&&r.is("[data-rendered-component]")){var k=r.attr("data-rendered-component");if(!Y.isBlank(k)){var O="app."+k+".bindCallback";Y.renderUtils.runCallbackFn(O,C,app[k])}}if(!o){var w,x=r.find("[data-rendered-component]").filter(function(){return this.hasAttribute("data-spa-component-$data")||this.hasAttribute("data-spa-$data")||this.hasAttribute("spa-$data")});if(x.length)x.each(function(){w=function _get$dataInAttr(e,t,a){var n,r,i,o,s,l="app."+(t=t.replace(/[^a-z0-9]/gi,"_"))+".";Y.is(a,"object")&&(Y.tempBind$data.hasOwnProperty(t)||(Y.tempBind$data[t]={}),Y.tempBind$data[t].$data=_.merge({},Y.findSafe(app,t+".$data",{}),a),l="spa.tempBind$data."+t+".");n=$(e),r=n.data(),i=(n.attr("data-spa-component")||"").split("|"),(o=(i[1]||"").trim())&&(/\:\s*\$data/.test(o)&&(o=o.replace(/\:\s*\$data/g,":"+l+"$data")),o=Y.toJSON(o));var c=n.attr("data-spa-component-options")||n.attr("data-spa-$options")||n.attr("spa-$options")||"{}";if((s=_.merge({},o,r,Y.toJSON(c))).hasOwnProperty("data")&&Y.is(s.data,"string")){var d=s.data.trim();/^\$data/.test(d)&&(d=l+d),s.data=_.merge({},Y.findSafe(window,d,{}))}var p=(n.attr("data-spa-component-$data")||n.attr("data-spa-$data")||n.attr("spa-$data")||"").trim();p&&(/\:\s*\$data/.test(p)&&(p=p.replace(/\:\s*\$data/g,":"+l+"$data")),Y.isBlank(s.data)?s.data=Y.toJSON(p):_.merge(s.data,Y.toJSON(p)));if(!Y.isBlank(s.data)&&s.data.hasOwnProperty("$data")){var u=_.merge({},s.data.$data);delete s.data.$data,_.merge(s.data,u)}return s.hasOwnProperty("data")?s.data:{}}(this,l,t),Y.bindData(this,w)})}return C=null,o?r.html().replace(new RegExp(i,"g"),"script"):r},Y.bindTemplateData=function(e,t){var a=e;if(/^\s*#[a-z]+/i.test(e)&&(a=$(e).html()),Y.isBlank(t))return a;if(/ data-bind\s*=/i.test(a)&&(a=Y.bindData(e,t)),/{{(.+)}}/.test(a))if("undefined"!=typeof Handlebars&&Handlebars)try{a=Handlebars.compile(a)(t)}catch(e){console.log("Error Handlebars compile/bind.",e)}else console.warn("Handlebars Template Library not found!");return a},Y.togglePassword=function(e){if(!$(e).next(".icon.eye").length){var t=$('<i class="icon eye"></i>');t.on("click",function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();var t=$(this).prevAll(".toggle-password"),a="text"==t.attr("type")?"password":"text";t.attr("type",a).toggleClass("text")}),$(t).insertAfter(e)}},Y.initTogglePassword=function(e){$(e||"body").find(".toggle-password").each(function(e,t){Y.console.info("Initializing toggle password",t),Y.togglePassword(t)})},Y.isElValueChanged=function(e){var a,t,n=$(e);if(n.length)if("checkbox"==(t=n[0]).type)a=t.checked!=t.defaultChecked;else if("radio"==t.type)$(t).closest("form").find(':radio[name="'+t.name+'"]').each(function(e,t){a=a||t.checked!=t.defaultChecked});else if(0<="INPUT,TEXTAREA".indexOf(t.tagName))a=t.value!=t.defaultValue;else if("SELECT"==t.tagName){var r,i,o,s=0;for(r=0,i=t.options.length;r<i;r++)o=t.options[r],a=a||o.selected!=o.defaultSelected,o.defaultSelected&&(s=r);a&&!t.multiple&&(a=s!=t.selectedIndex)}return a},Y.resetElDefaultValue=function(e){var t,a=$(e);if(a.length)if(t=a[0],0<",checkbox,radio".indexOf(t.type))t.defaultChecked=t.checked;else if(0<",INPUT,TEXTAREA".indexOf(t.tagName))t.defaultValue=t.value;else if("SELECT"==t.tagName){var n,r,i;for(n=0,r=t.options.length;n<r;n++)(i=t.options[n]).defaultSelected=i.selected}},Y.updateTrackFormCtrls=function(e){if(e){var a,n,r,i,t=$(e),o=t.find(".tracking-change.changed").length,s=Y.validateForm("#"+t.attr("id")),l=!(Y.isBlank(s)||1==s[0].errcode)||t.find(".validation-error,.validation-pending").length,c=0<o&&!l,d=!l,p=t.find(".ctrl-on-change,.ctrl-on-validate");t.attr("data-changed",o).data("changed",o),p.each(function(e,t){a=$(t),n=a.hasClass("ctrl-on-change")?c:d,r=a.attr("onBeforeChange"),Y.isBlank(r)||(0<r.indexOf("(")&&(r=r.getLeftStr("(")),i=Y.findSafe(window,r.trim(),void 0),n=Y.is(i,"function")?!!i.call(t,n):n),a.is(":disabled")==n&&(a.prop("disabled",!n).addClass(n?"":"disabled").removeClass(n?"disabled":""),a.trigger("change"))})}},Y.trackFormElChange=function _trackFormElChange(e,t){function eTrackChange(e){if("change"==e.type||e.key&&(1==e.key.length||0<="BackspaceDelete".indexOf(e.key))){var t,a=!1,n=$(this).closest("form"),r=n.find(".tracking-change.changed").length;if("checkbox"==this.type)a=this.checked!=this.defaultChecked;else if("radio"==this.type)n.find(':radio[name="'+this.name+'"]').each(function(e,t){t.checked==t.defaultChecked&&$(t).removeClass("changed"),a=a||t.checked!=t.defaultChecked});else if(0<="INPUT,TEXTAREA".indexOf(this.tagName))a=this.value!=this.defaultValue,t="change"!=e.type;else if("SELECT"==this.tagName){var i,o,s,l=0;for(i=0,o=this.options.length;i<o;i++)s=this.options[i],a=a||s.selected!=s.defaultSelected,s.defaultSelected&&(l=i);a&&!this.multiple&&(a=l!=this.selectedIndex)}$(this)[a?"addClass":"removeClass"]("changed"),Y.updateTrackFormCtrls(n),null!=r&&t&&n.trigger("change")}}$(t||"body").find(e).each(function(e,t){"FORM"==t.tagName.toUpperCase()?Y.trackFormElChange($(t).find(".track-change").length?".track-change":"input,textarea,select",t):function elTrackChange(e){var t="change",a=$(e);if(0<",checkbox,radio".indexOf(e.type))e.defaultChecked=e.checked;else if(0<",INPUT,TEXTAREA".indexOf(e.tagName))e.defaultValue=e.value,t="keyup change";else{if("SELECT"!=e.tagName)return!1;var n,r,i;for(n=0,r=e.options.length;n<r;n++)(i=e.options[n]).defaultSelected=i.selected}a.removeClass("track-change changed"),Y.updateTrackFormCtrls(a.closest("form")),e.className.indexOf("tracking-change")<0&&a.addClass("tracking-change").on(t,eTrackChange);return!0}(t)})},Y.initTrackFormElChanges=function(e){$(e||"body").find("form.track-changes,form:has(.ctrl-on-change,.track-change)").each(function(e,t){Y.console.info("Initializing Form Elements Track: Form ["+(t.id||t.name)+"]"),Y.trackFormElChange(t)})},Y.getModifiedElement=function(e){var t,a=void 0,n=$(e||"form:not([data-ignore-change]) :input:not(:disabled,:button,[data-ignore-change])");return _.every(n,function(e){return t||(e.tagName.match(/^(select|textarea)$/i)&&e.value!=e.defaultValue?t=!0:e.tagName.match(/^input$/i)&&(e.type.match(/^(checkbox|radio)$/i)&&e.checked!=e.defaultChecked?t=!0:e.type.match(/^(text|password|hidden|color|email|month|number|tel|time|url|range|date|datetime|datetime-local)$/i)&&e.value!=e.defaultValue&&(t=!0)),t&&(a=e)),!t}),a},Y.getModifiedElements=function(e){var a,n=[];return $(e||"form:not([data-ignore-change]) :input:not(:disabled,:button,[data-ignore-change])").each(function(e,t){a=!1,t.tagName.match(/^(select|textarea)$/i)&&t.value!=t.defaultValue?a=!0:t.tagName.match(/^input$/i)&&(t.type.match(/^(checkbox|radio)$/i)&&t.checked!=t.defaultChecked?a=!0:t.type.match(/^(text|password|hidden|color|email|month|number|tel|time|url|range|date|datetime|datetime-local)$/i)&&t.value!=t.defaultValue&&(a=!0)),a&&n.push(t)}),n},Y.initTrackElValueChanges=Y.resetElementsDefaultValue=function(e){$(e||"form :input:not(:disabled)").each(function(e,t){t.defaultValue=t.value,t.tagName.match(/^input$/i)&&t.type.match(/^(checkbox|radio)$/i)&&t.checked!=t.defaultChecked&&(t.defaultChecked=t.checked)})},Y.trash={container:[],push:function(e){this.container.push(e)},empty:function(){this.container=[]},pick:function(e){return e?this.container[e]:this.container}},Y.fillData=function(c,d,e){var t="object"==typeof c;d&&"object"==typeof d&&(e=d,d=null),d=d||"body";var p={dataParams:{},method:"GET",async:!0,dataCache:!1,keyFormat:"aBc",selectPattern:"[name='?']",formatterCommon:null,formatterOnKeys:null,resetElDefault:!0,resetElDefaultInContext:!0,keysMap:{}};$.extend(p,e),t||$.ajax({url:c,method:(""+(p.method||"GET")).toUpperCase(),data:p.dataParams,cache:p.dataCache,async:p.async,dataType:"text",success:function(e){c=Y.toJSON(""+e),t="object"==typeof c,function _fillData(){var l=p.keyFormat;l=null!=(l=null!=l.match(/^[a-z]/)?"aBc":l).match(/^[A-Z]/)?"AbC":l;var e=Y.keysDotted(c);Y.console.group("fillData"),Y.console.info(e),_.each(e,function(e){Y.console.group(">>"+e);var t=""+(e.replace(/[\[\]]/g,"_")||""),a=e.replace(/\[[0-9]+\]/g,""),n=/\[[0-9]+\]/.test(e);switch(l){case"_":t=Y.dotToX(t,"_"),a=Y.dotToX(a,"_");break;case"AbC":t=Y.dotToTitleCase(t),a=Y.dotToTitleCase(a);break;default:t=Y.dotToCamelCase(t),a=Y.dotToCamelCase(a)}var r={patternKey:t+(n?" || "+a:""),formatterKey:a,isArrayChild:n};Y.trash.push(r),Y.console.info(r),Y.trash.empty();var i=p.selectPattern.replace(/\?/g,t);(p.keysMap[t]||p.keysMap[a])&&(p.keysMap[t]=p.keysMap[t]||{},p.keysMap[a]=p.keysMap[a]||{},p.keysMap[t].pattern=p.keysMap[t].pattern||p.keysMap[a].pattern,p.keysMap[t].pattern&&(i=p.keysMap[t].pattern.replace(/\?/g,t)),p.keysMap[a].formatter&&(p.formatterOnKeys=p.formatterOnKeys||{},p.formatterOnKeys[a]=p.keysMap[a].formatter));var o=$(d).find(i).length;Y.console.info(">> "+i+" found: "+o);var s=null;0<o&&(s=Y.find(c,e),!p.formatterOnKeys&&p.formatterCommon&&(s=p.formatterCommon(s,e,c)),p.formatterOnKeys&&(p.formatterOnKeys[a]?s=p.formatterOnKeys[a](s,e,c):p.formatterCommon&&(s=p.formatterCommon(s,e,c))),Y.console.info({value:s})),$(d).find(i).each(function(e,t){switch(Y.console.info(t),t.tagName.toUpperCase()){case"INPUT":switch(t.type.toLowerCase()){case"text":case"password":case"hidden":case"color":case"date":case"datetime":case"datetime-local":case"email":case"month":case"number":case"search":case"tel":case"time":case"url":case"range":case"button":case"submit":case"reset":$(t).val(s),!p.resetElDefaultInContext&&p.resetElDefault&&(t.defaultValue=t.value);break;case"checkbox":case"radio":t.checked=t.value.equalsIgnoreCase(s),!p.resetElDefaultInContext&&p.resetElDefault&&(t.defaultChecked=t.checked)}break;case"SELECT":Y.selectOptionForValue(t,s),!p.resetElDefaultInContext&&p.resetElDefault&&(t.defaultValue=t.value);break;case"TEXTAREA":$(t).val(s),!p.resetElDefaultInContext&&p.resetElDefault&&(t.defaultValue=t.value);break;default:$(t).html(Y.sanitizeXSS(s))}}),Y.console.groupEnd(">>"+e)}),Y.console.groupEnd("fillData"),p.resetElDefaultInContext&&Y.resetElementsDefaultValue(d+" :input")}()},error:function(e,t,a){Y.console.error("Failed loading data from ["+c+"]. ["+t+":"+a+"]"),Y.is(app.api.onError,"function")?app.api.onError.call(this,e,t,a):Y.api.onReqError.call(this,e,t,a)}})},Y.toRenderDataStructure=function(t,e,a){function fq(t,a){return a&&Object.keys(a).length&&_.each(Object.keys(a),function(e){t=t.replace(new RegExp("{"+e+"}","gi"),a[e])}),t}var n={},r={},i={},o={};switch(e&&(o=_.isString(e)?Y.queryStringToJson(e):_.isObject(e)?e:{}),!0){case _.isString(t):t.containsStr("\\|")&&(n.dataModel=Y.getOnSplit(t,"|",0),t=Y.getOnLastSplit(1)),n.dataUrl=fq(t,a),_.isEmpty(o)||(n.dataParams=o);break;case _.isArray(t):r={urls:[]},i={},_.each(t,function(e){i={url:fq(e,a),params:o},e.containsStr("\\|")&&(i.target=Y.getOnSplit(e,"|",0),i.url=fq(Y.getOnLastSplit(1),a)),r.urls.push(i)});break;case _.isObject(t):r={urls:[]},i={},_.each(_.keys(t),function(e){i={name:e,url:fq(t[e],a),params:o},t[e].containsStr("\\|")&&(i.target=Y.getOnSplit(t[e],"|",0),i.url=fq(Y.getOnLastSplit(1),a)),r.urls.push(i)})}return _.isEmpty(r.urls)||(n.dataCollection=r),n};var r={};function _adjustComponentOptions(e,t){var a="_rtt_"+e,n="";if(t&&_.isObject(t)&&Y.hasPrimaryKeys(t,"template|templateStr|templateString|templateUrl")){if(t.hasOwnProperty("template")){var r=t.template.trim();r.beginsWithStr("#")&&!r.containsStr(" ")||(t.templateStr=t.template)}if(Y.hasPrimaryKeys(t,"templateStr|templateString"))n=t.templateStr||t.templateString||"",Y.updateTemplateScript(a,n),t.template="#"+a;else if(Y.hasPrimaryKeys(t,"templateUrl")){var i=(t.templateUrl||"").trim();if(i&&/^(\.\/)/.test(i)){var o=/[^a-z0-9]/gi.test(e);i=Y.defaults.components.rootPath+(Y.defaults.components.inFolder||o?e.replace(/[^a-z0-9]/gi,"/")+"/":"")+i.substr(2)}t.template=i}}return t&&_.isObject(t)&&!Y.hasPrimaryKeys(t,"data|dataUrl")&&Y.hasPrimaryKeys(Y.api.urls,"$"+e)&&(t.dataUrl="@$"+e),Y.console.log("$ Adj.Options>>>>",e,t?t.__now():t),t}Y.env="",Y.compiledTemplates4DataBind={},Y.compiledTemplates={},Y.viewModels={},Y.renderHistory={},Y.renderHistoryMax=0,Y.components={},Y.tempBind$data={},Y.defaults={components:{templateEngine:"handlebars",rootPath:"app/components/",inFolder:!0,templateExt:".html",scriptExt:".js",templateScript:!1,templateCache:!0,dataPreRequest:"",render:"",callback:"",extend$data:!0,offline:!1},routes:{base:"#",attr:{route:"data-spa-route",params:"data-spa-route-params",onNavAway:"onNavAway"},className:{hide:"HIDE-SPA-NAV",block:"BLOCK-SPA-NAV",allow:"ALLOW-SPA-NAV"},onClickAs:"click"},lang:{path:"app/language/",ext:".txt",cache:!0,async:!0},validation:{xss:{on:"input_onBlur",fn:"_check.xss",msg:"i18n:invalid.input"}},csp:{nonce:""},set:function(e,t){return Y.is(e,"object")?(e.hasOwnProperty("set")&&delete e.set,_.merge(this,e)):"string"==typeof e&&("components.extend$data"==e?Y.defaults.components.extend$data=t:Y.setSimpleObjProperty(this,e,t)),this}};var l="api,debug,lang";function _spaComponentOp(){var t=this.action;if(arguments.length){var e=arguments;1==arguments.length&&(_.isArray(arguments[0])?e=arguments[0]:_.isString(arguments[0])&&(e=arguments[0].split(","))),Y.console.log(e),e&&e.length&&_.each(e,function(e){Y.console.info(t+" spa-component:["+e.trim()+"]"),Y[t](e.trim())})}}function _spaRenderRefreshComponents(){var t=this.action;if(arguments.length){var a=arguments;1==arguments.length&&(a=_.isArray(arguments[0])?arguments[0]:_.isString(arguments[0])?arguments[0].split(","):arguments[0]),Y.is(a,"object")?_.each(Object.keys(a),function(e){Y.console.info("Rendering spa-component:["+e+"]"),Y[t](e,a[e])}):a&&a.length&&_.each(a,function(e){Y.console.info("Rendering spa-component:["+e+"]"),Y[t](e.trim())})}}function _spaTagsSelector(e){return e.split(",").map(function(e){return e.trim()+"[src]:not([data-spa-component])"}).join(",")}function _Event(e,t){var a;return Y.isIE?(a=document.createEvent("Event")).initEvent(e,!0,!0):a=new Event(e,{bubbles:!0,cancelable:!0}),t&&(a.targetElement=t),a}function _triggerClickEventOnAttr(t,a){var n=(Y.defaults.routes.onClickAs||"click").toLowerCase(),e=$(t),r=(""+t.getAttribute(a)||"").trim(),i="click"!==n;if(r&&"null"!=r&&"undefined"!=r&&!(e.hasClass("disabled")||e.is("[disabled]")||e.is(":disabled")))try{if(i){var o="on"+n;e.renameAttr(a,o),t.dispatchEvent(_Event(n,t)),e.renameAttr(o,a)}else r.split(";").forEach(function(e){e.trim()&&Function("event","("+e.trim()+")").call(t,_Event(n,t))})}catch(e){console.error(e.stack.substring(0,e.stack.indexOf("\n"))+"! Failed to trigger ["+n+"(:->"+a+")] event on Element:\n",t)}}function _disabledElClick(e){var t=$(this);if(t.hasClass("disabled")||t.is("[disabled]")||t.is(":disabled"))return e.preventDefault(),e.stopPropagation(),void e.stopImmediatePropagation();_triggerClickEventOnAttr(this,"onclickthis")}function _initSpaElements(e){var t=$(e||"body"),a=t.find("form:not([onsubmit])"),n=A?".no-spa-route":"",r=t.find('a[href]:not([href^="#"]):not([href^="javascript:"]):not([target])'+n),i=t.find("a:not([href]):not(.no-link)"),o=t.find("[onclick]:not(:input):not(["+T+"]):not([onclickthis])");a.filter(function(){return!$(this).closest("pre").length}).attr("onsubmit","return false;").addClass("spa-form"),r.filter(function(){return!$(this).closest("pre").length}).attr("target","_blank").addClass("spa-external-link"),i.filter(function(){return!$(this).closest("pre").length}).attr("href","javascript:;").addClass("spa-link"),o.filter(function(){return!$(this).closest("pre").length}).addClass("as-btn").renameAttr("onclick","onclickthis").on("click",_disabledElClick)}function _initFormValidation(e){var t,a,n,r=$(e),i=Y.findSafe(Y,"_validate.defaults.offline",!0);if(1==r.length){if((t=r.attr("id")||"")||(t=r.attr("name")||"spaForm"+Y.now(),r.attr("id",t)),a=r.data(),n=r.has(".ctrl-on-change,.ctrl-on-validate").length,i){var o=(r.attr("data-validate-defaults")||"").trim();if(o){if(o.indexOf("offline")<0)if(o.endsWithStr("}")){var s=o.lastIndexOf("}");o=[o.slice(0,s),",offline:true",o.slice(s)].join("")}else o+=",offline:true";r.attr("data-validate-defaults",o)}else r.attr("data-validate-defaults","{offline:true}")}r.is("[data-validate-form]")||r.attr("data-validate-form",""),r.attr("data-validation-initialized",""),r.attr("onsubmit")||r.attr("onsubmit","return false;"),r.on("change",function(){Y.updateTrackFormCtrls(this)}),r.find("textarea,input:not(:checkbox),input:not(:radio)").filter(":not([data-validate])").each(function(){this.setAttribute("data-validate","{onInput:{fn:_check.noop}}")});var l="",c=Y.defaults.validation.xss,d=(r.attr("data-validate-xss")||"").trim(),p=(c.msg||"").trim();/msg\s*:/g.test(d)&&((p=Y.toJSON(d).msg)?d="on":p="Invalid input."),p&&!(d.equalsIgnoreCase("off")||d.equalsIgnoreCase("no")||d.equalsIgnoreCase("skip")||d.equalsIgnoreCase("false"))&&(l=4<d.length?","+d:",on"+c.on.capitalize()+":{fn:'"+c.fn+"',msg:'"+p+"'}");var u,f="onFocus:{fn:_clearSpaValidateMsg,offline:false}"+l,h=(r.attr("data-validate-common")||"").trim();if(h){if(h.indexOf("_clearSpaValidateMsg")<0)u="{"==h[0]?(h[0]=",","{"+f+h):"{"+f+","+h+"}",r.attr("data-validate-common",u)}else r.attr("data-validate-common","{"+f+"}");Y.initDataValidation("#"+((a.validateForm||a.validateScope||"").replace(/[#onRender]/gi,"")||t)),!r.hasClass("track-changes")&&n&&Y.trackFormElChange(e),"onRender".equalsIgnoreCase(a.validateForm)&&Y.validateForm("#"+t,!0,!0)}}function _isLiveApiUrl(e,t){var a="",n=t||Y.findSafe(window,"app.api.liveApiPrefix",""),r=e.beginsWithStr("!");if(e=e.trimLeftStr("!"),n){var i,o,s=[],l=0;if(Y.is(n,"string")?s=n.split(","):Y.is(n,"array")&&(s=n),0<(i=s.length))for(;!a&&l<i;)a=(o=s[l++].trim())?e.beginsWithStr(o)?o:!_isRelativePath(e)&&0<e.indexOf(o)?o:"":"";else a=e.beginsWithStr(n)?n:!_isRelativePath(e)&&0<e.indexOf(n)?n:""}else r&&(a="??");return a}function _isRelativePath(e){var t=e.getLeftStr(6).toLowerCase();return!(t.beginsWithStr("http:")||t.beginsWithStr("https:")||t.beginsWithStr("//"))}function _isFn(e){return"function"==typeof e}function _isObj(e){return"object"==typeof e}function _ajax(t){var a={url:"",responseType:"json",async:!0,cache:!1,method:"GET",headers:{},auth:null,timeout:0,success:null,error:null,finally:null},n=a.responseType.toUpperCase(),e={TEXT:"text/plain",HTML:"text/html",CSS:"text/css",CSV:"text/csv",XML:"text/xml",JSON:"application/json",PDF:"application/pdf",ZIP:"application/zip"}[n]||a.responseType,r={};Object.keys(t||{}).forEach(function(e){a[e]=t[e]}),a.method=a.method.toUpperCase(),_isFn(a.headers)&&(a.headers=a.headers.call(void 0,a)),_isObj(a.headers)&&Object.keys(a.headers).forEach(function(e){r[e]=a.headers[e]}),e&&(r["Content-Type"]=e),r["Cache-Control"]=a.cache?"max-age=86400000":"no-cache, no-store, must-revalidate, max-age=0",r.Expires=a.cache?new Date((new Date).setDate((new Date).getDate()+1)).toUTCString():"0",a.cache||(r.Pragma="no-cache");var i,o,s=new XMLHttpRequest;(s.requestOptions=a).timeout&&(s.timeout=a.timeout),Object.keys(a).forEach(function(t){var e=t.toLowerCase();"onreadystatechange"===e&&_isFn(a[t])?o=a[t]:0===e.indexOf("on")&&_isFn(a[t])&&(s[e]=function(e){a[t].call(a,s,e)})}),s.onreadystatechange=function(e){if(o&&o.call(a,s,e),4===s.readyState){var t=s.responseText;if(200<=s.status&&s.status<300){if("JSON"===n)try{t=t&&JSON.parse(t)}catch(e){t=s.responseText,console.warn("Invalid JSON response.",t,s,e)}_isFn(a.success)&&a.success.call(a,t,s.status,s)}else _isFn(a.error)&&a.error.call(a,s.status,s.statusText,s);_isFn(a.finally)&&a.finally.call(a,t,s.status,s)}},a.hasOwnProperty("data")&&"GET"===a.method&&(i=_isObj(a.data)?_toQueryString(a.data):""+a.data)&&(a.url+=(a.url.indexOf("?")<0?"?":/\?$|\&$/.test(a.url)?"":"&")+i);try{a.auth&&_isObj(a.auth)?a.auth.hasOwnProperty("user")&&(a.auth.hasOwnProperty("pwd")?s.open(a.method,a.url,a.async,a.auth.user,a.auth.pwd):s.open(a.method,a.url,a.async,a.auth.user)):s.open(a.method,a.url,a.async),Object.keys(r).forEach(function(e){s.setRequestHeader(e,r[e])}),"GET"!==a.method&&a.hasOwnProperty("data")?(i=_isObj(a.data)?JSON.stringify(a.data):a.data,s.send(i)):s.send()}catch(e){console.warn("Ajax-Exception",s,e)}return s}function _mockFinalUrl(e,t,a){if(e=e||"/",t=t||"","??"===(a=a||_isLiveApiUrl(e))){var n=e.indexOf("//");n<0?e=(a="/MOCK-ROOT/")+e.trimLeftStr("/"):a=e.substring(0,e.indexOf("/",n+2)+1)}var r="",i=Y.findSafe(app,"api.mockBaseUrl")||Y.findSafe(Y,"api.mockBaseUrl")||"",o=i?"":(Y.findSafe(app,"api.mockRootFolder")||Y.findSafe(Y,"api.mockRootFolder")||"api_").trimRightStr("/")+"/",s=Y.findSafe(app,"api.mockDataFile")||Y.findSafe(Y,"api.mockDataFile")||"";r=(e||"").replace(/[\{\}]/g,"").replace(RegExp("(.*)(/*)"+a.trimLeftStr("/")),o).replace(/(\/)*\?/,t+"/"+s+"?").replace(/\?$/,"");if(i){i=i.trimRightStr("/")+"/";var l=r.indexOf("//");l<0?r=i+r:l<7&&(r=i+r.substr(r.indexOf("/",r.indexOf("//")+2)+1))}return r}function _ajaxPrefilter(t,e,a){t.url.beginsWithStr(Y.api.urlKeyIndicator)&&(t.url=Y.api.url(t.url.trimLeftStr(Y.api.urlKeyIndicator),t.data));var n,r=t.url;Y.findSafe(window,"app.api.reqHeaders")&&(t.beforeSend=function(e){!function _ajaxSetReqHeaders(t,e){var a=Y.findSafe(window,"app.api.reqHeaders"),n=is(a,"function")?a(t,e):a;is(n,"object")?_.forEach(Object.keys(n),function(e){t.setRequestHeader(e,n[e])}):is(n,"string")&&(_isLiveApiUrl(e.url)?(e.data=e.data||"",e.data+=(Y.isBlank(e.data)?"":"&")+n):t.setRequestHeader("reqHeadersInLiveUrl",n))}(e,t)}),"script"==t.dataType||t.hasOwnProperty("error")||(t.error=app.api.onError||Y.api.onReqError);var i,o="",s=/({+)([^}])*(}+)/;if(Y.api.mock||app.api.mock||r.beginsWithStr("!"))if(r.beginsWithStr("~"))t.url=(_isRelativePath(r.trimLeftStr("~"))&&Y.api.baseUrl||"")+r.trimLeftStr("~")+(Y.api.liveUrlSuffix||""),Y.api.baseUrl&&(t.crossDomain=!0);else{var l=("/"+t.type.toUpperCase()).replace("/GET","");if(t.type="GET",o=_isLiveApiUrl(r),r=r.trimLeftStr("!"),o){if(r.containsStr("\\?")||(r=r.trimRightStr("/")+"?"),s.test(r)){Y.console.log("URL has undefined params >>",r,t.data);try{i=Y.is(t.data,"string")?JSON.parse(t.data):t.data,r=Y.api.url(r.replace(/{{/g,"{").replace(/}}/g,"}"),i)}catch(e){}Y.console.log("Updated URL>>",r)}var c=_mockFinalUrl(r,l,o);t.url=c,(app.debug||Y.debug)&&console.warn(">>>>>>Intercepting Live API URL: ["+r+"] ==> ["+c+"]"),n=!0}}else o=_isLiveApiUrl(r),(app.debug||Y.debug)&&console.log("actualUrl:"+r+",baseUrl:"+Y.api.baseUrl+",liveApiPrefix:"+o),o&&(t.url=(_isRelativePath(r)&&Y.api.baseUrl||"")+r+(Y.api.liveUrlSuffix||""),Y.api.baseUrl&&(t.crossDomain=!0));if(Y.console.log("Remove mock params if any in URL>",t.url),t.url=t.url.replace(/{{([^}])*}}(\/*)/g,""),s.test(t.url)){Y.console.log("URL has undefined params>",t.url,t.data);try{i=Y.is(t.data,"string")?JSON.parse(t.data):t.data,t.url=Y.api.url(t.url.replace(/{</g,"{").replace(/>}/g,"}"),i)}catch(e){}}Y.console.log("Final Ajax URL>",t.url),(s.test(t.url)||/<([^>])*>/.test(t.url))&&(console.warn("URL has undefined params >>",t.url,t.data),t.url=t.url.replace(/[{<>}]/g,"_"));var d=app.api.defaultPayload||Y.api.defaultPayload;if(d){var p,u,f=Y.of(t.data),h="string"==f?Y.toJSON(t.data):t.data;Y.is(d,"function")?(p=d.call(t,h,t),Y.is(p,"object")&&(u=JSON.parse(JSON.stringify(p)),Y.isBlank(u)||(t.data="string"==f?JSON.stringify(u):u))):(u=Y.is(d,"object|array")?JSON.parse(JSON.stringify(d)):d,u=Y.is(u,"object|array")&&Y.is(h,"object|array")?_.merge({},u,h):u,t.data=Y.isBlank(u)||"string"!=f?u:JSON.stringify(u))}if(Y.ajaxPreProcess&&Y.ajaxPreProcess(t,e,a),(Y.isBlank(t.data)||Y.is(t.data,"string")&&!/[a-z0-9]/i.test(t.data))&&(Y.console.log("REMVOING EMPTY PAYLOAD"),delete t.data),n){var m=Y.is(t.data,"string")?t.data:JSON.stringify(t.data);m&&Y.is(m,"string")&&6144<m.length&&(m="LAREGE-PAYLOAD-WITH-CHAR-LENGTH:"+m.length),t.headers=_.merge({},t.headers,{"Z-Live-URL":r,"Z-Payload":m}),delete t.data}(app.debug||Y.debug)&&console.log("ajax Options",t)}Y.component=Y.$=Y.registerComponent=function(e,t){var a=!!t,n=e;if(t=t||{},e)if(_is(e,"object")&&(e=(t=_.merge({},e)).name||t.componentName||"spaComponent"+Y.now(),t.componentName=e,n=e),_is(n,"string")){if(0<=l.indexOf(n))console.error("Invalid component name "+n+". Cannot create Reserved components:"+l.join());else if(is(n,"string")&&n&&(n=n.trim())){if(!a){var r,i,o=-1;return 0<n.indexOf(" ")&&(r=n.getRightStr(" ").trim(),n=n.getLeftStr(" ")),0<n.indexOf(":")&&(o=Y.toInt(n.getRightStr(":").trim()),n=n.getLeftStr(":")),n=n.replace(/[^a-z0-9]/gi,"_"),Y.components[n]||console.warn('Unknown SPA Component "'+(e.getLeftStr(" ")||e)+'"'),(i=$('[data-rendered-component="'+n+'"]')).length&&0<=o&&(i=$(i[o])),r&&i.length&&(i="<"==r[0]?(r=r.getRightStr(0).trim(),i.find("[data-rendered-component]").length?i.find(r).filter(function(){return $(this).closest("[data-rendered-component]").data("renderedComponent")==n}):i.find(r)):i.find(r)),i}if(/[^a-z0-9\/]/gi.test(n)||!/^([a-z])/i.test(n))return void console.error('Invalid component name "'+n+'" to create. Component name must contain only Alphanumeric (a-z A-Z 0-9) and must begin with alphabet (a-z A-Z).');if(/[^a-z0-9]/gi.test(n)&&(n=n.replace(/[^a-z0-9]/gi,"_")),Y.components[n])return;t.componentName=n,t.hasOwnProperty("beforeRender")||(t.beforeRender="app."+n+".onRender"),t.hasOwnProperty("renderCallback")||(t.renderCallback="app."+n+".renderCallback"),t.hasOwnProperty("require")&&Y.loadComponents(t.require,function(){Y.console.log("Required components successfully loaded.")},function(){Y.console.log("Failed to load required components.")}),t=_adjustComponentOptions(n,t);var s=_.merge({},t);_.each(["target","template","templateCache","templateScript","templateUrl","templateUrlMethod","templateUrlParams","templateUrlPayload","templateUrlHeaders","onTemplateUrlError","style","styleCache","styles","stylesCache","scripts","scriptsCache","require","dataPreRequest","data","skipDataBind","dataCollection","dataUrl","dataUrlMethod","dataUrlParams","dataUrlHeaders","defaultPayload","stringifyPayload","dataParams","dataType","dataModel","dataCache","dataUrlCache","dataDefaults","data_","dataExtra","dataXtra","onDataUrlError","onError","dataValidate","dataProcess","dataPreProcessAsync","beforeRender","beforeRefresh","componentName"],function(e){delete t[e]}),is(t.renderCallback,"string")&&delete t.renderCallback,_.each(Object.keys(t),function(e){delete s[e]}),s.renderCallback="app."+n+".renderCallback",Y.components[n]=s,Y.extendComponent(e,t)}}else console.error("Invalid ComponentName:",n);else console.error("Missing ComponentName to register.")},Y.$$=Y.registerComponents=function(){if(arguments.length){var t=arguments;1==arguments.length&&(t=_.isArray(arguments[0])?arguments[0]:_.isString(arguments[0])?arguments[0].split(","):arguments[0]),Y.is(t,"object")?_.each(Object.keys(t),function(e){Y.console.info("Registering spa-component:["+e+"]"),Y.registerComponent(e,t[e])}):t&&t.length&&_.each(t,function(e){Y.console.info("Registering spa-component:["+e+"]"),Y.registerComponent(e.trim())})}},Y.extendComponent=Y.$extend=Y.module=function(e,t){if(t=t||{},e)if(is(e,"object")&&(e=(t=_.merge({},e)).name||t.componentName||"spaComponent"+Y.now(),t.componentName=e),is(e,"string")&&e){if(e=e.trim()){if(0<=l.indexOf(e))return void console.error("Invalid component name "+e+". Cannot extend Reserved components: "+l.join());if(/[^a-z0-9\/]/gi.test(e)||!/^([a-z])/i.test(e))return void console.error('Invalid component name "'+e+'" to extend. Component name must contain only Alphanumeric (a-z A-Z 0-9) and must begin with alphabet (a-z A-Z).');/[^a-z0-9]/gi.test(e)&&(e=e.replace(/[^a-z0-9]/gi,"_")),window.app=window.app||{},window.app[e]=window.app[e]||{},t&&_.isFunction(t)&&(t=t.call(Y.components[e]||{})),t=Y.is(t,"object")?t:{},Y.components[e]||(Y.components[e]={componentName:e,beforeRender:"app."+e+".onRender",renderCallback:"app."+e+".renderCallback"}),Y.components[e]&&(t.__prop__&&_.merge(Y.components[e],$.extend({},t.__prop__)),t.__prop__=Y.components[e]),$.extend(window.app[e],t),window["$$"+e]=window.app[e]}}else console.error("Invalid ComponentName:",e);else console.error("Missing ComponentName to extend.")},Y.extendComponents=Y.$$extend=function(){if(arguments.length){var t=arguments;1==arguments.length&&(t=_.isArray(arguments[0])?arguments[0]:_.isString(arguments[0])?arguments[0].split(","):arguments[0]),Y.is(t,"object")?_.each(Object.keys(t),function(e){Y.console.info("Extend spa-component:["+e+"]"),Y.extendComponent(e,t[e])}):t&&t.length&&_.each(t,function(e){Y.console.info("Extend spa-component:["+e+"]"),Y.extendComponent(e.trim())})}},Y.$bind=function(e,t){e=String(e).replace(/[^a-z0-9]/gi,"_"),Y.isBlank(t)&&(t=Y.findSafe(app,e+".$data",{})),Y.$(e).spaBindData(t)},Y.$data=function(t,e,a){var n;if(t=((t=String(t).replace(/[^a-z0-9]/gi,"_"))||"").trim(),a=a||"update",t)if(app.hasOwnProperty(t)){if(n=Y.findSafe(app,t+".$data"),e){if(n=function update$data(e){return Y.is(e,"object")&&(["update","merge"].__has(a,"i")?_.merge(app[t].$data,e):["*","reset","replace","overwrite"].__has(a,"i")&&(app[t].$data=e)),app[t].is$DataUpdated=Y.components[t].is$DataUpdated=!0,app[t].$data}(Y.is(e,"function")?e.call(app[t],app[t].$data):e),Y.$(t).is(":visible")){var r=Y.components[t],i=r.dataCache,o=(r.on$dataChange||"").trim().toLowerCase();i&&o&&["render","refresh","bind"].__has(o)&&(Y.console.log(t+"$"+o+" on $data update ..."),Y["$"+o](t)),Y.renderUtils.runCallbackFn("app."+t+".$dataChangeCallback",app[t].$data,app[t])}else console.log("Component is not visible! Skipped $on$dataChange.");Y.$dataNotify(t)}}else Y.console.warn("SPA Component[",t,"] is not loaded.");return n},Y.$dataWatch=function(e,t,a){if((e=String(e).replace(/[^a-z0-9]/gi,"_"))&&t&&Y.is(a,"function"))return r.hasOwnProperty(e)||(r[e]={}),r[e].hasOwnProperty(t)?void console.warn("$dataWatch [",t,"] already exists in spa$[",e,"]"):(r[e][t]=a,!0)},Y.$dataUnwatch=function(e,t){var a;return(e=String(e).replace(/[^a-z0-9]/gi,"_"))&&t&&r.hasOwnProperty(e)&&("*"==t&&(delete r[e],a=!0),r[e].hasOwnProperty(t)&&(delete r[e][t],a=!0)),a||console.warn("$dataWatch [",t,"] does not exist in spa$[",e,"]"),a},Y.$dataNotify=function(t,e){if((t=String(t).replace(/[^a-z0-9]/gi,"_"))&&r.hasOwnProperty(t)){var a=Object.keys(r[t]);e&&(a=e.split(",")),_.each(a,function(e){e=(e||"").trim(),r[t].hasOwnProperty(e)&&r[t][e].call(void 0,app[t].$data,app[t],e)})}},Y.$renderCount=function(e){return Y.findSafe(window,"app."+String(e).replace(/[^a-z0-9]/gi,"_")+".__renderCount__",0)},Y.removeComponent=function(e,n){var t;function isOk2Remove$(e){e=String(e).replace(/[^a-z0-9]/gi,"_").trim();var t,a=Y.isBlank(e);return a||(t=Y.renderUtils.runCallbackFn("app."+e+".onRemove",n||"_script_",app[e]),(a=Y.is(t,"undefined")||Y.is(t,"boolean")&&t)||Y.console.warn("Remove $"+e+" request denied onRemove()")),a}if(e=(e||"").replace(/[^a-z0-9]/gi,"_").trim(),n=n&&(e==n?"_self_":n),e){var a=$('[data-rendered-component="'+e+'"]');if(a.length){var r=a.find("[data-rendered-component]").map(function(){return $(this).attr("data-rendered-component")});(0==r.length||_.every(r,function(e){return isOk2Remove$(e)}))&&isOk2Remove$(e)&&(a.html("").text("").val("").data("renderedComponent","").removeAttr("data-rendered-component"),t=!0)}else t=!0}return Y.is(t,"boolean")&&t},Y.destroyComponent=function(e){var t;if((e=(e||"").replace(/[^a-z0-9]/gi,"_").trim())&&Y.removeComponent(e)&&(delete app[e],Y.components[e])){var a=Y.findSafe(Y.components[e],"template","");a&&!a.beginsWithStr("#")&&(a="#__tmpl_"+(""+a).replace(/[^a-z0-9]/gi,"_")),$("script"+a).remove(),delete Y.components[e],delete Y.compiledTemplates4DataBind[e],delete Y.compiledTemplates[e],delete r[e],t=!0}return t},Y.showComponent=function(e,t){var a=(e||"").replace(/[^a-z0-9]/gi,"_").trim();if(a){var n=$('[data-rendered-component="'+a+'"]');n.length?n.show():Y.$render(e,t)}},Y.hideComponent=function(e){(e=(e||"").replace(/[^a-z0-9]/gi,"_").trim())&&$('[data-rendered-component="'+e+'"]').hide()},Y.disableComponent=function(e){(e=(e||"").replace(/[^a-z0-9]/gi,"_").trim())&&$('[data-rendered-component="'+e+'"]').css("pointer-events","none").addClass("disabled").attr("disabled","disabled")},Y.enableComponent=function(e){(e=(e||"").replace(/[^a-z0-9]/gi,"_").trim())&&$('[data-rendered-component="'+e+'"]').css("pointer-events","auto").removeClass("disabled").removeAttr("disabled")},Y.removeComponents=Y.$remove=Y.$$remove=function(){_spaComponentOp.apply({action:"removeComponent"},arguments)},Y.destroyComponents=Y.$destroy=Y.$$destroy=function(){_spaComponentOp.apply({action:"destroyComponent"},arguments)},Y.showComponents=Y.$show=Y.$$show=function(){_spaComponentOp.apply({action:"showComponent"},arguments)},Y.hideComponents=Y.$hide=Y.$$hide=function(){_spaComponentOp.apply({action:"hideComponent"},arguments)},Y.enableComponents=Y.$enable=Y.$$enable=function(){_spaComponentOp.apply({action:"enableComponent"},arguments)},Y.disableComponents=Y.$disable=Y.$$disable=function(){_spaComponentOp.apply({action:"disableComponent"},arguments)},Y.refreshComponent=Y.$refresh=function(e,t){e&&(t=t||{},Y.is(t,"object")&&(t.hasOwnProperty("beforeRender")||(t.beforeRender=t.beforeRefresh||"app."+e.replace(/[^a-z0-9]/gi,"_")+".onRefresh"),t.hasOwnProperty("renderCallback")||(t.renderCallback=t.refreshCallback||"app."+e.replace(/[^a-z0-9]/gi,"_")+".refreshCallback"),t.isRefreshCall=!0,Y.console.info("Calling refreshComponent: "+e+" with below options"),Y.console.info(t),Y.$render(e,t)))},Y.renderComponent=Y.$render=function(e,n){if(n=n||{},e){var r=e;is(e,"object")&&(n=_.merge({},e),e=n.name||n.componentName||"spaComponent"+Y.now(),n.componentName=e,r=e);var t=!n._reqFrTag_;if(_is(e,"string")){if("$"==(e=e.trim())[0]&&(t=!0),!(n&&is(n,"object")&&n.isRefreshCall)&&Y.$renderCount(r)&&Y.findSafe(window,"app."+r+".refreshCallback",""))return Y.console.info("Component ["+e+"] has been rendered already. Refreshing instead of re-render."),void Y.refreshComponent(r,n);if(Y.console.info("Called renderComponent: "+e+" with options",n),!t&&/[^a-z0-9]/gi.test(r)){var a,i=r;if(r[0]===Y.api.urlKeyIndicator&&(a=r.trimLeftStr(Y.api.urlKeyIndicator),i=Y.api.urls[a]||""),n.componentUrl=i,Y.console.info("Called to render ServerComponent: ["+r+"] with options",n),a&&!i&&console.warn("ComponentURL undefined: app.api.urls."+a),i){var o=n.targetEl,s=__finalValue(Y.toJSON(n.urlHeaders),n),l=__finalValue(Y.toJSON(n.urlParams),n),c=__finalValue(Y.toJSON(n.urlPayload),n),d=(n.urlMethod||"GET").toLowerCase(),p="false"!==String(n.urlCache||"false").toLowerCase(),u=Y.api.url(i,l),f=__finalValue(n.urlError);Y.console.log("Loading ServerComponent ..."),Y.api[d](u,c,function _onSuccess(e){$(o).html(e),Y.renderComponentsInHtml(o)},function _onFail(e,t,a){this.onError&&_is(this.onError,"function")?this.onError.call(this,e,t,a):(console.warn("Unable to load ServerComponent."),console.error(String(t).toUpperCase()+":"+a,e))},{ajaxOptions:{dataType:"html",headers:s,cache:p,onError:f}})}}else{var h=/[^a-z0-9]/gi.test(e);h&&(r=e.replace(/[\s\$]/g,"").replace(/[^a-z0-9]/gi,"_"));var m="_rtt_"+r,g="";n=_adjustComponentOptions(r,n);var v=h?r.replace(/[^a-z0-9]/gi,"/"):r,y=r;if(h){var b=r.split("_");y=b[b.length-1]}function hs(){if(Y.console.info("_renderComp: "+r+" with below options"),Y.console.info(n),!Y.components[r].hasOwnProperty("template"))if(Y.components[r].hasOwnProperty("templateStr")||Y.components[r].hasOwnProperty("templateString"))g=Y.components[r].templateStr||Y.components[r].templateString||"",Y.updateTemplateScript(m,g),Y.components[r].template="#"+m;else if(Y.hasPrimaryKeys(Y.components[r],"templateUrl")){var e=(Y.components[r].templateUrl||"").trim();e&&/^(\.\/)/.test(e)&&(e=S+e.substr(2)),Y.components[r].template=e}else Y.components[r].template=k;Y.console.info("render-options: spa.components["+r+"]"),Y.console.info(Y.components[r]);var t=n&&n.saveOptions?Y.components[r]:$.extend({},Y.components[r]);if(n&&(n.hasOwnProperty("mountComponent")||delete t.mountComponent,$.extend(t,n),Y.console.info("Extended> render-options: spa.components["+r+"]"),Y.console.info(t)),t.hasOwnProperty("style")&&Y.is(t.style,"string")&&(t.dataStyles={},t.dataStyles[r+"Style"]="."==t.style||"$"==t.style?C+".css":/^(\.\/)/.test(t.style)?S+t.style.substr(2):t.style,delete t.style,Y.console.info("Using component style for ["+r+"]"),Y.console.info(t)),t&&_.isObject(t)&&t.dataCache){var a=Y.findSafe(app,r+".$data",{});Y.isBlank(a)?(t.dataCache=!1,Y.console.log("dataCache:false; Using/Ajaxing new data ...")):(t.data=a,t.dataProcess=!1,Y.console.log("dataCache:true; Using $data and ingored data + dataProcess ..."))}Y.render(t)}function js(){w?Y.console.info("Loaded component ["+r+"] source from ["+w+"]"):Y.console.info("Skipped Loading component ["+r+"] source from script file."),Y.console.info("In Source> spa.components["+r+"]"),Y.console.info(Y.components[r]),Y.components.hasOwnProperty(r)||(Y.console.warn("spa.components["+r+"] NOT DEFINED in ["+(w||"spa.components")+"]. Creating *NEW*"),Y.isBlank(n)&&(n={}),n.hasOwnProperty("componentName")||(n.componentName=r),Y.components[r]=n,Y.console.info("NEW> spa.components["+r+"]"),Y.console.info(Y.components[r])),hs()}var S=Y.defaults.components.rootPath+(Y.defaults.components.inFolder||h?v+"/":""),C=S+y,k=C+Y.defaults.components.templateExt,O=Y.defaults.components.scriptExt,w=n&&_.isObject(n)&&n.hasOwnProperty("script")?n.script:O?C+O:"";Y.components.hasOwnProperty(r)?(Y.console.info("Re-rending spa.components["+r+"]"),Y.console.info(Y.components[r]),hs()):w?(Y.console.info("Attempt to load component ["+e+"]'s properties from ["+w+"]"),$.cachedScript(w,{spaComponent:v,dataType:"spaComponent",success:js,cache:Y.defaults.components.offline}).done(Y.noop).fail(function(){Y.console.info("Attempt to Load component ["+e+"]'s properties from ["+w+"] has FAILED. Not to worry. Continuing to render with default properties."),js()})):js()}}else console.error("Invalid ComponentName:",e)}else console.error("Missing ComponentName to render.")},Y.renderComponents=Y.$$render=function(){_spaRenderRefreshComponents.apply({action:"renderComponent"},arguments)},Y.refreshComponents=Y.$$refresh=function(){_spaRenderRefreshComponents.apply({action:"refreshComponent"},arguments)},Y.renderComponentsInHtml=function(e,s){e=e||"body",s=(s||"").trim();var t=_spaTagsSelector("spa-template,x-template");$(e).find(t).each(function(){this.setAttribute("data-spa-component",this.getAttribute("src")),this.setAttribute("data-skip-data-bind","true"),this.setAttribute("data-template-script","true"),this.style.display="none"});var a=_spaTagsSelector("spa-html,x-html");$(e).find(a).each(function(){var e=this.getAttribute("src");if(("$"===e[0]||!/[^a-z0-9]/gi.test(e))&&!Y.components[e.replace(/[^a-z0-9]/gi,"_")]){var t={templateScript:!0};!(this.hasAttribute("data")||this.hasAttribute("data-url"))?t.skipDataBind=!0:this.hasAttribute("data-url")||(t.data=this.hasAttribute("data")?Y.toJSON(this.getAttribute("data")):{}),Y.$(e,t)}this.setAttribute("data-spa-component",e)});var n=_spaTagsSelector("spa-component,x-component");$(e).find(n).each(function(){this.setAttribute("data-spa-component",this.getAttribute("src"))});var l,c,d,p,u,f,h,r=$(e).find("[data-spa-component]");r.length&&r.each(function(e,t){if(l=$(t),h=l.data(),c=(l.attr("data-spa-component")||"").split("|"),d=c[0].trim(),(p=(c[1]||"").trim())&&(/\:\s*\$data/.test(p)&&(p=p.replace(/\:\s*\$data/g,":app."+s+".$data")),p=Y.toJSON(p)),d){if(!Y.components[d]&&(t.hasAttribute("no-script")||t.hasAttribute("noscript")||t.hasAttribute("nojs")||t.hasAttribute("no-js"))&&Y.$(d,{}),!t.id){var a=String(d).trim();"$"==a[0]&&(a=a.replace(/[^a-z0-9]/gi,"_")),a=a.replace(/[^a-z0-9_]/gi,""),f="spaCompContainer_"+a+"_"+($("body").find("[rel=spaComponentContainer_"+a+"]").length+1),t.id=f,t.setAttribute("rel","spaComponentContainer_"+a)}var n=l.attr("data-spa-component-options")||l.attr("data-spa-$options")||l.attr("spa-$options")||"{}";if(u=_.merge({target:"#"+t.id,targetEl:t,spaComponent:d.trim(),_reqFrTag_:1},p,h,Y.toJSON(n)),(t.hasAttribute("skipDataBind")||t.hasAttribute("skip-data-bind"))&&(u.skipDataBind=!0),u.hasOwnProperty("data")&&Y.is(u.data,"string")){var r=u.data.trim();/^\$data/.test(r)&&(r="app."+s+"."+r),u.data=_.merge({},Y.findSafe(window,r,{}))}var i=(l.attr("data-spa-component-$data")||l.attr("data-spa-$data")||l.attr("spa-$data")||"").trim();if(i&&(/\:\s*\$data/.test(i)&&(i=i.replace(/\:\s*\$data/g,":app."+s+".$data")),Y.isBlank(u.data)?u.data=Y.toJSON(i):_.merge(u.data,Y.toJSON(i))),!Y.isBlank(u.data)&&u.data.hasOwnProperty("$data")){var o=_.merge({},u.data.$data);delete u.data.$data,_.merge(u.data,o)}u.hasOwnProperty("data")&&(u.data_=_.merge({},u.data),delete u.data),Y.console.log("inner-component",d,"options:",u),Y.renderComponent(d,u)}})},Y.renderUtils={array2ObjWithKeyPrefix:function(e,t,a){var n={};return _.each(e,function(e){(e=(""+e).trimStr())&&(n[t+(e.equals(".")?a:e).replace(/[^a-z0-9]/gi,"_")]=""+e)}),Y.console.log([t,n]),n},getFn:function(e){var t=e;return e&&_.isString(e)&&(t=Y.findSafe(window,e)),t&&_.isFunction(t)?t:void 0},runCallbackFn:function(e,t,a){if(e){var n,r=e,i=a;if(_.isString(r)&&(i||(e.match("]$")?n=e.substring(0,e.lastIndexOf("[")):0<e.indexOf(".")&&(n=e.substring(0,e.lastIndexOf("."))),i=n?Y.findSafe(window,n):window),r=Y.findSafe(window,r)),r){if(_.isFunction(r))return Y.console.info("calling callback: "+e),Y.is(t,"array")&&"(...)"==t[0]?(t.shift(),r.apply(i,t)):r.call(i,t);Y.console.error("CallbackFunction <"+e+" = "+r+"> is NOT a valid FUNCTION.")}else Y.console.warn("CallbackFunction <"+e+"> is NOT defined.")}},registerComponentEvents:function(r){var e;r&&app[r]&&app[r].hasOwnProperty("events")&&_.each(Object.keys(app[r].events),function(n){app[r].events[n].hasOwnProperty("target")&&!Y.isBlank(app[r].events[n].target)&&(e=app[r].events[n].target,Y.$(r+" "+e).filter(":not([spa-events-"+n+'="'+r+'"])').attr("spa-events-"+n,r).each(function(e,a){_.each(Object.keys(app[r].events[n]),function(t){0==t.indexOf("on")&&_.each(t.split("_"),function(e){Y.console.log("registering component ["+r+"] event: "+n+"-"+e),$(a).on(e.trimLeftStr("on").toLowerCase(),app[r].events[n][t])})})}))})}},Y.render=function(F,z){if(Y.console.log("spa.render",F,z),arguments.length){if(1!==arguments.length||"object"!=typeof F){z&&function transOptions(a){_.each({template:"dataTemplate",templates:"dataTemplates",templateCache:"dataTemplatesCache",templatesCache:"dataTemplatesCache",html:"dataTemplate",htmls:"dataTemplates",htmlCache:"dataTemplatesCache",htmlsCache:"dataTemplatesCache",script:"dataScripts",scripts:"dataScripts",scriptCache:"dataScriptsCache",scriptsCache:"dataScriptsCache",style:"dataStyles",styles:"dataStyles",styleCache:"dataStylesCache",stylesCache:"dataStylesCache",renderType:"dataRenderType",beforeRender:"dataBeforeRender",dataRenderCallBack:"dataRenderCallback",renderCallback:"dataRenderCallback",renderCallBack:"dataRenderCallback",callback:"dataRenderCallback",callBack:"dataRenderCallback",onRemove:"dataRemoveCallback",dataRenderMode:"dataRenderMode",renderMode:"dataRenderMode",renderId:"dataRenderId"},function(e,t){a.hasOwnProperty(t)&&(a[e]=z[t],delete a[t])})}(z);var H={id:"",view:{},model:{},cron:"",elDataAttr:{},target:F,iOptions:z},M=[],V=!1,e=Y.isElementExist(F);e&&(H.elDataAttr=$(F).data());var J=1<arguments.length,K=J&&z.hasOwnProperty("data"),q=z&&z.componentName?z.componentName:"",W={data:{},dataPreRequest:Y.defaults.components.dataPreRequest,dataUrl:"",dataUrlParams:{},dataUrlMethod:"GET",dataUrlErrorHandle:"",dataUrlHeaders:{},dataParams:{},dataType:"",dataExtra:{},dataXtra:{},data_:{},dataDefaults:{},dataModel:"",dataValidate:!1,dataProcess:"",dataUrlCache:!1,dataCache:!1,extend$data:Y.defaults.components.extend$data,dataCollection:{},dataTemplates:{},dataTemplate:"",dataTemplatesCache:!0,templateScript:!1,templateEngine:"",dataScripts:{},dataScriptsCache:!0,dataStyles:{},dataStylesCache:!0,dataBeforeRender:"",dataRenderCallback:"",dataRemoveCallback:"",dataRenderMode:"",skipDataBind:!1,render:"",dataRenderId:""};if(e||(Y.isElementExist("#spaRunTimeHtmlContainer")||$("body").append("<div id='spaRunTimeHtmlContainer' style='display:none;'></div>"),$("#spaRunTimeHtmlContainer").append("<div id='"+F.replace(/\#/gi,"")+"'></div>")),J){var t={dataTemplatesCache:Y.defaults.components.templateCache},a=(z=_.merge({},t,z)).hasOwnProperty("saveOptions")&&z.saveOptions;for(var n in z)W[n]=z[n],a&&"data"!==n&&"saveOptions"!==n&&$(F).data(""+(""+(_.at(""+n,4)||"")).toLowerCase()+n.slice(5),Y.toStr(z[n]))}Y.console.log(q+".$"+(W.isRefreshCall?"refresh":"render")+" with options:",W,"$data",Y.findSafe(app,q+".$data"));var X=$(F),r=X.attr("data-rendered-component")||"",i=r==q;if(_isSpaNavBlocked(X)){Y.console.log("Component container [",F,"] blocks navigation.");var o=X.hasClass(O)?X:X.find(w);if(1<o.length&&(o=$(o[0])),o.length){var s,l,c=(o.attr(R)||"").trim();if(c){if("#"==c[0]||">"==c[0]){var d=">"==c[0]?c.substr(1).trim():c,p=o.find(d).filter(":not(.disabled):not(:disabled)");if(p.length)return void p.trigger("click")}else if((s=Y.findSafe(window,c.split("(")[0].split(";")[0]))&&Y.is(s,"function")&&(l=s.call(app[r],app[r],app[q])),s&&(!Y.is(l,"boolean")||!l))return}else if((s=Y.findSafe(app,r+".onNavBlock"))&&Y.is(s,"function")&&(l=s.call(app[r],app[r],app[q])),s&&(!Y.is(l,"boolean")||!l))return}Y.console.log("Render continues.")}i&&(Y.console.log("$refresh - Auto-Detected",q,W),"auto".equalsIgnoreCase(""+W.render)&&(Y.console.log("Finding for refresh events."),_fixRefreshCalls("dataBeforeRender",".onRender","onRefresh"),_fixRefreshCalls("dataRenderCallback",".renderCallback","refreshCallback")));function au(e){return(""+X.data(e)).replace(/undefined/,"")}function bu(e,t){return Y.isBlank(W[e])?au(t):W[e]}var u=bu("dataRenderId","renderId");H.id=u.ifBlankStr("spaRender"+Y.now()+Y.rand(1e3,9999));var G=bu("dataRenderMode","renderMode")||"replace";Y.console.log("Render Mode: <"+G+">");var Q="x-spa-template",Z=(W.templateEngine||Y.defaults.components.templateEngine||"handlebars").toLowerCase();if(Y.console.group("spaLoadingViewScripts"),J&&z.hasOwnProperty("dataScriptsCache"))Y.console.info("Override [data-scripts-cache] with user option [dataScriptsCache]: "+W.dataScriptsCache);else{var f=au("scriptsCache");Y.isBlank(f)||(W.dataScriptsCache=f.toBoolean(),Y.console.info("Override [data-scripts-cache] with [data-scripts-cache] option in tag-attribute: "+W.dataScriptsCache))}var h=au("scripts");h&&Y.isBlank((h||"").replace(/[^:'\"]/g,""))&&(h="'"+h.split(",").join("','")+"'");var m,g,v=Y.toJSON(h||"{}");if(!_.isObject(W.dataScripts)&&_.isString(W.dataScripts)&&(h=(W.dataScripts||"").trimStr(),Y.isBlank((h||"").replace(/[^:'\"]/g,""))&&(h="'"+h.split(",").join("','")+"'"),W.dataScripts=Y.toJSON(h)),$.isEmptyObject(W.dataScripts)||(v=W.dataScripts),_.isArray(v)&&_.remove(v,function(e){return!e}),Y.console.info(v),h=[],v&&!$.isEmptyObject(v)){if(_.isArray(v)){Y.console.info("Convert array of script(s) without scriptID to object with scriptID(s).");var y=Y.renderUtils.array2ObjWithKeyPrefix(v,"__scripts_",F);Y.console.info("Scripts(s) with scriptID(s)."),Y.console.log(y),v=_.isEmpty(y)?{}:y}Y.console.info("External scripts to be loaded [cache:"+W.dataScriptsCache+"] along with view container ["+F+"] => "+JSON.stringify(v)),m=_.keys(v)}else Y.console.info("No scripts defined [data-scripts] in view container ["+F+"] to load.");if(Y.console.groupEnd("spaLoadingViewScripts"),m)h=_.map(m,function(e){return!(g=_getFullPath4Component(v[e],q)).endsWithStrIgnoreCase(".js")&&g.indexOf("?")<0&&(g+=Y.defaults.components.scriptExt),(W.dataScriptsCache?"":"~")+g});return Y.console.log("component [",q,"] scripts:",h),Y.loadScriptsSync(h,function _onScriptsLoadComplete(){Y.console.info("External Scripts Loaded."),!ee&&Object.keys(app.api).length&&_initApiUrls();var e=W?W.dataPreRequest:"";if(Y.is(e,"string")&&(e=Y.renderUtils.getFn(e)),Y.is(e,"function"))try{var t=e.call(app[q]);t&&Y.is(t,"object")&&Object.keys(t).forEach(function(e){0==e.indexOf("data")&&(W[e]=t[e])})}catch(e){console.error("dataPreRequest-Error in app."+q,e)}Y.console.group("spaDataModel");var p,a,n=bu("dataModel","model"),r=bu("dataUrl","url"),i=K||r.beginsWithStrIgnoreCase("local:"),o=r.beginsWithStrIgnoreCase("local:")?r.replace(/local:/gi,""):"data",s=function _appApiDefaultPayload(){var e=Y.findSafe(app,"api.ajaxOptions.defaultPayload",{});return Y.is(e,"function")?e():Y.is(e,"object")?_.merge({},e):e}(),u=W&&W.hasOwnProperty("stringifyPayload")?W.stringifyPayload:Y.findSafe(app,"api.ajaxOptions.stringifyPayload");n=n.ifBlankStr(o),p=n.replace(/\./g,"_");var f={};if(K)f[p]=Y.is(W.data,"function")?W.data():W.data,Y.console.info("Loaded data model ["+n+"] from argument");else{if(J&&z.hasOwnProperty("dataCache"))Y.console.info("Override [data-cache] with user option [dataCache]: "+W.dataCache);else{var l=au("cache");Y.isBlank(l)||(W.dataCache=l.toBoolean(),Y.console.info("Override [data-cache] with [data-cache] option in tag-attribute: "+W.dataCache))}if(Y.isBlank(r)){f[p]={};var h=au("collection");h=h&&Y.toJSON(h),Y.isBlank(W.dataCollection)||(h=W.dataCollection),_.isArray(h)&&(h={urls:h});var c=h.urls;if(Y.isBlank(c))Y.console.warn("Model Data ["+n+"] or [data-url] or [data-collection] NOT found! Check the arguments or html markup. Rendering with options."),f[p]=_.merge({},W.dataDefaults,W.data_,W.dataExtra,W.dataXtra);else if(_.isArray(c)){Y.console.info("Processing data-URLs");var m=0,g=h.nameprefix||"data";_.each(c,function(l){var e=g+m,c=_.has(l,"name")?(""+l.name).replace(/[^a-zA-Z0-9]/gi,""):_.has(l,"target")?""+l.target:e,d=_.has(l,"url")?l.url:_.has(l,"path")?l.path:"";if(c.containsStr(".")&&(c=_.last(c.split("."),1)),c=c.ifBlankStr(e),Y.console.info("processing data-api for: "+c),Y.console.log(l),d){_.has(l,"urlParams")&&(d=Y.api.url(d,l.urlParams));var t=_.has(l,"headers")?l.headers:W.dataUrlHeaders;Y.isBlank(t)&&(t=Y.findSafe(window,"app.api.ajaxOptions.headers",{})),a=_.has(l,"params")?l.params:_.has(l,"data")?l.data:{},_.has(l,"defaultPayload")||Y.isBlank(s)||(a=_.merge({},s,!Y.isBlank(a)&&Y.is(a,"object")?a:{})),!Y.isBlank(a)&&u&&(a=JSON.stringify(a)),M.push($.ajax({url:d,method:(""+(l.method||"GET")).toUpperCase(),headers:Y.is(t,"function")?t():t,data:a,cache:_.has(l,"cache")?l.cache:W.dataCache,dataType:_.has(l,"type")?l.type:W.dataType||Y.findSafe(window,"app.api.ajaxOptions.dataType","text"),success:function(e,t,a){var n,r=_.has(l,"target")?""+l.target:"",i=Y.is(e,"string")?Y.toJSON(""+e,"data"):e;if(0<r.indexOf("."))n=Y.hasKey(i,r)?Y.find(i,r):i;else try{n=i.hasOwnProperty(r)?i[r]:i}catch(e){console.warn("Error in Data Model ["+r+"] in URL ["+d+"].\n"+e.stack)}f[p][c]?(f[p][c]=[f[p][c]],f[p][c].push(n)):f[p][c]=n,Y.console.info("Loaded data model ["+c+"] from ["+d+"]");var o=l.success||l.onsuccess||l.onSuccess;if(o=o||(h.success||h.onsuccess||h.onSuccess))if(_.isFunction(o))o.call(this,i,l,t,a);else if(_.isString(o)){var s=Y.findSafe(window,o);"function"==typeof s?s.call(this,i,l,t,a):Y.console.log("Unknown ajax success handle: "+o)}},error:function(e,t,a){Y.console.warn("Error processing data-api ["+d+"]");var n=l.error||l.onerror||l.onError;if(!n){n=h.error||h.onerror||h.onError;var r=W.dataUrlErrorHandle||W.onDataUrlError||W.onError;!n&&r&&(n=r)}if(n){if(_.isFunction(n))n.call(this,e,t,a);else if(_.isString(n)){var i=Y.findSafe(window,n);"function"==typeof i?i.call(this,oResult,l):Y.console.log("Unknown ajax error handle: "+n)}}else Y.is(app.api.onError,"function")?app.api.onError.call(this,e,t,a):Y.api.onReqError.call(this,e,t,a)}}))}else Y.console.error("data-api-url not found. Please check the arguments or html markup. Skipped this data-api request");m++})}else Y.console.warn("Invalid [data-urls].Check the arguments or html markup. Rendering with empty data {}.")}else if(r.beginsWithStrIgnoreCase("local:")){var d=r.replace(/local:/gi,""),v={};if(_isValidEvalStr(d)){try{v=Function('"use strict";return ('+d+")")()}catch(e){console.error("Error in spa.$('"+W.componentName+"'): Invalid Data Model >> \"local:"+d+'"\n>> '+e.stack.substring(0,e.stack.indexOf("\n")))}Y.console.info("Using LOCAL Data Model: "+d)}if(!i&&0<n.indexOf("."))f[p]=Y.hasKey(v,n)?Y.find(v,n):v;else try{f[p]=v.hasOwnProperty(n)?v[n]:v}catch(e){console.warn("Error in Data Model ["+n+"] in Local Object ["+d+"].\n"+e.stack)}}else{Y.isBlank(W.dataUrlParams)||(r=Y.api.url(r,W.dataUrlParams)),Y.console.info("Request Data ["+n+"] [cache:"+(W.dataUrlCache||W.dataCache)+"] from URL =>"+r);var y=W.dataUrlHeaders;Y.isBlank(y)&&(y=Y.findSafe(window,"app.api.ajaxOptions.headers",{})),a=W.dataParams,W.hasOwnProperty("defaultPayload")||Y.isBlank(s)||(a=_.merge({},s,!Y.isBlank(a)&&Y.is(a,"object")?a:{})),!Y.isBlank(a)&&u&&(a=JSON.stringify(a));var b={url:r,method:(""+(bu("dataUrlMethod","urlMethod")||"GET")).toUpperCase(),headers:Y.is(y,"function")?y():y,data:a,cache:W.dataUrlCache||W.dataCache,dataType:W.dataType||Y.findSafe(window,"app.api.ajaxOptions.dataType","text"),success:function(e){var t=Y.is(e,"string")?Y.toJSON(""+e,"data"):e,a=bu("dataValidate","validate");if(0<n.indexOf("."))f[p]=Y.hasKey(t,n)?Y.find(t,n):t;else try{"data"!=n||t.hasOwnProperty(n)||(p=n="Data"),f[p]=!a&&t.hasOwnProperty(n)?t[n]:t}catch(e){console.error("Error in Data Model ["+n+"] in URL ["+r+"].\n"+e.stack)}Y.console.info("Loaded data model ["+n+"] from ["+r+"]")},error:function(e,t,a){var n=bu("dataUrlErrorHandle","urlErrorHandle");if(Y.isBlank(n))Y.is(app.api.onError,"function")?app.api.onError.call(this,e,t,a):Y.api.onReqError.call(this,e,t,a);else{var r=Y.findSafe(window,n);"function"==typeof r?r.call(this,e,t,a):Y.console.log("Unknown ajax error handle: "+n)}}};M.push($.ajax(b))}}Y.console.info("End of Data Processing"),Y.console.log({o:f}),Y.console.groupEnd("spaDataModel");var S=au("template")||au("html"),C=au("templates")||au("htmls");C&&Y.isBlank((C||"").replace(/[^:'\"]/g,""))&&(C="'"+C.split(",").join("','")+"'");var k=Y.toJSON(C||"{}");if(!_.isObject(W.dataTemplates)&&_.isString(W.dataTemplates)&&(C=(W.dataTemplates||"").trimStr(),Y.isBlank((C||"").replace(/[^:'\"]/g,""))&&(C="'"+C.split(",").join("','")+"'"),W.dataTemplates=Y.toJSON(C)),$.isEmptyObject(W.dataTemplates)||(k=W.dataTemplates,C=""+JSON.stringify(k)),(_.isEmpty(Y.toJSON((C||"").trimStr()))||_.isArray(k)&&1==k.length&&Y.isBlank(k[0]))&&(k={},C=""),Y.console.info("Templates:"),Y.console.info(k),_.isArray(k)&&!_.isEmpty(k)){Y.console.info("Array of template(s) without templateID(s).");var O=Y.renderUtils.array2ObjWithKeyPrefix(k,"__tmpl_",F);Y.console.info("Template(s) with template ID(s)."),Y.console.log(O),C=_.isEmpty(O)?(k={},""):(k=O,""+JSON.stringify(k))}if(!k||$.isEmptyObject(k)){k={};var w=W.dataTemplate,x="",T="";Y.isBlank(w)&&(Y.isBlank(S)||(Y.console.info("Template to load from location <"+S+">"),w=S)),w=(w||"").trimStr(),Y.console.info("Primary Template: <"+w+">"),Y.isBlank(w)||w.equalsIgnoreCase("inline")||w.equals(".")?(Y.console.info("Using target container (inline) content as template."),x="_tmplInline_"+F.trimStr("#")):w.beginsWithStr("#")?(Y.console.info("Using page container <"+w+"> content as template."),x=w.trimStr("#")):(Y.console.info("External path <"+w+"> content as template."),x="__tmpl_"+(""+w).replace(/[^a-z0-9]/gi,"_"),T=w),k[x]=T.replace(/['\"]/g,""),Y.console.info(k)}if(Y.console.group("spaView"),k&&!$.isEmptyObject(k)){Y.console.info("Templates of ["+Q+"] to be used in view container ["+F+"] => "+JSON.stringify(k));var E=_.keys(k);if(Y.console.group("spaLoadingTemplates"),Y.console.group("spaLoadingTemplatesCache"),J&&z.hasOwnProperty("dataTemplatesCache"))Y.console.info("Override [data-templates-cache] with user option [dataTemplatesCache]: "+W.dataTemplatesCache);else{var A=au("templatesCache")||au("templateCache")||au("htmlsCache")||au("htmlCache");Y.isBlank(A)||(W.dataTemplatesCache=A.toBoolean(),Y.console.info("Override [data-templates-cache] with [data-templates-cache] option in tag-attribute: "+W.dataTemplatesCache))}Y.console.groupEnd("spaLoadingTemplatesCache"),Y.console.info("Load Templates"),Y.console.info(k);var R=W.templateUrlPayload;R&&(_is(R,"function")||_is(R,"string")&&R.indexOf("=")<0)&&(R=__finalValue(R,W));var j={method:W.templateUrlMethod,params:__finalValue(W.templateUrlParams,W),payload:R,headers:__finalValue(W.templateUrlHeaders,W),onError:__finalValue(W.onTemplateUrlError||W.onError)};_.each(E,function(e,t){Y.console.info([t,e,k[e],Q,F,W]),M=Y.loadTemplate(e,k[e],Q,F,M,!W.dataTemplatesCache,j)});var N="#"+E[0].trimStr("#");if(Y.console.info("External Data/Templates Loading Status: "+JSON.stringify(M)),Y.console.groupEnd("spaLoadingTemplates"),Y.console.info("Render TemplateID: "+N),Y.console.group("spaLoadingViewStyles"),J&&z.hasOwnProperty("dataStylesCache"))Y.console.info("Override [data-styles-cache] with user option [dataStylesCache]: "+W.dataStylesCache);else{var P=au("stylesCache");Y.isBlank(P)||(W.dataStylesCache=P.toBoolean(),Y.console.info("Override [data-styles-cache] with [data-styles-cache] option in tag-attribute: "+W.dataStylesCache))}var L=au("styles");L&&Y.isBlank((L||"").replace(/[^:'\"]/g,""))&&(L="'"+L.split(",").join("','")+"'");var U=Y.toJSON(L||"{}");if($.isEmptyObject(W.dataStyles)||(U=W.dataStyles),_.isArray(U)&&_.remove(U,function(e){return!e}),U&&!$.isEmptyObject(U)){if(_.isArray(U)){Y.console.info("Convert array of style(s) without styleID to object with styleID(s).");var I=Y.renderUtils.array2ObjWithKeyPrefix(U,"__styles_",F);Y.console.info("Style(s) with styleID(s)."),Y.console.log(I),U=_.isEmpty(I)?{}:I}Y.console.info("External styles to be loaded [cache:"+W.dataStylesCache+"] along with view container ["+F+"] => "+JSON.stringify(U));var D,B=_.keys(U);Y.console.group("spaLoadingStyles"),_.each(B,function(e){D=_getFullPath4Component(U[e],q),M=Y.loadStyle(e,D,W.dataStylesCache,M)}),Y.console.info("External Styles Loading Status: "+JSON.stringify(M)),Y.console.groupEnd("spaLoadingStyles")}else Y.console.info("No styles defined [data-styles] in view container ["+F+"] to load.");Y.console.groupEnd("spaLoadingViewStyles"),$.when.apply($,M).then(function(){Y.console.group("spaRender["+Z+"] - spa.renderHistory["+H.id+"]"),Y.console.info("Rendering "+F+" using master template: "+N);try{var A,R=!1,e=!bu("dataValidate","validate");if(!e){Y.console.info("Validating Data");var t=bu("dataValidate","validate");t&&_.isString(t)&&(t=Y.findSafe(window,t)),e=t&&_.isFunction(t)?t.call(f[p],f[p]):Y.api.isCallSuccess(f[p])}var j=f[p];e?$.when.apply($,function _dataPreProcessAsync(){var e,t=bu("dataPreProcessAsync","preProcessAsync");if(t&&_.isString(t)&&(t=Y.findSafe(window,t)),H.modelOriginal=$.extend({},j),H.model=j,t&&_.isFunction(t)){R=!0;var a=$.extend({},app[q]||{},z||{});e=t.call(a,j),(R=!Y.is(e,"undefined"))||(e=[]),R&&(A=!Y.is(e,"array")||Y.is(e,"array")&&1==e.length,Y.is(e,"array")||(e=[e]))}return e}()).done(function(){var a=Array.prototype.slice.call(arguments);R&&(Y.console.log(q,".dataPreProcessAsync() =>",a.__now()),A&&1<a.length&&"success"==a[1]?(a[0]=Y.toJSON(a[0]),a.splice(1)):_.each(a,function(e,t){e&&Y.is(e,"array")&&1<e.length&&"success"==e[1]&&(a[t]=Y.toJSON(e[0]))}),Y.console.log(a.__now()));var e,t=bu("dataProcess","process");if(t&&_.isString(t)&&(t=Y.findSafe(window,t)),H.modelOriginal=$.extend({},j),H.model=j,t&&_.isFunction(t)){var n=$.extend({},app[q]||{},z||{});a.unshift(j),e=t.apply(n,a)}else R&&(Y.console.warn(q,".dataPreProcessAsync without dataProcess. Merging responses."),a.unshift(j),_.merge.apply(_,a));if(H.model=Y.is(e,"undefined")?j:e,_.isObject(H.model)||(H.model=H.modelOriginal),Y.console.log(q,"Final Template Data:",H.model),q){if(is(app,"object")&&app.hasOwnProperty(q)){var r=_.merge({},is(H.model,"object")?H.model:{_noname:H.model});r.hasOwnProperty("spaComponent")?app[q].$data={}:app[q].$data=W.extend$data?_.merge({},W.dataDefaults,W.data_,W.dataExtra,W.dataXtra,W.dataParams,r):{},app[q].__global__=window||{}}H.model._this=_.merge({},Y.findSafe(window,"app."+q,{})),H.model._this_=_.merge({},Y.components[q]||{},z)}H.model._global_=window||{};var i,o=H.model,s=($(N).html()||"").replace(/_LINKTAGINTEMPLATE_/g,"link"),l=W.templateScript||Y.defaults.components.templateScript,c=(s=l?s.replace(/_BlockedScript_ src-ref="([^"])*"/g,"script").replace(/_BlockedScript_/g,"script"):s.replace(/<\/_BlockedScript_>/g,"&lt;/_BlockedScript_&gt;")).match(/({\s*\@\$(.*?)\s*})/g);!W.skipDataBind&&c&&_.forEach(c,function(e){s=s.replace(new RegExp(e.replace(/\$/,"\\$"),"g"),e.replace(/{\s*\$this|{\s*\@\$/g,"_global_.app.").replace(/}/,".").replace(/\s/g,"").replace(/\.\./,"."+(q||"")+"."))});var d,p,u=s.match(/({\s*\$(.*?)\s*})/g);if(!W.skipDataBind&&u&&_.forEach(u,function(e){s=s.replace(new RegExp(e.replace(/\$/,"\\$"),"g"),e.replace(/{\s*\$this|{\s*\$/g,"app.").replace(/}/,".").replace(/\s/g,"").replace(/\.\./,"."+(q||"")+"."))}),i=s,Y.console.log("Template Source:",s),Y.console.log("DATA for Template:",o),!Y.isBlank(o))if(W.skipDataBind)Y.console.log("Skipped Data Binding.");else{if(W.dataTemplatesCache||(delete Y.compiledTemplates4DataBind[q],delete Y.compiledTemplates[q]),!Y.compiledTemplates4DataBind.hasOwnProperty(q)&&/ data-bind\s*=/i.test(s)){s=function _maskHandlebars(e){return e.replace(/<img /gi,"<IMG-X-TMP ").replace(/<iframe /gi,"<IFRAME-X-TMP ").replace(/<\/iframe/gi,"</IFRAME-X-TMP").replace(/{{/g,">\x3c!--_XHBTINSPA_{{").replace(/}}/g,"}} _XHBTINSPA_--\x3e")}(s),Y.console.log("TemplateBeforeBind",s);var f=is(o,"object")?_.merge({},W.dataDefaults,W.data_,W.dataExtra,W.dataXtra,W.dataParams,o):o;Y.console.log("SPA built-in binding ... ...",f),s=_unmaskHandlebars(s=Y.bindData(s,f,"$"+q)),Y.console.log("TemplateAfterBind",s),Y.compiledTemplates4DataBind.hasOwnProperty(q)||(Y.compiledTemplates4DataBind[q]={}),d=!0}if(0<=Z.indexOf("handlebar")||0<=Z.indexOf("{"))if("undefined"!=typeof Handlebars&&Handlebars){Y.console.log("Data bind using handlebars.js.",s);try{var h=Y.compiledTemplates[q]||Handlebars.compile(s),m=is(o,"object")?_.merge({},H,W.dataDefaults,W.data_,W.dataExtra,W.dataXtra,W.dataParams,o):o;p=m,Y.compiledTemplates.hasOwnProperty(q)||(Y.compiledTemplates[q]=h),i=h(m),Y.console.log(i)}catch(e){console.error("Error in Template",e)}}else Y.console.error("handlebars.js is not loaded.")}Y.console.log("Template Compiled:",i),V=!1,H.view=i.replace(/\_\{/g,"{{").replace(/\}\_/g,"}}");var g=q?_.merge({},app[q]||{},{__prop__:_.merge({},z||{})}):{};g.__prop__&&g.__prop__.data&&(delete g.__prop__.data._global_,delete g.__prop__.data._this_,delete g.__prop__.data._this),H.model&&(delete H.model._global_,delete H.model._this_,delete H.model._this),Y.renderUtils.runCallbackFn(Y.defaults.components.render,C,g);var v,y,b,S=bu("dataBeforeRender","beforeRender");if(S){var C={template:s,data:H.model,view:H.view};if(v=Y.renderUtils.runCallbackFn(S,C,g),!Y.is(v,"undefined"))switch(Y.of(v)){case"string":H.view=v;break;case"boolean":y=!v}}if(b=H.view.beginsWithStr("\x3c!----\x3e"),y)H={},Y.console.warn("Render aborted by "+S);else if(!b){var k=X.attr("data-rendered-component");k&&!Y.removeComponent(k,q)&&(y=!0,H={},Y.console.warn("Render $"+q+" aborted by $"+k+".onRemove()"))}if(!y){if(b)Y.console.log("Rendering component [",q,"] view aborted.");else{var O=bu("dataRenderType","renderType");switch(Y.console.log("Injecting component in DOM (",F,")."+(O||"html")),O){case"value":$(F).val(H.view);break;case"text":$(F).text(H.view);break;default:switch(V=!0){case G.equalsIgnoreCase("append"):$(F).append(H.view);break;case G.equalsIgnoreCase("prepend"):$(F).prepend(H.view);break;default:$(F).html(H.view)}}}$(F).attr("data-rendered-component",q).data("renderedComponent",q),function _$renderCountUpdate(e){e=String(e).replace(/[^a-z0-9]/gi,"_"),app[e]&&(app[e].__renderCount__=Y.toInt(Y.$renderCount(e))+1)}(q),Y.console.info("Render: SUCCESS");var w=_.keys(Y.renderHistory),x=w.length;if(x>Y.renderHistoryMax&&$.each(w.splice(0,x-Y.renderHistoryMax),function(e,t){delete Y.renderHistory[t]}),H.cron=""+Y.now(),0<Y.renderHistoryMax&&(Y.renderHistory[H.id]=H),V&&!b&&(Y.renderUtils.registerComponentEvents(q),$(F).find(".lang-icon,.lang-text,[data-i18n-lang]").length&&Y.i18n.displayLang(),_init_SPA_DOM_(F),d||Y.bindData(F,p,"",!0),Y.i18n.apply(F),function _routeReloadUrl(e){var t=(Y.sesStore.get("_spaReloadUrl")||"").trim();if(e&&0!=t.indexOf(e))return;if(t)return Y.sesStore.remove("_spaReloadUrl"),t=t.replace(/.*#/gi,""),Y.route(t,!0),!0}(q)))return H;Y.console.log(H);var T=au("renderCallback");W.dataRenderCallback&&(T=W.dataRenderCallback);var E=_.isString(T)&&T.equalsIgnoreCase("off");Y.console.info("Processing callback: "+T),E||Y.renderUtils.runCallbackFn(T,H),Y.renderUtils.runCallbackFn(Y.defaults.components.callback,H,g),V&&!b&&($(F).find("[rel='spaRender'],[data-render],[data-sparender],[data-spa-render]").spaRender(),Y.renderComponentsInHtml(F,q))}}):Y.is(app.api.onResError,"function")?app.api.onResError(f[p],"Invalid-Data",void 0):Y.api.onResError(f[p],"Invalid-Data",void 0)}catch(e){console.error(e)}Y.console.groupEnd("spaRender["+Z+"] - spa.renderHistory["+H.id+"]")}).fail(function(){console.error("External Data|Template|Style|Script Loading failed! Unexpected!! Check the template Path / Network. Rendering aborted.")})}else Y.console.error("No templates defined [data-templates] in view container ["+F+"] to render. Check HTML markup.");Y.console.groupEnd("spaView")},function _onScriptsLoadFailed(){console.error("External Scripts Loading Failed! Unexpected!? Check the Script Path/Network.")}),H}if((z=_.merge({},F)).hasOwnProperty("target"))F=z.target,delete z.target;else{var b=$('[data-rendered-component="'+z.componentName+'"]').attr("id");(F=(b?"#":"")+b)||(Y.console.warn("Render target is missing."),F="dynRender_"+Y.now()+"_"+Y.rand(1e3,9999))}Y.render(F,z)}function _fixRefreshCalls(e,t,a){Y.is(W[e],"string")&&W[e]=="app."+q+t&&app[q].hasOwnProperty(a)&&(W[e]="app."+q+"."+a)}},Y.initElementsIn=_initSpaElements,Y.setElIdIfNot=function(e){var t=$(e);return Y.isBlank(t.attr("id"))&&t.attr("id","_el_"+Y.now()+"_"+Y.rand(1e3,9999)),t.attr("id")},Y.Foundation={autoReflow:!1},Y.reflowFoundation=function(e){"Foundation"in window&&Y.Foundation.autoReflow&&$(e||document).foundation("reflow")},$.expr[":"].regex=function(e,t,a){var n=a[3].split(","),r=/^(data|css):/,i={method:n[0].match(r)?n[0].split(":")[0]:"attr",property:n.shift().replace(r,"")};return new RegExp(n.join("").replace(/^\s+|\s+$/g,""),"ig").test($(e)[i.method](i.property))},$.fn.extend({spaRender:function(e){this.each(function(){!function __renderView(e,t){var a=Y.setElIdIfNot(e);return t&&!$.isEmptyObject(t)?Y.render("#"+a,t):Y.render("#"+a)}(this,e)})}}),$.extend({spaRender:function(e,t){$(e).spaRender(t)}}),$.fn.extend({renameAttr:function(e,t){return this.each(function(){this.setAttribute(t,this.getAttribute(e)),this.removeAttribute(e)}),this},spa$:function(){return this.map(function(){return $(this).closest("[data-rendered-component]")})},spa$name:function(){var e=this.map(function(){return $(this).closest("[data-rendered-component]").attr("data-rendered-component")});return 1==e.length?e[0]:e},spaBindData:function(e,t){return Y.bindData(this,e,t)},inBlockedSpaNavContainer:function(){return!!this.closest(w).length},blockNav:function(){return _blockSpaNavigation(this),this},allowNav:function(){return _allowSpaNavigation(this),this},isNavBlocked:function(){return _isSpaNavBlocked(this)},isNavAllowed:function(){return _isSpaNavAllowed(this)},disable:function(e){return e||Y.is(e,"undefined")?this.css("pointer-events","none").addClass("disabled").attr("disabled","disabled"):this.enable(!0)},enable:function(e){return e||Y.is(e,"undefined")?this.css("pointer-events","auto").removeClass("disabled").removeAttr("disabled"):this.disable(!0)},value:function(e,t){return Y.is(e,"undefined")?this.val():(this.each(function(){$(this).val(e).trigger(t||"change")}),this)},htm:function(e){return Y.is(e,"undefined")?this.html():(this.each(function(){$(this).html(Y.sanitizeScript(e))}),this)},dataJSON:function(e,t,a){var n;if(arguments.length){if(n=Y.toJSON(this.data(e)),n=Y.is(n,"object")?n:{},!Y.is(t,"undefined")){n=a?t:_.merge(n,t);var r=JSON.stringify(n),i=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();this.attr("data-"+i,r).data(e,r)}}else n=this.data();return n},isDisabled:function(e){var t=this.hasClass("disabled")||this.is("[disabled]");return t&&e&&e.call(this,this),t},isEnabled:function(e){var t=!this.isDisabled();return t&&e&&e.call(this,this),t},trackChanges:function(){Y.trackFormElChange(this)},isChanged:function(e){var t="ALL"==(e=(e||"ANY").toUpperCase()),a=!t,n=!1,r=this;if(r.length)for(var i=0;i<r.length;i++){var o=r[i].tagName.toUpperCase();if("FORM"==o)n=$(r[i]).find("input,textarea,select").isChanged(e);else if(0<"/INPUT/TEXTAREA/SELECT/".indexOf(o)){if(n=Y.isElValueChanged(r[i]),a&&n)break;if(t&&!n)break}}return n},initSpaRoutes:function(){_initRouteHash(this)},initFormValidation:function(){var e=this.filter("form");if(!e.length)return"Form Not Found";e.each(function(e,t){_initFormValidation(t)})},validateForm:function(e,t,a){var n,r=this;if(1<r.length)n=[{errcode:1,errmsg:"Too many forms to validate."}];else if(1==r.length){var i="#"+r.attr("id");if("FORM"==(r.prop("tagName")||"").toUpperCase())if(Y.is(e,"string")){var o=r.find(e).map(function(){return this.id}).get().join();n=Y.validateForm(i,o,t,a)}else n=Y.validateForm(i,e,t);else n=[{errcode:1,errmsg:"NOT a FORM"}]}else n=[{errcode:1,errmsg:"Form Not Found."}];return n},updateValidation:function(a,n){this.each(function(e,t){Y._validate._showValidateMsg(t,n,a)})},updateValidationPromise:function(e,t,a){Y.updateValidationPromise(e,this,a,t)}}),Y.initDataValidation=function(){Y.console.log("include validate framework lib (spa-validate.js) to use this feature!")},Y.doDataValidation=function(){Y.console.log("include validate framework lib (spa-validate.js) to use this feature!")},Y.properties={version:Y.VERSION},Y.api={baseUrl:"",liveUrlSuffix:"",urls:{},mock:!1,mockBaseUrl:"",mockRootFolder:"api_",mockDataFile:"data.json",defaultPayload:!1,forceParamValuesInMockUrls:!1,urlKeyIndicator:"@",url:function(e,t){e=(e||"").trimLeftStr(Y.api.urlKeyIndicator),t=t||{};var a,n,r=Y.api.urls[e]||e,i=r.beginsWithStr("!")||Y.api.mock||app.api.mock,o=r.beginsWithStr("!!")||r.beginsWithStr("~")||Y.api.forceParamValuesInMockUrls,s=_.uniq(r.extractStrBetweenIn("{","}"));return Y.isBlank(s)||_.each(s,function(e){(a=e.replace(/[{}<>]/g,""))&&(n=Y.findSafe(t,a,t._undefined),n=i&&!o?e.containsStr(">")?n:"_"+a:n,r=r.replace(new RegExp(e.replace(/([^a-zA-Z0-9])/g,"\\$1"),"g"),n))}),r},success:function(e){return[e,"success"]},isCallSuccess:function(){return!0},onReqError:function(e,t,a){Y.console.error([e,t,a]),Y.console.error($(e.responseText).text())},onResError:function(){},_call:function(n){var e=Y.findSafe(window,"app.api.ajaxOptions",{}),t=Y.is(n,"object")&&n.hasOwnProperty("error")?n.error:app.api.onError||Y.api.onReqError;if((n=$.extend({},e,n,{error:t,success:function(e,t,a){e=_.isString(e)&&"html"!=String(this.dataType).toLowerCase()?Y.toJSON(e):e,Y.api.isCallSuccess(e)?n._success.call(this,e,t,a):Y.is(app.api.onResError,"function")?app.api.onResError.call(this,e,t,a):Y.api.onResError.call(this,e,t,a)}})).dataType||(n.dataType="text"),"json".equalsIgnoreCase(n.dataType)&&!n.contentType&&(n.contentType="application/json"),n.data&&Y.is(n.data,"object")&&n.stringifyPayload&&(delete n.stringifyPayload,n.data=JSON.stringify(n.data)),n.defaultPayload){var a=Y.of(n.data),r=n.defaultPayload,i=Y.is(r,"function")?r(o):Y.is(r,"object")?_.merge({},r):r,o="string"==a?Y.toJSON(n.data):n.data;if(Y.is(i,"object")){var s=Y.is(o,"object")?_.merge({},i,o):i;Y.isBlank(s)||"string"!=a||(s=JSON.stringify(s)),n.data=s}}return n.url.beginsWithStr(Y.api.urlKeyIndicator)&&(n.url=Y.api.url(n.url.trimLeftStr(Y.api.urlKeyIndicator),n.data)),(app.debug||Y.debug)&&console.info(["API(ajax) call with options",n]),$.ajax(n)},_params2AxOptions:function(){var t,a,n,r,i={method:"GET",url:"",data:{},_success:function(){},async:!0};return _.each(arguments,function(e){switch(!0){case _.isString(e):t="url",i.url&&(a=!0,t="data");break;case Y.is(e,"function"):t=r?"error":(r=!0,"_success");break;case _.isBoolean(e):t="async";break;case _.isObject(e):a||e.__hasPrimaryKeys("ajaxOptions|dataUrlParams")?(t="axOptions",n=e.hasOwnProperty("ajaxOptions")?e.ajaxOptions:e):(t="data",a=!0);break;default:t="unknown"}"axOptions"!=t&&(i[t]=e)}),n&&(n.dataUrlParams&&((""+i.url).beginsWithStr(Y.api.urlKeyIndicator)&&(i.url=Y.api.url(i.url.trimLeftStr(Y.api.urlKeyIndicator),n.dataUrlParams)),delete n.dataUrlParams),_.merge(i,n)),Y.console.log("API ajax options >>"),Y.console.log(i),i},get:function(){return Y.api._call(Y.api._params2AxOptions.apply(void 0,arguments))},post:function(){return Y.api._call($.extend(Y.api._params2AxOptions.apply(void 0,arguments),{method:"POST"}))},put:function(){return Y.api._call($.extend(Y.api._params2AxOptions.apply(void 0,arguments),{method:"PUT"}))},del:function(){return Y.api._call($.extend(Y.api._params2AxOptions.apply(void 0,arguments),{method:"DELETE"}))},mix:function(){for(var e=[],t=arguments[arguments.length-1],a=0;a<arguments.length;a++)Y.is(arguments[a],"array")?e=e.concat(arguments[a]):Y.is(arguments[a],"function")||e.push(arguments[a]);return $.when.apply($,e).done(function(){var a=Array.prototype.slice.call(arguments);1==e.length&&1<a.length&&"success"==a[1]?(a[0]=Y.toJSON(a[0]),a.splice(1)):_.each(a,function(e,t){e&&Y.is(e,"array")&&1<e.length&&"success"==e[1]&&(a[t]=Y.toJSON(e[0]))}),t&&Y.is(t,"function")&&t.apply(void 0,a)})}},Y.i18n.onLangChange,Y.i18n.displayLang=function(){var e=$("html").attr("lang");if(e){var t=e,a=e.replace("-","_"),n=$('[data-i18n-lang="'+t+'"],[data-i18n-lang="'+a+'"]'),r=($("body").attr("i18n-lang-key-prefix")||"lang.name.")+a,i="-";$(".lang-text").attr("data-i18n",r).data("i18n",r),$("[data-i18n-lang]").removeClass("active"),n.length&&(n.addClass("active"),i=($(n[0]).data("i18nLang")||"").replace(/[a-z]/gi,""),$(".lang-icon").removeClass(Array.prototype.join.call($("[data-i18n-lang]").map(function(e,t){return $(t).data("i18nLang")})," "))),$(".lang-icon").addClass("-"==i?t:a),Y.i18n.apply(".lang-text")}return e},Y.ajax=_ajax,Y.mockSysTest=function _mockSysTest(){app.api&&_ajax({url:_mockFinalUrl(),method:"HEAD",error:function(){var e=Y.findSafe(app,"api.mockBaseUrl")||Y.findSafe(Y,"api.mockBaseUrl")||"",t=(e||location.origin).trimRightStr("/")+"/",a=e?"":(Y.findSafe(app,"api.mockRootFolder")||Y.findSafe(Y,"api.mockRootFolder")||"api_").trimRightStr("/"),n=prompt("Enter Mock Root Address: http[s]://server.address[:port]/root-folder",t+a);if(n){var r=n.indexOf("/",8),i=0<r?n.slice(0,r):n,o=0<r?n.substr(r+1):"";app.api.mockBaseUrl=i==location.origin?"":i,app.api.mockRootFolder=o,_mockSysTest()}}})};var f={},i={pub:function(a,e,n,r){var i,o;Y.is(e,"function")?(r=n,n=e):i=e;var s,l,c=0,d=[];return _.each(f[a],function(t){try{c++,s=t.fn,l=null,s&&(l=s.call(i||{},a,i,n,r)),d.push({id:""+(t.name||c),response:l}),!o&&Y.is(l,"boolean")&&(o=!l)}catch(e){console.warn("Execution error in subscribed function:"+t.name+" on-"+a),console.error(e.stack)}}),o?r&&Y.is(r,"function")&&r(d):n&&Y.is(n,"function")&&n(d),d},sub:function(e,t,a){return f.hasOwnProperty(e)||(f[e]=[]),f[e].push({fn:t,name:a}),f[e].length},unSub:function(e,t){var a=!1;return f.hasOwnProperty(e)&&(a=!0,t?f[e][t-1]=null:f[e]=[]),a}};Y.event={on:i.sub,off:i.unSub,trigger:i.pub,announce:i.pub};var h,o,m="#",s="",g=!0,v=[],y=100,b=!1,S="",c="",C=!1,k="",d="",O="",w="",x="",T="",E="",A=!1,R="";function _blockSpaNavigation(e){var t=$(e||"body :first");return t.addClass(O),h=_isSpaNavBlocked()||!0,t}function _allowSpaNavigation(e){var t=$(e||w);return t.removeClass(O),t.find(w).removeClass(O),h=_isSpaNavBlocked(),t}function _isToShowSpaNav(){return!o}function _isSpaNavBlocked(e){if(e){var t=$(e);return t.hasClass(O)||0<t.find(w).length}return!!$(w).length}function _isSpaNavAllowed(e){return!_isSpaNavBlocked(e)}function _onpageshow(){!function _blockBrowserNav(){h&&_replaceUrlHash(S)}()}var j="x"+Y.now();function _onPopStateChange(e){!function _routeSpaUrlOnHashChange(){var e=Y.urlHashFull(m);Y.console.log("on Hash Change: Url To [",e,"] from[",S,"] on click:",b," block-Navigation:",h,"isDelayed:",C),!b&&h?(Y.console.log("-------------\x3e",S,e,C,k),Y.console.log("lastBlocked:",d),d=d||S,"#"==m[0]?(_replaceUrlHash(C?k:S,e),d==e&&_handleNavAwayEvent(e)):(_replaceUrlHash(C?k:S,e),_handleNavAwayEvent(e))):(Y.console.log("Triggering next hash... by href:",A,"autoRoute:",g,"byClick",b),_triggerNextHash(g||!b))}(),c=c&&c!=j?(Y.console.warn("Blocked:",c),j):(c!=j&&(Y.onUrlHashChange?Y.onUrlHashChange(Y.urlHash([],m),e):Y.onUrlChange&&Y.onUrlChange(Y.urlHash([],m),e)),"")}function _onWindowReload(){var e,t;switch(Y.onReload&&(e=Y.onReload()),Y.of(e)){case"boolean":if(!e)return t="spa.message.on.window.reload",Y.i18n.text(t).replace(t,"");break;case"string":return(e=e.trim())&&(t=e.beginsWithIgnoreCase("i18n")?e.replace(/i18n(:)*/i,""):"")?Y.i18n.text(t).replace(t):e;default:if(t="spa.message.on.window.reload",h)return Y.i18n.text(t).replace(t,"")}}function _handleNavAwayEvent(e,t){var a,n,r,i,o,s;d=e,Y.console.log("Trying to navigate away from:["+S+"] To:["+e+"] by",t),$(w).each(function(){a=$(this),"#"==(n=(a.attr(R)||"").trim())[0]||">"==n[0]?(r=">"==n[0]?n.substr(1).trim():n,(i=a.find(r).filter(":not(.disabled):not(:disabled)")).length&&(t&&(s="id:'"+t.attr("id")+"', spaRoute:'"+t.attr(T)+"'"),i.data("navToUrl",e).attr("data-nav-to-url",e),i.data("navBy",s).attr("data-nav-by",s),i.trigger("click"))):(o=Y.findSafe(window,n.split("(")[0].split(";")[0]))&&Y.is(o,"function")&&o.call(a,e,a,t)})}Y.blockNav=_blockSpaNavigation,Y.allowNav=_allowSpaNavigation,Y.isNavBlocked=_isSpaNavBlocked,Y.isNavAllowed=_isSpaNavAllowed,Y.isToShowNav=_isToShowSpaNav,Y.isInBlockedSpaNavContainer=function _inBlockedSpaNavContainer(e){return!!$(e).closest(w).length},window.onerror=function(e,t,a){console.warn("Invalid Content: Check the network/path/content.",e,t,a)};var N=[];function _processDynHash(e,t){var a=0<=e.indexOf(":"),n=t;if(Y.is(t,"boolean")&&(n=t?"click":""),a){var r,i,o=a?e.split(":")[0]:"",s={},l=0<e.indexOf("&")?e.split("&"):0<e.indexOf(",")?e.split(","):[e];_.each(l,function(e){r=e.split(":")[0],i=e.getRightStr(":"),s[r]=decodeURIComponent(i)});var c=$("["+T+'*="/'+o+':"]['+E+"]"),d=(c.attr(E)||"").trim();if(a=!Y.isBlank(d)){N.push(e);var p=Y.toJSON(d);_.each(p,function(e,t){if(e=e.trim(),/(^app\.(.)+\.)|(^\$)|(^\#)/.test(e))Y.setElValue(e,s[t]);else if(/^fn:/i.test(e)){var a=e.split(" ")[0].getRightStr(":").trim().split("(")[0];(a=a?Y.findSafe(window,a):"")&&Y.is(a,"function")?a(t,s[t]):console.warn("Not a function",e)}}),n&&c.isEnabled()&&!c.hasClass("AUTO-ROUTING")&&c.trigger(n)}}return a}function _triggerNextHash(e){e&&!function _initAutoRoute(){v=[],y=50}(),g=Y.is(e,"undefined")?g:e;var t,a,n,r=Y.urlHash([],m),i=r.length-1;if(y<0&&(g=!1),g){y--;for(var o=i;0<=o&&(n=r[o-1]||"",g&&0<n.indexOf(":")&&!v.__has(n)&&o--,t=r[o],a=o==i,g&&!v.__has(t));o--)if(t){var s=0<=t.indexOf(":"),l=s?t.split(":")[0]:"",c="["+T+'$="/'+t+'"]:not(:disabled):not(.disabled):not(.AUTO-ROUTING):first';s&&(c="["+T+'*="/'+l+':"]['+E+"]");var d=$(c);if(d.length){if(s=s&&_processDynHash(t),v.push(t),g=!a,d.isEnabled()&&!d.hasClass("AUTO-ROUTING")&&d.addClass("AUTO-ROUTING").trigger(d.data("routeEvent")||"click"),a){p="";break}o+=2}}}b=!1}function _updateBrowserAddress(e,t){Y.console.log("_updateBrowserAddress >>>>>>>>>[",e,"]delay:",t,"prev:",S);var a="#"==m[0];if(e)if(S=e,a){Y.console.log(e);var n=$("#_spaRouteLink_");n.length||(n=$('<a id="_spaRouteLink_" href=""></a>'),$("body").append(n)),Y.console.log("################# "+e),n.attr("href",e)[0].click()}else Y.console.log(e),"#"!=(e=e.trimLeftStr("/"))[0]&&(e="//"+window.location.host+_getAboluteUrl("/",e),Y.console.log("updating the address bar with >>>>>",e)),Y.console.log(">>>>>>>>>>>>>>>>> "+e),history.pushState(null,null,e)}function _replaceUrlHash(e,t){e!=t&&(Y.console.log("attempt to set URL:",e,"insteadOf",t),c=t,_updateBrowserAddress(e))}function _getNewMatchingRoutes(e){if(!(e=(e||"").trim()))return[];var t=Y.urlHash([],m),a=e.trimStr("/").split("/"),n=[],r=a[0];function getMatchHash(e,t){var a=t,n=t.getLeftStr("*");if(n)for(var r=0;r<e.length;r++)if(e[r].beginsWithStr(n)){a=e[r];break}return a}var i=t.indexOf(r);if(0<r.indexOf("*")){r=r.getLeftStr("*");for(var o=0;o<t.length;o++)if(t[o].beginsWithStr(r)){i=o;break}}if(0<=i){for(var s,l=t.splice(i),c=0;c<a.length;c++)s=a[c].indexOf("*"),n[c]=s<0?a[c]:s?getMatchHash(l,a[c]):l[c];n=t.concat(n)}else n="/"==e[0]?a:t.concat(a);return n}function _onRouteElClick(e){var a,n,r,i,o,t,s,l=Y.urlHash([],m),c=$(this);if(c.hasClass("disabled")||c.is(":disabled"))return e.stopImmediatePropagation(),e.stopPropagation(),void e.preventDefault();function update(e,t){"#"==(a=(e||"").trim())[0]&&(a=a.substr(1)),n="<"==a[0],r=">"==a[0],i=t||a[r?1:0],o=a.substr(r?2:1),s=!1}"#"!=m[0]&&e.preventDefault(),update(c.attr(T),c.attr("data-route-dir"));var d=(c.attr(E)||"").trim();if(d){var p,u=Y.toJSON(d);_.each(u,function(e,t){if(/(^app\.(.)+\.)|(^\$)|(^\#)/.test((p=e).trim()))p=Y.getElValue(e);else if(/^fn:/i.test(e.trim())){var a=e.split(" ")[0].getRightStr(":").trim().split("(")[0];(a=a?Y.findSafe(window,a):"")&&Y.is(a,"function")?p=a(t):console.warn("Not a function",e)}o=o.replace(new RegExp(t+":","g"),t+":"+encodeURIComponent(p))})}if(_triggerClickEventOnAttr(this,"onrouteclick"),c.hasClass("AUTO-ROUTING"))c.removeClass("AUTO-ROUTING");else{switch("^"==i&&(Y.isBlank(l)?update(a.substr(1)):(e.preventDefault(),s=!0,i="/",o=Y.urlHash("",m))),"#/-<>".indexOf(i)<0&&(o=i+o,i="?"),i){case"#":case"/":l=_getNewMatchingRoutes(o);break;case"-":var f=Y.toInt(o.replace(/[^0-9]/g,""))||1;l.length&&(l.length=l.length-f);break;case"<":t=S;break;case"?":l=_getNewMatchingRoutes(o)}n||(t=_getAboluteUrl(m,l.join("/"))),h&&(n||c.hasClass(x)||c.inBlockedSpaNavContainer()||(r=!0,_handleNavAwayEvent(t,c))),Y.console.log("Routing to...",t,"delay:",r,"prev:",S),function _updateUrlHash(e,t,a){Y.console.log("Updating url with:",e,"delay:",t,"autoRoute:",a),g=a,k=(C=t)?S:"",t?S=e:(b=!0,Y.isToShowNav()?g||_updateBrowserAddress(e,t):S=e)}(t,r,s)}}function _onRouteAutoReg(){Y.route(this.getAttribute(T+"-AUTO").substr(1))}function _initRouteHash(e){$(e||"body").find("["+T+'^="*"]:not(.ROUTE):not(.ROUTE-AUTO)').renameAttr(T,T+"-AUTO").addClass("ROUTE-AUTO").on("click",_onRouteAutoReg);var t,a,n,r=$(e||"body").find("["+T+"]:not(.ROUTE)").renameAttr("onclick","onrouteclick").addClass("ROUTE").off("click",_onRouteElClick).on("click",_onRouteElClick);A&&r.length&&r.each(function(){t=$(this),a=t.attr("href").replace(/\s*/g,"").trim(),n="","#"==a[0]?0<="^><-".indexOf(a[1])&&(n=a[1],a=a.substr(2)):0<="^".indexOf(a[0])&&(n=a[0],a=a.substr(1)),t.attr("href","#"+a).removeAttr("target").attr("data-route-dir",n)});_triggerNextHash(),h=Y.isNavBlocked()}function _routeToUrl(e){if(e=(e||"").trim()){var t,a,n=e[0],r=1;switch("#/-<>".indexOf(n)<0&&(n="?",r=0),t=e.substr(r),n){case"/":a=_getNewMatchingRoutes(t);break;case"-":a=Y.urlHash([],m);var i=Y.toInt(e.replace(/[^0-9]/g,""))||1;a.length&&(a.length=a.length-i);break;case"?":a=_getNewMatchingRoutes(t);break;default:a=[t]}return _getAboluteUrl(m,a.join("/"))}}function _StoreMgmt(r){function _set(t,e){function _store(e,t){r.setItem(""+e,JSON.stringify(t))}1==arguments.length?_type(t,"object")?Object.keys(t).forEach(function(e){_store(e,t[e])}):_type(t,"array")&&t.forEach(function(e,t){_store(t,e)}):2==arguments.length&&_store(t,e)}function _get(e){return 0==arguments.length?_all():1!=arguments.length?_all.apply(null,arguments):_type(e,"string")?0<e.indexOf(",")?_all.apply(null,e.split(",")):JSON.parse(r.getItem(e)):_type(e,"array")?_all.apply(null,e):void 0}function _all(){var t=arguments.length,a=Array.prototype.slice.call(arguments).map(function(e){return(""+e).trim()}),n={};return Object.keys(r).forEach(function(e){(!t||-1<a.indexOf(e))&&(n[e]=_get(e))}),n}function _clear(){if(arguments.length){var t=Array.prototype.slice.call(arguments).map(function(e){return(""+e).trim()});Object.keys(r).forEach(function(e){t.indexOf(e)<0&&r.removeItem(e)})}else r.clear()}function _type(e,t){var a=Object.prototype.toString.call(e).split(" ")[1].toLowerCase().replace(/\]$/gi,"");return 2==arguments.length?-1<(""+t).toLowerCase().indexOf(a):a}function AD(e,t){return 0==arguments.length?_all():1==arguments.length?_type(e,"object|array")?(_set(e),e):_get(e):2==arguments.length?(_set(e,t),_get(e)):void 0}return AD.set=_set,AD.get=_get,AD.getAll=_all,AD.remove=function _remove(e){function _removeItems(){arguments.length&&Array.prototype.slice.call(arguments).forEach(function(e){r.removeItem(e)})}0==arguments.length?_clear():1==arguments.length?_type(e,"string")?0<e.indexOf(",")?_removeItems.apply(null,e.split(",")):function _removeItem(e){r.removeItem(e)}(e):_type(e,"array")&&_removeItems.apply(null,e):_removeItems.apply(null,arguments)},AD.removeAll=_clear,AD.removeExcept=_clear,AD.clear=_clear,AD.clearExcept=_clear,AD}Y.parseRoutes=_getNewMatchingRoutes;try{Y.sesStore=_StoreMgmt(sessionStorage)}catch(e){console.warn("No Access to sessionStorage.",e)}try{Y.locStore=_StoreMgmt(localStorage)}catch(e){console.warn("No Access to localStorage.",e)}function _onViewDataChange(){var e=this,t=$(e),a=Y.getElValue(e),n={},r=t.spa$()[0],i=t.spa$name(),o="2way".equalsIgnoreCase(Y.components[i].dataBindType);e.classList.add("DATA-MODEL-CHANGE-SRC");var s=function _getBindKeyOf(e,t){var a,n,r=e.getAttribute("data-bind"),i="";return r&&!r.containsStr(":")&&(r=_defaultAttr(e)+":'"+r+"'"),(a=Y.toJSON(r||"{}"))&&!$.isEmptyObject(a)&&_.some(_.keys(a),function(e){return!i&&new RegExp(t,"i").test(e)&&(n=a[e].split("|"),i=n.shift().trim()),!!i}),i}(e,"value|$");Y.setSimpleObjProperty(n,s,a),o&&(_.merge(Y.$data(i),n),app[i].is$DataUpdated=Y.components[i].is$DataUpdated=!0),Y.bindData(r,n,'[data-bind*="'+s+'"]:not(.DATA-MODEL-CHANGE-SRC)',!0),e.classList.remove("DATA-MODEL-CHANGE-SRC"),o&&Y.renderUtils.runCallbackFn("app."+i+".$dataChangeCallback",app[i].$data,app[i])}function _initDataBind(e,t){function _bindEvent(e,t){$(e).on((e.getAttribute("data-bind-event")||t).toLowerCase(),_onViewDataChange)}var a="[data-bind]:not(.SPA-DATA-BOUND)",n=$(e||"body").find((t||"")+" "+a);n.length||t||(n=$(e+a)),n.length&&(n.filter("textarea,input:not([type=radio]):not([type=checkbox])").addClass("SPA-DATA-BOUND").each(function(){_bindEvent(this,"keyup")}),n.filter("select,input[type=radio],input[type=checkbox]").addClass("SPA-DATA-BOUND").each(function(){_bindEvent(this,"change")}))}function _init_SPA_DOM_(e){Y.reflowFoundation(e),_initKeyTracking("",e),function _initKeyPauseEvent(e){$(e||"body").find("[onKeyPause]:not([onKeyPauseReg])").each(function(e,t){$(t).attr("onKeyPauseReg","").on("input propertychange paste",function(){var a=this,e=1*((""+a.getAttribute("data-pause-time")).replace(/[^0-9]/g,"")||"1250");n&&clearTimeout(n),n=setTimeout(function(){var e=a.getAttribute("onKeyPause").split("(")[0],t=Y.findSafe(window,e);t&&t.call(a,a)},e)})})}(e),_initSpaElements(e),Y.initTrackFormElChanges(e),function _initFormValidationInScope(e){Y.hasOwnProperty("initDataValidation")?$(e||"body").find("[data-validate-form],[data-validate-scope],form:has([data-validate])").filter(":not([data-validation-initialized])").each(function(e,t){_initFormValidation(t)}):console.warn("SPA validation module is not loaded.")}(e),_initRouteHash(e),Y.initTogglePassword(e),_initDataBind(e),function _processDynHashInUrl(){for(var e,t=Y.urlHash([],m),a="",n=0;n<t.length;n++)a=t[n],0<=(e=N.indexOf(a))?N.splice(e,1):_processDynHash(a,n==t.length-1)}()}function _init_SPA_(){!function _ctrlBrwowserNav(){window.onpageshow=_onpageshow,Y.isIE?window.onhashchange=_onPopStateChange:window.onpopstate=_onPopStateChange,is(window,"window")&&(window.onbeforeunload=_onWindowReload)}(),function init_i18n_Lang(){$(document).on("click","[data-i18n-lang]",function(){var e=$(this).data(),a=e.i18nLang||"",n=(e.i18nLang||"").replace("-","_"),r=($("body").attr("i18n-lang-key-prefix")||"lang.name.")+n;_setLang(n,{callback:function(){var e="-",t=$("[data-i18n-lang]:first");t.length&&(e=(t.data("i18nLang")||"").replace(/[a-z]/gi,"")),$(".lang-text").attr("data-i18n",r).data("i18n",r),$(".lang-icon").removeClass(Array.prototype.join.call($("[data-i18n-lang]").map(function(e,t){return $(t).data("i18nLang")})," ")).addClass("_"==e?n:a),$("[data-i18n-lang]").removeClass("active"),$('[data-i18n-lang="'+a+'"],[data-i18n-lang="'+n+'"]').addClass("active"),Y.i18n.apply(".lang-text")}})});var e=($("body").attr("i18n-lang")||"").replace(/ /g,""),t=e.split(",")[0];if(e){if("*"==t&&(t=Y.i18n.browserLang(),(","+e.toLowerCase()+",").indexOf(","+t.toLowerCase()+",")<0)){t=t.getLeftStr(2).toLowerCase();for(var a=e.split(","),n="",r="",i=0;i<a.length;i++)if(0==(n=(a[i]||"").trim()).toLowerCase().indexOf(t)){r=n;break}t=r||(e.split(",")[1]||"")}t&&(_setLang(t,{},!0),setTimeout(function(){Y.i18n.displayLang()},500))}}(),_init_SPA_DOM_("body"),Y.i18n.apply("body")}function _initApiUrls(){(ee=!!Object.keys(app.api).length)&&Y.console.log("Initializing app.api");var e=Y.findSafe(window,"app.api.baseUrl");Y.isBlank(e)||(Y.api.baseUrl=e);var t=Y.findSafe(window,"app.api.urls");if(Y.isBlank(Y.api.urls)&&!Y.isBlank(t)&&(Y.api.urls=app.api.urls),!Y.isBlank(Y.api.urls)){var a=Y.findSafe(window,"app.api.liveApiPrefix|app.api.mockRootAtPaths");if(!Y.isBlank(a)){var n,r,i=is(a,"array")?a:(""+a).split(",");_.each(i,function(a,e){a=a.trim(),"!"!=(n=a[0])&&"~"!=n||(a=a.substr(1),_.each(Y.api.urls,function(e,t){"!"!=(r=e[0])&&"~"!=r&&(0==e.indexOf(a)||0<e.indexOf("/"+a))&&(Y.api.urls[t]=n+e)})),i[e]=a}),app.api.liveApiPrefix=i,delete app.api.mockRootAtPaths}}}function _initSpaApp(){function runSpaEvent(e){if(Y[e])return Y[e]()}$.when(runSpaEvent("onInit")).done(function initSpaModules(){if(Y.env&&"dev".equalsIgnoreCase(Y.env)){var e={components:{templateCache:!(Y.api.mock=!0),callback:function(){console.log("spa$>",this.__prop__.componentName)}}};Y.defaults.set(e)}$.when(_init_SPA_()).done(function(){$.when(runSpaEvent("onInitComplete")).done(function(){$.when(runSpaEvent("onReady")).done(Y.renderComponentsInHtml)})})})}function _initSpaDefaults(){var t,e=$("body"),a=e[0],n=e.data();Y.isBlank(n)||(n.spaDefaults=Y.toJSON(a.getAttribute("data-spa-defaults")||{}),_.each(Object.keys(Y.defaults),function(e){e.equalsIgnoreCase("set")||(t=n.spaDefaults[e]||n["spaDefaults"+e.toTitleCase()],Y.isBlank(t)||_.merge(Y.defaults[e],Y.toJSON(t)))})),function _initRoutesDefaults(){S=Y.urlHashFull(m),m=(Y.findSafe(Y,"defaults.routes.base","")||"#").trim(),O=(Y.findSafe(Y,"defaults.routes.className.block","")||"BLOCK-SPA-NAV").trim(),w="."+O,x=(Y.findSafe(Y,"defaults.routes.className.allow","")||"ALLOW-SPA-NAV").trim(),s=(Y.findSafe(Y,"defaults.routes.className.hide","")||"HIDE-SPA-NAV").trim(),T=(Y.findSafe(Y,"defaults.routes.attr.route","")||"data-spa-route").trim(),E=(Y.findSafe(Y,"defaults.routes.attr.params","")||"data-spa-route-params").trim(),A=T.equalsIgnoreCase("href"),R=(Y.findSafe(Y,"defaults.routes.attr.onNavAway","")||"onNavAway").trim(),o=$("body").hasClass(s)}(),_initApiUrls()}Y.reload=function(e){e&&Y.sesStore.set("_spaReloadUrl",e||""),Y.allowNav(),window.location.reload()},Y.hasReloadUrl=function(){return!!(Y.sesStore.get("_spaReloadUrl")||"").trim()},Y.initRoutes=_initRouteHash,Y.route=function _routeNewUrl(e,t){var a=_routeToUrl(e);if(Y.console.log("Route:",e,"URL:",a),a)if(!t&&h)_handleNavAwayEvent(a);else{var n=function _$routeElement(e){return $("["+T+'$="'+e.trim()+'"].ROUTE:first')}(e);n.length?n.hasClass("disabled")||n.is("[disabled]")?console.warn("Route:",e,"is disabled."):n.click():(_isToShowSpaNav()?_updateBrowserAddress(a):p=a,"/"==e.trim()?(Y.allowNav(),window.location.reload()):_onPopStateChange())}},Y.routeUrl=_routeToUrl,Y.routeEl=function _$routeElements(e){return $("["+T+'$="'+e.trim()+'"].ROUTE')},Y.initDataBind=_initDataBind,Y.async=function(n){var r=Array.prototype.slice.call(arguments,1);setTimeout(function fnAsyc(){var e=n.apply(void 0,r),t=r.length,a=t?r[t-1]:"";a&&Y.is(a,"function")&&a(e)},0)},$(document).ready(function(){_initSpaDefaults(),Y.debug=Y.urlParam("spa.debug")||Y.hashParam("spa.debug")||Y.debug,$.ajaxPrefilter(_ajaxPrefilter),_initSpaApp()})}(),spa.console.info("spa loaded.");