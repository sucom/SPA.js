/** @license SPA.js | (c) Kumararaja | License (MIT) */
window.app=window.app||{api:{}},window.app.api=window.app.api||{},function(){for(var e,t=function(){},n=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],a=n.length,r=window.console=window.console||{};a--;)e=n[a],r[e]||(r[e]=t);"none"in window||(window.none=""),"noop"in window||(window.noop=function(){})}(),function(){function e(e,t){return e>t}function t(e){return e}function n(e,t,n){for(var a=-1,r=e.length;r>++a;){var o=e[a],i=t(o);if(null!=i&&(void 0===s?i===i&&!ot(i):n(i,s)))var s=i,l=o}return l}function a(a){return a&&a.length?n(a,t,e):void 0}function r(e){return e}function o(e,t,n){if(!K(n))return!1;var a=typeof t;return("number"==a?tt(n)&&et(t,n.length):"string"==a&&t in n)?dt(n[t],e):!1}function i(e,t){return Yn.setToString(Yn.overRest(e,t,r),e+"")}function s(e){return i(function(t,n){var a=-1,r=n.length,o=r>1?n[r-1]:void 0,i=r>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(r--,o):void 0,i&&isIterateeCall(n[0],n[1],i)&&(o=3>r?void 0:o,r=1),t=Object(t);r>++a;){var s=n[a];s&&e(t,s,a,o)}return t})}function l(e,t,n){var a=-1,r=gn,o=e.length,i=!0,s=[],l=s;if(n)i=!1,r=hn;else if(o>=Yn.LARGE_ARRAY_SIZE){var c=t?null:Yn.createSet(e);if(c)return Yn.setToArray(c);i=!1,r=Sn,l=new Yn.SetCache}else l=t?[]:s;e:for(;o>++a;){var u=e[a],d=t?t(u):u;if(u=n||0!==u?u:0,i&&d===d){for(var p=l.length;p--;)if(l[p]===d)continue e;t&&l.push(d),s.push(u)}else r(l,d,n)||(l!==s&&l.push(d),s.push(u))}return s}function c(e){return q(e)&&tt(e)}function u(e,t,n,a,r){var o=-1,i=e.length;for(n||(n=st),r||(r=[]);i>++o;){var s=e[o];t>0&&n(s)?t>1?u(s,t-1,n,a,r):dn(r,s):a||(r[r.length]=s)}return r}function d(e){var t=null==e?0:e.length;return t?u(e,1):[]}function p(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&ta.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function f(e,t,n){var a=t(e);return X(e)?a:dn(a,n(e))}function g(e){return f(e,U,ca)}function h(e,t){return t=m(t,e),e=an(e,t),null==e||delete e[ht(St(t))]}function m(e,t){return X(e)?e:at(e,t)?[e]:Tt(vt(e))}function v(e){return Yn.setToString(Yn.overRest(e,void 0,d),e+"")}function y(e){if(!q(e)||rn(e)!=Yn.objectTag)return!1;var t=ia(e);if(null===t)return!0;var n=ta.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&aa.call(n)==ra}function b(e){return y(e)?void 0:e}function S(e,t){var n=-1,a=e.length;for(t||(t=Array(a));a>++n;)t[n]=e[n];return t}function _(e,t,n,a){var r=!n;n||(n={});for(var o=-1,i=t.length;i>++o;){var s=t[o],l=a?a(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),r?ln(n,s,l):I(n,s,l)}return n}function O(e,t){if(t)return e.slice();var n=e.length,a=na?na(n):new e.constructor(n);return e.copy(a),a}function T(e){return"function"!=typeof e.constructor||rt(e)?{}:Yn.baseCreate(ia(e))}function C(e){var t=new e.constructor(e.byteLength);return new Yn.Uint8Array(t).set(new Yn.Uint8Array(e)),t}function k(e,t){var n=t?C(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function w(e){var t=-1,n=Array(e.size);return e.forEach(function(e,a){n[++t]=[a,e]}),n}function x(e,t,n,a){var r=-1,o=null==e?0:e.length;for(a&&o&&(n=e[++r]);o>++r;)n=t(n,e[r],r,e);return n}function $(e,t){var n=t?C(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function E(e){var t=new e.constructor(e.source,Yn.reFlags.exec(e));return t.lastIndex=e.lastIndex,t}function A(e,t){return e.set(t[0],t[1]),e}function j(e,t){return e.add(t),e}function P(e,t,n){var a=t?n(w(e),Yn.CLONE_DEEP_FLAG):w(e);return x(a,A,new e.constructor)}function R(e,t,n){var a=t?n(Yn.setToArray(e),Yn.CLONE_DEEP_FLAG):Yn.setToArray(e);return x(a,j,new e.constructor)}function N(e){return Yn.symbolValueOf?Object(Yn.symbolValueOf.call(e)):{}}function L(e,t,n,a){var r=e.constructor;switch(t){case Yn.numberTag:case Yn.stringTag:return new r(e);case Yn.boolTag:case Yn.dateTag:return new r(+e);case Yn.arrayBufferTag:return C(e);case Yn.float32Tag:case Yn.float64Tag:case Yn.int8Tag:case Yn.int16Tag:case Yn.int32Tag:case Yn.uint8Tag:case Yn.uint8ClampedTag:case Yn.uint16Tag:case Yn.uint32Tag:return k(e,a);case Yn.mapTag:return P(e,a,n);case Yn.dataViewTag:return $(e,a);case Yn.regexpTag:return E(e);case Yn.setTag:return R(e,a,n);case Yn.symbolTag:return N(e)}}function I(e,t,n){var a=e[t];ta.call(e,t)&&dt(a,n)&&(void 0!==n||t in e)||ln(e,t,n)}function B(e){return K(e)?Yt(e):W(e)?Yt(e.split("")):[]}function U(e){return tt(e)?en(e,!0):Zt(e)}function D(e){return f(e,keys,Yn.getSymbols)}function F(e,t){return _(e,Yn.getSymbols(e),t)}function M(e,t){return _(e,ca(e),t)}function z(e,t){return e&&_(t,B(t),e)}function V(e,t){return e&&_(t,U(t),e)}function J(e,t){for(var n=-1,a=null==e?0:e.length;a>++n&&t(e[n],n,e)!==!1;);return e}function H(e,t,n,a,r,o){var i,s=t&CLONE_DEEP_FLAG,l=t&CLONE_FLAT_FLAG,c=t&CLONE_SYMBOLS_FLAG;if(n&&(i=r?n(e,a,r,o):n(e)),void 0!==i)return i;if(!K(e))return e;var u=X(e);if(u){if(i=p(e),!s)return S(e,i)}else{var d=sn(e),f=d==Yn.funcTag||d==Yn.genTag;if(Qn(e))return O(e,s);if(d==Yn.objectTag||d==Yn.argsTag||f&&!r){if(i=l||f?{}:T(e),!s)return l?M(e,V(i,e)):F(e,z(i,e))}else{if(!Yn.cloneableTags[d])return r?e:{};i=L(e,d,H,s)}}o||(o=new Yn.Stack);var h=o.get(e);if(h)return h;o.set(e,i);var m=c?l?g:D:l?U:B,v=u?void 0:m(e);return J(v||e,function(a,r){v&&(r=a,a=e[r]),I(i,r,H(a,t,n,r,e,o))}),i}function W(e){return"string"==typeof e||!X(e)&&q(e)&&rn(e)==Yn.stringTag}function K(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function q(e){return null!=e&&"object"==typeof e}function G(e){return null!=e&&"function"==typeof e}function X(e){return"[object Array]"===Object.prototype.toString.call(e)}function Y(e){return e===!0||e===!1||q(e)&&rn(e)==Yn.boolTag}function Q(e){return"number"==typeof e||q(e)&&rn(e)==Yn.numberTag}function Z(e){return"number"==typeof e&&e>-1&&0==e%1&&Yn.MAX_SAFE_INTEGER>=e}function et(e,t){return t=null==t?Yn.MAX_SAFE_INTEGER:t,!!t&&("number"==typeof e||Yn.reIsUint.test(e))&&e>-1&&0==e%1&&t>e}function tt(e){return null!=e&&Z(e.length)&&!G(e)}function nt(e){var t=typeof e;return"undefined"==t||null==e?!0:"string"==t||"[object Array]"===Object.prototype.toString.call(e)?!e.length:"object"==t?!Object.keys(e).length:!1}function at(e,t){if(X(e))return!1;var n=typeof e;return"number"==n||"symbol"==n||"boolean"==n||null==e?!0:Yn.reIsPlainProp.test(e)||!Yn.reIsDeepProp.test(e)||null!=t&&e in Object(t)}function rt(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||Yn.objectProto;return e===n}function ot(e){return"symbol"==typeof e||q(e)&&sn(e)==Yn.symbolTag}function it(e){return q(e)&&Z(e.length)&&!!Yn.typedArrayTags[sn(e)]}function st(e){return X(e)||!!(Yn.spreadableSymbol&&e&&e[Yn.spreadableSymbol])}function lt(e){return Zn.call(e)}function ct(e){return e===e&&!K(e)}function ut(e){return _(e,U(e))}function dt(e,t){return e===t||e!==e&&t!==t}function pt(e,t){for(var n=e.length;n--;)if(dt(e[n][0],t))return n;return-1}function ft(e){return e!==e}function gt(e){var t=Yn.INFINITY,n=Yn.MAX_INTEGER;if(!e)return 0===e?e:0;if(e=1*e,e===t||e===-t){var a=0>e?-1:1;return a*n}return e===e?e:0}function ht(e){if("string"==typeof e)return e;var t=e+"";return"0"==t&&1/e==-Yn.INFINITY?"-0":t}function mt(e){if("string"==typeof e)return e;if(X(e))return bt(e,mt)+"";var t=e+"";return"0"==t&&1/e==-Yn.INFINITY?"-0":t}function vt(e){return null==e?"":mt(e)}function yt(e){var t=gt(e),n=t%1;return t===t?n?t-n:t:0}function bt(e,t){for(var n=-1,a=null==e?0:e.length,r=Array(a);a>++n;)r[n]=t(e[n],n,e);return r}function St(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}function _t(e,t,n,a){for(var r=-1,o=Math.max(Math.ceil((t-e)/(n||1)),0),i=Array(o);o--;)i[a?o:++r]=e,e+=n;return i}function Ot(e,t,n){return n&&"number"!=typeof n&&(n=void 0),e=gt(e),void 0===t?(t=e,e=0):t=gt(t),n=void 0===n?t>e?1:-1:gt(n),_t(e,t,n,!1)}function Tt(e){var t=[];return Yn.reLeadingDot.test(e)&&t.push(""),e.replace(Yn.rePropName,function(e,n,a,r){t.push(a?r.replace(Yn.reEscapeChar,"$1"):n||e)}),t}function Ct(e,t,n){t=m(t,e);for(var a=-1,r=t.length,o=!1;r>++a;){var i=ht(t[a]);if(!(o=null!=e&&n(e,i)))break;e=e[i]}return o||++a!=r?o:(r=null==e?0:e.length,!!r&&Z(r)&&X(e))}function kt(e,t){return null!=e&&ta.call(e,t)}function wt(e,t){return null!=e&&Ct(e,t,kt)}function xt(e,t){return null!=e&&t in Object(e)}function $t(e,t){return null!=e&&Ct(e,t,xt)}function Et(e,t){return cn(e||[],t||[],I)}function At(e,t,n){var a=null==e?0:e.length;if(!a)return-1;var r=null==n?0:yt(n);return 0>r&&(r=Math.max(a+r,0)),qt(e,t,r)}function jt(e,t,n){var a=null==e?void 0:nn(e,t);return void 0===a?n:a}function Pt(e,t,n){var a=null==e?0:e.length;if(!a)return-1;var r=null==n?0:yt(n);return 0>r&&(r=Math.max(a+r,0)),Cn(e,Nn(t,3),r)}function Rt(e,t,n){var a=Object(e);if(!tt(e)){var r=Nn(t,3);e=B(e),t=function(e){return r(a[e],e,a)}}var o=Pt(e,t,n);return o>-1?a[r?e[o]:o]:void 0}function Nt(e){return at(e)?jn(ht(e)):Pn(e)}function Lt(e,t){var n=[];if(!e||!e.length)return n;var a=-1,r=[],o=e.length;for(t=Nn(t,3);o>++a;){var i=e[a];t(i,a,e)&&(n.push(i),r.push(a))}return Ln(e,r),n}function It(e,t){return e&&e.length&&t&&t.length?Fn(e,t):e}function Bt(e,t){var n=X(e)?J:pa;return n(e,Nn(t,3))}function Ut(e,t,n){var a=X(e)?pn:Mn;return n&&o(e,t,n)&&(t=void 0),a(e,Nn(t,3))}function Dt(e,t){var n=X(e)?bt:zn;return n(e,Nn(t,3))}function Ft(e,t,n){var a=X(e)?fn:Vn;return n&&o(e,t,n)&&(t=void 0),a(e,Nn(t,3))}function Mt(e){return e&&e.length?l(e):[]}function zt(e,t){var n=X(e)?mn:Wn;return n(e,Nn(t,3))}function Vt(e,t){return function(n){return null==n?!1:n[e]===t&&(void 0!==t||e in Object(n))}}function Jt(e,t){return at(e)&&ct(t)?Vt(ht(e),t):function(n){var a=jt(n,e);return void 0===a&&a===t?$t(n,e):wn(t,a,Yn.COMPARE_PARTIAL_FLAG|Yn.COMPARE_UNORDERED_FLAG)}}function Ht(e,t){return Wt(e,t,function(t,n){return $t(e,n)})}function Wt(e,t,n){for(var a=-1,r=t.length,o={};r>++a;){var i=t[a],s=nn(e,i);n(s,i)&&Kt(o,m(i,e),s)}return o}function Kt(e,t,n,a){if(!K(e))return e;t=m(t,e);for(var r=-1,o=t.length,i=o-1,s=e;null!=s&&o>++r;){var l=ht(t[r]),c=n;if(r!=i){var u=s[l];c=a?a(u,l,s):void 0,void 0===c&&(c=K(u)?u:et(t[r+1])?[]:{})}I(s,l,c),s=s[l]}return e}function qt(e,t,n){return t===t?Tn(e,t,n):Cn(e,ft,n)}function Gt(e,t,n,a){for(var r=n-1,o=e.length;o>++r;)if(a(e[r],t))return r;return-1}function Xt(e,t){for(var n=-1,a=Array(e);e>++n;)a[n]=t(n);return a}function Yt(e){if(!rt(e))return oa(e);var t=[];for(var n in Object(e))ta.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Qt(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}function Zt(e){if(!K(e))return Qt(e);var t=rt(e),n=[];for(var a in e)("constructor"!=a||!t&&ta.call(e,a))&&n.push(a);return n}function en(e,t){var n=X(e),a=!n&&da(e),r=!n&&!a&&Qn(e),o=!n&&!a&&!r&&it(e),i=n||a||r||o,s=i?Xt(e.length,String):[],l=s.length;for(var c in e)!t&&!ta.call(e,c)||i&&("length"==c||r&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||et(c,l))||s.push(c);return s}function tn(e,t,n){var a=-1,r=e.length;0>t&&(t=-t>r?0:r+t),n=n>r?r:n,0>n&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(r);r>++a;)o[a]=e[a+t];return o}function nn(e,t){t=m(t,e);for(var n=0,a=t.length;null!=e&&a>n;)e=e[ht(t[n++])];return n&&n==a?e:void 0}function an(e,t){return 2>t.length?e:nn(e,tn(t,0,-1))}function rn(e){return null==e?void 0===e?Yn.undefinedTag:Yn.nullTag:Yn.symToStringTag&&Yn.symToStringTag in Object(e)?on(e):lt(e)}function on(e){var t=ta.call(e,Yn.symToStringTag),n=e[Yn.symToStringTag];try{e[Yn.symToStringTag]=void 0;var a=!0}catch(r){}var o=Zn.call(e);return a&&(t?e[Yn.symToStringTag]=n:delete e[Yn.symToStringTag]),o}function sn(e){return null==e?void 0===e?Yn.undefinedTag:Yn.nullTag:Yn.symToStringTag&&Yn.symToStringTag in Object(e)?on(e):lt(e)}function ln(e,t,n){"__proto__"==t&&Yn.defineProperty?Yn.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function cn(e,t,n){for(var a=-1,r=e.length,o=t.length,i={};r>++a;){var s=o>a?t[a]:void 0;n(i,e[a],s)}return i}function un(e,t){for(var n=-1,a=t.length,r=Array(a),o=null==e;a>++n;)r[n]=o?void 0:jt(e,t[n]);return r}function dn(e,t){for(var n=-1,a=t.length,r=e.length;a>++n;)e[r+n]=t[n];return e}function pn(e,t){for(var n=-1,a=null==e?0:e.length;a>++n;)if(!t(e[n],n,e))return!1;return!0}function bt(e,t){for(var n=-1,a=null==e?0:e.length,r=Array(a);a>++n;)r[n]=t(e[n],n,e);return r}function fn(e,t){for(var n=-1,a=null==e?0:e.length;a>++n;)if(t(e[n],n,e))return!0;return!1}function gn(e,t){var n=null==e?0:e.length;return!!n&&qt(e,t,0)>-1}function hn(e,t,n){for(var a=-1,r=null==e?0:e.length;r>++a;)if(n(t,e[a]))return!0;return!1}function mn(e,t){for(var n=-1,a=null==e?0:e.length,r=0,o=[];a>++n;){var i=e[n];t(i,n,e)&&(o[r++]=i)}return o}function vn(e,t,n,a,r,o){var i=n&Yn.COMPARE_PARTIAL_FLAG,s=e.length,l=t.length;if(s!=l&&!(i&&l>s))return!1;var c=o.get(e);if(c&&o.get(t))return c==t;var u=-1,d=!0,p=n&Yn.COMPARE_UNORDERED_FLAG?new Yn.SetCache:void 0;for(o.set(e,t),o.set(t,e);s>++u;){var f=e[u],g=t[u];if(a)var h=i?a(g,f,u,t,e,o):a(f,g,u,e,t,o);if(void 0!==h){if(h)continue;d=!1;break}if(p){if(!fn(t,function(e,t){return Sn(p,t)||f!==e&&!r(f,e,n,a,o)?void 0:p.push(t)})){d=!1;break}}else if(f!==g&&!r(f,g,n,a,o)){d=!1;break}}return o["delete"](e),o["delete"](t),d}function yn(e,t,n,a,r,o,i){switch(n){case Yn.dataViewTag:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Yn.arrayBufferTag:return e.byteLength==t.byteLength&&o(new Yn.Uint8Array(e),new Yn.Uint8Array(t))?!0:!1;case Yn.boolTag:case Yn.dateTag:case Yn.numberTag:return dt(+e,+t);case Yn.errorTag:return e.name==t.name&&e.message==t.message;case Yn.regexpTag:case Yn.stringTag:return e==t+"";case Yn.mapTag:var s=w;case Yn.setTag:var l=a&Yn.COMPARE_PARTIAL_FLAG;if(s||(s=Yn.setToArray),e.size!=t.size&&!l)return!1;var c=i.get(e);if(c)return c==t;a|=Yn.COMPARE_UNORDERED_FLAG,i.set(e,t);var u=vn(s(e),s(t),a,r,o,i);return i["delete"](e),u;case Yn.symbolTag:if(Yn.symbolValueOf)return Yn.symbolValueOf.call(e)==Yn.symbolValueOf.call(t)}return!1}function bn(e,t,n,a,r,o){var i=n&Yn.COMPARE_PARTIAL_FLAG,s=D(e),l=s.length,c=D(t),u=c.length;if(l!=u&&!i)return!1;for(var d=l;d--;){var p=s[d];if(!(i?p in t:ta.call(t,p)))return!1}var f=o.get(e);if(f&&o.get(t))return f==t;var g=!0;o.set(e,t),o.set(t,e);for(var h=i;l>++d;){p=s[d];var m=e[p],v=t[p];if(a)var y=i?a(v,m,p,t,e,o):a(m,v,p,e,t,o);if(!(void 0===y?m===v||r(m,v,n,a,o):y)){g=!1;break}h||(h="constructor"==p)}if(g&&!h){var b=e.constructor,S=t.constructor;b!=S&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof S&&S instanceof S)&&(g=!1)}return o["delete"](e),o["delete"](t),g}function Sn(e,t){return e.has(t)}function _n(e,t){if(e!==t){var n=void 0!==e,a=null===e,r=e===e,o=ot(e),i=void 0!==t,s=null===t,l=t===t,c=ot(t);if(!s&&!c&&!o&&e>t||o&&i&&l&&!s&&!c||a&&i&&l||!n&&l||!r)return 1;if(!a&&!o&&!c&&t>e||c&&n&&r&&!a&&!o||s&&n&&r||!i&&r||!l)return-1}return 0}function On(e,t,n){for(var a=-1,r=e.criteria,o=t.criteria,i=r.length,s=n.length;i>++a;){var l=_n(r[a],o[a]);if(l){if(a>=s)return l;var c=n[a];return l*("desc"==c?-1:1)}}return e.index-t.index}function Tn(e,t,n){for(var a=n-1,r=e.length;r>++a;)if(e[a]===t)return a;return-1}function Cn(e,t,n,a){for(var r=e.length,o=n+(a?1:-1);a?o--:r>++o;)if(t(e[o],o,e))return o;return-1}function kn(e,t,n,a,r,o){var i=X(e),s=X(t),l=i?Yn.arrayTag:sn(e),c=s?Yn.arrayTag:sn(t);l=l==Yn.argsTag?Yn.objectTag:l,c=c==Yn.argsTag?Yn.objectTag:c;var u=l==Yn.objectTag,d=c==Yn.objectTag,p=l==c;if(p&&Qn(e)){if(!Qn(t))return!1;i=!0,u=!1}if(p&&!u)return o||(o=new Yn.Stack),i||it(e)?vn(e,t,n,a,r,o):yn(e,t,l,n,a,r,o);if(!(n&Yn.COMPARE_PARTIAL_FLAG)){var f=u&&ta.call(e,"__wrapped__"),g=d&&ta.call(t,"__wrapped__");if(f||g){var h=f?e.value():e,m=g?t.value():t;return o||(o=new Yn.Stack),r(h,m,n,a,o)}}return p?(o||(o=new Yn.Stack),bn(e,t,n,a,r,o)):!1}function wn(e,t,n,a,r){return e===t?!0:null==e||null==t||!q(e)&&!q(t)?e!==e&&t!==t:kn(e,t,n,a,wn,r)}function xn(e,t,n,a){var r=n.length,o=r,i=!a;if(null==e)return!o;for(e=Object(e);r--;){var s=n[r];if(i&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;o>++r;){s=n[r];var l=s[0],c=e[l],u=s[1];if(i&&s[2]){if(void 0===c&&!(l in e))return!1}else{var d=new Yn.Stack;if(a)var p=a(c,u,l,e,t,d);if(!(void 0===p?wn(u,c,Yn.COMPARE_PARTIAL_FLAG|Yn.COMPARE_UNORDERED_FLAG,a,d):p))return!1}}return!0}function $n(e){return q(e)&&rn(e)==Yn.argsTag}function En(e){for(var t=B(e),n=t.length;n--;){var a=t[n],r=e[a];t[n]=[a,r,ct(r)]}return t}function An(e){var t=En(e);return 1==t.length&&t[0][2]?Vt(t[0][0],t[0][1]):function(n){return n===e||xn(n,e,t)}}function jn(e){return function(t){return null==t?void 0:t[e]}}function Pn(e){return function(t){return nn(t,e)}}function Rn(e){return"function"==typeof e?e:null==e?r:"object"==typeof e?X(e)?Jt(e[0],e[1]):An(e):Nt(e)}function Nn(){var e=Rn;return arguments.length?e(arguments[0],arguments[1]):e}function Ln(e,t){for(var n=e?t.length:0,a=n-1;n--;){var r=t[n];if(n==a||r!==o){var o=r;et(r)?Yn.splice.call(e,r,1):h(e,r)}}return e}function In(e){return function(t){return e(t)}}function Bn(e,t,n,a){for(var r=-1,o=Object(e),i=n(e),s=i.length;s--;){var l=i[a?s:++r];if(t(o[l],l,o)===!1)break}return e}function Un(e,t){return e&&Bn(e,t,B)}function Dn(e,t){return function(n,a){if(null==n)return n;if(!tt(n))return e(n,a);for(var r=n.length,o=t?r:-1,i=Object(n);(t?o--:r>++o)&&a(i[o],o,i)!==!1;);return n}}function Fn(e,t,n,a){var r=a?Gt:qt,o=-1,i=t.length,s=e;for(e===t&&(t=S(t)),n&&(s=bt(e,In(n)));i>++o;)for(var l=0,c=t[o],u=n?n(c):c;(l=r(s,u,l,a))>-1;)s!==e&&Yn.splice.call(s,l,1),Yn.splice.call(e,l,1);return e}function Mn(e,t){var n=!0;return pa(e,function(e,a,r){return n=!!t(e,a,r)}),n}function zn(e,t){var n=-1,a=tt(e)?Array(e.length):[];return pa(e,function(e,r,o){a[++n]=t(e,r,o)}),a}function Vn(e,t){var n;return pa(e,function(e,a,r){return n=t(e,a,r),!n}),!!n}function Jn(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function Hn(e,t,n){var a=-1;t=bt(t.length?t:[r],In(Nn()));var o=zn(e,function(e){var n=bt(t,function(t){return t(e)});return{criteria:n,index:++a,value:e}});return Jn(o,function(e,t){return On(e,t,n)})}function Wn(e,t){var n=[];return pa(e,function(e,a,r){t(e,a,r)&&n.push(e)}),n}function Kn(e,t,n){(void 0!==n&&!dt(e[t],n)||void 0===n&&!(t in e))&&ln(e,t,n)}function qn(e,t,n,a,r,o,i){var s=e[n],l=t[n],u=i.get(l);if(u)return Kn(e,n,u),void 0;var d=o?o(s,l,n+"",e,t,i):void 0,p=void 0===d;if(p){var f=X(l),g=!f&&Qn(l),h=!f&&!g&&it(l);d=l,f||g||h?X(s)?d=s:c(s)?d=S(s):g?(p=!1,d=O(l,!0)):h?(p=!1,d=k(l,!0)):d=[]:y(l)||da(l)?(d=s,da(s)?d=ut(s):(!K(s)||a&&G(s))&&(d=T(l))):p=!1}p&&(i.set(l,d),r(d,l,a,o,i),i["delete"](l)),Kn(e,n,d)}function Gn(e,t,n,a,r){e!==t&&Bn(t,function(o,i){if(K(o))r||(r=new Yn.Stack),qn(e,t,i,n,Gn,a,r);else{var s=a?a(e[i],o,i+"",e,t,r):void 0;void 0===s&&(s=o),Kn(e,i,s)}},U)}function Xn(e){return i(function(t,n){var a=-1,r=n.length,i=r>1?n[r-1]:void 0,s=r>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(r--,i):void 0,s&&o(n[0],n[1],s)&&(i=3>r?void 0:i,r=1),t=Object(t);r>++a;){var l=n[a];l&&e(t,l,a,i)}return t})}if(!window._){var Yn={MAX_INTEGER:1.7976931348623157e308,MAX_SAFE_INTEGER:9007199254740991,INFINITY:1/0,reIsDeepProp:/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp:/^\w*$/,reLeadingDot:/^\./,rePropName:/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar:/\\(\\)?/g,reIsUint:/^(?:0|[1-9]\d*)$/,reFlags:/\w*$/,spreadableSymbol:window.Symbol?Symbol.isConcatSpreadable:void 0,symToStringTag:window.Symbol?Symbol.toStringTag:void 0,nativeIsBuffer:window.Buffer?Buffer.isBuffer:void 0,Uint8Array:window.Uint8Array,Map:window.Map?window.Map:void 0,Set:window.Set?window.Set:void 0,nativeCreate:window.Object?Object.create?Object.create:void 0:void 0,nativeGetSymbols:Object.getOwnPropertySymbols,arrayProto:Array.prototype,splice:Array.prototype.splice,funcProto:Function.prototype,objectProto:Object.prototype,objectCreate:Object.create,symbolProto:window.Symbol?Symbol.prototype:void 0,symbolValueOf:window.Symbol&&Symbol.prototype?Symbol.prototype.valueOf:void 0,symbolToString:window.Symbol&&Symbol.prototype?Symbol.prototype.toString:void 0,HASH_UNDEFINED:"__lodash_hash_undefined__",COMPARE_PARTIAL_FLAG:1,COMPARE_UNORDERED_FLAG:2,LARGE_ARRAY_SIZE:200,HOT_COUNT:800,HOT_SPAN:16,CLONE_DEEP_FLAG:1,CLONE_FLAT_FLAG:2,CLONE_SYMBOLS_FLAG:4,argsTag:"[object Arguments]",arrayTag:"[object Array]",asyncTag:"[object AsyncFunction]",boolTag:"[object Boolean]",dateTag:"[object Date]",domExcTag:"[object DOMException]",errorTag:"[object Error]",funcTag:"[object Function]",genTag:"[object GeneratorFunction]",mapTag:"[object Map]",numberTag:"[object Number]",nullTag:"[object Null]",objectTag:"[object Object]",promiseTag:"[object Promise]",proxyTag:"[object Proxy]",regexpTag:"[object RegExp]",setTag:"[object Set]",stringTag:"[object String]",symbolTag:"[object Symbol]",undefinedTag:"[object Undefined]",weakMapTag:"[object WeakMap]",weakSetTag:"[object WeakSet]",arrayBufferTag:"[object ArrayBuffer]",dataViewTag:"[object DataView]",float32Tag:"[object Float32Array]",float64Tag:"[object Float64Array]",int8Tag:"[object Int8Array]",int16Tag:"[object Int16Array]",int32Tag:"[object Int32Array]",uint8Tag:"[object Uint8Array]",uint8ClampedTag:"[object Uint8ClampedArray]",uint16Tag:"[object Uint16Array]",uint32Tag:"[object Uint32Array]",setToArray:function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n},apply:function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},overArg:function(e,t){return function(n){return e(t(n))}},stubFalse:function(){return!1},stubArray:function(){return[]},constant:function(e){return function(){return e}},defineProperty:function(){try{var e=Object.defineProperty;return e({},"",{}),e}catch(t){}}(),baseCreate:function(){function e(){}return function(t){var n=typeof t;if(null==t||"object"!=n&&"function"!=n)return{};if(Object.create)return Object.create(t);e.prototype=t;var a=new e;return e.prototype=void 0,a}}(),isKeyable:function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},getMapData:function(e,t){var n=e.__data__;return Yn.isKeyable(t)?n["string"==typeof t?"string":"hash"]:n.map},typedArrayTags:{},cloneableTags:{}},Qn=Yn.nativeIsBuffer||Yn.stubFalse,Zn=Yn.objectProto.toString,ea=Yn.objectProto.propertyIsEnumerable,ta=Yn.objectProto.hasOwnProperty,na=Yn.nativeIsBuffer?Buffer.allocUnsafe:void 0,aa=Yn.funcProto.toString,ra=Yn.funcProto.toString.call(Object);Yn.typedArrayTags[Yn.float32Tag]=Yn.typedArrayTags[Yn.float64Tag]=Yn.typedArrayTags[Yn.int8Tag]=Yn.typedArrayTags[Yn.int16Tag]=Yn.typedArrayTags[Yn.int32Tag]=Yn.typedArrayTags[Yn.uint8Tag]=Yn.typedArrayTags[Yn.uint8ClampedTag]=Yn.typedArrayTags[Yn.uint16Tag]=Yn.typedArrayTags[Yn.uint32Tag]=!0,Yn.typedArrayTags[Yn.argsTag]=Yn.typedArrayTags[Yn.arrayTag]=Yn.typedArrayTags[Yn.arrayBufferTag]=Yn.typedArrayTags[Yn.boolTag]=Yn.typedArrayTags[Yn.dataViewTag]=Yn.typedArrayTags[Yn.dateTag]=Yn.typedArrayTags[Yn.errorTag]=Yn.typedArrayTags[Yn.funcTag]=Yn.typedArrayTags[Yn.mapTag]=Yn.typedArrayTags[Yn.numberTag]=Yn.typedArrayTags[Yn.objectTag]=Yn.typedArrayTags[Yn.regexpTag]=Yn.typedArrayTags[Yn.setTag]=Yn.typedArrayTags[Yn.stringTag]=Yn.typedArrayTags[Yn.weakMapTag]=!1,Yn.cloneableTags[Yn.argsTag]=Yn.cloneableTags[Yn.arrayTag]=Yn.cloneableTags[Yn.arrayBufferTag]=Yn.cloneableTags[Yn.dataViewTag]=Yn.cloneableTags[Yn.boolTag]=Yn.cloneableTags[Yn.dateTag]=Yn.cloneableTags[Yn.float32Tag]=Yn.cloneableTags[Yn.float64Tag]=Yn.cloneableTags[Yn.int8Tag]=Yn.cloneableTags[Yn.int16Tag]=Yn.cloneableTags[Yn.int32Tag]=Yn.cloneableTags[Yn.mapTag]=Yn.cloneableTags[Yn.numberTag]=Yn.cloneableTags[Yn.objectTag]=Yn.cloneableTags[Yn.regexpTag]=Yn.cloneableTags[Yn.setTag]=Yn.cloneableTags[Yn.stringTag]=Yn.cloneableTags[Yn.symbolTag]=Yn.cloneableTags[Yn.uint8Tag]=Yn.cloneableTags[Yn.uint8ClampedTag]=Yn.cloneableTags[Yn.uint16Tag]=Yn.cloneableTags[Yn.uint32Tag]=!0,Yn.cloneableTags[Yn.errorTag]=Yn.cloneableTags[Yn.funcTag]=Yn.cloneableTags[Yn.weakMapTag]=!1,Yn.baseSetToString=Yn.defineProperty?function(e,t){return Yn.defineProperty(e,"toString",{configurable:!0,enumerable:!1,value:Yn.constant(t),writable:!0})}:function(e){return e},Yn.shortOut=function(e){var t=0,n=0;return function(){var a=Date.now(),r=Yn.HOT_SPAN-(a-n);if(n=a,r>0){if(++t>=Yn.HOT_COUNT)return arguments[0]}else t=0;return e.apply(void 0,arguments)}},Yn.overRest=function(e,t,n){return t=Math.max(void 0===t?e.length-1:t,0),function(){for(var a=arguments,r=-1,o=Math.max(a.length-t,0),i=Array(o);o>++r;)i[r]=a[t+r];r=-1;for(var s=Array(t+1);t>++r;)s[r]=a[r];return s[t]=n(i),Yn.apply(e,this,s)}},Yn.Hash=function(e){var t=-1,n=null==e?0:e.length;for(this.clear();n>++t;){var a=e[t];this.set(a[0],a[1])}},Yn.Hash.prototype.clear=function(){this.__data__=Yn.nativeCreate?Yn.nativeCreate(null):{},this.size=0},Yn.Hash.prototype["delete"]=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Yn.Hash.prototype.get=function(e){var t=this.__data__;if(Yn.nativeCreate){var n=t[e];return n===Yn.HASH_UNDEFINED?void 0:n}return ta.call(t,e)?t[e]:void 0},Yn.Hash.prototype.has=function(e){var t=this.__data__;return Yn.nativeCreate?void 0!==t[e]:ta.call(t,e)},Yn.Hash.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Yn.nativeCreate&&void 0===t?Yn.HASH_UNDEFINED:t,this},Yn.ListCache=function(e){var t=-1,n=null==e?0:e.length;for(this.clear();n>++t;){var a=e[t];this.set(a[0],a[1])}},Yn.ListCache.prototype.clear=function(){this.__data__=[],this.size=0},Yn.ListCache.prototype["delete"]=function(e){var t=this.__data__,n=pt(t,e);if(0>n)return!1;var a=t.length-1;return n==a?t.pop():Yn.splice.call(t,n,1),--this.size,!0},Yn.ListCache.prototype.get=function(e){var t=this.__data__,n=pt(t,e);return 0>n?void 0:t[n][1]},Yn.ListCache.prototype.has=function(e){return pt(this.__data__,e)>-1},Yn.ListCache.prototype.set=function(e,t){var n=this.__data__,a=pt(n,e);return 0>a?(++this.size,n.push([e,t])):n[a][1]=t,this},Yn.Stack=function(e){var t=this.__data__=new Yn.ListCache(e);this.size=t.size},Yn.Stack.prototype.clear=function(){this.__data__=new Yn.ListCache,this.size=0},Yn.Stack.prototype["delete"]=function(e){var t=this.__data__,n=t["delete"](e);return this.size=t.size,n},Yn.Stack.prototype.get=function(e){return this.__data__.get(e)},Yn.Stack.prototype.has=function(e){return this.__data__.has(e)},Yn.Stack.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Yn.ListCache){var a=n.__data__;if(!Yn.Map||Yn.LARGE_ARRAY_SIZE-1>a.length)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new Yn.MapCache(a)}return n.set(e,t),this.size=n.size,this},Yn.MapCache=function(e){var t=-1,n=null==e?0:e.length;for(this.clear();n>++t;){var a=e[t];this.set(a[0],a[1])}},Yn.MapCache.prototype.clear=function(){this.size=0,this.__data__={hash:new Yn.Hash,map:new(Yn.Map||Yn.ListCache),string:new Yn.Hash}},Yn.MapCache.prototype["delete"]=function(e){var t=Yn.getMapData(this,e)["delete"](e);return this.size-=t?1:0,t},Yn.MapCache.prototype.get=function(e){return Yn.getMapData(this,e).get(e)},Yn.MapCache.prototype.has=function(e){return Yn.getMapData(this,e).has(e)},Yn.MapCache.prototype.set=function(e,t){var n=Yn.getMapData(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this},Yn.SetCache=function(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Yn.MapCache;n>++t;)this.add(e[t])},Yn.SetCache.prototype.add=Yn.SetCache.prototype.push=function(e){return this.__data__.set(e,Yn.HASH_UNDEFINED),this},Yn.SetCache.prototype.has=function(e){return this.__data__.has(e)},Yn.createSet=Yn.Set&&1/Yn.setToArray(new Yn.Set([,0]))[1]==Yn.INFINITY?function(e){return new Yn.Set(e)}:function(){},Yn.getSymbols=Yn.nativeGetSymbols?function(e){return null==e?[]:(e=Object(e),mn(Yn.nativeGetSymbols(e),function(t){return ea.call(e,t)}))}:Yn.stubArray,Yn.setToString=Yn.shortOut(Yn.baseSetToString);var oa=Yn.overArg(Object.keys,Object),ia=Yn.overArg(Object.getPrototypeOf,Object),sa=s(function(e,t){_(t,U(t),e)}),la=i(function(e){return l(u(e,1,c,!0))}),ca=Yn.nativeGetSymbols?function(e){for(var t=[];e;)dn(t,Yn.getSymbols(e)),e=ia(e);return t}:Yn.stubArray,ua=v(function(e,t){var n={};if(null==e)return n;var a=!1;t=bt(t,function(t){return t=m(t,e),a||(a=t.length>1),t}),_(e,g(e),n),a&&(n=H(n,CLONE_DEEP_FLAG|CLONE_FLAT_FLAG|CLONE_SYMBOLS_FLAG,b));for(var r=t.length;r--;)h(n,t[r]);return n}),da=$n(function(){return arguments}())?$n:function(e){return q(e)&&ta.call(e,"callee")&&!ea.call(e,"callee")},pa=Dn(Un),fa={at:void 0,each:Bt,every:Ut,extend:sa,filter:zt,find:Rt,findIndex:Pt,get:jt,getAllKeys:D,has:wt,hasIn:$t,indexOf:At,isArray:X,isArrayLike:tt,isArrayLikeObject:c,isBoolean:Y,isEmpty:nt,isFunction:G,isIndex:et,isKey:at,isLength:Z,isNumber:Q,isObject:K,isObjectLike:q,isPlainObject:y,isPrototype:rt,isString:W,isSymbol:ot,isTypedArray:it,keys:B,keysIn:U,last:St,map:Dt,max:a,merge:void 0,omit:ua,pick:void 0,property:Nt,pull:void 0,pullAt:void 0,pullAll:It,range:Ot,remove:Lt,some:Ft,sortBy:void 0,union:la,uniq:Mt,zipObject:Et};fa.at=v(un),fa.pull=i(It),fa.pullAt=v(function(e,t){var n=null==e?0:e.length,a=un(e,t);return Ln(e,bt(t,function(e){return et(e,n)?+e:e}).sort(_n)),a}),fa.sortBy=i(function(e,t){if(null==e)return[];var n=t.length;return n>1&&o(e,t[0],t[1])?t=[]:n>2&&o(t[0],t[1],t[2])&&(t=[t[0]]),Hn(e,u(t,1),[])}),fa.merge=Xn(function(e,t,n){Gn(e,t,n)}),fa.pick=v(function(e,t){return null==e?{}:Ht(e,t)}),fa.forEach=fa.each,window._||(window._=fa)}}(),function(){function e(e){var t=document.createElement("div");return t.textContent=e,t.innerHTML}function t(e){return(""+e).replace(/<\s*\/+\s*(\bscript\b)/gi,"&lt;/script&gt;</pre").replace(/<\s*(\bscript\b)/gi,"<pre>&lt;script")}function n(e){return t(e).replace(/\s+on([a-z])\s*=/gi," on=").replace(/javascript:/gi,"js:")}function a(e){switch(e){case"{":return"}";case"[":return"]";case"<":return">";default:return e}}function r(e){if(!Et.jsonDataSanityCheck)return!0;var t=e.indexOf("(");return t>=0&&e.indexOf(")",t)>t?(console.warn("Insecured String with braces():",e),!1):!0}function o(){var e=arguments.length&&arguments[0]?arguments[0]:"[data-disable-keys],[data-focus-next],[data-focus-back]",t=$(2==arguments.length&&arguments[1]?arguments[1]:"body").find(e);Et.console.info("Finding Key-Tracking for element(s): "+e),t.each(function(e,t){$(t).keydown(Et._trackAndControlKey),Et.console.info("SPA is tracking keys on element:"),Et.console.info(t)})}function i(e){$(e||"body").find("[onKeyPause]:not([onKeyPauseReg])").each(function(e,t){$(t).attr("onKeyPauseReg","").on("input propertychange paste",function(){var e=this,t=1*((""+e.getAttribute("data-pause-time")).replace(/[^0-9]/g,"")||"1250");Lt&&clearTimeout(Lt),Lt=setTimeout(function(){var t=e.getAttribute("onKeyPause").split("(")[0],n=Et.findSafe(window,t);n&&n.call(e,e)},t)})})}function s(){var e=Array.prototype.slice.call(arguments);try{Et.is(e[0],"object")||e.unshift({}),Et.is(e[1],"string")&&(e[1]=e[1].split(","))}catch(t){console.error("Invalid arguments",t)}if(!Et.is(e[0],"object")||!Et.is(e[1],"array"))return console.error("Invalid arguments."),void 0;var n=e[0],a=e[1],r=e.slice(2);r.unshift(window);var o,i,s,l,c,u;return _.each(a,function(e){if(e=(e||"").trim(),c=!(e&&"@0"!=e),!c&&(/^\@([0-9])+/.test(e)&&(l=i=(e.getRightStr(".")||"").trim(),l?e=l+":"+e:(_.merge(n,r[Et.toInt(e)]),c=!0)),!c)){if(o=e.split(":"),i=(o[0]||"").trim(),s=Et.toInt((o[1]||"").split(".")[0]),l=((o[1]||"").getRightStr(".")||"").trim(),i||(i=l),u=l?Et.findSafe(r[s],l):s?r[s]:{},i.endsWithStr("\\+")){i=i.trimRightStr("+");var t=Et.findSafe(n,i);switch(Et.of(t)){case"object":Et.is(u,"object")&&(u=_.merge({},t,u));break;case"array":u=Et.is(u,"array")?t.concat(u):t.push(u)}}Et.setSimpleObjProperty(n,i,u)
}}),n}function l(e){if(Et.is(e,"string")){var t,n,a=e.trim().split(" "),r=a[0];/app\.(.+)\./.test(r)?(t=r.split(".")[1],a[0]=a[0].replace("app."+t+".",'[data-rendered-component="'+r.split(".")[1]+'"] '),e=a.join(" ")):r.beginsWithStr("\\$")&&(t=r.substr(1),t.indexOf(":")>0?(n=Et.toInt(t.getRightStr(":").trim()),t=t.getLeftStr(":"),a[0]='[data-rendered-component="'+t+'"]:eq('+n+")"):a[0]='[data-rendered-component="'+t+'"]',e=a.join(" "))}return e}function c(e){return _.isObject(e)?Object.keys(e).reduce(function(t,n,a){var r,o;return r=0===a?"":"&",n=encodeURIComponent(n),o=_.isArray(e[n])?e[n].map(function(e){return encodeURIComponent(e)}).join(","):encodeURIComponent(e[n]),[t,r,n,"=",o].join("")},""):""}function u(e){return Object.prototype.toString.call(e).replace(/\[object /,"").replace(/\]/,"").toLowerCase()}function d(e,t){return(""+t).toLowerCase().indexOf(u(e))>=0}function p(e,t,n){function a(e,t){for(var a,r=t.split(","),o="",i=0,s=!0,l=0;r.length>l;l++)o=r[l].trim(),o&&(i++,a=n&&(o.indexOf(".")>0||o.indexOf("[")>0)?Et.hasKey(e,o):e.hasOwnProperty(o),s=s&&a);return i&&s}function r(e,t){for(var a,r=t.split(","),o="",i=0,s=!1,l=0;r.length>l&&(o=r[l].trim(),o&&(i++,a=n&&(o.indexOf(".")>0||o.indexOf("[")>0)?Et.hasKey(e,o):e.hasOwnProperty(o),s=s||a),!s);l++);return i&&s}var o=!1;if(d(e,"object")&&t)switch(t=""+t,!0){case t.indexOf("&")>0:o=a(e,t.replace(/\&/g,","));break;case t.indexOf("|")>0:o=r(e,t.replace(/\|/g,","));break;default:o=a(e,t)}return o}function f(e,t){var n=e;if(".{$".indexOf(e[0])>=0){var a=e.split("/"),r=a[0].replace(/[\{\}]/g,""),o="$"==r||"."==r?t:r.replace(/[\{\$\}]/,""),i=Et.defaults.components.inFolder?o+"/":"";a[0]=(Et.defaults.components.rootPath+i).trimRightStr("/"),n=a.join("/")}return n}function g(e,t){return(e||"").trimRightStr("/")+"/"+(t||"").trimLeftStr("/")}function h(e,t,n){if(e){if(Et.i18n.onLangChange){var a=Et.i18n.onLangChange,r=Et.is(a,"function")?a.call(void 0,e,n):e;e=Et.is(r,"string")?r:e}$("html").attr("lang",e.replace("_","-")),Et.i18n.setLanguage(e,_.merge({},Et.defaults.lang,Et.findSafe(window,"app.conf.lang",{}),Et.findSafe(window,"app.lang",{}),t||{}))}}function m(e,t){var n=e;if(Et.is(e,"array"))n=e.sort(),t&&(n=n.reverse());else if(Et.is(e,"string")){var a;switch(!0){case e.indexOf(",")>=0:a=",";break;case e.indexOf(" ")>=0:a=" "}a&&(n=e.split(a).sort().join(a),t&&(n=n.reverse()))}return n}function v(e){var t="html";switch(e.tagName.toUpperCase()){case"INPUT":switch(e.type.toLowerCase()){case"checkbox":case"radio":t="$";break;default:t="value"}break;case"TEXTAREA":t="value";break;case"SELECT":t="$"}return t}function y(e){return e.replace(/<img /gi,"<IMG-X-TMP ").replace(/<iframe /gi,"<IFRAME-X-TMP ").replace(/<\/iframe/gi,"</IFRAME-X-TMP").replace(/{{/g,"><!--_XHBTINSPA_{{").replace(/}}/g,"}} _XHBTINSPA_-->")}function b(e){return e.replace(/(\/)*&gt;/g,">").replace(/ _XHBTINSPA_--(>|&gt;)/gi,"").replace(/(>|&gt;)(<|&lt;)!--_XHBTINSPA_/gi,"").replace(/<IMG-X-TMP /gi,"<img ").replace(/<IFRAME-X-TMP /gi,"<iframe ").replace(/<\/IFRAME-X-TMP/gi,"</iframe")}function S(e,t){var n="_rtt_"+e,a="";if(t&&_.isObject(t)&&Et.hasPrimaryKeys(t,"template|templateStr|templateString|templateUrl")){if(t.hasOwnProperty("template")){var r=t.template.trim(),o=r.beginsWithStr("#")&&!r.containsStr(" ");o||(t.templateStr=t.template)}if(Et.hasPrimaryKeys(t,"templateStr|templateString"))a=t.templateStr||t.templateString||"",Et.updateTemplateScript(n,a),t.template="#"+n;else if(Et.hasPrimaryKeys(t,"templateUrl")){var i=(t.templateUrl||"").trim();if(i){if(/^(\.\/)/.test(i)){var s=Et.defaults.components.rootPath+(Et.defaults.components.inFolder?e+"/":"");i=s+i.substr(2)}/(\.([a-z])+)$/i.test(i)||(i+=Et.defaults.components.templateExt)}t.template=i}}return t&&_.isObject(t)&&!Et.hasPrimaryKeys(t,"data|dataUrl")&&Et.hasPrimaryKeys(Et.api.urls,"$"+e)&&(t.dataUrl="@$"+e),Et.console.log("$ Adj.Options>>>>",e,t?t.__now():t),t}function O(e){app[e]&&(app[e].__renderCount__=Et.toInt(Et.$renderCount(e))+1)}function T(){var e=this.action;if(arguments.length){var t=arguments;1==arguments.length&&(_.isArray(arguments[0])?t=arguments[0]:_.isString(arguments[0])&&(t=arguments[0].split(","))),Et.console.log(t),t&&t.length&&_.each(t,function(t){Et.console.info(e+" spa-component:["+t.trim()+"]"),Et[e](t.trim())})}}function C(){var e=this.action;if(arguments.length){var t=arguments;1==arguments.length&&(t=_.isArray(arguments[0])?arguments[0]:_.isString(arguments[0])?arguments[0].split(","):arguments[0]),Et.is(t,"object")?_.each(Object.keys(t),function(n){Et.console.info("Rendering spa-component:["+n+"]"),Et[e](n,t[n])}):t&&t.length&&_.each(t,function(t){Et.console.info("Rendering spa-component:["+t+"]"),Et[e](t.trim())})}}function k(e,t,n){var a="app."+t+".";Et.is(n,"object")&&(Et.tempBind$data.hasOwnProperty(t)||(Et.tempBind$data[t]={}),Et.tempBind$data[t].$data=_.merge({},Et.findSafe(app,t+".$data",{}),n),a="spa.tempBind$data."+t+".");var r,o,i,s,l;r=$(e),o=r.data(),i=(r.attr("data-spa-component")||"").split("|"),s=(i[1]||"").trim(),s&&(/\:\s*\$data/.test(s)&&(s=s.replace(/\:\s*\$data/g,":"+a+"$data")),s=Et.toJSON(s));var c=r.attr("data-spa-component-options")||r.attr("data-spa-$options")||r.attr("spa-$options")||"{}";if(l=_.merge({},s,o,Et.toJSON(c)),l.hasOwnProperty("data")&&Et.is(l.data,"string")){var u=l.data.trim();/^\$data/.test(u)&&(u=a+u),l.data=_.merge({},Et.findSafe(window,u,{}))}var d=(r.attr("data-spa-component-$data")||r.attr("data-spa-$data")||r.attr("spa-$data")||"").trim();if(d&&(/\:\s*\$data/.test(d)&&(d=d.replace(/\:\s*\$data/g,":"+a+"$data")),Et.isBlank(l.data)?l.data=Et.toJSON(d):_.merge(l.data,Et.toJSON(d))),!Et.isBlank(l.data)&&l.data.hasOwnProperty("$data")){var p=_.merge({},l.data.$data);delete l.data.$data,_.merge(l.data,p)}return l.hasOwnProperty("data")?l.data:{}}function w(){var e=Et.findSafe(app,"api.ajaxOptions.defaultPayload",{});return Et.is(e,"function")?e():Et.is(e,"object")?_.merge({},e):e}function x(e){var t=$(this);return t.hasClass("disabled")||t.is("[disabled]")||t.is(":disabled")?(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),void 0):(Nt(t.attr("onclicknative")),void 0)}function E(e){var t=$(e||"body"),n=t.find("form:not([onsubmit])"),a=sn?".no-spa-route":"",r=t.find('a[href]:not([href^="#"]):not([href^="javascript:"]):not([target])'+a),o=t.find("a:not([href])"),i=t.find("[onclick]:not(:input):not(["+rn+"]):not([onclicknative])");n.attr("onsubmit","return false;").addClass("spa-form"),r.attr("target","_blank").addClass("spa-external-link"),o.attr("href","javascript:;").addClass("spa-link"),i.addClass("as-btn").renameAttr("onclick","onclicknative").on("click",x)}function A(e){var t,n,a,r=$(e),o=Et.findSafe(Et,"_validate.defaults.offline",!0);if(1==r.length){if(t=r.attr("id")||"",t||(t=r.attr("name")||"spaForm"+Et.now(),r.attr("id",t)),n=r.data(),a=r.has(".ctrl-on-change,.ctrl-on-validate").length,o){var i=(r.attr("data-validate-defaults")||"").trim();if(i){if(0>i.indexOf("offline"))if(i.endsWithStr("}")){var s=i.lastIndexOf("}");i=[i.slice(0,s),",offline:true",i.slice(s)].join("")}else i+=",offline:true";r.attr("data-validate-defaults",i)}else r.attr("data-validate-defaults","{offline:true}")}r.is("[data-validate-form]")||r.attr("data-validate-form",""),r.attr("data-validation-initialized",""),r.attr("onsubmit")||r.attr("onsubmit","return false;"),r.on("change",function(){Et.updateTrackFormCtrls(this)}),r.find("textarea,input:not(:checkbox),input:not(:radio)").filter(":not([data-validate])").each(function(){this.setAttribute("data-validate","{onInput:{fn:_check.noop}}")});var l="",c=Et.defaults.validation.xss,u=(r.attr("data-validate-xss")||"").trim(),d=(c.msg||"").trim();/msg\s*:/g.test(u)&&(d=Et.toJSON(u).msg,d?u="on":d="Invalid input."),!d||u.equalsIgnoreCase("off")||u.equalsIgnoreCase("no")||u.equalsIgnoreCase("skip")||u.equalsIgnoreCase("false")||(l=u.length>4?","+u:",on"+c.on.capitalize()+":{fn:'"+c.fn+"',msg:'"+d+"'}");var p="onFocus:{fn:_clearSpaValidateMsg,offline:false}"+l,f=(r.attr("data-validate-common")||"").trim();if(f){if(0>f.indexOf("_clearSpaValidateMsg")){var g;"{"==f[0]?(f[0]=",",g="{"+p+f):g="{"+p+","+f+"}",r.attr("data-validate-common",g)}}else r.attr("data-validate-common","{"+p+"}");Et.initDataValidation("#"+((n.validateForm||n.validateScope||"").replace(/[#onRender]/gi,"")||t)),!r.hasClass("track-changes")&&a&&Et.trackFormElChange(e),"onRender".equalsIgnoreCase(n.validateForm)&&Et.validateForm("#"+t,!0,!0)}}function j(e){Et.hasOwnProperty("initDataValidation")?$(e||"body").find("[data-validate-form],[data-validate-scope],form:has([data-validate])").filter(":not([data-validation-initialized])").each(function(e,t){A(t)}):console.warn("SPA validation module is not loaded.")}function P(e,t){var n,a=Et.setElIdIfNot(e);return n=t&&!$.isEmptyObject(t)?Et.render("#"+a,t):Et.render("#"+a)}function R(){$(document).on("click","[data-i18n-lang]",function(){var e=$(this).data(),t=e.i18nLang||"",n=(e.i18nLang||"").replace("-","_"),a=($("body").attr("i18n-lang-key-prefix")||"lang.name.")+n;h(n,{callback:function(){var e="-",r=$("[data-i18n-lang]:first");r.length&&(e=(r.data("i18nLang")||"").replace(/[a-z]/gi,"")),$(".lang-text").attr("data-i18n",a).data("i18n",a),$(".lang-icon").removeClass(Array.prototype.join.call($("[data-i18n-lang]").map(function(e,t){return $(t).data("i18nLang")})," ")).addClass("_"==e?n:t),$("[data-i18n-lang]").removeClass("active"),$('[data-i18n-lang="'+t+'"],[data-i18n-lang="'+n+'"]').addClass("active"),Et.i18n.apply(".lang-text")}})});var e=($("body").attr("i18n-lang")||"").replace(/ /g,""),t=e.split(",")[0];if(e){if("*"==t&&(t=Et.i18n.browserLang(),0>(","+e.toLowerCase()+",").indexOf(","+t.toLowerCase()+","))){t=t.getLeftStr(2).toLowerCase();for(var n=e.split(","),a="",r="",o=0;n.length>o;o++)if(a=(n[o]||"").trim(),0==a.toLowerCase().indexOf(t)){r=a;break}t=r?r:e.split(",")[1]||""}t&&(h(t,{},!0),setTimeout(function(){Et.i18n.displayLang()},500))}}function N(e,t){var n="",a=t||Et.findSafe(window,"app.api.liveApiPrefix","");if(a){var r,o=[],i=0,s=0;if(Et.is(a,"string")?o=a.split(","):Et.is(a,"array")&&(o=a),s=o.length,s>0)for(;!n&&s>i;)r=o[i++].trim(),n=r?e.beginsWithStr(r)?r:!I(e)&&e.indexOf(r)>0?r:"":"";else n=e.beginsWithStr(a)?a:!I(e)&&e.indexOf(a)>0?a:""}return n}function L(e,t){var n=Et.findSafe(window,"app.api.reqHeaders"),a=d(n,"function")?n(e,t):n;d(a,"object")?_.forEach(Object.keys(a),function(t){e.setRequestHeader(t,a[t])}):d(a,"string")&&(N(t.url)?(t.data=t.data||"",t.data+=(Et.isBlank(t.data)?"":"&")+a):e.setRequestHeader("reqHeadersInLiveUrl",a))}function I(e){var t=e.getLeftStr(6).toLowerCase(),n=t.beginsWithStr("http:")||t.beginsWithStr("https:")||t.beginsWithStr("//");return!n}function B(){return"function"==typeof arguments[0]}function U(){return"object"==typeof arguments[0]}function D(e){var t={url:"",responseType:"json",async:!0,cache:!1,method:"GET",headers:{},auth:null,timeout:0,success:null,error:null,"finally":null},n={TEXT:"text/plain",HTML:"text/html",CSS:"text/css",CSV:"text/csv",XML:"text/xml",JSON:"application/json",PDF:"application/pdf",ZIP:"application/zip"},a=t.responseType.toUpperCase(),r=n[a]||t.responseType,o={};Object.keys(e||{}).forEach(function(n){t[n]=e[n]}),t.method=t.method.toUpperCase(),B(t.headers)&&(t.headers=t.headers.call(void 0,t)),U(t.headers)&&Object.keys(t.headers).forEach(function(e){o[e]=t.headers[e]}),r&&(o["Content-Type"]=r),o["Cache-Control"]=t.cache?"max-age=86400000":"no-cache, no-store, must-revalidate, max-age=0",o.Expires=t.cache?new Date((new Date).setDate((new Date).getDate()+1)).toUTCString():"0",t.cache||(o.Pragma="no-cache");var i,s=new XMLHttpRequest;s.requestOptions=t,t.timeout&&(s.timeout=t.timeout);var l;Object.keys(t).forEach(function(e){var n=e.toLowerCase();"onreadystatechange"===n&&B(t[e])?l=t[e]:0===n.indexOf("on")&&B(t[e])&&(s[n]=function(n){t[e].call(t,s,n)})}),s.onreadystatechange=function(e){if(l&&l.call(t,s,e),4===s.readyState){var n=s.responseText;if(s.status>=200&&300>s.status){if("JSON"===a)try{n&&(n=JSON.parse(n))}catch(e){n=s.responseText,console.warn("Invalid JSON response.",n,s,e)}B(t.success)&&t.success.call(t,n,s.status,s)}else B(t.error)&&t.error.call(t,s.status,s.statusText,s);B(t.finally)&&t.finally.call(t,n,s.status,s)}},t.hasOwnProperty("data")&&"GET"===t.method&&(i=U(t.data)?c(t.data):""+t.data,i&&(t.url+=(0>t.url.indexOf("?")?"?":/\?$|\&$/.test(t.url)?"":"&")+i));try{t.auth&&U(t.auth)?t.auth.hasOwnProperty("user")&&(t.auth.hasOwnProperty("pwd")?s.open(t.method,t.url,t.async,t.auth.user,t.auth.pwd):s.open(t.method,t.url,t.async,t.auth.user)):s.open(t.method,t.url,t.async),Object.keys(o).forEach(function(e){s.setRequestHeader(e,o[e])}),"GET"!==t.method&&t.hasOwnProperty("data")?(i=U(t.data)?JSON.stringify(t.data):t.data,s.send(i)):s.send()}catch(u){console.warn("Ajax-Exception",s,u)}return s}function F(){app.api&&D({url:M(),method:"HEAD",error:function(){var e=(Et.findSafe(app,"api.mockBaseUrl")||Et.findSafe(Et,"api.mockBaseUrl")||location.origin).trimRightStr("/")+"/",t=(Et.findSafe(app,"api.mockRootFolder")||Et.findSafe(Et,"api.mockRootFolder")||"api_").trimRightStr("/"),n=prompt("Enter Mock Root Address: http[s]://server.address[:port]/root-folder",e+t);if(n){var a=n.indexOf("/",8),r=a>0?n.slice(0,a):n,o=a>0?n.substr(a+1):"";app.api.mockBaseUrl=r==location.origin?"":r,app.api.mockRootFolder=o,F()}}})}function M(e,t,n){e=e||"/",t=t||"",n=n||N(e);var a="",r=Et.findSafe(app,"api.mockBaseUrl")||Et.findSafe(Et,"api.mockBaseUrl")||"",o=(Et.findSafe(app,"api.mockRootFolder")||Et.findSafe(Et,"api.mockRootFolder")||"api_").trimRightStr("/")+"/",a=(e||"").replace(/[\{\}]/g,"").replace(RegExp("(.*)(/*)"+n.trimLeftStr("/")),o).replace(/(\/)*\?/,t+"/data.json?").replace(/\?$/,"");if(r){r=r.trimRightStr("/")+"/";var i=a.indexOf("//");0>i?a=r+a:7>i&&(a=r+a.substr(a.indexOf("/",a.indexOf("//")+2)+1))}return a}function z(e,t,n){e.url.beginsWithStr(Et.api.urlKeyIndicator)&&(e.url=Et.api.url(e.url.trimLeftStr(Et.api.urlKeyIndicator),e.data));var a,r=e.url,o=Et.findSafe(window,"app.api.reqHeaders");o&&(e.beforeSend=function(t){L(t,e)}),"script"==e.dataType||e.hasOwnProperty("error")||(e.error=app.api.onError||Et.api.onReqError);var i,s="",l=/({+)([^}])*(}+)/;if(Et.api.mock||app.api.mock||r.beginsWithStr("!"))if(r.beginsWithStr("~"))e.url=(I(r.trimLeftStr("~"))?Et.api.baseUrl||"":"")+r.trimLeftStr("~")+(Et.api.liveUrlSuffix||""),Et.api.baseUrl&&(e.crossDomain=!0);else{var c=("/"+e.type.toUpperCase()).replace("/GET","");if(e.type="GET",r=r.trimLeftStr("!"),s=N(r)){if(r.containsStr("\\?")||(r=r.trimRightStr("/")+"?"),l.test(r)){Et.console.log("URL has undefined params >>",r,e.data);try{i=Et.is(e.data,"string")?JSON.parse(e.data):e.data,r=Et.api.url(r.replace(/{{/g,"{").replace(/}}/g,"}"),i)}catch(u){}Et.console.log("Updated URL>>",r)}var d=M(r,c,s);e.url=d,(app.debug||Et.debug)&&console.warn(">>>>>>Intercepting Live API URL: ["+r+"] ==> ["+d+"]"),a=!0}}else s=N(r),(app.debug||Et.debug)&&console.log("actualUrl:"+r+",baseUrl:"+Et.api.baseUrl+",liveApiPrefix:"+s),s&&(e.url=(I(r)?Et.api.baseUrl||"":"")+r+(Et.api.liveUrlSuffix||""),Et.api.baseUrl&&(e.crossDomain=!0));if(Et.console.log("Remove mock params if any in URL>",e.url),e.url=e.url.replace(/{{([^}])*}}(\/*)/g,""),l.test(e.url)){Et.console.log("URL has undefined params>",e.url,e.data);try{i=Et.is(e.data,"string")?JSON.parse(e.data):e.data,e.url=Et.api.url(e.url.replace(/{</g,"{").replace(/>}/g,"}"),i)}catch(u){}}Et.console.log("Final Ajax URL>",e.url),(l.test(e.url)||/<([^>])*>/.test(e.url))&&(console.warn("URL has undefined params >>",e.url,e.data),e.url=e.url.replace(/[{<>}]/g,"_"));var p=app.api.defaultPayload||Et.api.defaultPayload;if(p){var f,g,h=Et.of(e.data),m="string"==h?Et.toJSON(e.data):e.data;Et.is(p,"function")?(f=p.call(e,m,e),Et.is(f,"object")&&(g=JSON.parse(JSON.stringify(f)),Et.isBlank(g)||(e.data="string"==h?JSON.stringify(g):g))):(g=Et.is(p,"object|array")?JSON.parse(JSON.stringify(p)):p,g=Et.is(g,"object|array")&&Et.is(m,"object|array")?_.merge({},g,m):g,e.data=Et.isBlank(g)||"string"!=h?g:JSON.stringify(g))}if(Et.ajaxPreProcess&&Et.ajaxPreProcess(e,t,n),(Et.isBlank(e.data)||Et.is(e.data,"string")&&!/[a-z0-9]/i.test(e.data))&&(Et.console.log("REMVOING EMPTY PAYLOAD"),delete e.data),a){var v=Et.is(e.data,"string")?e.data:JSON.stringify(e.data);v&&Et.is(v,"string")&&v.length>6144&&(v="LAREGE-PAYLOAD-WITH-CHAR-LENGTH:"+v.length),e.headers=_.merge({},e.headers,{"Z-Live-URL":r,"Z-Payload":v}),delete e.data}(app.debug||Et.debug)&&console.log("ajax Options",e)}function V(){Kt=[],qt=50}function J(){Xt=Et.urlHashFull(Jt),Jt=(Et.findSafe(Et,"defaults.routes.base","")||"#").trim(),tn=(Et.findSafe(Et,"defaults.routes.className.block","")||"BLOCK-SPA-NAV").trim(),nn="."+tn,an=(Et.findSafe(Et,"defaults.routes.className.allow","")||"ALLOW-SPA-NAV").trim(),Ht=(Et.findSafe(Et,"defaults.routes.className.hide","")||"HIDE-SPA-NAV").trim(),rn=(Et.findSafe(Et,"defaults.routes.attr.route","")||"data-spa-route").trim(),on=(Et.findSafe(Et,"defaults.routes.attr.params","")||"data-spa-route-params").trim(),sn=rn.equalsIgnoreCase("href"),ln=(Et.findSafe(Et,"defaults.routes.attr.onNavAway","")||"onNavAway").trim(),Vt=$("body").hasClass(Ht)}function H(e){var t=$(e||"body :first");return t.addClass(tn),zt=q()||!0,t}function W(e){var t=$(e||nn);return t.removeClass(tn),t.find(nn).removeClass(tn),zt=q(),t}function K(){return!Vt}function q(e){if(e){var t=$(e);return t.hasClass(tn)||t.find(nn).length>0}return!!$(nn).length}function G(e){return!q(e)}function X(e){return!!$(e).closest(nn).length}function Y(){zt&&lt(Xt)}function Q(){Y()}function Z(e){at(),Yt&&Yt!=cn?(Et.console.warn("Blocked:",Yt),Yt=cn):(Yt!=cn&&(Et.onUrlHashChange?Et.onUrlHashChange(Et.urlHash([],Jt),e):Et.onUrlChange&&Et.onUrlChange(Et.urlHash([],Jt),e)),Yt="")}function et(){var e,t,n;switch(Et.onReload&&(e=Et.onReload()),Et.of(e)){case"boolean":if(!e)return t="spa.message.on.window.reload",Et.i18n.text(t).replace(t,"");break;case"string":return e=e.trim(),e?(t=e.beginsWithIgnoreCase("i18n")?e.replace(/i18n(:)*/i,""):"",n=t?Et.i18n.text(t).replace(t):e):n=e,n;default:if(t="spa.message.on.window.reload",zt)return Et.i18n.text(t).replace(t,"")}}function tt(e,t){en=e,Et.console.log("Trying to navigate away from:["+Xt+"] To:["+e+"] by",t);var n,a,r,o,i,s;$(nn).each(function(){n=$(this),a=(n.attr(ln)||"").trim(),"#"==a[0]||">"==a[0]?(r=">"==a[0]?a.substr(1).trim():a,o=n.find(r).filter(":not(.disabled):not(:disabled)"),o.length&&(t&&(s="id:'"+t.attr("id")+"', spaRoute:'"+t.attr(rn)+"'"),o.data("navToUrl",e).attr("data-nav-to-url",e),o.data("navBy",s).attr("data-nav-by",s),o.trigger("click"))):(i=Et.findSafe(window,a.split("(")[0].split(";")[0]),i&&Et.is(i,"function")&&i.call(n,e,n,t))})}function nt(){window.onpageshow=Q,window.onpopstate=Z,d(window,"window")&&(window.onbeforeunload=et)}function at(){var e=Et.urlHashFull(Jt);Et.console.log("on Hash Change: Url To [",e,"] from[",Xt,"] on click:",Gt," block-Navigation:",zt,"isDelayed:",Qt),!K||!Gt&&zt?(Et.console.log("------------->",Xt,e,Qt,Zt),Et.console.log("lastBlocked:",en),en||(en=Xt),"#"==Jt[0]?(lt(Qt?Zt:Xt,e),en==e&&tt(e)):(lt(Qt?Zt:Xt,e),tt(e))):(Et.console.log("Triggering next hash... by href:",sn,"autoRoute:",Wt,"byClick",Gt),it(Wt||!Gt))}function rt(e,t){var n=e.indexOf(":")>=0,a=t;if(Et.is(t,"boolean")&&(a=t?"click":""),n){var r,o,i=n?e.split(":")[0]:"",s={},l=e.indexOf("&")>0?e.split("&"):e.indexOf(",")>0?e.split(","):[e];_.each(l,function(e){r=e.split(":")[0],o=e.getRightStr(":"),s[r]=decodeURIComponent(o)});var c=$("["+rn+'*="/'+i+':"]['+on+"]"),u=(c.attr(on)||"").trim();if(n=!Et.isBlank(u)){un.push(e);var d=Et.toJSON(u);_.each(d,function(e,t){if(e=e.trim(),/(^app\.(.)+\.)|(^\$)|(^\#)/.test(e))Et.setElValue(e,s[t]);else if(/^fn:/i.test(e)){var n=e.split(" ")[0].getRightStr(":").trim().split("(")[0];n=n?Et.findSafe(window,n):"",n&&Et.is(n,"function")?n(t,s[t]):console.warn("Not a function",e)}}),a&&c.isEnabled()&&!c.hasClass("AUTO-ROUTING")&&c.trigger(a)}}return n}function ot(){for(var e,t=Et.urlHash([],Jt),n="",a=0;t.length>a;a++)n=t[a],e=un.indexOf(n),e>=0?un.splice(e,1):rt(n,a==t.length-1)}function it(e){e&&V(),Wt=Et.is(e,"undefined")?Wt:e;var t,n,a,r=Et.urlHash([],Jt),o=r.length-1;if(0>qt&&(Wt=!1),Wt){qt--;for(var i=o;i>=0&&(a=r[i-1]||"",Wt&&a.indexOf(":")>0&&!Kt.__has(a)&&i--,t=r[i],n=i==o,Wt&&!Kt.__has(t));i--)if(t){var s=t.indexOf(":")>=0,l=s?t.split(":")[0]:"",c="["+rn+'$="/'+t+'"]:not(:disabled):not(.disabled):not(.AUTO-ROUTING):first';s&&(c="["+rn+'*="/'+l+':"]['+on+"]");var u=$(c);if(u.length){if(s&&(s=rt(t)),Kt.push(t),Wt=!n,u.isEnabled()&&!u.hasClass("AUTO-ROUTING")&&u.addClass("AUTO-ROUTING").trigger(u.data("routeEvent")||"click"),n){Bt="";break}i+=2}}}Gt=!1}function st(e,t){Et.console.log("_updateBrowserAddress >>>>>>>>>[",e,"]delay:",t,"prev:",Xt);var n="#"==Jt[0];if(e)if(Xt=e,n){Et.console.log(e);var a=$("#_spaRouteLink_");a.length||(a=$('<a id="_spaRouteLink_" href=""></a>'),$("body").append(a)),Et.console.log("################# "+e),a.attr("href",e)[0].click()}else Et.console.log(e),e=e.trimLeftStr("/"),"#"!=e[0]&&(e="//"+window.location.host+g("/",e),Et.console.log("updating the address bar with >>>>>",e)),Et.console.log(">>>>>>>>>>>>>>>>> "+e),history.pushState(null,null,e)}function lt(e,t){e!=t&&(Et.console.log("attempt to set URL:",e,"insteadOf",t),Yt=t,st(e))}function ct(e,t,n){Et.console.log("Updating url with:",e,"delay:",t,"autoRoute:",n),Wt=n,Qt=t,Zt=t?Xt:"",t?Xt=e:(Gt=!0,Et.isToShowNav()?Wt||st(e,t):Xt=e)}function ut(e){function t(e,t){var n=t,a=t.getLeftStr("*");if(a)for(var r=0;e.length>r;r++)if(e[r].beginsWithStr(a)){n=e[r];break}return n}if(e=(e||"").trim(),!e)return[];var n=Et.urlHash([],Jt),a=e.trimStr("/").split("/"),r=[],o=a[0],i=n.indexOf(o);if(o.indexOf("*")>0){o=o.getLeftStr("*");for(var s=0;n.length>s;s++)if(n[s].beginsWithStr(o)){i=s;break}}if(i>=0){for(var l,c=n.splice(i),u=0;a.length>u;u++)l=a[u].indexOf("*"),r[u]=0>l?a[u]:l?t(c,a[u]):c[u];r=n.concat(r)}else r="/"==e[0]?a:n.concat(a);return r}function dt(e){function t(e,t){n=(e||"").trim(),"#"==n[0]&&(n=n.substr(1)),a="<"==n[0],r=">"==n[0],o=t||n[r?1:0],i=n.substr(r?2:1),l=!1}var n,a,r,o,i,s,l,c=Et.urlHash([],Jt),u=$(this),d=u.attr("onrouteclick");if(u.hasClass("disabled")||u.is(":disabled"))return e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),void 0;"#"!=Jt[0]&&e.preventDefault(),t(u.attr(rn),u.attr("data-route-dir"));var p=(u.attr(on)||"").trim();if(p){var f,h=Et.toJSON(p);_.each(h,function(e,t){if(f=e,/(^app\.(.)+\.)|(^\$)|(^\#)/.test(e.trim()))f=Et.getElValue(e);else if(/^fn:/i.test(e.trim())){var n=e.split(" ")[0].getRightStr(":").trim().split("(")[0];n=n?Et.findSafe(window,n):"",n&&Et.is(n,"function")?f=n(t):console.warn("Not a function",e)}i=i.replace(RegExp(t+":","g"),t+":"+encodeURIComponent(f))})}if(d&&Nt(d),u.hasClass("AUTO-ROUTING"))return u.removeClass("AUTO-ROUTING"),void 0;switch("^"==o&&(Et.isBlank(c)?t(n.substr(1)):(e.preventDefault(),l=!0,o="/",i=Et.urlHash("",Jt))),0>"#/-<>".indexOf(o)&&(i=o+i,o="?"),o){case"#":case"/":c=ut(i);break;case"-":var m=Et.toInt(i.replace(/[^0-9]/g,""))||1;c.length&&(c.length=c.length-m);break;case"<":s=Xt;break;case"?":c=ut(i)}a||(s=g(Jt,c.join("/"))),zt&&(a||u.hasClass(an)||u.inBlockedSpaNavContainer()||(r=!0,tt(s,u))),Et.console.log("Routing to...",s,"delay:",r,"prev:",Xt),ct(s,r,l)}function pt(){Et.route(this.getAttribute(rn+"-AUTO").substr(1))}function ft(e){$(e||"body").find("["+rn+'^="*"]:not(.ROUTE):not(.ROUTE-AUTO)').renameAttr(rn,rn+"-AUTO").addClass("ROUTE-AUTO").on("click",pt);var t=$(e||"body").find("["+rn+"]:not(.ROUTE)").renameAttr("onclick","onRouteClick").addClass("ROUTE").off("click",dt).on("click",dt);if(sn&&t.length){var n,a,r;t.each(function(){n=$(this),a=n.attr("href").replace(/\s*/g,"").trim(),r="","#"==a[0]?"^><-".indexOf(a[1])>=0&&(r=a[1],a=a.substr(2)):"^".indexOf(a[0])>=0&&(r=a[0],a=a.substr(1)),n.attr("href","#"+a).removeAttr("target").attr("data-route-dir",r)})}it(),zt=Et.isNavBlocked()}function gt(e){if(e=(e||"").trim()){var t,n,a=e[0],r=1;switch(0>"#/-<>".indexOf(a)&&(a="?",r=0),t=e.substr(r),a){case"/":n=ut(t);break;case"-":n=Et.urlHash([],Jt);var o=Et.toInt(e.replace(/[^0-9]/g,""))||1;n.length&&(n.length=n.length-o);break;case"?":n=ut(t);break;default:n=[t]}return g(Jt,n.join("/"))}}function ht(e){return $("["+rn+'$="'+e.trim()+'"].ROUTE:first')}function mt(e){return $("["+rn+'$="'+e.trim()+'"].ROUTE')}function vt(e,t){var n=gt(e);if(Et.console.log("Route:",e,"URL:",n),n)if(!t&&zt)tt(n);else{var a=ht(e);a.length?a.hasClass("disabled")||a.is("[disabled]")?console.warn("Route:",e,"is disabled."):a.click():(K()?st(n):Bt=n,"/"==e.trim()?(Et.allowNav(),window.location.reload()):Z())}}function yt(e){function t(t,n){function a(t,n){e.setItem(""+t,JSON.stringify(n))}1==arguments.length?i(t,"object")?Object.keys(t).forEach(function(e){a(e,t[e])}):i(t,"array")&&t.forEach(function(e,t){a(t,e)}):2==arguments.length&&a(t,n)}function n(t){return 0==arguments.length?a():1!=arguments.length?a.apply(null,arguments):i(t,"string")?t.indexOf(",")>0?a.apply(null,t.split(",")):JSON.parse(e.getItem(t)):i(t,"array")?a.apply(null,t):void 0}function a(){var t=arguments.length,a=Array.prototype.slice.call(arguments).map(function(e){return(""+e).trim()}),r={};return Object.keys(e).forEach(function(e){(!t||a.indexOf(e)>-1)&&(r[e]=n(e))}),r}function r(t){function n(t){e.removeItem(t)}function a(){arguments.length&&Array.prototype.slice.call(arguments).forEach(function(t){e.removeItem(t)})}0==arguments.length?o():1==arguments.length?i(t,"string")?t.indexOf(",")>0?a.apply(null,t.split(",")):n(t):i(t,"array")&&a.apply(null,t):a.apply(null,arguments)}function o(){var t=arguments.length;if(t){var n=Array.prototype.slice.call(arguments).map(function(e){return(""+e).trim()});Object.keys(e).forEach(function(t){0>n.indexOf(t)&&e.removeItem(t)})}else e.clear()}function i(e){var t=Object.prototype.toString.call(e).split(" ")[1].toLowerCase().replace(/\]$/gi,"");return 2==arguments.length?(""+arguments[1]).toLowerCase().indexOf(t)>-1:t}var s=function(e,r){return 0==arguments.length?a():1==arguments.length?i(e,"object|array")?(t(e),e):n(e):2==arguments.length?(t(e,r),n(e)):void 0};return s.set=t,s.get=n,s.getAll=a,s.remove=r,s.removeAll=o,s.removeExcept=o,s.clear=o,s.clearExcept=o,s}function bt(e){var t=(Et.sesStore.get("_spaReloadUrl")||"").trim();if(!e||0==t.indexOf(e))return t?(Et.sesStore.remove("_spaReloadUrl"),t=t.replace(/.*#/gi,""),Et.route(t,!0),!0):void 0}function St(e,t){var n,a,r=e.getAttribute("data-bind"),o="";return r&&!r.containsStr(":")&&(r=v(e)+":'"+r+"'"),n=Et.toJSON(r||"{}"),n&&!$.isEmptyObject(n)&&_.some(_.keys(n),function(e){return!o&&RegExp(t,"i").test(e)&&(a=n[e].split("|"),o=a.shift().trim()),!!o}),o}function _t(){var e=this,t=$(e),n=Et.getElValue(e),a={},r=t.spa$()[0],o=t.spa$name(),i="2way".equalsIgnoreCase(Et.components[o].dataBindType);e.classList.add("DATA-MODEL-CHANGE-SRC");var s=St(e,"value|$");Et.setSimpleObjProperty(a,s,n),i&&(_.merge(Et.$data(o),a),app[o].is$DataUpdated=Et.components[o].is$DataUpdated=!0),Et.bindData(r,a,'[data-bind*="'+s+'"]:not(.DATA-MODEL-CHANGE-SRC)',!0),e.classList.remove("DATA-MODEL-CHANGE-SRC"),i&&Et.renderUtils.runCallbackFn("app."+o+".$dataChangeCallback",app[o].$data,app[o])}function Ot(e,t){function n(e,t){$(e).on((e.getAttribute("data-bind-event")||t).toLowerCase(),_t)}var a="[data-bind]:not(.SPA-DATA-BOUND)",r=$(e||"body").find((t||"")+" "+a);if(r.length||t||(r=$(e+a)),r.length){var o=r.filter("textarea,input:not([type=radio]):not([type=checkbox])").addClass("SPA-DATA-BOUND");o.each(function(){n(this,"keyup")});var i=r.filter("select,input[type=radio],input[type=checkbox]").addClass("SPA-DATA-BOUND");i.each(function(){n(this,"change")})}}function Tt(e){Et.reflowFoundation(e),o("",e),i(e),E(e),Et.initTrackFormElChanges(e),j(e),ft(e),Et.initTogglePassword(e),Ot(e),ot()}function Ct(){nt(),R(),Tt("body"),Et.i18n.apply("body")}function kt(){Rt=!!Object.keys(app.api).length,Rt&&Et.console.log("Initializing app.api");var e=Et.findSafe(window,"app.api.baseUrl");Et.isBlank(e)||(Et.api.baseUrl=e);var t=Et.findSafe(window,"app.api.urls");if(Et.isBlank(Et.api.urls)&&!Et.isBlank(t)&&(Et.api.urls=app.api.urls),!Et.isBlank(Et.api.urls)){var n=Et.findSafe(window,"app.api.liveApiPrefix|app.api.mockRootAtPaths");if(!Et.isBlank(n)){var a,r,o=d(n,"array")?n:(""+n).split(",");_.each(o,function(e,t){e=e.trim(),a=e[0],("!"==a||"~"==a)&&(e=e.substr(1),_.each(Et.api.urls,function(t,n){r=t[0],"!"!=r&&"~"!=r&&(0==t.indexOf(e)||t.indexOf("/"+e)>0)&&(Et.api.urls[n]=a+t)})),o[t]=e}),app.api.liveApiPrefix=o,delete app.api.mockRootAtPaths}}}function wt(){function e(e){return Et[e]?Et[e]():void 0}function t(){if(Et.env&&"dev".equalsIgnoreCase(Et.env)){Et.api.mock=!0;var t={components:{templateCache:!1,callback:function(){console.log("spa$>",this.__prop__.componentName)}}};Et.defaults.set(t)}$.when(Ct()).done(function(){$.when(e("onInitComplete")).done(function(){$.when(e("onReady")).done(Et.renderComponentsInHtml)})})}$.when(e("onInit")).done(t)}function xt(){var e,t=$("body").data();_.each(Object.keys(Et.defaults),function(n){n.equalsIgnoreCase("set")||(e=t["spaDefaults"+n.capitalize()],Et.isBlank(e)||_.merge(Et.defaults[n],Et.toJSON(e)))}),J(),kt()}var $t=this,Et=function(e){return e instanceof Et?e:this instanceof Et?void 0:new Et(e)};$t.spa=$t.__=$t._$=$t.w3=Et,Et.VERSION="2.66.0-RC7";var At=["","l","a","v","e",""],jt=document.getElementById,Pt=document.all;Et.isIE=Pt?!0:!1,Et.isNonIE=jt&&!Pt?!0:!1,Et.noop=function(){};var Rt,Nt=$t[At.reverse().join("")];Et.debug=!1,Et["debugger"]={on:function(){Et.debug=!0},off:function(){Et.debug=!1},toggle:function(){Et.debug=!Et.debug}},Et.cOut=function(e,t){Et.debug&&console[e]&&console[e](1===t.length?t[0]:t)},Et.console={clear:function(){console.clear()},assert:function(){Et.cOut("assert",arguments)},count:function(){Et.cOut("count",arguments)},debug:function(){Et.cOut("debug",arguments)},dir:function(){Et.cOut("dir",arguments)},dirxml:function(){Et.cOut("dirxml",arguments)},error:function(){Et.cOut("error",arguments)},exception:function(){Et.cOut("exception",arguments)},group:function(){Et.cOut("group",arguments)},groupCollapsed:function(){Et.cOut("groupCollapsed",arguments)},groupEnd:function(){Et.cOut("groupEnd",arguments)},info:function(){Et.cOut("info",arguments)},log:function(){Et.cOut("log",arguments)},markTimeline:function(){Et.cOut("markTimeline",arguments)},profile:function(){Et.cOut("profile",arguments)},profileEnd:function(){Et.cOut("profileEnd",arguments)},table:function(){Et.cOut("table",arguments)},time:function(){Et.cOut("time",arguments)},timeEnd:function(){Et.cOut("timeEnd",arguments)},timeStamp:function(){Et.cOut("timeStamp",arguments)},trace:function(){Et.cOut("trace",arguments)},warn:function(){Et.cOut("warn",arguments)}},Et.ajaxPreProcess,Et.onInit,Et.onInitComplete,Et.onReady,Et.onUrlChange,Et.onUrlHashChange,Et.onReload,Date.prototype.yyyymmdd=function(e){var t=this.getMonth()+1,n=this.getDate();return[this.getFullYear(),(t>9?"":"0")+t,(n>9?"":"0")+n].join(e||"")},Date.prototype.hhmmss=function(e){var t=this.getHours(),n=this.getMinutes(),a=this.getSeconds();return[(t>9?"":"0")+t,(n>9?"":"0")+n,(a>9?"":"0")+a].join(e||"")},String.prototype.trimLeftStr=function(e){return(""+this).replace(RegExp("^["+(e||"\\s")+"]+","g"),"")},String.prototype.trimRightStr=function(e){return(""+this).replace(RegExp("["+(e||"\\s")+"]+$","g"),"")},String.prototype.trimStr=function(e){return(""+this).trimLeftStr(e).trimRightStr(e)},String.prototype.getLeftStr=function(e){return"string"==typeof e&&(e=(""+this).indexOf(e)),e?(""+this).substr(0,e):""},String.prototype.getRightStr=function(e){var t=1;return"string"==typeof e&&(t=e.length,e=(""+this).indexOf(e)),0>e?"":(""+this).substr(e+t)},String.prototype.isBlankStr=function(){return""==(""+this).trimStr()},String.prototype.ifBlankStr=function(e,t){return e=e===void 0?"":e,t=t===void 0?(""+this).trimStr():t,(""+this).isBlankStr()?e:t},String.prototype.isNumberStr=function(){var e=(""+this).trim(),t=e.replace(/[0-9]/g,"").replace(".","").trimStr(),n=e[0];
return e&&(0==t.length||1==t.length&&("+"==n||"-"==n))},String.prototype.normalizeStr=function(){return(""+this).trimStr().replace(/\s+/g," ")},String.prototype.beginsWithStr=function(e,t){t=t?"i":"";var n=RegExp("^"+e,t);return(""+this).normalizeStr().match(n)?!0:!1},String.prototype.beginsWithStrIgnoreCase=function(e){var t=RegExp("^"+e,"i");return(""+this).normalizeStr().match(t)?!0:!1},String.prototype.endsWithStr=function(e,t){t=t?"i":"";var n=RegExp(e+"$",t);return(""+this).normalizeStr().match(n)?!0:!1},String.prototype.endsWithStrIgnoreCase=function(e){var t=RegExp(e+"$","i");return(""+this).normalizeStr().match(t)?!0:!1},String.prototype.containsStr=function(e,t){t=t?"gi":"g";var n=RegExp(""+e,t);return n.test(""+this)},String.prototype.containsStrIgnoreCase=function(e){var t=RegExp(""+e,"gi");return t.test(""+this)},String.prototype.equals=function(e){return""+this==e},String.prototype.equalsIgnoreCase=function(e){return(""+this).toLowerCase()+""==(e+"").toLowerCase()},String.prototype.toProperCase=function(e){return(e===void 0||e?(""+this).normalizeStr():""+this).toLowerCase().replace(/^(.)|\s(.)/g,function(e){return e.toUpperCase()})},String.prototype.toTitleCase=function(e){return(e===void 0||e?(""+this).normalizeStr():""+this).toLowerCase().replace(/^(.)|\s(.)/g,function(e){return e.toUpperCase()})},String.prototype.capitalize=function(){return(""+this).charAt(0).toUpperCase()+(""+this).slice(1)},String.prototype.unCapitalize=function(){return(""+this).charAt(0).toLowerCase()+(""+this).slice(1)},String.prototype.sanitizeHTML=function(){return e(""+this)},Et.sanitizeHTML=e,String.prototype.sanitizeScript=function(){return t(""+this)},Et.sanitizeScript=t,String.prototype.sanitizeXSS=function(){return n(""+this)},Et.sanitizeXSS=n,String.prototype.splitToArray=String.prototype.toArray=function(e){return Et.isBlank(""+this)?[]:(""+this).split(e)},String.prototype.extractStrBetweenIn=function(e,t,n){e||(e=(""+this).match(/[^a-z0-9\:\.\/\\]/i),e=e?e[0]:""),t=t||a(e);var r=(""+this).match(RegExp("\\"+e+"([^\\"+e+"\\"+t+"].*?)\\"+t,"g"))||[];return n&&!Et.isBlank(r)&&(r=r.__unique()),r},String.prototype.extractStrBetweenEx=function(e,t,n){e||(e=(""+this).match(/[^a-z0-9\:\.\/\\]/i),e=e?e[0]:""),t=t||a(e);var r="\\"+e+"\\"+t,o=RegExp("["+r+"]","g"),i=((""+this).match(RegExp("\\"+e+"([^"+r+"].*?)\\"+t,"g"))||[]).map(function(e){return e.replace(o,"")});return n&&!Et.isBlank(i)&&(i=i.__unique()),i},Et.strToNative=function(e){function t(){var e=o.replace(/[0-9]/g,"");return o.length?e.length?"-"==e||"+"==e||"."==e:!0:!1}function n(){return"true"==o||"false"==o}function a(){return"["==o[0]&&"]"==o[o.length-1]}function r(){return"{"==o[0]&&"}"==o[o.length-1]}var o=e.trim();switch(!0){case t():return 1*o;case n():return"true"==o;case r():return o.toJSON();case a():return("{xArr:"+o+"}").toJSON().xArr;default:return e}},String.prototype.toNative=function(){return Et.strToNative(""+this)},Et.extractStrBetweenIn=function(e,t,n,a){return(e||"").extractStrBetweenIn(t,n,a)},Et.extractStrBetweenEx=function(e,t,n,a){return(e||"").extractStrBetweenEx(t,n,a)},Et.strToArray=function(e){return"string"==typeof e&&(e=[e]),e},Et.jsonDataSanityCheck,Et.toJSON=function(e,t){var n;if(_.isString(e)){if(n=e.trimStr(),!r(n))return e;if(!(n.containsStr("{")||n.containsStr(":")||n.containsStr("\\[")||n.containsStr("'")||n.containsStr('"'))){if(n.containsStr(",")||n.containsStr(";"))return n.replace(/ /g,"").replace(/;/g,",").split(",");if(!t)return n;n="{"+t+":"+n+"}"}n.containsStr(":")&&!n.containsStr(",")&&n.containsStr(";")&&(n=n.replace(/\;/g,",")),n.beginsWithStr("{")||n.beginsWithStr("\\[")?n.beginsWithStr("{")&&!n.containsStr(":")&&n.containsStr("=")&&(n=""+n.replace(/=/g,":")+""):n=n.containsStr(":")?"{"+n+"}":n.containsStr("=")?"{"+n.replace(/=/g,":")+"}":"["+n+"]",!n.beginsWithStr("{")&&t&&(n="{"+t+":"+n+"}")}var a={};try{a=!_.isString(e)&&_.isObject(e)?e:Et.isBlank(e)?null:Nt("("+n+")")}catch(o){console.error('Error JSON Parse: Invalid String >> "'+e+'"'+o.stack)}return a},String.prototype.toJSON=function(){return Et.toJSON(""+this)},String.prototype.toBoolean=function(){var e=!0;switch((""+this).trimStr().toLowerCase()){case"":case"0":case"-0":case"nan":case"null":case"false":case"undefined":e=!1}return e&&(e=!(""+this).trimStr().beginsWithStr("-")),e},Boolean.prototype.toValue=function(e,t){return e===void 0&&(e=!0),t===void 0&&(t=!1),(""+this).valueOf()?e:t},Boolean.prototype.toHtml=function(e,t){return $((""+this).valueOf()?e:t).html()},String.prototype.padStr=function(e,t,n){e=e||"",t=t||1,n=n||2;for(var a="",r=0;t>r;r++)a+=e;return(-1===n||2===n?a:"")+(""+this)+(1===n||2===n?a:"")},Et.lastSplitResult=[],Et.getOnSplit=Et.pickOnSplit=function(e,t,n){return Et.lastSplitResult=e.split(t),Et.getOnLastSplit(n)},Et.getOnLastSplit=Et.pickOnLastSplit=function(e){return 0>e?_.last(Et.lastSplitResult):Et.lastSplitResult[e]},Et.isBlank=Et.isEmpty=function(e){var t=!0;if(void 0!==e&&null!==e)switch(!0){case _.isString(e):t=0==e.trimStr().length;break;case _.isFunction(e):t=!1;break;case _.isArray(e):case _.isObject(e):t=_.isEmpty(e);break;default:t=0==(""+e).trimStr().length}return t},Et.isNumber=function(e){return(""+e).isNumberStr()},Et.toBoolean=function(e){var t=!0;switch((""+e).trimStr().toLowerCase()){case"":case"0":case"-0":case"nan":case"null":case"false":case"undefined":t=!1}return t},Et.toInt=function(e){return e=(""+e).replace(/[^+-0123456789.]/g,""),e=Et.isBlank(e)?"0":e.indexOf(".")>=0?e.substring(0,e.indexOf(".")):e,parseInt(1*e,10)},Et.toFloat=function(e){return e=(""+e).replace(/[^+-0123456789.]/g,""),e=Et.isBlank(e)?"0":e,parseFloat(1*e)},Et.toString=function(e){Et.console.warn("spa.toString is deprecated. use spa.toStr instead.");var t=""+e;return _.isObject(e)&&(t=JSON.stringify(e)),t},Et.toStr=function(e){var t=""+e;return _.isObject(e)&&(t=JSON.stringify(e)),t},Et.dotToX=function(e,t){return e.replace(/\./g,t)},Et.dotToCamelCase=function(e){var t=e.replace(/\./g," ").toProperCase().replace(/ /g,"");return t[0].toLowerCase()+t.substring(1)},Et.dotToTitleCase=function(e){return e.replace(/\./g," ").toProperCase().replace(/ /g,"")},Et.toDottedPath=function(e){return(e||"").trim().replace(/]/g,"").replace(/(\[)|(\\)|(\/)/g,".").replace(/(\.+)/g,".").trimStr("\\.")},Et.ifBlank=Et.ifEmpty=Et.ifNull=function(e,t,n){return t=(""+(t||"")).trimStr(),n=n===void 0?(""+e).trimStr():n,Et.isBlank(e)?t:n},Et.now=function(){return""+(new Date).getTime()},Et.year=function(e){return e=e||0,(new Date).getFullYear()+Et.toInt(e)},Et.sizeOf=function(e,t){function n(e){if(null!==e&&void 0!==e)switch(typeof e){case"number":r+=8;break;case"string":r+=2*e.length;break;case"boolean":r+=4;break;case"object":var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t||"Array"===t)for(var a in e)e.hasOwnProperty(a)&&(r+=2*a.length,n(e[a]));else r+=2*(""+e).length}return r}function a(e){return 1024>e?e+" B":1048576>e?(e/1024).toFixed(3)+" KB":1073741824>e?(e/1048576).toFixed(3)+" MB":(e/1073741824).toFixed(3)+" GB"}var r=0;return Et.is(t,"undefined")||t?a(n(e)):n(e)},Et.range=function(e){var t=e.toUpperCase().split(".."),n=""+t[0],a=""+t[1],r="1";a.indexOf(":")>0&&(a=""+t[1].split(":")[0],r=""+t[1].split(":")[1]),n.indexOf("Y")>=0&&(n=Et.year(n.split(/[^0-9+-]/)[1])),a.indexOf("Y")>=0&&(a=Et.year(a.split(/[^0-9+-]/)[1]));var o=Et.toInt(n),i=Et.toInt(a),s=Et.toInt(r);return n>a?_.range(i,o+1,s).reverse():_.range(o,i+1,s)},Et.checkAndPreventKey=function(e,t){t||(t="");var n=t.indexOf("+shift")>=0,a=""+e.keyCode,r=t.padStr(",").indexOf(a.padStr(","))>=0&&(n?e.shiftKey?!0:!1:e.shiftKey?!1:!0);return r&&(e.preventDefault(),Et.console.info("Key ["+a+(n?"+Shift":"")+"] has been disabled in this element.")),r},Et._trackAndControlKey=function(e){var t=e.currentTarget,n=$(t),a=(""+n.data("disableKeys")).toLowerCase();Et.checkAndPreventKey(e,a);var r=!Et.isBlank((""+n.data("focusNext")).replace(/undefined/,"").toLowerCase()),o=!Et.isBlank((""+n.data("focusBack")).replace(/undefined/,"").toLowerCase());r&&Et.checkAndPreventKey(e,"9")&&$(n.data("focusNext")).get(0).focus(),o&&Et.checkAndPreventKey(e,"9,+shift")&&$(n.data("focusBack")).get(0).focus()},Et.initKeyTracking=o;var Lt;Et.getDocObj=function(e){var t="object"==typeof e?e:(e.beginsWithStr("#")?"":"#")+e;return $(t).get(0)},Et.getDocObjs=function(e){var t=(e.beginsWithStr("#")?"":"#")+e;return $(t).get()},Et.hasCssRule=function(e){var t=!1;if(e){e=e.split(",");for(var n=0;document.styleSheets.length>n;n++){var a=document.styleSheets[n].rules||document.styleSheets[n].cssRules;if(t)break;for(var r in a)if(t=t||"string"==typeof a[r].selectorText&&e.indexOf(a[r].selectorText)>=0)break}}return t},Et.getCssRule=function(e){var t,n;if(e)for(var a=0;document.styleSheets.length>a;a++){var r=document.styleSheets[a].rules||document.styleSheets[a].cssRules;if(t)break;for(var o in r)if(t=t||"string"==typeof r[o].selectorText&&e==r[o].selectorText){n=r[o];break}}return n},Et.setFocus=function(e,t){var n=Et.getDocObj(e);n&&(n.focus(),t&&n.select())},Et.isElementExist=function(e){return!$.isEmptyObject($(e).get())},Et.swapClass=Et.swapObjClass=function(e,t,n){$(e).removeClass(t),$(e).addClass(n)},Et.docObjValue=function(e,t){var n=Et.getDocObj(e),a="";return n&&(a=n.value,2===arguments.length&&(n.value=t)),a},Et.optionSelectedIndex=function(e,t){var n=-1,a=Et.getDocObj(e);return a&&(n=a.selectedIndex,2===arguments.length&&(a.selectedIndex=t)),n},Et.optionIndexOfValue=function(e,t){var n=-1,a=Et.getDocObj(e);if(a)for(var r=0;a.length>r;r++)if((""+t).equalsIgnoreCase(a.options[r].value)){n=r;break}return n},Et.optionIndexOfText=function(e,t){var n=-1,a=Et.getDocObj(e);if(a)for(var r=0;a.length>r;r++)if(t.equalsIgnoreCase(a.options[r].text)){n=r;break}return n},Et.optionIndexOfValueBeginsWith=function(e,t){var n=-1,a=Et.getDocObj(e);if(a)for(var r=0;a.length>r;r++)if(a.options[r].value.beginsWithStrIgnoreCase(t)){n=r;break}return n},Et.optionsSelectedValues=function(e,t){return e=(e.beginsWithStr("#")?"":"#")+e,t=t||",",$.map($(e+" option:selected"),function(e){return e.value}).join(t)},Et.optionsSelectedTexts=function(e,t){return e=(e.beginsWithStr("#")?"":"#")+e,t=t||",",$.map($(e+" option:selected"),function(e){return e.text}).join(t)},Et.optionValueOfIndex=function(e,t){var n="",a=Et.getDocObj(e);return a&&t>=0&&a.length>t&&(n=a.options[t].value),n},Et.optionTextOfIndex=function(e,t){var n="",a=Et.getDocObj(e);return a&&t>=0&&a.length>t&&(n=a.options[t].text),n},Et.selectOptionForValue=function(e,t){var n=-1,a=Et.getDocObj(e);return a&&(n=Et.optionIndexOfValue(e,t),a.selectedIndex=n),n},Et.selectOptionForValueBeginsWith=function(e,t){var n=-1,a=Et.getDocObj(e);return a&&(n=Et.optionIndexOfValueBeginsWith(e,t),a.selectedIndex=n),n},Et.selectOptionsForValues=function(e,t,n){n=n||",",t=(n+t+n).toLowerCase();var a,r=Et.getDocObj(e);if(r)for(var o=0;r.length>o;o++)a=(n+r.options[o].value+n).toLowerCase(),r.options[o].selected=t.indexOf(a)>=0},Et.selectOptionForText=function(e,t){var n=-1,a=Et.getDocObj(e);return a&&(n=Et.optionIndexOfText(e,t),a.selectedIndex=n),n},Et.selectOptionsAll=function(e){var t=Et.getDocObj(e);if(t)for(var n=0;t.length>n;n++)t.options[n].selected=!0},Et.selectOptionsNone=function(e){var t=Et.getDocObj(e);if(t)for(var n=0;t.length>n;n++)t.options[n].selected=!1},Et.optionsReduceToLength=function(e,t){t=t||0;var n=Et.getDocObj(e);n&&(Et.selectOptionsNone(e),n.length=t)},Et.optionsRemoveAll=function(e){Et.optionsReduceToLength(e,0)},Et.optionRemoveForIndex=function(e,t){e=(e.beginsWithStr("#")?"":"#")+e;var n=Et.getDocObj(e);n&&((""+t).equalsIgnoreCase("first")&&(t=0),(""+t).equalsIgnoreCase("last")&&(t=n.length-1),n.remove(t))},Et.optionRemoveForValue=function(e,t){Et.optionRemoveForIndex(e,Et.optionIndexOfValue(e,t))},Et.optionRemoveForText=function(e,t){Et.optionRemoveForIndex(e,Et.optionIndexOfText(e,t))},Et.optionRemoveForValueBeginsWith=function(e,t){Et.optionRemoveForIndex(e,Et.optionIndexOfValueBeginsWith(e,t))},Et.optionAppend=function(e,t,n,a){var r=-1,o=Et.getDocObj(e);if(o)if(a===void 0){var i=o.length;o.length=i+1,o.options[i].value=t,o.options[i].text=n,r=i}else $(o).find("option").eq(a).before('<option value="'+t+'">'+n+"</option>"),r=a;return r},Et.optionsLoad=function(e,t,n,a){var r=["","key","value"];if(n=n||0,a=a||0,_.isString(t)&&t.indexOf("..")>0&&(t=Et.range(t)),n>=0&&Et.optionsReduceToLength(e,n),_.isArray(t))_.each(t,function(t){Et.optionAppend(e,t,t)});else if(a>0){var o=[];for(var i in t)o.push({key:i,value:t[i]});var s=_.sortBy(o,r[a]);_.each(s,function(t){Et.optionAppend(e,t.key,t.value)})}else _.each(t,function(t,n){Et.optionAppend(e,n,t)})},Et.checkedState=function(e,t){var n=!1,a=Et.getDocObj(e);return a&&(n=a.checked,2===arguments.length&&(a.checked=t)),n},Et.isChecked=function(e,t){return $(e).find("input[name="+t+"]:checked").length>0},Et.radioSelectedValue=function(e,t){var n=$(e).find("input[name="+t+"]:checked").val();return n?n:""},Et.radioClearSelection=function(e,t){$(e).find("input[name="+t+"]:checked").attr("checked",!1)},Et.radioSelectForValue=function(e,t,n){$(e).find("input[name="+t+"]:radio").each(function(e){e.checked=e.value.equalsIgnoreCase(n)})},Et.checkboxCheckedValues=function(e,t,n){return n=n||",",$(e).find("input[name="+t+"]:checked").map(function(){return this.value}).get().join(n)},Et.sleep=function(e){var t=new Date;for(t.setTime(t.getTime()+1e3*e);t.getTime()>(new Date).getTime(););},Et.filterJSON=function(e,t){return $(e).filter(function(e,n){for(var a in t)if(!(""+n[a]).match(t[a]))return null;return n})},Et.randomPassword=function(e,t){for(var n=t||"9a8b77C8D9E8dkfhseidF7G6H5QJ3c6d5e4f32L3M4N5P6Qg2h3i4j5kV6W5X4Y3Z26m7n8p9q8r7s6t5u4v3w2x3y4z5A6BK7R8S9T8U7",a="",r=0;(e||8)>r;r++){var o=Math.floor(Math.random()*n.length);a+=n.charAt(o)}return a},Et.rand=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},Et.htmlEncode=function(e){return $("<div/>").text(e).html()},Et.htmlDecode=function(e){return $("<div/>").html(e).text()},Et.appendToObj=function(e,t,n){_.has(e,t)?(_.isArray(e[t])||(e[t]=[e[t]]),e[t].push(n)):e[t]=n},Et.parseKeyStr=function(e,t){return(t?e.toLowerCase():e).replace(/[^_0-9A-Za-z\$\[\]\?\*\-]/g,"")};var It={};Et.setObjProperty=function(e,t,n,a){t=""+t,a=a||!1;var r,o,i,s,l=e,c=t.indexOf(".")>=0||t==t.toUpperCase()?t.split("."):t.split(/(?=[A-Z])/),u=$.trim(t.replace(/[0-9A-Za-z\[\]\?\*\_]/g,""));u&&""!=u&&(c=t.split(u[0]));for(var d="";c.length>1;)r=Et.parseKeyStr(c.shift(),a),""!=$.trim(r)&&(d+=r.replace(/[\?\[\]\*\_]/g,""),r.indexOf("[")>0&&r.indexOf("]")==r.length-1?(o=r.substring(0,r.length-1).replace(/\[/g,".").split("."),i=o[0],s=o[1],l[i]===void 0&&(l[i]=[]),s.replace(/[0-9]/g,"")&&(s=s.replace(/[^0-9]/g,""),It.hasOwnProperty(d)?s=It[d]:l[i][s]===void 0&&(It[d]=l[i].length,s=l[i].length)),l[i][s]===void 0&&(l[i][s]={}),l=l[i][s]):(l[r]===void 0&&(l[r]={}),l=l[r]));return r=Et.parseKeyStr(c.shift(),a),Et.appendToObj(l,r,n),e},Et.setSimpleObjProperty=function(e,t,n){t=""+t;for(var a,r=e,o=t.split(".");o.length>1;)a=Et.parseKeyStr(o.shift(),!1),""!=$.trim(a)&&(r[a]===void 0&&(r[a]={}),r=r[a]);return a=Et.parseKeyStr(o.shift(),!1),r[a]=n,e},Et.objProp=Et.objProperty=Et.objectProp=Et.objectProperty=function(){var e=arguments[0],t=arguments[1],n=arguments[2];return 3==arguments.length?Et.setSimpleObjProperty(e,t,n):2==arguments.length?Et.findSafe(e,t):e},Et.extract=s,Et.setElValue=function(e,t){var n=$(l(e));switch(e=n.get(0),e.tagName.toUpperCase()){case"INPUT":switch(e.type.toLowerCase()){case"text":case"password":case"hidden":case"color":case"date":case"datetime":case"datetime-local":case"email":case"month":case"number":case"search":case"tel":case"time":case"url":case"range":case"button":case"submit":case"reset":n.val(t),n.isEnabled()&&n.trigger("keyup");break;case"checkbox":case"radio":e.checked=e.value.equalsIgnoreCase(t),e.checked&&n.isEnabled()&&n.trigger("click")}break;case"SELECT":Et.selectOptionForValue(e,t),n.isEnabled()&&n.trigger("change");break;case"TEXTAREA":n.val(t),n.isEnabled()&&n.trigger("keyup");break;default:n.html(Et.sanitizeXSS(t)),n.val(t),n.isEnabled()&&n.trigger("keyup")}},Et.getElValue=function(e,t){if(e=$(l(e)).get(0)){var n,a,r;switch(e.tagName.toUpperCase()){case"INPUT":switch(e.type.toLowerCase()){case"checkbox":a=$(e).data("unchecked"),r="true"==e.value?!0:"false"==e.value?!1:e.value,n=e.checked?r:a===void 0?"":a;break;case"radio":n=e.checked?e.value:"";break;default:n=$(e).val()}break;case"SELECT":n=$.map($(e).find("option:selected"),function(e){return e.value}).join(",");break;case"TEXTAREA":n=$(e).val();break;default:n=t?$(e).text():$(e).html()}return n}},Et.serialize=function(e,t,n){_.isBoolean(e)&&(n=e,e=""),_.isBoolean(t)&&(n=t,t=""),e=e||"body";var a,r,o,i,s={},l=t?'[data-serialize-context*="'+t+'"]':"";return $(e).find("[data-serialize]"+l+",input[name]"+l+",select[name]"+l+",textarea[name]"+l+"").each(function(e,t){o=$(t).data(),a=t.name||o.serialize,i=o.serializeType?o.serializeType.equalsIgnoreCase("text"):n,r=Et.getElValue(t,i),s.hasOwnProperty(a)?Et.isBlank(r)||(Et.isBlank(s[a])?s[a]=r:_.isArray(s[a])?s[a].push(r):s[a]=[s[a],r]):s[a]=r}),s},Et.serializeToQueryString=function(e,t){return Et.toQueryString(Et.serialize(e,t))},Et.serializeDisabled=function(e){var t="";return $(e).find("[disabled][name]").each(function(){t+=(t?"&":"")+$(this).attr("name")+"="+Et.getElValue(this)}),t},Et.serializeForms=function(e,t){var n,a,r=$(e).serialize();return $(e).find("input[data-unchecked]:checkbox:enabled:not(:checked)[name]").each(function(){a=$(this).data("unchecked"),r+=(r?"&":"")+$(this).attr("name")+"="+(a===void 0?"":a)}),t&&(n=Et.serializeDisabled(e),r+=(r&&n?"&":"")+n),r},Et.queryStringToJson=Et.queryStringToObject=function(e){var t={},n=e||location.search,a=(""+n).indexOf("?"),r=(""+n).indexOf("&");return n&&n.length>0&&a>=0&&(0==a||r>a)&&(n=n.substring(a+1)),_.each(n.split("&"),function(e){e=e.split("="),e[0]&&Et.appendToObj(t,e[0],decodeURIComponent(e[1]||""))}),t},Et.toQueryString=Et.ObjectToQueryString=Et.objectToQueryString=Et.JsonToQueryString=Et.jsonToQueryString=c,$.fn.serializeUncheckedCheckboxes=function(e){var t,n,a,r,o="object"==typeof e,i=o?e:{},s=o&&!e?"":e;return $(this).find("input[data-unchecked]:checkbox:enabled:not(:checked)[name]").each(function(e,l){t=$(l),a=t.attr("name"),n=t.data("unchecked"),r=n===void 0?"":n,o?Et.appendToObj(i,a,r):s+=(s?"&":"")+a+"="+r}),o?i:s},Et.serializeUncheckedCheckboxes=function(e,t){return $(e).serializeUncheckedCheckboxes(t)},$.fn.serializeFormToJSON=$.fn.serializeFormToObject=function(e,t,n){var a,r,o=this.serializeArray(),i=$(this).data(),s="object"==typeof e?e:{},l="boolean"==typeof e?e:t||!1,c=i.serializeIgnorePrefix,u=i.hasOwnProperty("typeNative");return It={},n&&(c=n),$.each(o,function(){a=c?this.name.replace(c,""):this.name,s=Et.setObjProperty(s,a,u?this.value.toNative():this.value,l)}),$(this).find("input[data-unchecked]:checkbox:enabled:not(:checked)[name]").each(function(){a=$(this).attr("name"),a&&(r=$(this).data("unchecked"),c&&(a=a.replace(c,"")),r=""+(r===void 0?"":r),s=Et.setObjProperty(s,a,u?r.toNative():r,l))}),s},Et.serializeFormToJSON=Et.serializeFormToObject=function(e,t,n,a){return $(e).serializeFormToJSON(t,n,a)},$.fn.serializeFormToSimpleJSON=$.fn.serializeFormToSimpleObject=function(e,t){var n,a,r,o,i=this.serializeArray(),s="object"==typeof e?e:{},l="boolean"==typeof e?e:t||!1;return $.each(i,function(){Et.appendToObj(s,this.name,this.value)}),l&&$(this).find("[disabled][name]").each(function(){Et.appendToObj(s,this.name,Et.getElValue(this))}),$(this).find("input[data-unchecked]:checkbox:enabled:not(:checked)[name]").each(function(){r=$(this).attr("name"),o=$(this).data("unchecked"),o=""+(o===void 0?"":o),Et.appendToObj(s,r,o)}),$(this).find("[data-to-json-group][name]").each(function(){n=this.name,a=$(this).data("toJsonGroup"),a&&(s[a]||(s[a]={}),Et.appendToObj(s[a],n,Et.getElValue(this)))}),s},Et.serializeFormToSimpleJSON=Et.serializeFormToSimpleObject=function(e,t,n){return $(e).serializeFormToSimpleJSON(t,n)},Et.findSafe=Et.findInObj=Et.findInObject=Et.locateSafe=Et.valueOfPath=Et.find=Et.locate=function(e,t,n){if(d(e,"window|array|object|function|global")&&t){var a=_.map(t.split("|"),function(e){return e.trim()});t=a.shift();for(var r,o=a.join("|"),i=e,s=0,l=Et.toDottedPath(t).split("."),c=l.length;c>s;s++)if(d(i,"object|window|function|global"))i=i[l[s].trim()];else{if(!d(i,"array")){i=r;break}i=i[Et.toInt(l[s])]}return d(i,"undefined")?o?Et.findSafe(e,o,n):n:i}return Et.isBlank(t)?e:n},Et.has=Et.hasKey=function(e,t){var n=e,a=!1;try{a=r(t)?Et.find(n,t)!==void 0:!1}catch(o){console.warn("Key["+t+"] error in object.\n"+o.stack)}return a},Et.of=u,Et.is=d,Et.hasPrimaryKeys=function(e,t){return p(e,t)},Et.hasKeys=function(e,t){return p(e,t,!0)},Et.keysDottedAll=function(e){var t=Et.keysDotted(e);return t&&!_.isEmpty(t)&&(t=Et.toDottedPath(t.join(",")).split(",")),t},Et.keysDotted=function(e){e=e||{};var t,n,a,r=[];return function(e,o){if(o=o||"","object"!=typeof e)return!0;for(var i in e)a=o.substring(1),t=Et.isNumber(i)?"[":".",n=a&&"["==t?"]":"",arguments.callee(e[i],o+t+i+n)&&r.push(a+(a?t:"")+i+n);return!1}(e),r},Et.keysCamelCase=function(e){return _.map(Et.keysDotted(e),function(e){var t=e.replace(/\./g," ").toProperCase().replace(/ /g,"");return t[0].toLowerCase()+t.substring(1)})},Et.keysTitleCase=function(e){return _.map(Et.keysDotted(e),function(e){return e.replace(/\./g," ").toProperCase().replace(/ /g,"")})},Et.keys_=function(e){return _.map(Et.keysDotted(e),function(e){return e.replace(/\./g,"_")})},Object.defineProperties(Array.prototype,{__now:{value:function(){return JSON.parse(JSON.stringify(this))},enumerable:!1,configurable:!1},__clone:{value:function(){return JSON.parse(JSON.stringify(this))},enumerable:!1,configurable:!1},__toObject:{value:function(e){var t={};return this.forEach(function(n,a){e?t[n]=a:t[a]=n}),t},enumerable:!1,configurable:!1},__unique:{value:function(){return this.filter(function(e,t,n){return n.indexOf(e)===t})},enumerable:!1,configurable:!1},__rotate:{value:function(e){if(e=e||1,e>0)for(;e--;)this.push(this.shift());else if(0>e)for(;e++;)this.unshift(this.pop());return this},enumerable:!1,configurable:!1},__isFirst:{value:function(e,t){var n=this[0];return t&&(n=n.toLowerCase(),e=e.toLowerCase()),n==e},enumerable:!1,configurable:!1},__isLast:{value:function(e,t){var n=this[this.length-1];return t&&(n=n.toLowerCase(),e=e.toLowerCase()),n==e},enumerable:!1,configurable:!1},__has:{value:function(e,t){function n(e){return t.indexOf(e)>=0}var a;if(t=(t||"").trim()){t.indexOf("i")&&Et.is(e,"string")&&(e=e.toLowerCase());for(var r=0;this.length>r;r++){var o=this[r];switch(t.indexOf("i")&&Et.is(o,"string")&&(o=o.toLowerCase()),!0){case n("b"):case n("^"):a=n("~")?e.beginsWithStr(o):o.beginsWithStr(e);break;case n("e"):case n("$"):a=n("~")?e.endsWithStr(o):o.endsWithStr(e);break;case n("c"):case n("*"):a=n("~")?e.indexOf(o)>=0:o.indexOf(e)>=0;break;case n("<"):a=e>o;break;case n("<="):a=e>=o;break;case n(">"):a=o>e;break;case n(">="):a=o>=e;break;default:a=o==e}if(a)break}}else a=this.indexOf(e)>=0;return a},enumerable:!1,configurable:!1}}),Object.defineProperties(Object.prototype,{__now:{value:function(){return JSON.parse(JSON.stringify(this))},enumerable:!1,configurable:!1},__clone:{value:function(){return JSON.parse(JSON.stringify(this))},enumerable:!1,configurable:!1},__keys:{value:function(e){return e?Et.keysDotted(this):Object.keys(this)},enumerable:!1,configurable:!1},__keysAll:{value:function(){return Et.keysDotted(this)},enumerable:!1,configurable:!1},__hasKey:{value:function(e){return Et.hasKey(this,e)},enumerable:!1,configurable:!1},__hasKeys:{value:function(e){return p(this,e,!0)},enumerable:!1,configurable:!1},__hasPrimaryKeys:{value:function(e){return p(this,e)},enumerable:!1,configurable:!1},__valueOf:{value:function(e,t){return Et.findSafe(this,e,t)},enumerable:!1,configurable:!1},__merge:{value:function(){return Array.prototype.unshift.call(arguments,this),_.merge.apply(void 0,arguments)},enumerable:!1,configurable:!1},__stringify:{value:function(){return JSON.stringify(this)},enumerable:!1,configurable:!1},__toQueryString:{value:function(){return Et.toQueryString(this)},enumerable:!1,configurable:!1},__extract:{value:function(){return Array.prototype.unshift.call(arguments,this),Et.extract.apply(this,arguments)},enumerable:!1,configurable:!1}}),$.cachedScript=function(e,t){return Et.console.log("Ajax for script:",e,"options:",t),e=f(e,t?t.spaComponent:""),e.endsWithStrIgnoreCase(".js")||(e+=Et.defaults.components.scriptExt),t=$.extend(t||{},{dataType:"script",cache:!0,url:e}),Et.console.info("$.cachedScript('"+e+"')"),$.ajax(t)},$.cachedStyle=function(e,t,n){return n=$.extend(n||{},{dataType:"text",cache:!0,url:t,success:function(t){$("head").append("<style id='"+e+"' type='text/css'>"+t+"</style>")}}),Et.console.info("$.cachedScript('"+t+"')"),$.ajax(n)},Et.addScriptTag=function(e,t){if(e=e.replace(/#/,""),Et.console.group("spaAddScriptTag"),Et.isElementExist("#spaScriptsContainer")||(Et.console.info("#spaScriptsContainer NOT Found! Creating one..."),$("body").append("<div id='spaScriptsContainer' style='display:none' rel='Dynamic Scripts Container'></div>")),Et.isElementExist("#"+e))Et.console.info("script ["+e+"] already found in local.");else{Et.console.info("script ["+e+"] NOT found. Added script tag with src ["+t+"]");var n=t?"src='"+t+"'":"";$("#spaScriptsContainer").append("<script id='"+e+"' type='text/javascript' "+n+"></script>")}Et.console.groupEnd("spaAddScriptTag")},Et.addStyle=function(e,t){e=e.replace(/#/,""),Et.console.group("spaAddStyle"),Et.isElementExist("#spaStylesContainer")||(Et.console.info("#spaStylesContainer NOT Found! Creating one..."),$("body").append("<div id='spaStylesContainer' style='display:none' rel='Dynamic Styles Container'></div>")),Et.isElementExist("#"+e)?Et.console.info("style ["+e+"] already found in local."):(Et.console.info("style ["+e+"] NOT found. Added link tag with href ["+t+"]"),$("#spaStylesContainer").append("<link id='"+e+"' rel='stylesheet' type='text/css' href='"+t+"'/>")),Et.console.groupEnd("spaAddStyle")},Et.loadScript=function(e,t,n,a,r){return e=e.replace(/#/,""),n=n||!1,a=a||[],Et.console.group("spaScriptsLoad"),Et.isBlank(t)?Et.console.error("script path ["+t+"] for ["+e+"] NOT defined."):n?Et.addScriptTag(e,t):a.push($.cachedScript(t,r).done(function(n,a){Et.console.info("Loaded script ["+e+"] from ["+t+"]. STATUS: "+a)})),Et.console.groupEnd("spaScriptsLoad"),a},Et.getComponentsFullPath=function(e){return e=Et.strToArray(Et.toJSON(e)),_.map(e,function(e){return Et.defaults.components.rootPath+(Et.defaults.components.inFolder?e:"")+"/"+e+Et.defaults.components.scriptExt})},Et.loadComponents=function(e,t,n){var a=_.filter(Et.strToArray(Et.toJSON(e)),function(e){return!Et.components.hasOwnProperty(e)});Et.loadScripts(Et.getComponentsFullPath(a),t,n)},Et.loadScripts=function(e,t,n){if(e=Et.strToArray(Et.toJSON(e)),!Et.isBlank(e)){var a=[];_.each(e,function(e){a.push($.cachedScript(e).done(function(t,n){Et.console.info("Loaded script from ["+e+"]. STATUS: "+n)}).fail(function(){Et.console.info("Failed Loading script from ["+e+"].")}))}),$.when.apply($,a).then(function(){Et.renderUtils.runCallbackFn(t)}).fail(function(){Et.renderUtils.runCallbackFn(n)})}},Et.loadScriptsSync=function(e,t,n){if(e=Et.strToArray(Et.toJSON(e)),Et.isBlank(e))Et.renderUtils.runCallbackFn(t);else{var a=!0,r=e.shift();r?(/^~/.test(r)&&(a=!1,r=r.substr(1)),Et.console.info("Load script from   ["+r+"], cache:",a),$.cachedScript(r,{cache:a}).done(function(){Et.console.info("Loaded script from ["+r+"]"),Et.loadScriptsSync(e,t,n)}).fail(function(){console.error("Failed Loading script from ["+r+"].",arguments),Et.renderUtils.runCallbackFn(n)})):Et.loadScriptsSync(e,t,n)}},Et.loadStyle=function(e,t,n,a){return e=e.replace(/#/,""),n=n||!1,a=a||[],Et.console.group("spaStylesLoad"),Et.isBlank(t)?Et.console.error("style path ["+t+"] for ["+e+"] NOT defined."):n?Et.addStyle(e,t):a.push($.cachedStyle(e,t).done(function(n,a){Et.console.info("Loaded style ["+e+"] from ["+t+"]. STATUS: "+a)})),Et.console.groupEnd("spaStylesLoad"),a},Et.addTemplateScript=function(e,t,n){e=e.replace(/#/,""),n=n||"x-template",Et.isElementExist("#spaViewTemplateContainer")||(Et.console.info("#spaViewTemplateContainer NOT Found! Creating one..."),$("body").append("<div id='spaViewTemplateContainer' style='display:none' rel='Template Container'></div>")),Et.console.info("Adding <script id='"+e+"' type='text/"+n+"'>"),t=t.replace(/<(\s)*script/gi,"<_BlockedScrptInTemplate_").replace(/<(\s)*(\/)(\s)*script/gi,"</_BlockedScrptInTemplate_").replace(/<(\s)*link/gi,"<_LINKTAGINTEMPLATE_").replace(/<(\s)*(\/)(\s)*link/gi,"</_LINKTAGINTEMPLATE_"),$("#spaViewTemplateContainer").append("<script id='"+e+"' type='text/"+n+"'>"+t+"</script>")},Et.updateTemplateScript=function(e,t,n){e=e.replace(/#/,"");var a=$("#spaViewTemplateContainer").find("#"+e);a.length&&a.remove(),Et.addTemplateScript(e,t,n)},Et.loadTemplate=function(e,t,n,a,r,o){if(e=e.replace(/#/g,""),t=t.ifBlankStr("inline").trimStr(),n=n||"x-template",a=a||"#DummyInlineTemplateContainer",r=r||[],Et.console.group("spaTemplateAjaxQue"),Et.isElementExist("#"+e)){var i=$("#"+e);if(o)Et.console.warn("Reload Template["+e+"] of ["+n+"]"),i.remove(),r=Et.loadTemplate(e,t,n,a,r,o);else if(Et.isBlank(i.html())){Et.console.warn("Template["+e+"] of ["+n+"] script found EMPTY!");var s=""+i.attr("path");Et.isBlank(s)||(n=(i.attr("type")||"").ifBlankStr(n).toLowerCase().replace(/text\//gi,""),Et.console.info("prepare/remove to re-load Template["+e+"]  of ["+n+"] from external path: ["+s+"]"),i.remove(),r=Et.loadTemplate(e,s,n,a,r,o))}else Et.console.info("Template["+e+"]  of ["+n+"] already found in local.")}else if(Et.console.info("Template["+e+"] of ["+n+"] NOT found. Source ["+t+"]"),t&&"undefined"==t)Et.addTemplateScript(e,"",n),Et.console.info("Loaded Empty Template["+e+"] of ["+n+"]");else if(t.equalsIgnoreCase("inline")||t.beginsWithStr("#")){var l=t.equalsIgnoreCase("inline")?a:t,c=$(l),u=c.html();Et.isBlank(u)?Et.console.error("Template["+e+"] of ["+n+"] NOT defined inline in ["+l+"]."):(Et.addTemplateScript(e,u,n),t.equalsIgnoreCase("inline")&&c.html(""))}else if(t.equalsIgnoreCase("none"))Et.console.warn("Template["+e+"] of ["+n+"] defined as NONE. Ignoring template.");else if(t.equalsIgnoreCase("script"))Et.console.error("Template["+e+"] of ["+n+"] NOT defined in <script>.");else{var d;o?(Et.console.warn(">>>>>>>>>> Making New Template Request"),d=$.ajax({url:t,cache:!1,dataType:"html",success:function(a){Et.addTemplateScript(e,a,n),Et.console.info("Loaded Template["+e+"] of ["+n+"] from ["+t+"]")},error:function(a,r,o){Et.console.error("Failed Loading Template["+e+"] of ["+n+"] from ["+t+"]. ["+r+":"+o+"]")}})):d=$.get(t,function(a){Et.addTemplateScript(e,a,n),Et.console.info("Loaded Template["+e+"] of ["+n+"] from ["+t+"]")},"html"),r.push(d)}return Et.console.groupEnd("spaTemplateAjaxQue"),r},Et.urlParams=function(e){e=e||window.location.search||"",e=e.beginsWithStr("\\?")||7>e.indexOf("//")?e.substr(e.indexOf("?")+1):e;var t={};return e.replace(/([^&=]+)=?([^&]*)(?:&+|$)/g,function(e,n,a){(t[n]=t[n]||[]).push(decodeURIComponent(a))}),_.each(t,function(e,n){t[n]=_.isArray(e)&&1==e.length?e[0]:e}),t},Et.urlParam=function(e,t){return Et.urlParams(t)[e]};var Bt="";Et.getLocHash=function(e){var t=(Bt||window.location.hash).replace("#","");return t||Et.is(e,"undefined")||"#"==e||(t=window.location.pathname.replace(/(\/)*(index|default)\.([a-z])*/i,"").replace(e.replace(/\s*/g,"").trimRightStr("/"),"")),t},Et.urlHash=function(e,t){var n="/",a=Et.getLocHash(t);if(e||_.isNumber(e)){a=a.beginsWithStr(n)?a.substring(a.indexOf(n)+n.length):a;var r=a.length?a.split(n):[];_.isNumber(e)?a=0>e?r[r.length-1]:r&&r.length>e?r[e]:"":_.isArray(e)?a=0===e.length?r:_.zipObject(e,r):_.isString(e)&&"?"==e&&(a=a.containsStr("\\?")?Et.getOnSplit(a,"?",1):"")}return a},Et.urlHashFull=function(e){return e=e||"#",g(e,Et.urlHash("",e))
},Et.hashParam=function(e){var t=""+Et.urlHash("?");return void 0===e||Et.isBlank(t)||(t=Et.urlParam(""+e,t)),t},Et.i18n={},Et.i18n.loaded=!1,Et.i18n.settings={name:"Language",path:"language/",ext:".txt",encoding:"UTF-8",cache:!0,async:!0,mode:"map",callback:null},Et.i18n.browserLang=function(){return navigator?navigator.language||navigator.userLanguage||"en_US":"en_US"},Et.i18n.setLanguage=function(e,t){$.i18n&&($.i18n.map={},e=(e||Et.i18n.browserLang()).replace(/-/g,"_"),t=$.extend(Et.i18n.settings,t),$.i18n.properties({name:t.name,language:e,path:t.path,ext:t.ext,encoding:t.encoding,cache:t.cache,async:t.async,mode:t.mode,callback:function(){Et.isElementExist("#i18nSpaRunTime")||$("body").append('<div id="i18nSpaRunTime" style="display:none"></div>'),$.i18n.loaded=$.i18n.loaded===void 0?!$.isEmptyObject($.i18n.map):$.i18n.loaded,Et.i18n.loaded=Et.i18n.loaded||$.i18n.loaded,e.length>1&&!$.i18n.loaded&&(Et.console.warn("Error Loading Language File ["+e+"]. Loading default."),Et.i18n.setLanguage("_",t)),Et.i18n.apply(),t.callback&&t.callback($.i18n.loaded)}}))},Et.i18n.setLang=function(e,t){h(e,t)},Et.i18n.value=function(e){function t(e){function t(e){return e.substring(1,e.length-1)}var n=e;try{n=(""+(!Et.i18n.loaded&&window.Liferay?Liferay.Language.get(e):$.i18n.prop(e))).trim(),n.beginsWithStr("\\[")&&n.endsWithStr("]")&&(n=t(n))}catch(a){console.warn("i18n lookup error:"+a.stack)}return n}return e=(""+e).replace(/i18n:/i,"").trim(),e.beginsWithStrIgnoreCase("@")&&(e=e.substr(1).trim(),e=Et.findSafe(window,e,e)),t(e)},Et.strBindData=function(e,t,n,a){e=""+e,n=n||"{",a=a||"}";var r=Et.extractStrBetweenEx(e,n,a,!0);return e&&!Et.isBlank(r)&&Et.is(t,"object")&&_.each(r,function(r){e=e.replace(RegExp(n+"\\s*("+r.trim()+")\\s*"+a,"g"),Et.findSafe(t,r,""))}),e},String.prototype.bindData=function(e){return Et.strBindData(""+this,e)},Et.i18n.text=function(e,t){function n(e){var t=Et.extractStrBetweenEx(e,"{","}",!0);return Et.isBlank(t)?e:(_.each(t,function(t){i=i||s.indexOf(t)>=0,i||(s.push(t),e=e.replace(RegExp("{\\s*("+t.trim()+")\\s*}","g"),Et.i18n.value(t)))}),i?(console.error("i18nKey circular issue found:",s.join(" > ")),e):n(e))}var a=Et.i18n.value(e);if(t&&Et.is(t,"object")){var r="",o="";_.each(_.keys(t),function(e){r=""+t[e],o=r.trim(),r&&(o.beginsWithStrIgnoreCase("i18n:")||o.beginsWithStrIgnoreCase("@"))&&(r=Et.i18n.value(o)),a=a.replace(RegExp("{\\s*("+e.trim()+")\\s*}","g"),r)})}var i,s=[e];return n(a)},Et.i18n.update=function(e,t,n){t=t||"";var a,r,o=$(e),i=o.attr("data-i18n")||"",s="";if(Et.isBlank(i)||0==t.indexOf(":")||0==t.indexOf("=")||0>=i.indexOf(":")&&0>=t.indexOf(":"))s=t.trimLeftStr(":").trimLeftStr("=");else{a=i.indexOf(":")>0?Et.toJSON(i||{}):{html:i.trimLeftStr(":").replace(/'/g,"")},r=t.indexOf(":")>0?Et.toJSON(t||{}):{html:t.trimLeftStr(":").replace(/'/g,"")},_.each(Object.keys(a),function(e){_.each(e.split("_"),function(t){t&&(a[t]=a[e])})}),_.each(Object.keys(r),function(e){_.each(e.split("_"),function(t){t&&(r[t]=r[e])})});var l=_.merge({},a,r);_.each(Object.keys(l),function(e){0>=e.indexOf("_")&&(s+=e+":'"+l[e]+"',")}),s=s.trimRightStr(",")}return o.attr("data-i18n",s).data("i18n",s),(n||Et.is(n,"undefined"))&&Et.i18n.apply(e),o},Et.i18n.apply=Et.i18n.render=function(e,t){if(Et.i18n.loaded||window.Liferay){e=e||"html",t=t||"";var n=e.beginsWithStr("<");n&&($("#i18nSpaRunTime").html(e),e="#i18nSpaRunTime");var a=$(e).find(t+"[data-i18n]");a.length||(a=$(e).filter(t+"[data-i18n]")),a.each(function(e,t){var n=$(t),a=n.data("i18n")||"";a&&!a.containsStr(":")&&(a="html:'"+a+"'");var r=Et.toJSON(a||"{}"),o=r.data||r.i18ndata;o?(delete r.data,delete r.i18ndata):o=Et.toJSON(n.data("i18nData")||"{}"),r&&!$.isEmptyObject(r)&&_.each(_.keys(r),function(e){var t=r[e],a=Et.i18n.text(t,o);_.each(e.split("_"),function(e){switch(e.toLowerCase()){case"html":n.html(Et.sanitizeXSS(a));break;case"text":n.text(a);break;default:n.attr(e,a)}})})})}return n?$("#i18nSpaRunTime").html():void 0},$.fn.extend({i18n:function(e){return this.each(function(){e&&$(this).attr("data-i18n",e).data("i18n",e),Et.i18n.apply(this)}),this}}),Et.pipes={trim:function(e){return(""+e).trim()},trimLeft:function(e){return(""+e).trimLeftStr()},trimRight:function(e){return(""+e).trimRightStr()},normalize:function(e){return(""+e).normalizeStr()},toLowerCase:function(e){return(""+e).toLowerCase()},toUpperCase:function(e){return(""+e).toUpperCase()},toTitleCase:function(e){return(""+e).toTitleCase()},capitalize:function(e){return(""+e).capitalize()},unCapitalize:function(e){return(""+e).unCapitalize()},not:function(e){return!e},sort:function(e){return m(e)},sortAsc:function(e){return m(e)},sortDesc:function(e){return m(e,!0)},reverse:function(e){var t=e;if(Et.is(e,"array"))t=e.reverse();else if(Et.is(e,"string")){var n;switch(!0){case e.indexOf(",")>=0:n=",";break;case e.indexOf(" ")>=0:n=" "}n&&(t=e.split(n).reverse().join(n))}return t}},Et.dataBind=Et.bindData=function(e,t,n,a){function r(e){return e=(e||"").trim(),"#"==e[0]?e:Et.findSafe(p,e)}function o(e,t){return["_runTimeTemplate",e,u,t.replace(/[^a-z0-9]/gi,"_"),Et.now()].join("_")}function i(e,t){return Et.compiledTemplates4DataBind.hasOwnProperty(d)||(Et.compiledTemplates4DataBind[d]={}),Et.compiledTemplates4DataBind[d][e]=Handlebars.compile(b(t))}e=e||"body",n=n||"";var s,l=Et.is(e,"string")&&/\s*</.test(e);if(l){var c=e.replace(/<\s*script/gi,"<_BlockedScrptInTemplate_").replace(/<\s*(\/)\s*script/gi,"</_BlockedScrptInTemplate_");s=$('<div style="display:none">'+c+"</div>")}else s=$(e);if(Et.isBlank(t))return s;var u="";"$"==n[0]&&(u=n.substr(1).trim(),n=""),u=u||s.attr("data-rendered-component");var d=u||"_unknown_",p=_.merge({__computed__:{}},t),f=s.find(n+"[data-bind]");f.length||(f=s.filter(n+"[data-bind]")),f.length&&!l&&u&&(f=f.filter(function(){return $(this).closest("[data-rendered-component]").attr("data-rendered-component")==u}));var g,h,m,y,S,O,T,C,w,x;if(_.each(f,function(e){g=$(e),h=g.data("bind")||"",h&&!h.containsStr(":")&&(h=v(e)+":'"+h+"'"),m=Et.toJSON(h||"{}"),w=Et.renderUtils.getFn(g.attr("data-bind-callback")||""),m&&!$.isEmptyObject(m)&&_.each(_.keys(m),function(t){y=(m[t]+"|").split("|"),S=y.shift().trim(),x="!"==S[0],x?(S=S.substr(1).trim(),T=!r(S)):T=r(S),Et.is(T,"undefined|null")&&(T="");for(var n=0;y.length>n;n++)O=y[n].trim(),O&&("."==O[0]&&(O="spa.pipes"+O),"!"==O[0]?"!"==O?T=!T:(O=O.substr(1).trim(),"."==O[0]&&(O="spa.pipes"+O),T=!Et.renderUtils.runCallbackFn(O,["(...)",T,S,p,e],e)):T=Et.renderUtils.runCallbackFn(O,["(...)",T,S,p,e],e));_.each(t.split("_"),function(t){var n="";if(t=t.trim(),!Et.is(T,"undefined"))switch(t.toLowerCase()){case"html":g.html(Et.sanitizeXSS(T));break;case"text":g.text(T);break;case"$":if(/checkbox|radio/i.test(e.type)){switch(Et.of(T)){case"boolean":e.checked=T;break;default:e.checked=e.value.equalsIgnoreCase(""+T)}e.checked?e.setAttribute("checked",""):e.removeAttribute("checked")}else/select/i.test(e.tagName)&&console.warn("TODO: data-bind:select");break;case"if":n=S.replace(/[^a-z0-9]/gi,"_"),p.__computed__[n]=T;var a,r=g.attr("data-bind-template");if(r)a=Et.compiledTemplates4DataBind[d][r];else{var s="{{#if __computed__."+n+" }}"+g.html().trim()+"{{/if}}";r=o("if",S),a=i(r,s),g.attr("data-bind-template",r)}g.html(a(p));break;case"repeat":n=S.replace(/[^a-z0-9]/gi,"_"),p.__computed__[n]=T;var l,c=g.attr("data-bind-template");if(c)l=Et.compiledTemplates4DataBind[d][c];else{var u=(m.repeatAs||"").replace(/[,|:]/g," ").normalizeStr(),f="{{#each __computed__."+n+(u?" as |"+u+"|":"")+" }}"+g.html().trim()+"{{/each}}";c=o("repeat",S),l=i(c,f),g.attr("data-bind-template",c)}g.html(l(p));break;case"repeatAs":break;default:switch(!0){case/^\./.test(t):var h=t.replace(/[\.\,]/g," ").normalizeStr();g[T?"addClass":"removeClass"](h);break;default:g.attr(t,T),t.beginsWithStr("data-")&&(C=Et.dotToCamelCase(t.getRightStr("-").replace(/-/g,".")),C&&g.data(C,T))}}}),w&&w.call(e,e)})}),!a&&!l&&s.is("[data-rendered-component]")){var E=s.attr("data-rendered-component");if(!Et.isBlank(E)){var A="app."+E+".bindCallback";Et.renderUtils.runCallbackFn(A,p,app[E])}}if(!l){var j=s.find("[data-rendered-component]").filter(function(){return this.hasAttribute("data-spa-component-$data")||this.hasAttribute("data-spa-$data")||this.hasAttribute("spa-$data")});if(j.length){var P;j.each(function(){P=k(this,u,t),Et.bindData(this,P)})}}return p=null,l?s.html().replace(/_BlockedScrptInTemplate_/g,"script"):s},Et.togglePassword=function(e){if(!$(e).next(".icon.eye").length){var t=$('<i class="icon eye"></i>');t.on("click",function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();var t=$(this),n=t.prevAll(".toggle-password"),a="text"==n.attr("type")?"password":"text";n.attr("type",a).toggleClass("text")}),$(t).insertAfter(e)}},Et.initTogglePassword=function(e){$(e||"body").find(".toggle-password").each(function(e,t){Et.console.info("Initializing toggle password",t),Et.togglePassword(t)})},Et.isElValueChanged=function(e){var t,n,a=$(e);if(a.length)if(n=a[0],"checkbox"==n.type)t=n.checked!=n.defaultChecked;else if("radio"==n.type)$(n).closest("form").find(':radio[name="'+n.name+'"]').each(function(e,n){t=t||n.checked!=n.defaultChecked});else if("INPUT,TEXTAREA".indexOf(n.tagName)>=0)t=n.value!=n.defaultValue;else if("SELECT"==n.tagName){var r,o,i,s=0;for(r=0,o=n.options.length;o>r;r++)i=n.options[r],t=t||i.selected!=i.defaultSelected,i.defaultSelected&&(s=r);t&&!n.multiple&&(t=s!=n.selectedIndex)}return t},Et.resetElDefaultValue=function(e){var t,n=$(e);if(n.length)if(t=n[0],",checkbox,radio".indexOf(t.type)>0)t.defaultChecked=t.checked;else if(",INPUT,TEXTAREA".indexOf(t.tagName)>0)t.defaultValue=t.value;else if("SELECT"==t.tagName){var a,r,o;for(a=0,r=t.options.length;r>a;a++)o=t.options[a],o.defaultSelected=o.selected}},Et.updateTrackFormCtrls=function(e){if(e){var t,n,a,r,o=$(e),i=o.find(".tracking-change.changed").length,s=Et.validateForm("#"+o.attr("id")),l=Et.isBlank(s)||1==s[0].errcode,c=!l||o.find(".validation-error,.validation-pending").length,u=i>0&&!c,d=!c,p=o.find(".ctrl-on-change,.ctrl-on-validate");o.attr("data-changed",i).data("changed",i),p.each(function(e,o){t=$(o),n=t.hasClass("ctrl-on-change")?u:d,a=t.attr("onBeforeChange"),Et.isBlank(a)||(a.indexOf("(")>0&&(a=a.getLeftStr("(")),r=Et.findSafe(window,a.trim(),void 0),n=Et.is(r,"function")?!!r.call(o,n):n),t.is(":disabled")==n&&(t.prop("disabled",!n).addClass(n?"":"disabled").removeClass(n?"disabled":""),t.trigger("change"))})}},Et.trackFormElChange=function(e,t){function n(e){if("change"==e.type||e.key&&(1==e.key.length||"BackspaceDelete".indexOf(e.key)>=0)){var t,n,a=!1,r=$(this).closest("form"),o=r.find(".tracking-change.changed").length;if("checkbox"==this.type)a=this.checked!=this.defaultChecked;else if("radio"==this.type)r.find(':radio[name="'+this.name+'"]').each(function(e,t){t.checked==t.defaultChecked&&$(t).removeClass("changed"),a=a||t.checked!=t.defaultChecked});else if("INPUT,TEXTAREA".indexOf(this.tagName)>=0)a=this.value!=this.defaultValue,n="change"!=e.type;else if("SELECT"==this.tagName){var i,s,l,c=0;for(i=0,s=this.options.length;s>i;i++)l=this.options[i],a=a||l.selected!=l.defaultSelected,l.defaultSelected&&(c=i);a&&!this.multiple&&(a=c!=this.selectedIndex)}$(this)[a?"addClass":"removeClass"]("changed"),Et.updateTrackFormCtrls(r),o!=t&&n&&r.trigger("change")}}function a(e){var t="change",a=$(e);if(",checkbox,radio".indexOf(e.type)>0)e.defaultChecked=e.checked;else if(",INPUT,TEXTAREA".indexOf(e.tagName)>0)e.defaultValue=e.value,t="keyup change";else{if("SELECT"!=e.tagName)return!1;var r,o,i;for(r=0,o=e.options.length;o>r;r++)i=e.options[r],i.defaultSelected=i.selected}return a.removeClass("track-change changed"),Et.updateTrackFormCtrls(a.closest("form")),0>e.className.indexOf("tracking-change")&&a.addClass("tracking-change").on(t,n),!0}var r=$(t||"body").find(e);r.each(function(e,t){"FORM"==t.tagName.toUpperCase()?Et.trackFormElChange($(t).find(".track-change").length?".track-change":"input,textarea,select",t):a(t)})},Et.initTrackFormElChanges=function(e){$(e||"body").find("form.track-changes,form:has(.ctrl-on-change,.track-change)").each(function(e,t){Et.console.info("Initializing Form Elements Track: Form ["+(t.id||t.name)+"]"),Et.trackFormElChange(t)})},Et.getModifiedElement=function(e){var t,n=void 0,a=$(e||"form:not([data-ignore-change]) :input:not(:disabled,:button,[data-ignore-change])");return _.every(a,function(e){return t||(e.tagName.match(/^(select|textarea)$/i)&&e.value!=e.defaultValue?t=!0:e.tagName.match(/^input$/i)&&(e.type.match(/^(checkbox|radio)$/i)&&e.checked!=e.defaultChecked?t=!0:e.type.match(/^(text|password|hidden|color|email|month|number|tel|time|url|range|date|datetime|datetime-local)$/i)&&e.value!=e.defaultValue&&(t=!0)),t&&(n=e)),!t}),n},Et.getModifiedElements=function(e){var t,n=[],a=$(e||"form:not([data-ignore-change]) :input:not(:disabled,:button,[data-ignore-change])");return a.each(function(e,a){t=!1,a.tagName.match(/^(select|textarea)$/i)&&a.value!=a.defaultValue?t=!0:a.tagName.match(/^input$/i)&&(a.type.match(/^(checkbox|radio)$/i)&&a.checked!=a.defaultChecked?t=!0:a.type.match(/^(text|password|hidden|color|email|month|number|tel|time|url|range|date|datetime|datetime-local)$/i)&&a.value!=a.defaultValue&&(t=!0)),t&&n.push(a)}),n},Et.initTrackElValueChanges=Et.resetElementsDefaultValue=function(e){$(e||"form :input:not(:disabled)").each(function(e,t){t.defaultValue=t.value,t.tagName.match(/^input$/i)&&t.type.match(/^(checkbox|radio)$/i)&&t.checked!=t.defaultChecked&&(t.defaultChecked=t.checked)})},Et.trash={container:[],push:function(e){this.container.push(e)},empty:function(){this.container=[]},pick:function(e){return e?this.container[e]:this.container}},Et.fillData=function(e,t,n){function a(){var n=o.keyFormat;n=null!=n.match(/^[a-z]/)?"aBc":n,n=null!=n.match(/^[A-Z]/)?"AbC":n;var a=Et.keysDotted(e);Et.console.group("fillData"),Et.console.info(a),_.each(a,function(a){Et.console.group(">>"+a);var r=""+(a.replace(/[\[\]]/g,"_")||""),i=a.replace(/\[[0-9]+\]/g,""),s=/\[[0-9]+\]/.test(a);switch(n){case"_":r=Et.dotToX(r,"_"),i=Et.dotToX(i,"_");break;case"AbC":r=Et.dotToTitleCase(r),i=Et.dotToTitleCase(i);break;default:r=Et.dotToCamelCase(r),i=Et.dotToCamelCase(i)}var l={patternKey:r+(s?" || "+i:""),formatterKey:i,isArrayChild:s};Et.trash.push(l),Et.console.info(l),Et.trash.empty();var c=o.selectPattern.replace(/\?/g,r);(o.keysMap[r]||o.keysMap[i])&&(o.keysMap[r]=o.keysMap[r]||{},o.keysMap[i]=o.keysMap[i]||{},o.keysMap[r].pattern=o.keysMap[r].pattern||o.keysMap[i].pattern,o.keysMap[r].pattern&&(c=o.keysMap[r].pattern.replace(/\?/g,r)),o.keysMap[i].formatter&&(o.formatterOnKeys=o.formatterOnKeys||{},o.formatterOnKeys[i]=o.keysMap[i].formatter));var u=$(t).find(c).length;Et.console.info(">> "+c+" found: "+u);var d=null;u>0&&(d=Et.find(e,a),!o.formatterOnKeys&&o.formatterCommon&&(d=o.formatterCommon(d,a,e)),o.formatterOnKeys&&(o.formatterOnKeys[i]?d=o.formatterOnKeys[i](d,a,e):o.formatterCommon&&(d=o.formatterCommon(d,a,e))),Et.console.info({value:d})),$(t).find(c).each(function(e,t){switch(Et.console.info(t),t.tagName.toUpperCase()){case"INPUT":switch(t.type.toLowerCase()){case"text":case"password":case"hidden":case"color":case"date":case"datetime":case"datetime-local":case"email":case"month":case"number":case"search":case"tel":case"time":case"url":case"range":case"button":case"submit":case"reset":$(t).val(d),!o.resetElDefaultInContext&&o.resetElDefault&&(t.defaultValue=t.value);break;case"checkbox":case"radio":t.checked=t.value.equalsIgnoreCase(d),!o.resetElDefaultInContext&&o.resetElDefault&&(t.defaultChecked=t.checked)}break;case"SELECT":Et.selectOptionForValue(t,d),!o.resetElDefaultInContext&&o.resetElDefault&&(t.defaultValue=t.value);break;case"TEXTAREA":$(t).val(d),!o.resetElDefaultInContext&&o.resetElDefault&&(t.defaultValue=t.value);break;default:$(t).html(Et.sanitizeXSS(d))}}),Et.console.groupEnd(">>"+a)}),Et.console.groupEnd("fillData"),o.resetElDefaultInContext&&Et.resetElementsDefaultValue(t+" :input")}var r="object"==typeof e;t&&"object"==typeof t&&(n=t,t=null),t=t||"body";var o={dataParams:{},method:"GET",async:!0,dataCache:!1,keyFormat:"aBc",selectPattern:"[name='?']",formatterCommon:null,formatterOnKeys:null,resetElDefault:!0,resetElDefaultInContext:!0,keysMap:{}};$.extend(o,n),r||$.ajax({url:e,method:(""+(o.method||"GET")).toUpperCase(),data:o.dataParams,cache:o.dataCache,async:o.async,dataType:"text",success:function(t){e=Et.toJSON(""+t),r="object"==typeof e,a()},error:function(t,n,a){Et.console.error("Failed loading data from ["+e+"]. ["+n+":"+a+"]"),Et.is(app.api.onError,"function")?app.api.onError.call(this,t,n,a):Et.api.onReqError.call(this,t,n,a)}})},Et.toRenderDataStructure=function(e,t,n){var a={},r={},o={},i={},s=function(e,t){return t&&Object.keys(t).length&&_.each(Object.keys(t),function(n){e=e.replace(RegExp("{"+n+"}","gi"),t[n])}),e};switch(t&&(i=_.isString(t)?Et.queryStringToJson(t):_.isObject(t)?t:{}),!0){case _.isString(e):e.containsStr("\\|")&&(a.dataModel=Et.getOnSplit(e,"|",0),e=Et.getOnLastSplit(1)),a.dataUrl=s(e,n),_.isEmpty(i)||(a.dataParams=i);break;case _.isArray(e):r={urls:[]},o={},_.each(e,function(e){o={url:s(e,n),params:i},e.containsStr("\\|")&&(o.target=Et.getOnSplit(e,"|",0),o.url=s(Et.getOnLastSplit(1),n)),r.urls.push(o)});break;case _.isObject(e):r={urls:[]},o={},_.each(_.keys(e),function(t){o={name:t,url:s(e[t],n),params:i},e[t].containsStr("\\|")&&(o.target=Et.getOnSplit(e[t],"|",0),o.url=s(Et.getOnLastSplit(1),n)),r.urls.push(o)})}return _.isEmpty(r.urls)||(a.dataCollection=r),a};var Ut={};Et.env="",Et.compiledTemplates4DataBind={},Et.compiledTemplates={},Et.viewModels={},Et.renderHistory={},Et.renderHistoryMax=0,Et.components={},Et.tempBind$data={},Et.defaults={components:{templateEngine:"handlebars",rootPath:"app/components/",inFolder:!0,templateExt:".html",scriptExt:".js",templateScript:!1,templateCache:!0,render:"",callback:"",extend$data:!0},routes:{base:"#",attr:{route:"data-spa-route",params:"data-spa-route-params",onNavAway:"onNavAway"},className:{hide:"HIDE-SPA-NAV",block:"BLOCK-SPA-NAV",allow:"ALLOW-SPA-NAV"}},lang:{path:"app/language/",ext:".txt",cache:!0,async:!0},validation:{xss:{on:"input_onBlur",fn:"_check.xss",msg:"i18n:invalid.input"}},set:function(e,t){return Et.is(e,"object")?(e.hasOwnProperty("set")&&delete e.set,_.merge(this,e)):"string"==typeof e&&("components.extend$data"==e?Et.defaults.components.extend$data=t:Et.setSimpleObjProperty(this,e,t)),this}};var Dt="api,debug,lang";Et.component=Et.$=Et.registerComponent=function(e,t){if(Dt.indexOf(e)>=0)return console.error("Invalid component name "+e+". Reserved component names: api,debug,lang"),void 0;var n=!!t;if(t=t||{},d(e,"object")&&(t=_.merge({},e),e=t.name||t.componentName||"spaComponent"+Et.now()),d(e,"string")&&e&&(e=e.trim())){if(!n){var a,r,o=-1;return e.indexOf(" ")>0&&(a=e.getRightStr(" ").trim(),e=e.getLeftStr(" ")),e.indexOf(":")>0&&(o=Et.toInt(e.getRightStr(":").trim()),e=e.getLeftStr(":")),Et.components[e]||console.warn("Unknown SPA Component ["+e+"]."),r=$('[data-rendered-component="'+e+'"]'),r.length&&o>=0&&(r=$(r[o])),a&&r.length&&("<"==a[0]?(a=a.getRightStr(0).trim(),r=r.find("[data-rendered-component]").length?r.find(a).filter(function(){return $(this).closest("[data-rendered-component]").data("renderedComponent")==e}):r.find(a)):r=r.find(a)),r}if(e.replace(/[a-z0-9]/gi,""))return console.error("Invalid component name "+e+". Component name has invalid character."),void 0;if(Et.components[e])return;t.componentName=e,t.hasOwnProperty("beforeRender")||(t.beforeRender="app."+e+".onRender"),t.hasOwnProperty("renderCallback")||(t.renderCallback="app."+e+".renderCallback"),t.hasOwnProperty("require")&&Et.loadComponents(t.require,function(){Et.console.log("Required components successfully loaded.")},function(){Et.console.log("Failed to load required components.")}),t=S(e,t);var i=["target","template","templateCache","style","styleCache","styles","stylesCache","scripts","scriptsCache","require","data","dataCollection","dataUrl","dataUrlMethod","dataUrlParams","dataParams","dataType","dataModel","dataCache","dataDefaults","data_","dataExtra","dataXtra","dataValidate","dataProcess","dataPreProcessAsync","beforeRender","componentName"],s=_.merge({},t);_.each(i,function(e){delete t[e]}),d(t.renderCallback,"string")&&delete t.renderCallback,_.each(Object.keys(t),function(e){delete s[e]}),s.renderCallback="app."+e+".renderCallback",Et.components[e]=s,Et.extendComponent(e,t)}},Et.$$=Et.registerComponents=function(){if(arguments.length){var e=arguments;1==arguments.length&&(e=_.isArray(arguments[0])?arguments[0]:_.isString(arguments[0])?arguments[0].split(","):arguments[0]),Et.is(e,"object")?_.each(Object.keys(e),function(t){Et.console.info("Registering spa-component:["+t+"]"),Et.registerComponent(t,e[t])}):e&&e.length&&_.each(e,function(e){Et.console.info("Registering spa-component:["+e+"]"),Et.registerComponent(e.trim())})}},Et.extendComponent=Et.$extend=Et.module=function(e,t){if(d(e,"object")&&(t=_.merge({},e),e=t.name||t.componentName||""+Et.now()),d(e,"string")&&e&&(e=e.trim())){if(Dt.indexOf(e)>=0)return console.error("Invalid component name "+e+". Reserved component names: "+Dt.join()),void 0;window.app=window.app||{},window.app[e]=window.app[e]||{},t&&_.isFunction(t)&&(t=t.call(Et.components[e]||{})),t=Et.is(t,"object")?t:{},Et.components[e]||(Et.components[e]={componentName:e,beforeRender:"app."+e+".onRender",renderCallback:"app."+e+".renderCallback"}),Et.components[e]&&(t.__prop__&&_.merge(Et.components[e],$.extend({},t.__prop__)),t.__prop__=Et.components[e]),$.extend(window.app[e],t),window["$$"+e]=window.app[e]}},Et.extendComponents=Et.$$extend=function(){if(arguments.length){var e=arguments;1==arguments.length&&(e=_.isArray(arguments[0])?arguments[0]:_.isString(arguments[0])?arguments[0].split(","):arguments[0]),Et.is(e,"object")?_.each(Object.keys(e),function(t){Et.console.info("Extend spa-component:["+t+"]"),Et.extendComponent(t,e[t])}):e&&e.length&&_.each(e,function(e){Et.console.info("Extend spa-component:["+e+"]"),Et.extendComponent(e.trim())})}},Et.$bind=function(e,t){Et.isBlank(t)&&(t=Et.findSafe(app,e+".$data",{})),Et.$(e).spaBindData(t)},Et.$data=function(e,t,n){function a(t){return Et.is(t,"object")&&(["update","merge"].__has(n,"i")?_.merge(app[e].$data,t):["*","reset","replace","overwrite"].__has(n,"i")&&(app[e].$data=t)),app[e].is$DataUpdated=Et.components[e].is$DataUpdated=!0,app[e].$data}var r;if(e=(e||"").trim(),n=n||"update",e)if(app.hasOwnProperty(e)){if(r=Et.findSafe(app,e+".$data"),t){r=a(Et.is(t,"function")?t.call(app[e],app[e].$data):t);var o=Et.$(e);if(o.is(":visible")){var i=Et.components[e],s=i.dataCache,l=(i.on$dataChange||"").trim().toLowerCase();s&&l&&["render","refresh","bind"].__has(l)&&(Et.console.log(e+"$"+l+" on $data update ..."),Et["$"+l](e)),Et.renderUtils.runCallbackFn("app."+e+".$dataChangeCallback",app[e].$data,app[e])}else console.log("Component is not visible! Skipped $on$dataChange.");Et.$dataNotify(e)}}else Et.console.warn("SPA Component[",e,"] is not loaded.");return r},Et.$dataWatch=function(e,t,n){return e&&t&&Et.is(n,"function")?(Ut.hasOwnProperty(e)||(Ut[e]={}),Ut[e].hasOwnProperty(t)?(console.warn("$dataWatch [",t,"] already exists in spa$[",e,"]"),void 0):(Ut[e][t]=n,!0)):void 0},Et.$dataUnwatch=function(e,t){var n;return e&&t&&Ut.hasOwnProperty(e)&&("*"==t&&(delete Ut[e],n=!0),Ut[e].hasOwnProperty(t)&&(delete Ut[e][t],n=!0)),n||console.warn("$dataWatch [",t,"] does not exist in spa$[",e,"]"),n},Et.$dataNotify=function(e,t){if(e&&Ut.hasOwnProperty(e)){var n=Object.keys(Ut[e]);t&&(n=t.split(",")),_.each(n,function(t){t=(t||"").trim(),Ut[e].hasOwnProperty(t)&&Ut[e][t].call(void 0,app[e].$data,app[e],t)})}},Et.$renderCount=function(e){return Et.findSafe(window,"app."+e+".__renderCount__",0)},Et.removeComponent=function(e,t){function n(e){e=e.trim();var n,a=Et.isBlank(e);return a||(n=Et.renderUtils.runCallbackFn("app."+e+".onRemove",t||"_script_",app[e]),a=Et.is(n,"undefined")||Et.is(n,"boolean")&&n,a||Et.console.warn("Remove $"+e+" request denied onRemove()")),a}var a;if(e=(e||"").trim(),t&&(t=e==t?"_self_":t),e){var r=$('[data-rendered-component="'+e+'"]');if(r.length){var o=r.find("[data-rendered-component]").map(function(){return $(this).attr("data-rendered-component")}),i=0==o.length||_.every(o,function(e){return n(e)});i&&n(e)&&(r.html("").text("").val("").data("renderedComponent","").removeAttr("data-rendered-component"),a=!0)}else a=!0}return Et.is(a,"boolean")&&a},Et.destroyComponent=function(e){var t;if(e=(e||"").trim(),e&&Et.removeComponent(e)&&(delete app[e],Et.components[e])){var n=Et.findSafe(Et.components[e],"template","");n&&!n.beginsWithStr("#")&&(n="#__tmpl_"+(""+n).replace(/[^a-z0-9]/gi,"_")),$("script"+n).remove(),delete Et.components[e],delete Et.compiledTemplates4DataBind[e],delete Et.compiledTemplates[e],delete Ut[e],t=!0}return t},Et.showComponent=function(e){e=(e||"").trim(),e&&$('[data-rendered-component="'+e+'"]').show()},Et.hideComponent=function(e){e=(e||"").trim(),e&&$('[data-rendered-component="'+e+'"]').hide()},Et.disableComponent=function(e){e=(e||"").trim(),e&&$('[data-rendered-component="'+e+'"]').css("pointer-events","none").addClass("disabled").attr("disabled","disabled")},Et.enableComponent=function(e){e=(e||"").trim(),e&&$('[data-rendered-component="'+e+'"]').css("pointer-events","auto").removeClass("disabled").removeAttr("disabled")},Et.removeComponents=Et.$remove=Et.$$remove=function(){T.apply({action:"removeComponent"},arguments)},Et.destroyComponents=Et.$destroy=Et.$$destroy=function(){T.apply({action:"destroyComponent"},arguments)},Et.showComponents=Et.$show=Et.$$show=function(){T.apply({action:"showComponent"},arguments)},Et.hideComponents=Et.$hide=Et.$$hide=function(){T.apply({action:"hideComponent"},arguments)},Et.enableComponents=Et.$enable=Et.$$enable=function(){T.apply({action:"enableComponent"},arguments)},Et.disableComponents=Et.$disable=Et.$$disable=function(){T.apply({action:"disableComponent"},arguments)},Et.refreshComponent=Et.$refresh=function(e,t){e&&(t=t||{},Et.is(t,"object")&&(t.hasOwnProperty("beforeRender")||(t.beforeRender=t.beforeRefresh||"app."+e+".onRefresh"),t.hasOwnProperty("renderCallback")||(t.renderCallback=t.refreshCallback||"app."+e+".refreshCallback"),t.isRefreshCall=!0,Et.console.info("Calling refreshComponent: "+e+" with below options"),Et.console.info(t),Et.$render(e,t)))},Et.renderComponent=Et.$render=function(e,t){if(e){if(!(t&&d(t,"object")&&t.isRefreshCall)&&Et.$renderCount(e)&&Et.findSafe(window,"app."+e+".refreshCallback",""))return Et.console.info("Component ["+e+"] has been rendered already. Refreshing instead of re-render."),Et.refreshComponent(e,t),void 0;d(e,"object")&&(t=_.merge({},e),e=t.name||t.componentName||""+Et.now(),t.componentName=e),Et.console.info("Called renderComponent: "+e+" with options",t);var n="_rtt_"+e,a="";t=S(e,t);var r=Et.defaults.components.rootPath+(Et.defaults.components.inFolder?e+"/":""),o=r+e,i=o+Et.defaults.components.templateExt,s=Et.defaults.components.scriptExt,l=t&&_.isObject(t)&&t.hasOwnProperty("script")?t.script:s?o+s:"",c=function(){if(Et.console.info("_renderComp > "+e+" with below options"),Et.console.info(t),!Et.components[e].hasOwnProperty("template"))if(Et.components[e].hasOwnProperty("templateStr")||Et.components[e].hasOwnProperty("templateString"))a=Et.components[e].templateStr||Et.components[e].templateString||"",Et.updateTemplateScript(n,a),Et.components[e].template="#"+n;else if(Et.hasPrimaryKeys(Et.components[e],"templateUrl")){var s=(Et.components[e].templateUrl||"").trim();s&&(/^(\.\/)/.test(s)&&(s=r+s.substr(2)),/(\.([a-z])+)$/i.test(s)||(s+=Et.defaults.components.templateExt)),Et.components[e].template=s}else Et.components[e].template=i;Et.console.info("render-options: spa.components["+e+"]"),Et.console.info(Et.components[e]);var l=t&&t.saveOptions?Et.components[e]:$.extend({},Et.components[e]);if(t&&(t.hasOwnProperty("mountComponent")||delete l.mountComponent,$.extend(l,t),Et.console.info("Extended> render-options: spa.components["+e+"]"),Et.console.info(l)),l.hasOwnProperty("style")&&Et.is(l.style,"string")&&(l.dataStyles={},l.dataStyles[e+"Style"]="."==l.style||"$"==l.style?o+".css":l.style,delete l.style,Et.console.info("Using component style for ["+e+"]"),Et.console.info(l)),l&&_.isObject(l)&&l.dataCache){var c=Et.findSafe(app,e+".$data",{});Et.isBlank(c)?(l.dataCache=!1,Et.console.log("dataCache:false; Using/Ajaxing new data ...")):(l.data=c,l.dataProcess=!1,Et.console.log("dataCache:true; Using $data and ingored data + dataProcess ..."))}Et.render(l)},u=function(){l?Et.console.info("Loaded component ["+e+"] source from ["+l+"]"):Et.console.info("Skipped Loading component ["+e+"] source from script file."),Et.console.info("In Source> spa.components["+e+"]"),Et.console.info(Et.components[e]),Et.components.hasOwnProperty(e)||(Et.console.warn("spa.components["+e+"] NOT DEFINED in ["+(l||"spa.components")+"]. Creating *NEW*"),Et.isBlank(t)&&(t={}),t.hasOwnProperty("componentName")||(t.componentName=e),Et.components[e]=t,Et.console.info("NEW> spa.components["+e+"]"),Et.console.info(Et.components[e])),c()};Et.components.hasOwnProperty(e)?(Et.console.info("Re-rending spa.components["+e+"]"),Et.console.info(Et.components[e]),c()):l?(Et.console.info("Loading component ["+e+"] source from ["+l+"]"),$.cachedScript(l,{success:u}).done(Et.noop).fail(function(){console.warn("Failed Loading component ["+e+"] source from ["+l+"]. Continue Loading component with default properties."),u()})):u()}},Et.renderComponents=Et.$$render=function(){C.apply({action:"renderComponent"},arguments)},Et.refreshComponents=Et.$$refresh=function(){C.apply({action:"refreshComponent"},arguments)},Et.renderComponentsInHtml=function(e,t){e=e||"body",t=(t||"").trim();var n=$(e).find("[data-spa-component]");if(n.length){var a,r,o,i,s,l,c;n.each(function(e,n){if(a=$(n),c=a.data(),r=(a.attr("data-spa-component")||"").split("|"),o=r[0].trim(),i=(r[1]||"").trim(),i&&(/\:\s*\$data/.test(i)&&(i=i.replace(/\:\s*\$data/g,":app."+t+".$data")),i=Et.toJSON(i)),o){n.id||(l="spaCompContainer_"+o+"_"+($("body").find("[rel=spaComponentContainer_"+o+"]").length+1),n.id=l,n.setAttribute("rel","spaComponentContainer_"+o));var u=a.attr("data-spa-component-options")||a.attr("data-spa-$options")||a.attr("spa-$options")||"{}";if(s=_.merge({target:"#"+n.id,spaComponent:o},i,c,Et.toJSON(u)),s.hasOwnProperty("data")&&Et.is(s.data,"string")){var d=s.data.trim();/^\$data/.test(d)&&(d="app."+t+"."+d),s.data=_.merge({},Et.findSafe(window,d,{}))}var p=(a.attr("data-spa-component-$data")||a.attr("data-spa-$data")||a.attr("spa-$data")||"").trim();if(p&&(/\:\s*\$data/.test(p)&&(p=p.replace(/\:\s*\$data/g,":app."+t+".$data")),Et.isBlank(s.data)?s.data=Et.toJSON(p):_.merge(s.data,Et.toJSON(p))),!Et.isBlank(s.data)&&s.data.hasOwnProperty("$data")){var f=_.merge({},s.data.$data);delete s.data.$data,_.merge(s.data,f)}s.hasOwnProperty("data")&&(s.data_=_.merge({},s.data),delete s.data),Et.console.log("inner-component",o,"options:",s),Et.renderComponent(o,s)}})}},Et.renderUtils={array2ObjWithKeyPrefix:function(e,t,n){var a={};return _.each(e,function(e){e=(""+e).trimStr(),e&&(a[t+(e.equals(".")?n:e).replace(/[^a-z0-9]/gi,"_")]=""+e)}),Et.console.log([t,a]),a},getFn:function(e){var t,n=e;return e&&_.isString(e)&&(n=Et.findSafe(window,e)),n&&_.isFunction(n)?n:t},runCallbackFn:function(e,t,n){if(e){var a,r=e,o=n;if(_.isString(r)&&(o||(e.match("]$")?a=e.substring(0,e.lastIndexOf("[")):e.indexOf(".")>0&&(a=e.substring(0,e.lastIndexOf("."))),o=a?Et.findSafe(window,a):window),r=Et.findSafe(window,r)),r){if(_.isFunction(r))return Et.console.info("calling callback: "+e),Et.is(t,"array")&&"(...)"==t[0]?(t.shift(),r.apply(o,t)):r.call(o,t);Et.console.error("CallbackFunction <"+e+" = "+r+"> is NOT a valid FUNCTION.")}else Et.console.warn("CallbackFunction <"+e+"> is NOT defined.")}},registerComponentEvents:function(e){if(e&&app[e]&&app[e].hasOwnProperty("events")){var t,n;
_.each(Object.keys(app[e].events),function(a){app[e].events[a].hasOwnProperty("target")&&!Et.isBlank(app[e].events[a].target)&&(t=app[e].events[a].target,n=Et.$(e+" "+t),n.filter(":not([spa-events-"+a+'="'+e+'"])').attr("spa-events-"+a,e).each(function(t,n){_.each(Object.keys(app[e].events[a]),function(t){0==t.indexOf("on")&&_.each(t.split("_"),function(r){Et.console.log("registering component ["+e+"] event: "+a+"-"+r),$(n).on(r.trimLeftStr("on").toLowerCase(),app[e].events[a][t])})})}))})}}},Et.render=function(e,t){function n(e,t,n){Et.is(m[e],"string")&&m[e]=="app."+h+t&&app[h].hasOwnProperty(n)&&(m[e]="app."+h+"."+n)}if(arguments.length){if(1===arguments.length&&"object"==typeof e){if(t=_.merge({},e),t.hasOwnProperty("target"))e=t.target,delete t.target;else{var a=$('[data-rendered-component="'+t.componentName+'"]').attr("id");e=(a?"#":"")+a,e||(Et.console.warn("Render target is missing."),e="dynRender_"+Et.now()+"_"+Et.rand(1e3,9999))}return Et.render(e,t),void 0}t&&function(e){var n={template:"dataTemplate",templates:"dataTemplates",templateCache:"dataTemplatesCache",templatesCache:"dataTemplatesCache",html:"dataTemplate",htmls:"dataTemplates",htmlCache:"dataTemplatesCache",htmlsCache:"dataTemplatesCache",script:"dataScripts",scripts:"dataScripts",scriptCache:"dataScriptsCache",scriptsCache:"dataScriptsCache",style:"dataStyles",styles:"dataStyles",styleCache:"dataStylesCache",stylesCache:"dataStylesCache",renderType:"dataRenderType",beforeRender:"dataBeforeRender",dataRenderCallBack:"dataRenderCallback",renderCallback:"dataRenderCallback",renderCallBack:"dataRenderCallback",callback:"dataRenderCallback",callBack:"dataRenderCallback",onRemove:"dataRemoveCallback",dataRenderMode:"dataRenderMode",renderMode:"dataRenderMode",renderId:"dataRenderId"};_.each(n,function(n,a){e.hasOwnProperty(a)&&(e[n]=t[a],delete e[a])})}(t);var o={id:"",view:{},model:{},cron:"",elDataAttr:{},target:e,iOptions:t},i=[],s=!1,l=Et.isElementExist(e);l&&(o.elDataAttr=$(e).data());var c=arguments.length,u=c>1,p=u&&t.hasOwnProperty("data"),g=!0,h=t&&t.componentName?t.componentName:"",m={data:{},dataUrl:"",dataUrlParams:{},dataUrlMethod:"GET",dataUrlErrorHandle:"",dataUrlHeaders:{},dataParams:{},dataType:"",dataExtra:{},dataXtra:{},data_:{},dataDefaults:{},dataModel:"",dataValidate:!1,dataProcess:"",dataCache:!1,extend$data:Et.defaults.components.extend$data,dataCollection:{},dataTemplates:{},dataTemplate:"",dataTemplatesCache:!0,templateScript:!1,templateEngine:"",dataScripts:{},dataScriptsCache:!0,dataStyles:{},dataStylesCache:!0,dataBeforeRender:"",dataRenderCallback:"",dataRemoveCallback:"",dataRenderMode:"",skipDataBind:!1,render:"",dataRenderId:""};if(l||(Et.isElementExist("#spaRunTimeHtmlContainer")||$("body").append("<div id='spaRunTimeHtmlContainer' style='display:none;'></div>"),$("#spaRunTimeHtmlContainer").append("<div id='"+e.replace(/\#/gi,"")+"'></div>")),u){var v={dataTemplatesCache:Et.defaults.components.templateCache};t=_.merge({},v,t);var S=t.hasOwnProperty("saveOptions")&&t.saveOptions;for(var T in t)m[T]=t[T],S&&"data"!==T&&"saveOptions"!==T&&$(e).data(""+(""+(_.at(""+T,4)||"")).toLowerCase()+T.slice(5),Et.toStr(t[T]))}Et.console.log(h+"$"+(m.isRefreshCall?"refresh":"render")+" with options:",m,"$data",Et.findSafe(app,h+".$data"));var C=$(e),k=C.attr("data-rendered-component")||"",x=k==h;if(q(C)){Et.console.log("Component container [",e,"] blocks navigation.");var E=C.hasClass(tn)?C:C.find(nn);if(E.length>1&&(E=$(E[0])),E.length){var A,j,P=(E.attr(ln)||"").trim();if(P){if("#"==P[0]||">"==P[0]){var R=">"==P[0]?P.substr(1).trim():P,N=E.find(R).filter(":not(.disabled):not(:disabled)");if(N.length)return N.trigger("click"),void 0}else if(A=Et.findSafe(window,P.split("(")[0].split(";")[0]),A&&Et.is(A,"function")&&(j=A.call(app[k],app[k],app[h])),A&&(!Et.is(j,"boolean")||!j))return}else if(A=Et.findSafe(app,k+".onNavBlock"),A&&Et.is(A,"function")&&(j=A.call(app[k],app[k],app[h])),A&&(!Et.is(j,"boolean")||!j))return}Et.console.log("Render continues.")}x&&(Et.console.log("$refresh - Auto-Detected",h,m),"auto".equalsIgnoreCase(""+m.render)&&(Et.console.log("Finding for refresh events."),n("dataBeforeRender",".onRender","onRefresh"),n("dataRenderCallback",".renderCallback","refreshCallback")));var L=function(e){return(""+C.data(e)).replace(/undefined/,"")},I=function(e,t){return Et.isBlank(m[e])?L(t):m[e]},B=I("dataRenderId","renderId");o.id=B.ifBlankStr("spaRender"+Et.now()+Et.rand(1e3,9999));var U=I("dataRenderMode","renderMode")||"replace";Et.console.log("Render Mode: <"+U+">");var D="x-spa-template",F=(m.templateEngine||Et.defaults.components.templateEngine||"handlebars").toLowerCase();if(Et.console.group("spaLoadingViewScripts"),u&&t.hasOwnProperty("dataScriptsCache"))Et.console.info("Override [data-scripts-cache] with user option [dataScriptsCache]: "+m.dataScriptsCache);else{var M=L("scriptsCache");Et.isBlank(M)||(m.dataScriptsCache=M.toBoolean(),Et.console.info("Override [data-scripts-cache] with [data-scripts-cache] option in tag-attribute: "+m.dataScriptsCache))}var z=L("scripts");z&&Et.isBlank((z||"").replace(/[^:'\"]/g,""))&&(z="'"+z.split(",").join("','")+"'");var V=Et.toJSON(z||"{}");!_.isObject(m.dataScripts)&&_.isString(m.dataScripts)&&(z=(m.dataScripts||"").trimStr(),Et.isBlank((z||"").replace(/[^:'\"]/g,""))&&(z="'"+z.split(",").join("','")+"'"),m.dataScripts=Et.toJSON(z)),$.isEmptyObject(m.dataScripts)||(V=m.dataScripts),_.isArray(V)&&_.remove(V,function(e){return!e}),Et.console.info(V);var J;if(z=[],V&&!$.isEmptyObject(V)){if(_.isArray(V)){Et.console.info("Convert array of script(s) without scriptID to object with scriptID(s).");var H=Et.renderUtils.array2ObjWithKeyPrefix(V,"__scripts_",e);Et.console.info("Scripts(s) with scriptID(s)."),Et.console.log(H),V=_.isEmpty(H)?{}:H}Et.console.info("External scripts to be loaded [cache:"+m.dataScriptsCache+"] along with view container ["+e+"] => "+JSON.stringify(V)),J=_.keys(V)}else Et.console.info("No scripts defined [data-scripts] in view container ["+e+"] to load.");if(Et.console.groupEnd("spaLoadingViewScripts"),J){var W;z=_.map(J,function(e){return W=f(V[e],h),W.endsWithStrIgnoreCase(".js")||(W+=Et.defaults.components.scriptExt),(m.dataScriptsCache?"":"~")+W})}return Et.console.log("component [",h,"] scripts:",z),Et.loadScriptsSync(z,function(){Et.console.info("External Scripts Loaded."),!Rt&&Object.keys(app.api).length&&kt(),Et.console.group("spaDataModel");var n,a,l=I("dataModel","model"),c=I("dataUrl","url"),f=p||c.beginsWithStrIgnoreCase("local:"),v=c.beginsWithStrIgnoreCase("local:")?c.replace(/local:/gi,""):"data",S=w(),T=m&&m.hasOwnProperty("stringifyPayload")?m.stringifyPayload:Et.findSafe(app,"api.ajaxOptions.stringifyPayload");l=l.ifBlankStr(v),n=l.replace(/\./g,"_");var k={};if(p)k[n]=Et.is(m.data,"function")?m.data():m.data,Et.console.info("Loaded data model ["+l+"] from argument");else{if(u&&t.hasOwnProperty("dataCache"))Et.console.info("Override [data-cache] with user option [dataCache]: "+m.dataCache);else{var x=L("cache");Et.isBlank(x)||(m.dataCache=x.toBoolean(),Et.console.info("Override [data-cache] with [data-cache] option in tag-attribute: "+m.dataCache))}if(Et.isBlank(c)){k[n]={};var E=L("collection");E&&(E=Et.toJSON(E)),Et.isBlank(m.dataCollection)||(E=m.dataCollection),_.isArray(E)&&(E={urls:E});var A=E.urls;if(Et.isBlank(A))Et.console.warn("Model Data ["+l+"] or [data-url] or [data-collection] NOT found! Check the arguments or html markup. Rendering with options."),k[n]=_.merge({},m.dataDefaults,m.data_,m.dataExtra,m.dataXtra);else if(_.isArray(A)){Et.console.info("Processing data-URLs");var j=0,P=E.nameprefix||"data";_.each(A,function(e){var t=P+j,r=_.has(e,"name")?(""+e.name).replace(/[^a-zA-Z0-9]/gi,""):_.has(e,"target")?""+e.target:t,o=_.has(e,"url")?e.url:_.has(e,"path")?e.path:"";if(r.containsStr(".")&&(r=_.last(r.split("."),1)),r=r.ifBlankStr(t),Et.console.info("processing data-api for: "+r),Et.console.log(e),o){_.has(e,"urlParams")&&(o=Et.api.url(o,e.urlParams));var s=_.has(e,"headers")?e.headers:m.dataUrlHeaders;Et.isBlank(s)&&(s=Et.findSafe(window,"app.api.ajaxOptions.headers",{})),a=_.has(e,"params")?e.params:_.has(e,"data")?e.data:{},_.has(e,"defaultPayload")||Et.isBlank(S)||(a=_.merge({},S,!Et.isBlank(a)&&Et.is(a,"object")?a:{})),!Et.isBlank(a)&&T&&(a=JSON.stringify(a)),i.push($.ajax({url:o,method:(""+(e.method||"GET")).toUpperCase(),headers:Et.is(s,"function")?s():s,data:a,cache:_.has(e,"cache")?e.cache:m.dataCache,dataType:_.has(e,"type")?e.type:m.dataType||Et.findSafe(window,"app.api.ajaxOptions.dataType","text"),success:function(t,a,i){var s,l=_.has(e,"target")?""+e.target:"",c=Et.is(t,"string")?Et.toJSON(""+t,"data"):t;if(l.indexOf(".")>0)s=Et.hasKey(c,l)?Et.find(c,l):c;else try{s=c.hasOwnProperty(l)?c[l]:c}catch(u){console.warn("Error in Data Model ["+l+"] in URL ["+o+"].\n"+u.stack)}k[n][r]?(k[n][r]=[k[n][r]],k[n][r].push(s)):k[n][r]=s,Et.console.info("Loaded data model ["+r+"] from ["+o+"]");var d=e.success||e.onsuccess||e.onSuccess;if(d||(d=E.success||E.onsuccess||E.onSuccess),d)if(_.isFunction(d))d.call(this,c,e,a,i);else if(_.isString(d)){var p=Et.findSafe(window,d);"function"==typeof p?p.call(this,c,e,a,i):Et.console.log("Unknown ajax success handle: "+d)}},error:function(t,n,a){Et.console.warn("Error processing data-api ["+o+"]");var r=e.error||e.onerror||e.onError;if(r||(r=E.error||E.onerror||E.onError,r||Et.isBlank(m.dataUrlErrorHandle)||(r=m.dataUrlErrorHandle)),r){if(_.isFunction(r))r.call(this,t,n,a);else if(_.isString(r)){var i=Et.findSafe(window,r);"function"==typeof i?i.call(this,oResult,e):Et.console.log("Unknown ajax error handle: "+r)}}else Et.is(app.api.onError,"function")?app.api.onError.call(this,t,n,a):Et.api.onReqError.call(this,t,n,a)}}))}else Et.console.error("data-api-url not found. Please check the arguments or html markup. Skipped this data-api request");j++})}else Et.console.warn("Invalid [data-urls].Check the arguments or html markup. Rendering with empty data {}.")}else if(c.beginsWithStrIgnoreCase("local:")){var R=c.replace(/local:/gi,""),N={};if(r(R)&&(Nt("("+R+")")!==void 0&&Nt("(localDataModelObj="+R+")"),Et.console.info("Using LOCAL Data Model: "+R)),!f&&l.indexOf(".")>0)k[n]=Et.hasKey(N,l)?Et.find(N,l):N;else try{k[n]=N.hasOwnProperty(l)?N[l]:N}catch(B){console.warn("Error in Data Model ["+l+"] in Local Object ["+R+"].\n"+B.stack)}}else{Et.isBlank(m.dataUrlParams)||(c=Et.api.url(c,m.dataUrlParams)),Et.console.info("Request Data ["+l+"] [cache:"+m.dataCache+"] from URL =>"+c);var M=m.dataUrlHeaders;Et.isBlank(M)&&(M=Et.findSafe(window,"app.api.ajaxOptions.headers",{})),a=m.dataParams,m.hasOwnProperty("defaultPayload")||Et.isBlank(S)||(a=_.merge({},S,!Et.isBlank(a)&&Et.is(a,"object")?a:{})),!Et.isBlank(a)&&T&&(a=JSON.stringify(a));var z={url:c,method:(""+(I("dataUrlMethod","urlMethod")||"GET")).toUpperCase(),headers:Et.is(M,"function")?M():M,data:a,cache:m.dataCache,dataType:m.dataType||Et.findSafe(window,"app.api.ajaxOptions.dataType","text"),success:function(e){var t=Et.is(e,"string")?Et.toJSON(""+e,"data"):e,a=I("dataValidate","validate");if(l.indexOf(".")>0)k[n]=Et.hasKey(t,l)?Et.find(t,l):t;else try{"data"!=l||t.hasOwnProperty(l)||(l="Data",n="Data"),k[n]=!a&&t.hasOwnProperty(l)?t[l]:t}catch(r){console.error("Error in Data Model ["+l+"] in URL ["+c+"].\n"+r.stack)}Et.console.info("Loaded data model ["+l+"] from ["+c+"]")},error:function(e,t,n){var a=I("dataUrlErrorHandle","urlErrorHandle");if(Et.isBlank(a))Et.is(app.api.onError,"function")?app.api.onError.call(this,e,t,n):Et.api.onReqError.call(this,e,t,n);else{var r=Et.findSafe(window,a);"function"==typeof r?r.call(this,e,t,n):Et.console.log("Unknown ajax error handle: "+a)}}};i.push($.ajax(z))}}if(Et.console.info("End of Data Processing"),Et.console.log({o:k}),Et.console.groupEnd("spaDataModel"),g){var V=L("template")||L("html"),J=L("templates")||L("htmls");J&&Et.isBlank((J||"").replace(/[^:'\"]/g,""))&&(J="'"+J.split(",").join("','")+"'");var H=Et.toJSON(J||"{}");if(!_.isObject(m.dataTemplates)&&_.isString(m.dataTemplates)&&(J=(m.dataTemplates||"").trimStr(),Et.isBlank((J||"").replace(/[^:'\"]/g,""))&&(J="'"+J.split(",").join("','")+"'"),m.dataTemplates=Et.toJSON(J)),$.isEmptyObject(m.dataTemplates)||(H=m.dataTemplates,J=""+JSON.stringify(H)),(_.isEmpty(Et.toJSON((J||"").trimStr()))||_.isArray(H)&&1==H.length&&Et.isBlank(H[0]))&&(H={},J=""),Et.console.info("Templates:"),Et.console.info(H),_.isArray(H)&&!_.isEmpty(H)){Et.console.info("Array of template(s) without templateID(s).");var W=Et.renderUtils.array2ObjWithKeyPrefix(H,"__tmpl_",e);Et.console.info("Template(s) with template ID(s)."),Et.console.log(W),_.isEmpty(W)?(H={},J=""):(H=W,J=""+JSON.stringify(H))}if(!H||$.isEmptyObject(H)){H={};var K=m.dataTemplate,q="",G="";Et.isBlank(K)&&(Et.isBlank(V)||(Et.console.info("Template to load from location <"+V+">"),K=V)),K=(K||"").trimStr(),Et.console.info("Primary Template: <"+K+">"),Et.isBlank(K)||K.equalsIgnoreCase("inline")||K.equals(".")?(Et.console.info("Using target container (inline) content as template."),q="_tmplInline_"+e.trimStr("#")):K.beginsWithStr("#")?(Et.console.info("Using page container <"+K+"> content as template."),q=K.trimStr("#")):(Et.console.info("External path <"+K+"> content as template."),q="__tmpl_"+(""+K).replace(/[^a-z0-9]/gi,"_"),G=K),H[q]=G.replace(/['\"]/g,""),Et.console.info(H)}if(Et.console.group("spaView"),H&&!$.isEmptyObject(H)){Et.console.info("Templates of ["+D+"] to be used in view container ["+e+"] => "+JSON.stringify(H));var X=_.keys(H);if(Et.console.group("spaLoadingTemplates"),Et.console.group("spaLoadingTemplatesCache"),u&&t.hasOwnProperty("dataTemplatesCache"))Et.console.info("Override [data-templates-cache] with user option [dataTemplatesCache]: "+m.dataTemplatesCache);else{var Y=L("templatesCache")||L("templateCache")||L("htmlsCache")||L("htmlCache");Et.isBlank(Y)||(m.dataTemplatesCache=Y.toBoolean(),Et.console.info("Override [data-templates-cache] with [data-templates-cache] option in tag-attribute: "+m.dataTemplatesCache))}Et.console.groupEnd("spaLoadingTemplatesCache"),Et.console.info("Load Templates"),Et.console.info(H),_.each(X,function(t,n){Et.console.info([n,t,H[t],D,e]),i=Et.loadTemplate(t,H[t],D,e,i,!m.dataTemplatesCache)});var Q="#"+X[0].trimStr("#");if(Et.console.info("External Data/Templates Loading Status: "+JSON.stringify(i)),Et.console.groupEnd("spaLoadingTemplates"),Et.console.info("Render TemplateID: "+Q),Et.console.group("spaLoadingViewStyles"),u&&t.hasOwnProperty("dataStylesCache"))Et.console.info("Override [data-styles-cache] with user option [dataStylesCache]: "+m.dataStylesCache);else{var Z=L("stylesCache");Et.isBlank(Z)||(m.dataStylesCache=Z.toBoolean(),Et.console.info("Override [data-styles-cache] with [data-styles-cache] option in tag-attribute: "+m.dataStylesCache))}var et=L("styles");et&&Et.isBlank((et||"").replace(/[^:'\"]/g,""))&&(et="'"+et.split(",").join("','")+"'");var tt=Et.toJSON(et||"{}");if($.isEmptyObject(m.dataStyles)||(tt=m.dataStyles),_.isArray(tt)&&_.remove(tt,function(e){return!e}),tt&&!$.isEmptyObject(tt)){if(_.isArray(tt)){Et.console.info("Convert array of style(s) without styleID to object with styleID(s).");var nt=Et.renderUtils.array2ObjWithKeyPrefix(tt,"__styles_",e);Et.console.info("Style(s) with styleID(s)."),Et.console.log(nt),tt=_.isEmpty(nt)?{}:nt}Et.console.info("External styles to be loaded [cache:"+m.dataStylesCache+"] along with view container ["+e+"] => "+JSON.stringify(tt));var at=_.keys(tt);Et.console.group("spaLoadingStyles"),_.each(at,function(e){i=Et.loadStyle(e,tt[e],m.dataStylesCache,i)}),Et.console.info("External Styles Loading Status: "+JSON.stringify(i)),Et.console.groupEnd("spaLoadingStyles")}else Et.console.info("No styles defined [data-styles] in view container ["+e+"] to load.");Et.console.groupEnd("spaLoadingViewStyles"),$.when.apply($,i).then(function(){function a(){var e,n=I("dataPreProcessAsync","preProcessAsync");if(n&&_.isString(n)&&(n=Et.findSafe(window,n)),o.modelOriginal=$.extend({},u),o.model=u,n&&_.isFunction(n)){i=!0;var a=$.extend({},app[h]||{},t||{});e=n.call(a,u),i=!Et.is(e,"undefined"),i||(e=[]),i&&(r=!Et.is(e,"array")||Et.is(e,"array")&&1==e.length,Et.is(e,"array")||(e=[e]))}return e}Et.console.group("spaRender["+F+"] - spa.renderHistory["+o.id+"]"),Et.console.info("Rendering "+e+" using master template: "+Q);try{var r,i=!1,l=!I("dataValidate","validate");if(!l){Et.console.info("Validating Data");var c=I("dataValidate","validate");c&&_.isString(c)&&(c=Et.findSafe(window,c)),l=c&&_.isFunction(c)?c.call(k[n],k[n]):Et.api.isCallSuccess(k[n])}var u=k[n];l?$.when.apply($,a()).done(function(){var n=Array.prototype.slice.call(arguments);i&&(Et.console.log(h,".dataPreProcessAsync() =>",n.__now()),r&&n.length>1&&"success"==n[1]?(n[0]=Et.toJSON(n[0]),n.splice(1)):_.each(n,function(e,t){e&&Et.is(e,"array")&&e.length>1&&"success"==e[1]&&(n[t]=Et.toJSON(e[0]))}),Et.console.log(n.__now()));var a,l=I("dataProcess","process");if(l&&_.isString(l)&&(l=Et.findSafe(window,l)),o.modelOriginal=$.extend({},u),o.model=u,l&&_.isFunction(l)){var c=$.extend({},app[h]||{},t||{});n.unshift(u),a=l.apply(c,n)}else i&&(Et.console.warn(h,".dataPreProcessAsync without dataProcess. Merging responses."),n.unshift(u),_.merge.apply(_,n));if(o.model=Et.is(a,"undefined")?u:a,_.isObject(o.model)||(o.model=o.modelOriginal),Et.console.log(h,"Final Template Data:",o.model),h){if(d(app,"object")&&app.hasOwnProperty(h)){var p=_.merge({},d(o.model,"object")?o.model:{_noname:o.model});app[h].$data=p.hasOwnProperty("spaComponent")?{}:m.extend$data?_.merge({},m.dataDefaults,m.data_,m.dataExtra,m.dataXtra,m.dataParams,p):{},app[h].__global__=window||{}}o.model._this=_.merge({},Et.findSafe(window,"app."+h,{})),o.model._this_=_.merge({},Et.components[h]||{},t)}o.model._global_=window||{};var f,g=o.model,v=($(Q).html()||"").replace(/_LINKTAGINTEMPLATE_/g,"link"),S=m.templateScript||Et.defaults.components.templateScript;S&&(v=v.replace(/_BlockedScrptInTemplate_/g,"script"));var T=v.match(/({\s*\@\$(.*?)\s*})/g);!m.skipDataBind&&T&&_.forEach(T,function(e){v=v.replace(RegExp(e.replace(/\$/,"\\$"),"g"),e.replace(/{\s*\$this|{\s*\@\$/g,"_global_.app.").replace(/}/,".").replace(/\s/g,"").replace(/\.\./,"."+(h||"")+"."))});var k=v.match(/({\s*\$(.*?)\s*})/g);!m.skipDataBind&&k&&_.forEach(k,function(e){v=v.replace(RegExp(e.replace(/\$/,"\\$"),"g"),e.replace(/{\s*\$this|{\s*\$/g,"app.").replace(/}/,".").replace(/\s/g,"").replace(/\.\./,"."+(h||"")+"."))}),f=v,Et.console.log("Template Source:",v),Et.console.log("DATA for Template:",g);var w,x;if(!Et.isBlank(g))if(m.skipDataBind)Et.console.log("Skipped Data Binding.");else{if(m.dataTemplatesCache||(delete Et.compiledTemplates4DataBind[h],delete Et.compiledTemplates[h]),!Et.compiledTemplates4DataBind.hasOwnProperty(h)&&/ data-bind\s*=/i.test(v)){v=y(v),Et.console.log("TemplateBeforeBind",v);var E=d(g,"object")?_.merge({},m.dataDefaults,m.data_,m.dataExtra,m.dataXtra,m.dataParams,g):g;Et.console.log("SPA built-in binding ... ...",E),v=Et.bindData(v,E,"$"+h),v=b(v),Et.console.log("TemplateAfterBind",v),Et.compiledTemplates4DataBind.hasOwnProperty(h)||(Et.compiledTemplates4DataBind[h]={}),w=!0}if(F.indexOf("handlebar")>=0||F.indexOf("{")>=0)if("undefined"!=typeof Handlebars&&Handlebars){Et.console.log("Data bind using handlebars.js.",v);try{var A=Et.compiledTemplates[h]||Handlebars.compile(v),j=d(g,"object")?_.merge({},o,m.dataDefaults,m.data_,m.dataExtra,m.dataXtra,m.dataParams,g):g;x=j,Et.compiledTemplates.hasOwnProperty(h)||(Et.compiledTemplates[h]=A),f=A(j),Et.console.log(f)}catch(P){console.error("Error in Template",P)}}else Et.console.error("handlebars.js is not loaded.")}Et.console.log("Template Compiled:",f),s=!1,o.view=f.replace(/\_\{/g,"{{").replace(/\}\_/g,"}}");var R=h?_.merge({},app[h]||{},{__prop__:_.merge({},t||{})}):{};R.__prop__&&R.__prop__.data&&(delete R.__prop__.data._global_,delete R.__prop__.data._this_,delete R.__prop__.data._this),o.model&&(delete o.model._global_,delete o.model._this_,delete o.model._this),Et.renderUtils.runCallbackFn(Et.defaults.components.render,z,R);var N,B,D,M=I("dataBeforeRender","beforeRender");if(M){var z={template:v,data:o.model,view:o.view};if(N=Et.renderUtils.runCallbackFn(M,z,R),!Et.is(N,"undefined"))switch(Et.of(N)){case"string":o.view=N;break;case"boolean":B=!N}}if(D=o.view.beginsWithStr("<!---->"),B)o={},Et.console.warn("Render aborted by "+M);else if(!D){var V=C.attr("data-rendered-component");V&&!Et.removeComponent(V,h)&&(B=!0,o={},Et.console.warn("Render $"+h+" aborted by $"+V+".onRemove()"))}if(!B){if(D)Et.console.log("Rendering component [",h,"] view aborted.");else{var J=I("dataRenderType","renderType");switch(Et.console.log("Injecting component in DOM (",e,")."+(J||"html")),J){case"value":$(e).val(o.view);break;case"text":$(e).text(o.view);break;default:switch(s=!0,!0){case U.equalsIgnoreCase("append"):$(e).append(o.view);break;case U.equalsIgnoreCase("prepend"):$(e).prepend(o.view);break;default:$(e).html(o.view)}}}$(e).attr("data-rendered-component",h).data("renderedComponent",h),O(h),Et.console.info("Render: SUCCESS");var H=_.keys(Et.renderHistory),W=H.length;if(W>Et.renderHistoryMax&&$.each(H.splice(0,W-Et.renderHistoryMax),function(e,t){delete Et.renderHistory[t]}),o.cron=""+Et.now(),Et.renderHistoryMax>0&&(Et.renderHistory[o.id]=o),s&&!D&&(Et.renderUtils.registerComponentEvents(h),$(e).find(".lang-icon,.lang-text,[data-i18n-lang]").length&&Et.i18n.displayLang(),Tt(e),w||Et.dataBind(e,x,"",!0),Et.i18n.apply(e),bt(h)))return o;Et.console.log(o);var K=L("renderCallback");m.dataRenderCallback&&(K=m.dataRenderCallback);var q=_.isString(K)&&K.equalsIgnoreCase("off");Et.console.info("Processing callback: "+K),q||Et.renderUtils.runCallbackFn(K,o),Et.renderUtils.runCallbackFn(Et.defaults.components.callback,o,R),s&&!D&&($(e).find("[rel='spaRender'],[data-render],[data-sparender],[data-spa-render]").spaRender(),Et.renderComponentsInHtml(e,h))}}):Et.is(app.api.onResError,"function")?app.api.onResError(k[n],"Invalid-Data",void 0):Et.api.onResError(k[n],"Invalid-Data",void 0)}catch(p){console.error(p)}Et.console.groupEnd("spaRender["+F+"] - spa.renderHistory["+o.id+"]")}).fail(function(){console.error("External Data/Templates/Styles/Scripts Loading failed! Unexpected!! Check the template Path / Network. Rendering aborted.")})}else Et.console.error("No templates defined [data-templates] in view container ["+e+"] to render. Check HTML markup.");Et.console.groupEnd("spaView")}},function(){console.error("External Scripts Loading Failed! Unexpected!? Check the Script Path/Network.")}),o}},Et.initElementsIn=E,Et.setElIdIfNot=function(e){var t=$(e);return Et.isBlank(t.attr("id"))&&t.attr("id","_el_"+Et.now()+"_"+Et.rand(1e3,9999)),t.attr("id")},Et.Foundation={autoReflow:!1},Et.reflowFoundation=function(e){"Foundation"in window&&Et.Foundation.autoReflow&&$(e||document).foundation("reflow")},$.expr[":"].regex=function(e,t,n){var a=n[3].split(","),r=/^(data|css):/,o={method:a[0].match(r)?a[0].split(":")[0]:"attr",property:a.shift().replace(r,"")},i="ig",s=RegExp(a.join("").replace(/^\s+|\s+$/g,""),i);return s.test($(e)[o.method](o.property))},$.fn.extend({spaRender:function(e){this.each(function(){P(this,e)})}}),$.extend({spaRender:function(e,t){$(e).spaRender(t)}}),$.fn.extend({renameAttr:function(e,t){return this.each(function(){this.setAttribute(t,this.getAttribute(e)),this.removeAttribute(e)}),this},spa$:function(){return this.map(function(){return $(this).closest("[data-rendered-component]")})},spa$name:function(){var e=this.map(function(){return $(this).closest("[data-rendered-component]").attr("data-rendered-component")});return 1==e.length?e[0]:e},spaBindData:function(e,t){return Et.bindData(this,e,t)},inBlockedSpaNavContainer:function(){return!!this.closest(nn).length},blockNav:function(){return H(this),this},allowNav:function(){return W(this),this},isNavBlocked:function(){return q(this)},isNavAllowed:function(){return G(this)},disable:function(e){return e||Et.is(e,"undefined")?this.css("pointer-events","none").addClass("disabled").attr("disabled","disabled"):this.enable(!0)},enable:function(e){return e||Et.is(e,"undefined")?this.css("pointer-events","auto").removeClass("disabled").removeAttr("disabled"):this.disable(!0)},value:function(e,t){return Et.is(e,"undefined")?this.val():(this.each(function(){$(this).val(e).trigger(t||"change")}),this)},htm:function(e){return Et.is(e,"undefined")?this.html():(this.each(function(){$(this).html(Et.sanitizeScript(e))}),this)},dataJSON:function(e,t,n){var a;if(arguments.length){if(a=Et.toJSON(this.data(e)),a=Et.is(a,"object")?a:{},!Et.is(t,"undefined")){a=n?t:_.merge(a,t);var r=JSON.stringify(a),o=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();this.attr("data-"+o,r).data(e,r)}}else a=this.data();return a},isDisabled:function(e){var t=this.hasClass("disabled")||this.is("[disabled]");return t&&e&&e.call(this,this),t},isEnabled:function(e){var t=!this.isDisabled();return t&&e&&e.call(this,this),t},trackChanges:function(){Et.trackFormElChange(this)},isChanged:function(e){e=(e||"ANY").toUpperCase();var t="ALL"==e,n=!t,a=!1,r=this;if(r.length)for(var o=0;r.length>o;o++){var i=r[o].tagName.toUpperCase();if("FORM"==i)a=$(r[o]).find("input,textarea,select").isChanged(e);else if("/INPUT/TEXTAREA/SELECT/".indexOf(i)>0){if(a=Et.isElValueChanged(r[o]),n&&a)break;if(t&&!a)break}}return a},initSpaRoutes:function(){ft(this)},initFormValidation:function(){var e=this.filter("form");return e.length?(e.each(function(e,t){A(t)}),void 0):"Form Not Found"},validateForm:function(e,t,n){var a,r=this;if(r.length>1)a=[{errcode:1,errmsg:"Too many forms to validate."}];else if(1==r.length){var o="#"+r.attr("id"),i=(r.prop("tagName")||"").toUpperCase();if("FORM"==i)if(Et.is(e,"string")){var s=r.find(e).map(function(){return this.id}).get().join();a=Et.validateForm(o,s,t,n)}else a=Et.validateForm(o,arguments[0],arguments[1]);else a=[{errcode:1,errmsg:"NOT a FORM"}]}else a=[{errcode:1,errmsg:"Form Not Found."}];return a},updateValidation:function(e,t){this.each(function(n,a){Et._validate._showValidateMsg(a,t,e)})},updateValidationPromise:function(e,t,n){Et.updateValidationPromise(e,this,n,t)}}),Et.initDataValidation=function(){Et.console.log("include validate framework lib (spa-validate.js) to use this feature!")},Et.doDataValidation=function(){Et.console.log("include validate framework lib (spa-validate.js) to use this feature!")},Et.properties={version:Et.VERSION},Et.api={baseUrl:"",liveUrlSuffix:"",urls:{},mock:!1,mockBaseUrl:"",mockRootFolder:"api_",defaultPayload:!1,forceParamValuesInMockUrls:!1,urlKeyIndicator:"@",url:function(e,t){e=(e||"").trimLeftStr(Et.api.urlKeyIndicator),t=t||{};var n,a,r=Et.api.urls[e]||e,o=r.beginsWithStr("!")||Et.api.mock||app.api.mock,i=r.beginsWithStr("!!")||r.beginsWithStr("~")||Et.api.forceParamValuesInMockUrls,s=_.uniq(r.extractStrBetweenIn("{","}"));return Et.isBlank(s)||_.each(s,function(e){n=e.replace(/[{}<>]/g,""),n&&t.hasOwnProperty(n)&&(a=o&&!i?e.containsStr(">")?t[n]:"_"+n:t[n],r=r.replace(RegExp(e,"g"),a))}),r},success:function(e){return[e,"success"]},isCallSuccess:function(){return!0},onReqError:function(e,t,n){Et.console.error([e,t,n]),Et.console.error($(e.responseText).text())},onResError:function(){},_call:function(e){var t=Et.findSafe(window,"app.api.ajaxOptions",{}),n=Et.is(e,"object")&&e.hasOwnProperty("error")?e.error:app.api.onError||Et.api.onReqError;if(e=$.extend({},t,e,{error:n,success:function(t,n,a){t=_.isString(t)?Et.toJSON(t):t,Et.api.isCallSuccess(t)?e._success.call(this,t,n,a):Et.is(app.api.onResError,"function")?app.api.onResError.call(this,t,n,a):Et.api.onResError.call(this,t,n,a)}}),e.dataType||(e.dataType="text"),"json".equalsIgnoreCase(e.dataType)&&!e.contentType&&(e.contentType="application/json"),e.data&&Et.is(e.data,"object")&&e.stringifyPayload&&(delete e.stringifyPayload,e.data=JSON.stringify(e.data)),e.defaultPayload){var a=Et.of(e.data),r=e.defaultPayload,o=Et.is(r,"function")?r(i):Et.is(r,"object")?_.merge({},r):r,i="string"==a?Et.toJSON(e.data):e.data;if(Et.is(o,"object")){var s=Et.is(i,"object")?_.merge({},o,i):o;Et.isBlank(s)||"string"!=a||(s=JSON.stringify(s)),e.data=s}}return e.url.beginsWithStr(Et.api.urlKeyIndicator)&&(e.url=Et.api.url(e.url.trimLeftStr(Et.api.urlKeyIndicator),e.data)),(app.debug||Et.debug)&&console.info(["API(ajax) call with options",e]),$.ajax(e)},_params2AxOptions:function(){var e,t,n,a,r={method:"GET",url:"",data:{},_success:function(){},async:!0};return _.each(arguments,function(o){switch(!0){case _.isString(o):e="url",r.url&&(t=!0,e="data");break;case Et.is(o,"function"):a?e="error":(a=!0,e="_success");break;case _.isBoolean(o):e="async";break;case _.isObject(o):t||o.__hasPrimaryKeys("ajaxOptions|dataUrlParams")?(e="axOptions",n=o.hasOwnProperty("ajaxOptions")?o.ajaxOptions:o):(e="data",t=!0);break;default:e="unknown"}"axOptions"!=e&&(r[e]=o)}),n&&(n.dataUrlParams&&((""+r.url).beginsWithStr(Et.api.urlKeyIndicator)&&(r.url=Et.api.url(r.url.trimLeftStr(Et.api.urlKeyIndicator),n.dataUrlParams)),delete n.dataUrlParams),_.merge(r,n)),Et.console.log("API ajax options >>"),Et.console.log(r),r},get:function(){return Et.api._call(Et.api._params2AxOptions.apply(void 0,arguments))},post:function(){return Et.api._call($.extend(Et.api._params2AxOptions.apply(void 0,arguments),{method:"POST"}))},put:function(){return Et.api._call($.extend(Et.api._params2AxOptions.apply(void 0,arguments),{method:"PUT"}))},del:function(){return Et.api._call($.extend(Et.api._params2AxOptions.apply(void 0,arguments),{method:"DELETE"}))},mix:function(){for(var e=[],t=arguments[arguments.length-1],n=0;arguments.length>n;n++)Et.is(arguments[n],"array")?e=e.concat(arguments[n]):Et.is(arguments[n],"function")||e.push(arguments[n]);return $.when.apply($,e).done(function(){var n=Array.prototype.slice.call(arguments);1==e.length&&n.length>1&&"success"==n[1]?(n[0]=Et.toJSON(n[0]),n.splice(1)):_.each(n,function(e,t){e&&Et.is(e,"array")&&e.length>1&&"success"==e[1]&&(n[t]=Et.toJSON(e[0]))}),t&&Et.is(t,"function")&&t.apply(void 0,n)})}},Et.i18n.onLangChange,Et.i18n.displayLang=function(){var e=$("html").attr("lang");if(e){var t=e,n=e.replace("-","_"),a=$('[data-i18n-lang="'+t+'"],[data-i18n-lang="'+n+'"]'),r=($("body").attr("i18n-lang-key-prefix")||"lang.name.")+n,o="-";$(".lang-text").attr("data-i18n",r).data("i18n",r),$("[data-i18n-lang]").removeClass("active"),a.length&&(a.addClass("active"),o=($(a[0]).data("i18nLang")||"").replace(/[a-z]/gi,""),$(".lang-icon").removeClass(Array.prototype.join.call($("[data-i18n-lang]").map(function(e,t){return $(t).data("i18nLang")})," "))),$(".lang-icon").addClass("-"==o?t:n),Et.i18n.apply(".lang-text")}return e},Et.ajax=D,Et.mockSysTest=F;var Ft={},Mt={pub:function(e,t,n,a){var r,o;Et.is(t,"function")?(a=arguments[2],n=arguments[1]):r=arguments[1];var i,s,l=0,c=[];return _.each(Ft[e],function(t){try{l++,i=t.fn,s=null,i&&(s=i.call(r||{},e,r,n,a)),c.push({id:""+(t.name||l),response:s}),!o&&Et.is(s,"boolean")&&(o=!s)}catch(u){console.warn("Execution error in subscribed function:"+t.name+" on-"+e),console.error(u.stack)}}),o?a&&Et.is(a,"function")&&a(c):n&&Et.is(n,"function")&&n(c),c},sub:function(e,t,n){return Ft.hasOwnProperty(e)||(Ft[e]=[]),Ft[e].push({fn:t,name:n}),Ft[e].length},unSub:function(e,t){var n=!1;return Ft.hasOwnProperty(e)&&(n=!0,t?Ft[e][t-1]=null:Ft[e]=[]),n}};Et.event={on:Mt.sub,off:Mt.unSub,trigger:Mt.pub,announce:Mt.pub};var zt,Vt,Jt="#",Ht="",Wt=!0,Kt=[],qt=100,Gt=!1,Xt="",Yt="",Qt=!1,Zt="",en="",tn="",nn="",an="",rn="",on="",sn=!1,ln="",cn="x"+Et.now();Et.blockNav=H,Et.allowNav=W,Et.isNavBlocked=q,Et.isNavAllowed=G,Et.isToShowNav=K,Et.isInBlockedSpaNavContainer=X,window.onerror=function(e,t,n){console.warn("Invalid Content: Check the network/path/content.",e,t,n)};var un=[];Et.parseRoutes=ut;try{Et.sesStore=yt(sessionStorage)}catch(dn){console.warn("No Access to sessionStorage.",dn)}try{Et.locStore=yt(localStorage)}catch(dn){console.warn("No Access to localStorage.",dn)}Et.reload=function(e){e&&Et.sesStore.set("_spaReloadUrl",e||""),Et.allowNav(),window.location.reload()
},Et.hasReloadUrl=function(){return!!(Et.sesStore.get("_spaReloadUrl")||"").trim()},Et.initRoutes=ft,Et.route=vt,Et.routeUrl=gt,Et.routeEl=mt,Et.initDataBind=Ot,Et.async=function(e){function t(){var t=e.apply(void 0,n),a=n.length,r=a?n[a-1]:"";r&&Et.is(r,"function")&&r(t)}var n=Array.prototype.slice.call(arguments,1);setTimeout(t,0)},$(document).ready(function(){xt(),Et.debug=Et.urlParam("spa.debug")||Et.hashParam("spa.debug")||Et.debug,$.ajaxPrefilter(z),wt()})}(),spa.console.info("spa loaded.");