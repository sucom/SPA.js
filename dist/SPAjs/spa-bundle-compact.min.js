/*@license SPA.js (bundle-v2.87.0-RC5) [MIT|https://github.com/sucom/SPA.js/blob/master/LICENSE]*//*build-compact-v20210106.143931*/;
/**!

 @license
 handlebars v4.7.6

Copyright (C) 2011-2019 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/
!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.Handlebars=b():a.Handlebars=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";function d(){var a=r();return a.compile=function(b,c){return k.compile(b,c,a)},a.precompile=function(b,c){return k.precompile(b,c,a)},a.AST=i["default"],a.Compiler=k.Compiler,a.JavaScriptCompiler=m["default"],a.Parser=j.parser,a.parse=j.parse,a.parseWithoutProcessing=j.parseWithoutProcessing,a}var e=c(1)["default"];b.__esModule=!0;var f=c(2),g=e(f),h=c(45),i=e(h),j=c(46),k=c(51),l=c(52),m=e(l),n=c(49),o=e(n),p=c(44),q=e(p),r=g["default"].create,s=d();s.create=d,q["default"](s),s.Visitor=o["default"],s["default"]=s,b["default"]=s,a.exports=b["default"]},function(a,b){"use strict";b["default"]=function(a){return a&&a.__esModule?a:{"default":a}},b.__esModule=!0},function(a,b,c){"use strict";function d(){var a=new h.HandlebarsEnvironment;return n.extend(a,h),a.SafeString=j["default"],a.Exception=l["default"],a.Utils=n,a.escapeExpression=n.escapeExpression,a.VM=p,a.template=function(b){return p.template(b,a)},a}var e=c(3)["default"],f=c(1)["default"];b.__esModule=!0;var g=c(4),h=e(g),i=c(37),j=f(i),k=c(6),l=f(k),m=c(5),n=e(m),o=c(38),p=e(o),q=c(44),r=f(q),s=d();s.create=d,r["default"](s),s["default"]=s,b["default"]=s,a.exports=b["default"]},function(a,b){"use strict";b["default"]=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b},b.__esModule=!0},function(a,b,c){"use strict";function d(a,b,c){this.helpers=a||{},this.partials=b||{},this.decorators=c||{},i.registerDefaultHelpers(this),j.registerDefaultDecorators(this)}var e=c(1)["default"];b.__esModule=!0,b.HandlebarsEnvironment=d;var f=c(5),g=c(6),h=e(g),i=c(10),j=c(30),k=c(32),l=e(k),m=c(33),n="4.7.6";b.VERSION=n;var o=8;b.COMPILER_REVISION=o;var p=7;b.LAST_COMPATIBLE_COMPILER_REVISION=p;var q={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};b.REVISION_CHANGES=q;var r="[object Object]";d.prototype={constructor:d,logger:l["default"],log:l["default"].log,registerHelper:function(a,b){if(f.toString.call(a)===r){if(b)throw new h["default"]("Arg not supported with multiple helpers");f.extend(this.helpers,a)}else this.helpers[a]=b},unregisterHelper:function(a){delete this.helpers[a]},registerPartial:function(a,b){if(f.toString.call(a)===r)f.extend(this.partials,a);else{if("undefined"==typeof b)throw new h["default"]('Attempting to register a partial called "'+a+'" as undefined');this.partials[a]=b}},unregisterPartial:function(a){delete this.partials[a]},registerDecorator:function(a,b){if(f.toString.call(a)===r){if(b)throw new h["default"]("Arg not supported with multiple decorators");f.extend(this.decorators,a)}else this.decorators[a]=b},unregisterDecorator:function(a){delete this.decorators[a]},resetLoggedPropertyAccesses:function(){m.resetLoggedProperties()}};var s=l["default"].log;b.log=s,b.createFrame=f.createFrame,b.logger=l["default"]},function(a,b){"use strict";function c(a){return k[a]}function d(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],c)&&(a[c]=arguments[b][c]);return a}function e(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1}function f(a){if("string"!=typeof a){if(a&&a.toHTML)return a.toHTML();if(null==a)return"";if(!a)return a+"";a=""+a}return m.test(a)?a.replace(l,c):a}function g(a){return!a&&0!==a||!(!p(a)||0!==a.length)}function h(a){var b=d({},a);return b._parent=a,b}function i(a,b){return a.path=b,a}function j(a,b){return(a?a+".":"")+b}b.__esModule=!0,b.extend=d,b.indexOf=e,b.escapeExpression=f,b.isEmpty=g,b.createFrame=h,b.blockParams=i,b.appendContextPath=j;var k={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},l=/[&<>"'`=]/g,m=/[&<>"'`=]/,n=Object.prototype.toString;b.toString=n;var o=function(a){return"function"==typeof a};o(/x/)&&(b.isFunction=o=function(a){return"function"==typeof a&&"[object Function]"===n.call(a)}),b.isFunction=o;var p=Array.isArray||function(a){return!(!a||"object"!=typeof a)&&"[object Array]"===n.call(a)};b.isArray=p},function(a,b,c){"use strict";function d(a,b){var c=b&&b.loc,g=void 0,h=void 0,i=void 0,j=void 0;c&&(g=c.start.line,h=c.end.line,i=c.start.column,j=c.end.column,a+=" - "+g+":"+i);for(var k=Error.prototype.constructor.call(this,a),l=0;l<f.length;l++)this[f[l]]=k[f[l]];Error.captureStackTrace&&Error.captureStackTrace(this,d);try{c&&(this.lineNumber=g,this.endLineNumber=h,e?(Object.defineProperty(this,"column",{value:i,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:j,enumerable:!0})):(this.column=i,this.endColumn=j))}catch(m){}}var e=c(7)["default"];b.__esModule=!0;var f=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];d.prototype=new Error,b["default"]=d,a.exports=b["default"]},function(a,b,c){a.exports={"default":c(8),__esModule:!0}},function(a,b,c){var d=c(9);a.exports=function(a,b,c){return d.setDesc(a,b,c)}},function(a,b){var c=Object;a.exports={create:c.create,getProto:c.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:c.getOwnPropertyDescriptor,setDesc:c.defineProperty,setDescs:c.defineProperties,getKeys:c.keys,getNames:c.getOwnPropertyNames,getSymbols:c.getOwnPropertySymbols,each:[].forEach}},function(a,b,c){"use strict";function d(a){h["default"](a),j["default"](a),l["default"](a),n["default"](a),p["default"](a),r["default"](a),t["default"](a)}function e(a,b,c){a.helpers[b]&&(a.hooks[b]=a.helpers[b],c||delete a.helpers[b])}var f=c(1)["default"];b.__esModule=!0,b.registerDefaultHelpers=d,b.moveHelperToHooks=e;var g=c(11),h=f(g),i=c(12),j=f(i),k=c(25),l=f(k),m=c(26),n=f(m),o=c(27),p=f(o),q=c(28),r=f(q),s=c(29),t=f(s)},function(a,b,c){"use strict";b.__esModule=!0;var d=c(5);b["default"]=function(a){a.registerHelper("blockHelperMissing",function(b,c){var e=c.inverse,f=c.fn;if(b===!0)return f(this);if(b===!1||null==b)return e(this);if(d.isArray(b))return b.length>0?(c.ids&&(c.ids=[c.name]),a.helpers.each(b,c)):e(this);if(c.data&&c.ids){var g=d.createFrame(c.data);g.contextPath=d.appendContextPath(c.data.contextPath,c.name),c={data:g}}return f(b,c)})},a.exports=b["default"]},function(a,b,c){(function(d){"use strict";var e=c(13)["default"],f=c(1)["default"];b.__esModule=!0;var g=c(5),h=c(6),i=f(h);b["default"]=function(a){a.registerHelper("each",function(a,b){function c(b,c,d){l&&(l.key=b,l.index=c,l.first=0===c,l.last=!!d,m&&(l.contextPath=m+b)),k+=f(a[b],{data:l,blockParams:g.blockParams([a[b],b],[m+b,null])})}if(!b)throw new i["default"]("Must pass iterator to #each");var f=b.fn,h=b.inverse,j=0,k="",l=void 0,m=void 0;if(b.data&&b.ids&&(m=g.appendContextPath(b.data.contextPath,b.ids[0])+"."),g.isFunction(a)&&(a=a.call(this)),b.data&&(l=g.createFrame(b.data)),a&&"object"==typeof a)if(g.isArray(a))for(var n=a.length;j<n;j++)j in a&&c(j,j,j===a.length-1);else if(d.Symbol&&a[d.Symbol.iterator]){for(var o=[],p=a[d.Symbol.iterator](),q=p.next();!q.done;q=p.next())o.push(q.value);a=o;for(var n=a.length;j<n;j++)c(j,j,j===a.length-1)}else!function(){var b=void 0;e(a).forEach(function(a){void 0!==b&&c(b,j-1),b=a,j++}),void 0!==b&&c(b,j-1,!0)}();return 0===j&&(k=h(this)),k})},a.exports=b["default"]}).call(b,function(){return this}())},function(a,b,c){a.exports={"default":c(14),__esModule:!0}},function(a,b,c){c(15),a.exports=c(21).Object.keys},function(a,b,c){var d=c(16);c(18)("keys",function(a){return function(b){return a(d(b))}})},function(a,b,c){var d=c(17);a.exports=function(a){return Object(d(a))}},function(a,b){a.exports=function(a){if(void 0==a)throw TypeError("Can't call method on  "+a);return a}},function(a,b,c){var d=c(19),e=c(21),f=c(24);a.exports=function(a,b){var c=(e.Object||{})[a]||Object[a],g={};g[a]=b(c),d(d.S+d.F*f(function(){c(1)}),"Object",g)}},function(a,b,c){var d=c(20),e=c(21),f=c(22),g="prototype",h=function(a,b,c){var i,j,k,l=a&h.F,m=a&h.G,n=a&h.S,o=a&h.P,p=a&h.B,q=a&h.W,r=m?e:e[b]||(e[b]={}),s=m?d:n?d[b]:(d[b]||{})[g];m&&(c=b);for(i in c)j=!l&&s&&i in s,j&&i in r||(k=j?s[i]:c[i],r[i]=m&&"function"!=typeof s[i]?c[i]:p&&j?f(k,d):q&&s[i]==k?function(a){var b=function(b){return this instanceof a?new a(b):a(b)};return b[g]=a[g],b}(k):o&&"function"==typeof k?f(Function.call,k):k,o&&((r[g]||(r[g]={}))[i]=k))};h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,a.exports=h},function(a,b){var c=a.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=c)},function(a,b){var c=a.exports={version:"1.2.6"};"number"==typeof __e&&(__e=c)},function(a,b,c){var d=c(23);a.exports=function(a,b,c){if(d(a),void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)}}return function(){return a.apply(b,arguments)}}},function(a,b){a.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a}},function(a,b){a.exports=function(a){try{return!!a()}catch(b){return!0}}},function(a,b,c){"use strict";var d=c(1)["default"];b.__esModule=!0;var e=c(6),f=d(e);b["default"]=function(a){a.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new f["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')})},a.exports=b["default"]},function(a,b,c){"use strict";var d=c(1)["default"];b.__esModule=!0;var e=c(5),f=c(6),g=d(f);b["default"]=function(a){a.registerHelper("if",function(a,b){if(2!=arguments.length)throw new g["default"]("#if requires exactly one argument");return e.isFunction(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||e.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){if(2!=arguments.length)throw new g["default"]("#unless requires exactly one argument");return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})})},a.exports=b["default"]},function(a,b){"use strict";b.__esModule=!0,b["default"]=function(a){a.registerHelper("log",function(){for(var b=[void 0],c=arguments[arguments.length-1],d=0;d<arguments.length-1;d++)b.push(arguments[d]);var e=1;null!=c.hash.level?e=c.hash.level:c.data&&null!=c.data.level&&(e=c.data.level),b[0]=e,a.log.apply(a,b)})},a.exports=b["default"]},function(a,b){"use strict";b.__esModule=!0,b["default"]=function(a){a.registerHelper("lookup",function(a,b,c){return a?c.lookupProperty(a,b):a})},a.exports=b["default"]},function(a,b,c){"use strict";var d=c(1)["default"];b.__esModule=!0;var e=c(5),f=c(6),g=d(f);b["default"]=function(a){a.registerHelper("with",function(a,b){if(2!=arguments.length)throw new g["default"]("#with requires exactly one argument");e.isFunction(a)&&(a=a.call(this));var c=b.fn;if(e.isEmpty(a))return b.inverse(this);var d=b.data;return b.data&&b.ids&&(d=e.createFrame(b.data),d.contextPath=e.appendContextPath(b.data.contextPath,b.ids[0])),c(a,{data:d,blockParams:e.blockParams([a],[d&&d.contextPath])})})},a.exports=b["default"]},function(a,b,c){"use strict";function d(a){g["default"](a)}var e=c(1)["default"];b.__esModule=!0,b.registerDefaultDecorators=d;var f=c(31),g=e(f)},function(a,b,c){"use strict";b.__esModule=!0;var d=c(5);b["default"]=function(a){a.registerDecorator("inline",function(a,b,c,e){var f=a;return b.partials||(b.partials={},f=function(e,f){var g=c.partials;c.partials=d.extend({},g,b.partials);var h=a(e,f);return c.partials=g,h}),b.partials[e.args[0]]=e.fn,f})},a.exports=b["default"]},function(a,b,c){"use strict";b.__esModule=!0;var d=c(5),e={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(a){if("string"==typeof a){var b=d.indexOf(e.methodMap,a.toLowerCase());a=b>=0?b:parseInt(a,10)}return a},log:function(a){if(a=e.lookupLevel(a),"undefined"!=typeof console&&e.lookupLevel(e.level)<=a){var b=e.methodMap[a];console[b]||(b="log");for(var c=arguments.length,d=Array(c>1?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];console[b].apply(console,d)}}};b["default"]=e,a.exports=b["default"]},function(a,b,c){"use strict";function d(a){var b=i(null);b.constructor=!1,b.__defineGetter__=!1,b.__defineSetter__=!1,b.__lookupGetter__=!1;var c=i(null);return c.__proto__=!1,{properties:{whitelist:l.createNewLookupObject(c,a.allowedProtoProperties),defaultValue:a.allowProtoPropertiesByDefault},methods:{whitelist:l.createNewLookupObject(b,a.allowedProtoMethods),defaultValue:a.allowProtoMethodsByDefault}}}function e(a,b,c){return"function"==typeof a?f(b.methods,c):f(b.properties,c)}function f(a,b){return void 0!==a.whitelist[b]?a.whitelist[b]===!0:void 0!==a.defaultValue?a.defaultValue:(g(b),!1)}function g(a){o[a]!==!0&&(o[a]=!0,n.log("error",'Handlebars: Access has been denied to resolve the property "'+a+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details'))}function h(){j(o).forEach(function(a){delete o[a]})}var i=c(34)["default"],j=c(13)["default"],k=c(3)["default"];b.__esModule=!0,b.createProtoAccessControl=d,b.resultIsAllowed=e,b.resetLoggedProperties=h;var l=c(36),m=c(32),n=k(m),o=i(null)},function(a,b,c){a.exports={"default":c(35),__esModule:!0}},function(a,b,c){var d=c(9);a.exports=function(a,b){return d.create(a,b)}},function(a,b,c){"use strict";function d(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return f.extend.apply(void 0,[e(null)].concat(b))}var e=c(34)["default"];b.__esModule=!0,b.createNewLookupObject=d;var f=c(5)},function(a,b){"use strict";function c(a){this.string=a}b.__esModule=!0,c.prototype.toString=c.prototype.toHTML=function(){return""+this.string},b["default"]=c,a.exports=b["default"]},function(a,b,c){"use strict";function d(a){var b=a&&a[0]||1,c=v.COMPILER_REVISION;if(!(b>=v.LAST_COMPATIBLE_COMPILER_REVISION&&b<=v.COMPILER_REVISION)){if(b<v.LAST_COMPATIBLE_COMPILER_REVISION){var d=v.REVISION_CHANGES[c],e=v.REVISION_CHANGES[b];throw new u["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new u["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function e(a,b){function c(c,d,e){e.hash&&(d=s.extend({},d,e.hash),e.ids&&(e.ids[0]=!0)),c=b.VM.resolvePartial.call(this,c,d,e);var f=s.extend({},e,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),g=b.VM.invokePartial.call(this,c,d,f);if(null==g&&b.compile&&(e.partials[e.name]=b.compile(c,a.compilerOptions,b),g=e.partials[e.name](d,f)),null!=g){if(e.indent){for(var h=g.split("\n"),i=0,j=h.length;i<j&&(h[i]||i+1!==j);i++)h[i]=e.indent+h[i];g=h.join("\n")}return g}throw new u["default"]("The partial "+e.name+" could not be compiled when running in runtime-only mode")}function d(b){function c(b){return""+a.main(g,b,g.helpers,g.partials,f,i,h)}var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],f=e.data;d._setup(e),!e.partial&&a.useData&&(f=j(b,f));var h=void 0,i=a.useBlockParams?[]:void 0;return a.useDepths&&(h=e.depths?b!=e.depths[0]?[b].concat(e.depths):e.depths:[b]),(c=k(a.main,c,g,e.depths||[],f,i))(b,e)}if(!b)throw new u["default"]("No environment passed to template");if(!a||!a.main)throw new u["default"]("Unknown template object: "+typeof a);a.main.decorator=a.main_d,b.VM.checkRevision(a.compiler);var e=a.compiler&&7===a.compiler[0],g={strict:function(a,b,c){if(!(a&&b in a))throw new u["default"]('"'+b+'" not defined in '+a,{loc:c});return a[b]},lookupProperty:function(a,b){var c=a[b];return null==c?c:Object.prototype.hasOwnProperty.call(a,b)?c:y.resultIsAllowed(c,g.protoAccessControl,b)?c:void 0},lookup:function(a,b){for(var c=a.length,d=0;d<c;d++){var e=a[d]&&g.lookupProperty(a[d],b);if(null!=e)return a[d][b]}},lambda:function(a,b){return"function"==typeof a?a.call(b):a},escapeExpression:s.escapeExpression,invokePartial:c,fn:function(b){var c=a[b];return c.decorator=a[b+"_d"],c},programs:[],program:function(a,b,c,d,e){var g=this.programs[a],h=this.fn(a);return b||e||d||c?g=f(this,a,h,b,c,d,e):g||(g=this.programs[a]=f(this,a,h)),g},data:function(a,b){for(;a&&b--;)a=a._parent;return a},mergeIfNeeded:function(a,b){var c=a||b;return a&&b&&a!==b&&(c=s.extend({},b,a)),c},nullContext:n({}),noop:b.VM.noop,compilerInfo:a.compiler};return d.isTop=!0,d._setup=function(c){if(c.partial)g.protoAccessControl=c.protoAccessControl,g.helpers=c.helpers,g.partials=c.partials,g.decorators=c.decorators,g.hooks=c.hooks;else{var d=s.extend({},b.helpers,c.helpers);l(d,g),g.helpers=d,a.usePartial&&(g.partials=g.mergeIfNeeded(c.partials,b.partials)),(a.usePartial||a.useDecorators)&&(g.decorators=s.extend({},b.decorators,c.decorators)),g.hooks={},g.protoAccessControl=y.createProtoAccessControl(c);var f=c.allowCallsToHelperMissing||e;w.moveHelperToHooks(g,"helperMissing",f),w.moveHelperToHooks(g,"blockHelperMissing",f)}},d._child=function(b,c,d,e){if(a.useBlockParams&&!d)throw new u["default"]("must pass block params");if(a.useDepths&&!e)throw new u["default"]("must pass parent depths");return f(g,b,a[b],c,0,d,e)},d}function f(a,b,c,d,e,f,g){function h(b){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],h=g;return!g||b==g[0]||b===a.nullContext&&null===g[0]||(h=[b].concat(g)),c(a,b,a.helpers,a.partials,e.data||d,f&&[e.blockParams].concat(f),h)}return h=k(c,h,a,g,d,f),h.program=b,h.depth=g?g.length:0,h.blockParams=e||0,h}function g(a,b,c){return a?a.call||c.name||(c.name=a,a=c.partials[a]):a="@partial-block"===c.name?c.data["partial-block"]:c.partials[c.name],a}function h(a,b,c){var d=c.data&&c.data["partial-block"];c.partial=!0,c.ids&&(c.data.contextPath=c.ids[0]||c.data.contextPath);var e=void 0;if(c.fn&&c.fn!==i&&!function(){c.data=v.createFrame(c.data);var a=c.fn;e=c.data["partial-block"]=function(b){var c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return c.data=v.createFrame(c.data),c.data["partial-block"]=d,a(b,c)},a.partials&&(c.partials=s.extend({},c.partials,a.partials))}(),void 0===a&&e&&(a=e),void 0===a)throw new u["default"]("The partial "+c.name+" could not be found");if(a instanceof Function)return a(b,c)}function i(){return""}function j(a,b){return b&&"root"in b||(b=b?v.createFrame(b):{},b.root=a),b}function k(a,b,c,d,e,f){if(a.decorator){var g={};b=a.decorator(b,g,c,d&&d[0],e,f,d),s.extend(b,g)}return b}function l(a,b){o(a).forEach(function(c){var d=a[c];a[c]=m(d,b)})}function m(a,b){var c=b.lookupProperty;return x.wrapHelper(a,function(a){return s.extend({lookupProperty:c},a)})}var n=c(39)["default"],o=c(13)["default"],p=c(3)["default"],q=c(1)["default"];b.__esModule=!0,b.checkRevision=d,b.template=e,b.wrapProgram=f,b.resolvePartial=g,b.invokePartial=h,b.noop=i;var r=c(5),s=p(r),t=c(6),u=q(t),v=c(4),w=c(10),x=c(43),y=c(33)},function(a,b,c){a.exports={"default":c(40),__esModule:!0}},function(a,b,c){c(41),a.exports=c(21).Object.seal},function(a,b,c){var d=c(42);c(18)("seal",function(a){return function(b){return a&&d(b)?a(b):b}})},function(a,b){a.exports=function(a){return"object"==typeof a?null!==a:"function"==typeof a}},function(a,b){"use strict";function c(a,b){if("function"!=typeof a)return a;var c=function(){var c=arguments[arguments.length-1];return arguments[arguments.length-1]=b(c),a.apply(this,arguments)};return c}b.__esModule=!0,b.wrapHelper=c},function(a,b){(function(c){"use strict";b.__esModule=!0,b["default"]=function(a){var b="undefined"!=typeof c?c:window,d=b.Handlebars;a.noConflict=function(){return b.Handlebars===a&&(b.Handlebars=d),a}},a.exports=b["default"]}).call(b,function(){return this}())},function(a,b){"use strict";b.__esModule=!0;var c={helpers:{helperExpression:function(a){return"SubExpression"===a.type||("MustacheStatement"===a.type||"BlockStatement"===a.type)&&!!(a.params&&a.params.length||a.hash)},scopedId:function(a){return/^\.|this\b/.test(a.original)},simpleId:function(a){return 1===a.parts.length&&!c.helpers.scopedId(a)&&!a.depth}}};b["default"]=c,a.exports=b["default"]},function(a,b,c){"use strict";function d(a,b){if("Program"===a.type)return a;i["default"].yy=o,o.locInfo=function(a){return new o.SourceLocation(b&&b.srcName,a)};var c=i["default"].parse(a);return c}function e(a,b){var c=d(a,b),e=new k["default"](b);return e.accept(c)}var f=c(1)["default"],g=c(3)["default"];b.__esModule=!0,b.parseWithoutProcessing=d,b.parse=e;var h=c(47),i=f(h),j=c(48),k=f(j),l=c(50),m=g(l),n=c(5);b.parser=i["default"];var o={};n.extend(o,m)},function(a,b){"use strict";b.__esModule=!0;var c=function(){function a(){this.yy={}}var b={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(a,b,c,d,e,f,g){var h=f.length-1;switch(e){case 1:return f[h-1];case 2:this.$=d.prepareProgram(f[h]);break;case 3:this.$=f[h];break;case 4:this.$=f[h];break;case 5:this.$=f[h];break;case 6:this.$=f[h];break;case 7:this.$=f[h];break;case 8:this.$=f[h];break;case 9:this.$={type:"CommentStatement",value:d.stripComment(f[h]),strip:d.stripFlags(f[h],f[h]),loc:d.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:f[h],value:f[h],loc:d.locInfo(this._$)};break;case 11:this.$=d.prepareRawBlock(f[h-2],f[h-1],f[h],this._$);break;case 12:this.$={path:f[h-3],params:f[h-2],hash:f[h-1]};break;case 13:this.$=d.prepareBlock(f[h-3],f[h-2],f[h-1],f[h],!1,this._$);break;case 14:this.$=d.prepareBlock(f[h-3],f[h-2],f[h-1],f[h],!0,this._$);break;case 15:this.$={open:f[h-5],path:f[h-4],params:f[h-3],hash:f[h-2],blockParams:f[h-1],strip:d.stripFlags(f[h-5],f[h])};break;case 16:this.$={path:f[h-4],params:f[h-3],hash:f[h-2],blockParams:f[h-1],strip:d.stripFlags(f[h-5],f[h])};break;case 17:this.$={path:f[h-4],params:f[h-3],hash:f[h-2],blockParams:f[h-1],strip:d.stripFlags(f[h-5],f[h])};break;case 18:this.$={strip:d.stripFlags(f[h-1],f[h-1]),program:f[h]};break;case 19:var i=d.prepareBlock(f[h-2],f[h-1],f[h],f[h],!1,this._$),j=d.prepareProgram([i],f[h-1].loc);j.chained=!0,this.$={strip:f[h-2].strip,program:j,chain:!0};break;case 20:this.$=f[h];break;case 21:this.$={path:f[h-1],strip:d.stripFlags(f[h-2],f[h])};break;case 22:this.$=d.prepareMustache(f[h-3],f[h-2],f[h-1],f[h-4],d.stripFlags(f[h-4],f[h]),this._$);break;case 23:this.$=d.prepareMustache(f[h-3],f[h-2],f[h-1],f[h-4],d.stripFlags(f[h-4],f[h]),this._$);break;case 24:this.$={type:"PartialStatement",name:f[h-3],params:f[h-2],hash:f[h-1],indent:"",strip:d.stripFlags(f[h-4],f[h]),loc:d.locInfo(this._$)};break;case 25:this.$=d.preparePartialBlock(f[h-2],f[h-1],f[h],this._$);break;case 26:this.$={path:f[h-3],params:f[h-2],hash:f[h-1],strip:d.stripFlags(f[h-4],f[h])};break;case 27:this.$=f[h];break;case 28:this.$=f[h];break;case 29:this.$={type:"SubExpression",path:f[h-3],params:f[h-2],hash:f[h-1],loc:d.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:f[h],loc:d.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:d.id(f[h-2]),value:f[h],loc:d.locInfo(this._$)};break;case 32:this.$=d.id(f[h-1]);break;case 33:this.$=f[h];break;case 34:this.$=f[h];break;case 35:this.$={type:"StringLiteral",value:f[h],original:f[h],loc:d.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(f[h]),original:Number(f[h]),loc:d.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===f[h],original:"true"===f[h],loc:d.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:d.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:d.locInfo(this._$)};break;case 40:this.$=f[h];break;case 41:this.$=f[h];break;case 42:this.$=d.preparePath(!0,f[h],this._$);break;case 43:this.$=d.preparePath(!1,f[h],this._$);break;case 44:f[h-2].push({part:d.id(f[h]),original:f[h],separator:f[h-1]}),this.$=f[h-2];break;case 45:this.$=[{part:d.id(f[h]),original:f[h]}];break;case 46:this.$=[];break;case 47:f[h-1].push(f[h]);break;case 48:this.$=[];break;case 49:f[h-1].push(f[h]);break;case 50:this.$=[];break;case 51:f[h-1].push(f[h]);break;case 58:this.$=[];break;case 59:f[h-1].push(f[h]);break;case 64:this.$=[];break;case 65:f[h-1].push(f[h]);break;case 70:this.$=[];break;case 71:f[h-1].push(f[h]);break;case 78:this.$=[];break;case 79:f[h-1].push(f[h]);break;case 82:this.$=[];break;case 83:f[h-1].push(f[h]);break;case 86:this.$=[];break;case 87:f[h-1].push(f[h]);break;case 90:this.$=[];break;case 91:f[h-1].push(f[h]);break;case 94:this.$=[];break;case 95:f[h-1].push(f[h]);break;case 98:this.$=[f[h]];break;case 99:f[h-1].push(f[h]);break;case 100:this.$=[f[h]];break;case 101:f[h-1].push(f[h])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],
72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(a,b){throw new Error(a)},parse:function(a){function b(){var a;return a=c.lexer.lex()||1,"number"!=typeof a&&(a=c.symbols_[a]||a),a}var c=this,d=[0],e=[null],f=[],g=this.table,h="",i=0,j=0,k=0;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var l=this.lexer.yylloc;f.push(l);var m=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var n,o,p,q,r,s,t,u,v,w={};;){if(p=d[d.length-1],this.defaultActions[p]?q=this.defaultActions[p]:(null!==n&&"undefined"!=typeof n||(n=b()),q=g[p]&&g[p][n]),"undefined"==typeof q||!q.length||!q[0]){var x="";if(!k){v=[];for(s in g[p])this.terminals_[s]&&s>2&&v.push("'"+this.terminals_[s]+"'");x=this.lexer.showPosition?"Parse error on line "+(i+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[n]||n)+"'":"Parse error on line "+(i+1)+": Unexpected "+(1==n?"end of input":"'"+(this.terminals_[n]||n)+"'"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[n]||n,line:this.lexer.yylineno,loc:l,expected:v})}}if(q[0]instanceof Array&&q.length>1)throw new Error("Parse Error: multiple actions possible at state: "+p+", token: "+n);switch(q[0]){case 1:d.push(n),e.push(this.lexer.yytext),f.push(this.lexer.yylloc),d.push(q[1]),n=null,o?(n=o,o=null):(j=this.lexer.yyleng,h=this.lexer.yytext,i=this.lexer.yylineno,l=this.lexer.yylloc,k>0&&k--);break;case 2:if(t=this.productions_[q[1]][1],w.$=e[e.length-t],w._$={first_line:f[f.length-(t||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(t||1)].first_column,last_column:f[f.length-1].last_column},m&&(w._$.range=[f[f.length-(t||1)].range[0],f[f.length-1].range[1]]),r=this.performAction.call(w,h,j,i,this.yy,q[1],e,f),"undefined"!=typeof r)return r;t&&(d=d.slice(0,-1*t*2),e=e.slice(0,-1*t),f=f.slice(0,-1*t)),d.push(this.productions_[q[1]][0]),e.push(w.$),f.push(w._$),u=g[d[d.length-2]][d[d.length-1]],d.push(u);break;case 3:return!0}}return!0}},c=function(){var a={EOF:1,parseError:function(a,b){if(!this.yy.parser)throw new Error(a);this.yy.parser.parseError(a,b)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a;var b=a.match(/(?:\r\n?|\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b-1),this.offset-=b;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),c.length-1&&(this.yylineno-=c.length-1);var e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-b]),this},more:function(){return this._more=!0,this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=new Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d,e;this._more||(this.yytext="",this.match="");for(var f=this._currentRules(),g=0;g<f.length&&(c=this._input.match(this.rules[f[g]]),!c||b&&!(c[0].length>b[0].length)||(b=c,d=g,this.options.flex));g++);return b?(e=b[0].match(/(?:\r\n?|\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],a=this.performAction.call(this,this.yy,this,f[d],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),a?a:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return"undefined"!=typeof a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)}};return a.options={},a.performAction=function(a,b,c,d){function e(a,c){return b.yytext=b.yytext.substring(a,b.yyleng-c+a)}switch(c){case 0:if("\\\\"===b.yytext.slice(-2)?(e(0,1),this.begin("mu")):"\\"===b.yytext.slice(-1)?(e(0,1),this.begin("emu")):this.begin("mu"),b.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(e(5,9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:return this.popState(),44;case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(b.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:return 72;case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return b.yytext=e(1,2).replace(/\\"/g,'"'),80;case 32:return b.yytext=e(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:return 82;case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return b.yytext=b.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},a.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],a.conditions={mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}},a}();return b.lexer=c,a.prototype=b,b.Parser=a,new a}();b["default"]=c,a.exports=b["default"]},function(a,b,c){"use strict";function d(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=a}function e(a,b,c){void 0===b&&(b=a.length);var d=a[b-1],e=a[b-2];return d?"ContentStatement"===d.type?(e||!c?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(d.original):void 0:c}function f(a,b,c){void 0===b&&(b=-1);var d=a[b+1],e=a[b+2];return d?"ContentStatement"===d.type?(e||!c?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(d.original):void 0:c}function g(a,b,c){var d=a[null==b?0:b+1];if(d&&"ContentStatement"===d.type&&(c||!d.rightStripped)){var e=d.value;d.value=d.value.replace(c?/^\s+/:/^[ \t]*\r?\n?/,""),d.rightStripped=d.value!==e}}function h(a,b,c){var d=a[null==b?a.length-1:b-1];if(d&&"ContentStatement"===d.type&&(c||!d.leftStripped)){var e=d.value;return d.value=d.value.replace(c?/\s+$/:/[ \t]+$/,""),d.leftStripped=d.value!==e,d.leftStripped}}var i=c(1)["default"];b.__esModule=!0;var j=c(49),k=i(j);d.prototype=new k["default"],d.prototype.Program=function(a){var b=!this.options.ignoreStandalone,c=!this.isRootSeen;this.isRootSeen=!0;for(var d=a.body,i=0,j=d.length;i<j;i++){var k=d[i],l=this.accept(k);if(l){var m=e(d,i,c),n=f(d,i,c),o=l.openStandalone&&m,p=l.closeStandalone&&n,q=l.inlineStandalone&&m&&n;l.close&&g(d,i,!0),l.open&&h(d,i,!0),b&&q&&(g(d,i),h(d,i)&&"PartialStatement"===k.type&&(k.indent=/([ \t]+$)/.exec(d[i-1].original)[1])),b&&o&&(g((k.program||k.inverse).body),h(d,i)),b&&p&&(g(d,i),h((k.inverse||k.program).body))}}return a},d.prototype.BlockStatement=d.prototype.DecoratorBlock=d.prototype.PartialBlockStatement=function(a){this.accept(a.program),this.accept(a.inverse);var b=a.program||a.inverse,c=a.program&&a.inverse,d=c,i=c;if(c&&c.chained)for(d=c.body[0].program;i.chained;)i=i.body[i.body.length-1].program;var j={open:a.openStrip.open,close:a.closeStrip.close,openStandalone:f(b.body),closeStandalone:e((d||b).body)};if(a.openStrip.close&&g(b.body,null,!0),c){var k=a.inverseStrip;k.open&&h(b.body,null,!0),k.close&&g(d.body,null,!0),a.closeStrip.open&&h(i.body,null,!0),!this.options.ignoreStandalone&&e(b.body)&&f(d.body)&&(h(b.body),g(d.body))}else a.closeStrip.open&&h(b.body,null,!0);return j},d.prototype.Decorator=d.prototype.MustacheStatement=function(a){return a.strip},d.prototype.PartialStatement=d.prototype.CommentStatement=function(a){var b=a.strip||{};return{inlineStandalone:!0,open:b.open,close:b.close}},b["default"]=d,a.exports=b["default"]},function(a,b,c){"use strict";function d(){this.parents=[]}function e(a){this.acceptRequired(a,"path"),this.acceptArray(a.params),this.acceptKey(a,"hash")}function f(a){e.call(this,a),this.acceptKey(a,"program"),this.acceptKey(a,"inverse")}function g(a){this.acceptRequired(a,"name"),this.acceptArray(a.params),this.acceptKey(a,"hash")}var h=c(1)["default"];b.__esModule=!0;var i=c(6),j=h(i);d.prototype={constructor:d,mutating:!1,acceptKey:function(a,b){var c=this.accept(a[b]);if(this.mutating){if(c&&!d.prototype[c.type])throw new j["default"]('Unexpected node type "'+c.type+'" found when accepting '+b+" on "+a.type);a[b]=c}},acceptRequired:function(a,b){if(this.acceptKey(a,b),!a[b])throw new j["default"](a.type+" requires "+b)},acceptArray:function(a){for(var b=0,c=a.length;b<c;b++)this.acceptKey(a,b),a[b]||(a.splice(b,1),b--,c--)},accept:function(a){if(a){if(!this[a.type])throw new j["default"]("Unknown type: "+a.type,a);this.current&&this.parents.unshift(this.current),this.current=a;var b=this[a.type](a);return this.current=this.parents.shift(),!this.mutating||b?b:b!==!1?a:void 0}},Program:function(a){this.acceptArray(a.body)},MustacheStatement:e,Decorator:e,BlockStatement:f,DecoratorBlock:f,PartialStatement:g,PartialBlockStatement:function(a){g.call(this,a),this.acceptKey(a,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:e,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(a){this.acceptArray(a.pairs)},HashPair:function(a){this.acceptRequired(a,"value")}},b["default"]=d,a.exports=b["default"]},function(a,b,c){"use strict";function d(a,b){if(b=b.path?b.path.original:b,a.path.original!==b){var c={loc:a.path.loc};throw new q["default"](a.path.original+" doesn't match "+b,c)}}function e(a,b){this.source=a,this.start={line:b.first_line,column:b.first_column},this.end={line:b.last_line,column:b.last_column}}function f(a){return/^\[.*\]$/.test(a)?a.substring(1,a.length-1):a}function g(a,b){return{open:"~"===a.charAt(2),close:"~"===b.charAt(b.length-3)}}function h(a){return a.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function i(a,b,c){c=this.locInfo(c);for(var d=a?"@":"",e=[],f=0,g=0,h=b.length;g<h;g++){var i=b[g].part,j=b[g].original!==i;if(d+=(b[g].separator||"")+i,j||".."!==i&&"."!==i&&"this"!==i)e.push(i);else{if(e.length>0)throw new q["default"]("Invalid path: "+d,{loc:c});".."===i&&f++}}return{type:"PathExpression",data:a,depth:f,parts:e,original:d,loc:c}}function j(a,b,c,d,e,f){var g=d.charAt(3)||d.charAt(2),h="{"!==g&&"&"!==g,i=/\*/.test(d);return{type:i?"Decorator":"MustacheStatement",path:a,params:b,hash:c,escaped:h,strip:e,loc:this.locInfo(f)}}function k(a,b,c,e){d(a,c),e=this.locInfo(e);var f={type:"Program",body:b,strip:{},loc:e};return{type:"BlockStatement",path:a.path,params:a.params,hash:a.hash,program:f,openStrip:{},inverseStrip:{},closeStrip:{},loc:e}}function l(a,b,c,e,f,g){e&&e.path&&d(a,e);var h=/\*/.test(a.open);b.blockParams=a.blockParams;var i=void 0,j=void 0;if(c){if(h)throw new q["default"]("Unexpected inverse block on decorator",c);c.chain&&(c.program.body[0].closeStrip=e.strip),j=c.strip,i=c.program}return f&&(f=i,i=b,b=f),{type:h?"DecoratorBlock":"BlockStatement",path:a.path,params:a.params,hash:a.hash,program:b,inverse:i,openStrip:a.strip,inverseStrip:j,closeStrip:e&&e.strip,loc:this.locInfo(g)}}function m(a,b){if(!b&&a.length){var c=a[0].loc,d=a[a.length-1].loc;c&&d&&(b={source:c.source,start:{line:c.start.line,column:c.start.column},end:{line:d.end.line,column:d.end.column}})}return{type:"Program",body:a,strip:{},loc:b}}function n(a,b,c,e){return d(a,c),{type:"PartialBlockStatement",name:a.path,params:a.params,hash:a.hash,program:b,openStrip:a.strip,closeStrip:c&&c.strip,loc:this.locInfo(e)}}var o=c(1)["default"];b.__esModule=!0,b.SourceLocation=e,b.id=f,b.stripFlags=g,b.stripComment=h,b.preparePath=i,b.prepareMustache=j,b.prepareRawBlock=k,b.prepareBlock=l,b.prepareProgram=m,b.preparePartialBlock=n;var p=c(6),q=o(p)},function(a,b,c){"use strict";function d(){}function e(a,b,c){if(null==a||"string"!=typeof a&&"Program"!==a.type)throw new l["default"]("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+a);b=b||{},"data"in b||(b.data=!0),b.compat&&(b.useDepths=!0);var d=c.parse(a,b),e=(new c.Compiler).compile(d,b);return(new c.JavaScriptCompiler).compile(e,b)}function f(a,b,c){function d(){var d=c.parse(a,b),e=(new c.Compiler).compile(d,b),f=(new c.JavaScriptCompiler).compile(e,b,void 0,!0);return c.template(f)}function e(a,b){return f||(f=d()),f.call(this,a,b)}if(void 0===b&&(b={}),null==a||"string"!=typeof a&&"Program"!==a.type)throw new l["default"]("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+a);b=m.extend({},b),"data"in b||(b.data=!0),b.compat&&(b.useDepths=!0);var f=void 0;return e._setup=function(a){return f||(f=d()),f._setup(a)},e._child=function(a,b,c,e){return f||(f=d()),f._child(a,b,c,e)},e}function g(a,b){if(a===b)return!0;if(m.isArray(a)&&m.isArray(b)&&a.length===b.length){for(var c=0;c<a.length;c++)if(!g(a[c],b[c]))return!1;return!0}}function h(a){if(!a.path.parts){var b=a.path;a.path={type:"PathExpression",data:!1,depth:0,parts:[b.original+""],original:b.original+"",loc:b.loc}}}var i=c(34)["default"],j=c(1)["default"];b.__esModule=!0,b.Compiler=d,b.precompile=e,b.compile=f;var k=c(6),l=j(k),m=c(5),n=c(45),o=j(n),p=[].slice;d.prototype={compiler:d,equals:function(a){var b=this.opcodes.length;if(a.opcodes.length!==b)return!1;for(var c=0;c<b;c++){var d=this.opcodes[c],e=a.opcodes[c];if(d.opcode!==e.opcode||!g(d.args,e.args))return!1}b=this.children.length;for(var c=0;c<b;c++)if(!this.children[c].equals(a.children[c]))return!1;return!0},guid:0,compile:function(a,b){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=b,this.stringParams=b.stringParams,this.trackIds=b.trackIds,b.blockParams=b.blockParams||[],b.knownHelpers=m.extend(i(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0,lookup:!0},b.knownHelpers),this.accept(a)},compileProgram:function(a){var b=new this.compiler,c=b.compile(a,this.options),d=this.guid++;return this.usePartial=this.usePartial||c.usePartial,this.children[d]=c,this.useDepths=this.useDepths||c.useDepths,d},accept:function(a){if(!this[a.type])throw new l["default"]("Unknown type: "+a.type,a);this.sourceNode.unshift(a);var b=this[a.type](a);return this.sourceNode.shift(),b},Program:function(a){this.options.blockParams.unshift(a.blockParams);for(var b=a.body,c=b.length,d=0;d<c;d++)this.accept(b[d]);return this.options.blockParams.shift(),this.isSimple=1===c,this.blockParams=a.blockParams?a.blockParams.length:0,this},BlockStatement:function(a){h(a);var b=a.program,c=a.inverse;b=b&&this.compileProgram(b),c=c&&this.compileProgram(c);var d=this.classifySexpr(a);"helper"===d?this.helperSexpr(a,b,c):"simple"===d?(this.simpleSexpr(a),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("emptyHash"),this.opcode("blockValue",a.path.original)):(this.ambiguousSexpr(a,b,c),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(a){var b=a.program&&this.compileProgram(a.program),c=this.setupFullMustacheParams(a,b,void 0),d=a.path;this.useDecorators=!0,this.opcode("registerDecorator",c.length,d.original)},PartialStatement:function(a){this.usePartial=!0;var b=a.program;b&&(b=this.compileProgram(a.program));var c=a.params;if(c.length>1)throw new l["default"]("Unsupported number of partial arguments: "+c.length,a);c.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):c.push({type:"PathExpression",parts:[],depth:0}));var d=a.name.original,e="SubExpression"===a.name.type;e&&this.accept(a.name),this.setupFullMustacheParams(a,b,void 0,!0);var f=a.indent||"";this.options.preventIndent&&f&&(this.opcode("appendContent",f),f=""),this.opcode("invokePartial",e,d,f),this.opcode("append")},PartialBlockStatement:function(a){this.PartialStatement(a)},MustacheStatement:function(a){this.SubExpression(a),a.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(a){this.DecoratorBlock(a)},ContentStatement:function(a){a.value&&this.opcode("appendContent",a.value)},CommentStatement:function(){},SubExpression:function(a){h(a);var b=this.classifySexpr(a);"simple"===b?this.simpleSexpr(a):"helper"===b?this.helperSexpr(a):this.ambiguousSexpr(a)},ambiguousSexpr:function(a,b,c){var d=a.path,e=d.parts[0],f=null!=b||null!=c;this.opcode("getContext",d.depth),this.opcode("pushProgram",b),this.opcode("pushProgram",c),d.strict=!0,this.accept(d),this.opcode("invokeAmbiguous",e,f)},simpleSexpr:function(a){var b=a.path;b.strict=!0,this.accept(b),this.opcode("resolvePossibleLambda")},helperSexpr:function(a,b,c){var d=this.setupFullMustacheParams(a,b,c),e=a.path,f=e.parts[0];if(this.options.knownHelpers[f])this.opcode("invokeKnownHelper",d.length,f);else{if(this.options.knownHelpersOnly)throw new l["default"]("You specified knownHelpersOnly, but used the unknown helper "+f,a);e.strict=!0,e.falsy=!0,this.accept(e),this.opcode("invokeHelper",d.length,e.original,o["default"].helpers.simpleId(e))}},PathExpression:function(a){this.addDepth(a.depth),this.opcode("getContext",a.depth);var b=a.parts[0],c=o["default"].helpers.scopedId(a),d=!a.depth&&!c&&this.blockParamIndex(b);d?this.opcode("lookupBlockParam",d,a.parts):b?a.data?(this.options.data=!0,this.opcode("lookupData",a.depth,a.parts,a.strict)):this.opcode("lookupOnContext",a.parts,a.falsy,a.strict,c):this.opcode("pushContext")},StringLiteral:function(a){this.opcode("pushString",a.value)},NumberLiteral:function(a){this.opcode("pushLiteral",a.value)},BooleanLiteral:function(a){this.opcode("pushLiteral",a.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(a){var b=a.pairs,c=0,d=b.length;for(this.opcode("pushHash");c<d;c++)this.pushParam(b[c].value);for(;c--;)this.opcode("assignToHash",b[c].key);this.opcode("popHash")},opcode:function(a){this.opcodes.push({opcode:a,args:p.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(a){a&&(this.useDepths=!0)},classifySexpr:function(a){var b=o["default"].helpers.simpleId(a.path),c=b&&!!this.blockParamIndex(a.path.parts[0]),d=!c&&o["default"].helpers.helperExpression(a),e=!c&&(d||b);if(e&&!d){var f=a.path.parts[0],g=this.options;g.knownHelpers[f]?d=!0:g.knownHelpersOnly&&(e=!1)}return d?"helper":e?"ambiguous":"simple"},pushParams:function(a){for(var b=0,c=a.length;b<c;b++)this.pushParam(a[b])},pushParam:function(a){var b=null!=a.value?a.value:a.original||"";if(this.stringParams)b.replace&&(b=b.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),a.depth&&this.addDepth(a.depth),this.opcode("getContext",a.depth||0),this.opcode("pushStringParam",b,a.type),"SubExpression"===a.type&&this.accept(a);else{if(this.trackIds){var c=void 0;if(!a.parts||o["default"].helpers.scopedId(a)||a.depth||(c=this.blockParamIndex(a.parts[0])),c){var d=a.parts.slice(1).join(".");this.opcode("pushId","BlockParam",c,d)}else b=a.original||b,b.replace&&(b=b.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",a.type,b)}this.accept(a)}},setupFullMustacheParams:function(a,b,c,d){var e=a.params;return this.pushParams(e),this.opcode("pushProgram",b),this.opcode("pushProgram",c),a.hash?this.accept(a.hash):this.opcode("emptyHash",d),e},blockParamIndex:function(a){for(var b=0,c=this.options.blockParams.length;b<c;b++){var d=this.options.blockParams[b],e=d&&m.indexOf(d,a);if(d&&e>=0)return[b,e]}}}},function(a,b,c){"use strict";function d(a){this.value=a}function e(){}function f(a,b,c,d){var e=b.popStack(),f=0,g=c.length;for(a&&g--;f<g;f++)e=b.nameLookup(e,c[f],d);return a?[b.aliasable("container.strict"),"(",e,", ",b.quotedString(c[f]),", ",JSON.stringify(b.source.currentLocation)," )"]:e}var g=c(13)["default"],h=c(1)["default"];b.__esModule=!0;var i=c(4),j=c(6),k=h(j),l=c(5),m=c(53),n=h(m);e.prototype={nameLookup:function(a,b){return this.internalNameLookup(a,b)},depthedLookup:function(a){return[this.aliasable("container.lookup"),'(depths, "',a,'")']},compilerInfo:function(){var a=i.COMPILER_REVISION,b=i.REVISION_CHANGES[a];return[a,b]},appendToBuffer:function(a,b,c){return l.isArray(a)||(a=[a]),a=this.source.wrap(a,b),this.environment.isSimple?["return ",a,";"]:c?["buffer += ",a,";"]:(a.appendToBuffer=!0,a)},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function(a,b){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",a,",",JSON.stringify(b),")"]},lookupPropertyFunctionIsUsed:!1,compile:function(a,b,c,d){this.environment=a,this.options=b,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!d,this.name=this.environment.name,this.isChild=!!c,this.context=c||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(a,b),this.useDepths=this.useDepths||a.useDepths||a.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||a.useBlockParams;var e=a.opcodes,f=void 0,g=void 0,h=void 0,i=void 0;for(h=0,i=e.length;h<i;h++)f=e[h],this.source.currentLocation=f.loc,g=g||f.loc,this[f.opcode].apply(this,f.args);if(this.source.currentLocation=g,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new k["default"]("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),";\n"]),
this.decorators.push("return fn;"),d?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var j=this.createFunctionContext(d);if(this.isChild)return j;var l={compiler:this.compilerInfo(),main:j};this.decorators&&(l.main_d=this.decorators,l.useDecorators=!0);var m=this.context,n=m.programs,o=m.decorators;for(h=0,i=n.length;h<i;h++)n[h]&&(l[h]=n[h],o[h]&&(l[h+"_d"]=o[h],l.useDecorators=!0));return this.environment.usePartial&&(l.usePartial=!0),this.options.data&&(l.useData=!0),this.useDepths&&(l.useDepths=!0),this.useBlockParams&&(l.useBlockParams=!0),this.options.compat&&(l.compat=!0),d?l.compilerOptions=this.options:(l.compiler=JSON.stringify(l.compiler),this.source.currentLocation={start:{line:1,column:0}},l=this.objectLiteral(l),b.srcName?(l=l.toStringWithSourceMap({file:b.destName}),l.map=l.map&&l.map.toString()):l=l.toString()),l},preamble:function(){this.lastContext=0,this.source=new n["default"](this.options.srcName),this.decorators=new n["default"](this.options.srcName)},createFunctionContext:function(a){var b=this,c="",d=this.stackVars.concat(this.registers.list);d.length>0&&(c+=", "+d.join(", "));var e=0;g(this.aliases).forEach(function(a){var d=b.aliases[a];d.children&&d.referenceCount>1&&(c+=", alias"+ ++e+"="+a,d.children[0]="alias"+e)}),this.lookupPropertyFunctionIsUsed&&(c+=", "+this.lookupPropertyFunctionVarDeclaration());var f=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&f.push("blockParams"),this.useDepths&&f.push("depths");var h=this.mergeSource(c);return a?(f.push(h),Function.apply(this,f)):this.source.wrap(["function(",f.join(","),") {\n  ",h,"}"])},mergeSource:function(a){var b=this.environment.isSimple,c=!this.forceBuffer,d=void 0,e=void 0,f=void 0,g=void 0;return this.source.each(function(a){a.appendToBuffer?(f?a.prepend("  + "):f=a,g=a):(f&&(e?f.prepend("buffer += "):d=!0,g.add(";"),f=g=void 0),e=!0,b||(c=!1))}),c?f?(f.prepend("return "),g.add(";")):e||this.source.push('return "";'):(a+=", buffer = "+(d?"":this.initializeBuffer()),f?(f.prepend("return buffer + "),g.add(";")):this.source.push("return buffer;")),a&&this.source.prepend("var "+a.substring(2)+(d?"":";\n")),this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return"\n      lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    }\n    ".trim()},blockValue:function(a){var b=this.aliasable("container.hooks.blockHelperMissing"),c=[this.contextName(0)];this.setupHelperArgs(a,0,c);var d=this.popStack();c.splice(1,0,d),this.push(this.source.functionCall(b,"call",c))},ambiguousBlockValue:function(){var a=this.aliasable("container.hooks.blockHelperMissing"),b=[this.contextName(0)];this.setupHelperArgs("",0,b,!0),this.flushInline();var c=this.topStack();b.splice(1,0,c),this.pushSource(["if (!",this.lastHelper,") { ",c," = ",this.source.functionCall(a,"call",b),"}"])},appendContent:function(a){this.pendingContent?a=this.pendingContent+a:this.pendingLocation=this.source.currentLocation,this.pendingContent=a},append:function(){if(this.isInline())this.replaceStack(function(a){return[" != null ? ",a,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var a=this.popStack();this.pushSource(["if (",a," != null) { ",this.appendToBuffer(a,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(a){this.lastContext=a},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(a,b,c,d){var e=0;d||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(a[e++])),this.resolvePath("context",a,e,b,c)},lookupBlockParam:function(a,b){this.useBlockParams=!0,this.push(["blockParams[",a[0],"][",a[1],"]"]),this.resolvePath("context",b,1)},lookupData:function(a,b,c){a?this.pushStackLiteral("container.data(data, "+a+")"):this.pushStackLiteral("data"),this.resolvePath("data",b,0,!0,c)},resolvePath:function(a,b,c,d,e){var g=this;if(this.options.strict||this.options.assumeObjects)return void this.push(f(this.options.strict&&e,this,b,a));for(var h=b.length;c<h;c++)this.replaceStack(function(e){var f=g.nameLookup(e,b[c],a);return d?[" && ",f]:[" != null ? ",f," : ",e]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(a,b){this.pushContext(),this.pushString(b),"SubExpression"!==b&&("string"==typeof a?this.pushString(a):this.pushStackLiteral(a))},emptyHash:function(a){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(a?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var a=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(a.ids)),this.stringParams&&(this.push(this.objectLiteral(a.contexts)),this.push(this.objectLiteral(a.types))),this.push(this.objectLiteral(a.values))},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){null!=a?this.pushStackLiteral(this.programExpression(a)):this.pushStackLiteral(null)},registerDecorator:function(a,b){var c=this.nameLookup("decorators",b,"decorator"),d=this.setupHelperArgs(b,a);this.decorators.push(["fn = ",this.decorators.functionCall(c,"",["fn","props","container",d])," || fn;"])},invokeHelper:function(a,b,c){var d=this.popStack(),e=this.setupHelper(a,b),f=[];c&&f.push(e.name),f.push(d),this.options.strict||f.push(this.aliasable("container.hooks.helperMissing"));var g=["(",this.itemsSeparatedBy(f,"||"),")"],h=this.source.functionCall(g,"call",e.callParams);this.push(h)},itemsSeparatedBy:function(a,b){var c=[];c.push(a[0]);for(var d=1;d<a.length;d++)c.push(b,a[d]);return c},invokeKnownHelper:function(a,b){var c=this.setupHelper(a,b);this.push(this.source.functionCall(c.name,"call",c.callParams))},invokeAmbiguous:function(a,b){this.useRegister("helper");var c=this.popStack();this.emptyHash();var d=this.setupHelper(0,a,b),e=this.lastHelper=this.nameLookup("helpers",a,"helper"),f=["(","(helper = ",e," || ",c,")"];this.options.strict||(f[0]="(helper = ",f.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",f,d.paramsInit?["),(",d.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",d.callParams)," : helper))"])},invokePartial:function(a,b,c){var d=[],e=this.setupParams(b,1,d);a&&(b=this.popStack(),delete e.name),c&&(e.indent=JSON.stringify(c)),e.helpers="helpers",e.partials="partials",e.decorators="container.decorators",a?d.unshift(b):d.unshift(this.nameLookup("partials",b,"partial")),this.options.compat&&(e.depths="depths"),e=this.objectLiteral(e),d.push(e),this.push(this.source.functionCall("container.invokePartial","",d))},assignToHash:function(a){var b=this.popStack(),c=void 0,d=void 0,e=void 0;this.trackIds&&(e=this.popStack()),this.stringParams&&(d=this.popStack(),c=this.popStack());var f=this.hash;c&&(f.contexts[a]=c),d&&(f.types[a]=d),e&&(f.ids[a]=e),f.values[a]=b},pushId:function(a,b,c){"BlockParam"===a?this.pushStackLiteral("blockParams["+b[0]+"].path["+b[1]+"]"+(c?" + "+JSON.stringify("."+c):"")):"PathExpression"===a?this.pushString(b):"SubExpression"===a?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:e,compileChildren:function(a,b){for(var c=a.children,d=void 0,e=void 0,f=0,g=c.length;f<g;f++){d=c[f],e=new this.compiler;var h=this.matchExistingProgram(d);if(null==h){this.context.programs.push("");var i=this.context.programs.length;d.index=i,d.name="program"+i,this.context.programs[i]=e.compile(d,b,this.context,!this.precompile),this.context.decorators[i]=e.decorators,this.context.environments[i]=d,this.useDepths=this.useDepths||e.useDepths,this.useBlockParams=this.useBlockParams||e.useBlockParams,d.useDepths=this.useDepths,d.useBlockParams=this.useBlockParams}else d.index=h.index,d.name="program"+h.index,this.useDepths=this.useDepths||h.useDepths,this.useBlockParams=this.useBlockParams||h.useBlockParams}},matchExistingProgram:function(a){for(var b=0,c=this.context.environments.length;b<c;b++){var d=this.context.environments[b];if(d&&d.equals(a))return d}},programExpression:function(a){var b=this.environment.children[a],c=[b.index,"data",b.blockParams];return(this.useBlockParams||this.useDepths)&&c.push("blockParams"),this.useDepths&&c.push("depths"),"container.program("+c.join(", ")+")"},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},push:function(a){return a instanceof d||(a=this.source.wrap(a)),this.inlineStack.push(a),a},pushStackLiteral:function(a){this.push(new d(a))},pushSource:function(a){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),a&&this.source.push(a)},replaceStack:function(a){var b=["("],c=void 0,e=void 0,f=void 0;if(!this.isInline())throw new k["default"]("replaceStack on non-inline");var g=this.popStack(!0);if(g instanceof d)c=[g.value],b=["(",c],f=!0;else{e=!0;var h=this.incrStack();b=["((",this.push(h)," = ",g,")"],c=this.topStack()}var i=a.call(this,c);f||this.popStack(),e&&this.stackSlot--,this.push(b.concat(i,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var a=this.inlineStack;this.inlineStack=[];for(var b=0,c=a.length;b<c;b++){var e=a[b];if(e instanceof d)this.compileStack.push(e);else{var f=this.incrStack();this.pushSource([f," = ",e,";"]),this.compileStack.push(f)}}},isInline:function(){return this.inlineStack.length},popStack:function(a){var b=this.isInline(),c=(b?this.inlineStack:this.compileStack).pop();if(!a&&c instanceof d)return c.value;if(!b){if(!this.stackSlot)throw new k["default"]("Invalid stack pop");this.stackSlot--}return c},topStack:function(){var a=this.isInline()?this.inlineStack:this.compileStack,b=a[a.length-1];return b instanceof d?b.value:b},contextName:function(a){return this.useDepths&&a?"depths["+a+"]":"depth"+a},quotedString:function(a){return this.source.quotedString(a)},objectLiteral:function(a){return this.source.objectLiteral(a)},aliasable:function(a){var b=this.aliases[a];return b?(b.referenceCount++,b):(b=this.aliases[a]=this.source.wrap(a),b.aliasable=!0,b.referenceCount=1,b)},setupHelper:function(a,b,c){var d=[],e=this.setupHelperArgs(b,a,d,c),f=this.nameLookup("helpers",b,"helper"),g=this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})");return{params:d,paramsInit:e,name:f,callParams:[g].concat(d)}},setupParams:function(a,b,c){var d={},e=[],f=[],g=[],h=!c,i=void 0;h&&(c=[]),d.name=this.quotedString(a),d.hash=this.popStack(),this.trackIds&&(d.hashIds=this.popStack()),this.stringParams&&(d.hashTypes=this.popStack(),d.hashContexts=this.popStack());var j=this.popStack(),k=this.popStack();(k||j)&&(d.fn=k||"container.noop",d.inverse=j||"container.noop");for(var l=b;l--;)i=this.popStack(),c[l]=i,this.trackIds&&(g[l]=this.popStack()),this.stringParams&&(f[l]=this.popStack(),e[l]=this.popStack());return h&&(d.args=this.source.generateArray(c)),this.trackIds&&(d.ids=this.source.generateArray(g)),this.stringParams&&(d.types=this.source.generateArray(f),d.contexts=this.source.generateArray(e)),this.options.data&&(d.data="data"),this.useBlockParams&&(d.blockParams="blockParams"),d},setupHelperArgs:function(a,b,c,d){var e=this.setupParams(a,b,c);return e.loc=JSON.stringify(this.source.currentLocation),e=this.objectLiteral(e),d?(this.useRegister("options"),c.push("options"),["options=",e]):c?(c.push(e),""):e}},function(){for(var a="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),b=e.RESERVED_WORDS={},c=0,d=a.length;c<d;c++)b[a[c]]=!0}(),e.isValidJavaScriptVariableName=function(a){return!e.RESERVED_WORDS[a]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(a)},b["default"]=e,a.exports=b["default"]},function(a,b,c){"use strict";function d(a,b,c){if(g.isArray(a)){for(var d=[],e=0,f=a.length;e<f;e++)d.push(b.wrap(a[e],c));return d}return"boolean"==typeof a||"number"==typeof a?a+"":a}function e(a){this.srcFile=a,this.source=[]}var f=c(13)["default"];b.__esModule=!0;var g=c(5),h=void 0;try{}catch(i){}h||(h=function(a,b,c,d){this.src="",d&&this.add(d)},h.prototype={add:function(a){g.isArray(a)&&(a=a.join("")),this.src+=a},prepend:function(a){g.isArray(a)&&(a=a.join("")),this.src=a+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),e.prototype={isEmpty:function(){return!this.source.length},prepend:function(a,b){this.source.unshift(this.wrap(a,b))},push:function(a,b){this.source.push(this.wrap(a,b))},merge:function(){var a=this.empty();return this.each(function(b){a.add(["  ",b,"\n"])}),a},each:function(a){for(var b=0,c=this.source.length;b<c;b++)a(this.source[b])},empty:function(){var a=this.currentLocation||{start:{}};return new h(a.start.line,a.start.column,this.srcFile)},wrap:function(a){var b=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return a instanceof h?a:(a=d(a,this,b),new h(b.start.line,b.start.column,this.srcFile,a))},functionCall:function(a,b,c){return c=this.generateList(c),this.wrap([a,b?"."+b+"(":"(",c,")"])},quotedString:function(a){return'"'+(a+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(a){var b=this,c=[];f(a).forEach(function(e){var f=d(a[e],b);"undefined"!==f&&c.push([b.quotedString(e),":",f])});var e=this.generateList(c);return e.prepend("{"),e.add("}"),e},generateList:function(a){for(var b=this.empty(),c=0,e=a.length;c<e;c++)c&&b.add(","),b.add(d(a[c],this));return b},generateArray:function(a){var b=this.generateList(a);return b.prepend("["),b.add("]"),b}},b["default"]=e,a.exports=b["default"]}])});
/*@license SPA.js (bundle-v2.87.0-RC5) [MIT|https://github.com/sucom/SPA.js/blob/master/LICENSE]*//*build-slim-v20210106.143931*/;
/*@license SPA.js (core) [MIT]*/
!function(){var b,a,c=this,v=document,e=v.body,n=c.jQuery,t=0,r=1,H=c.$||c.dom;H||console.error("Missing dependency library jQuery or spa.dom");var K=function(){};c.spa=c.xsr=c.__=c._$=K,r=e.hasAttribute("use-jquery")||e.classList.contains("use-jquery")||r,K.VERSION="2.87.0-RC5",K.usejQuery=r;var o=Object.prototype,V=Array.prototype,i=String.prototype,s=Date.prototype,e=o.toString.call(window.app).slice(8,-1).toLowerCase();window.app&&/^html(.*)element$/i.test(e)&&(window.app={api:{}}),window.app=window.app||{api:{}},window.app.api=window.app.api||{};var q,e=function(){try{var e=navigator.userAgent,t=e.indexOf("MSIE ");if(0<t)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(0<e.indexOf("Trident/")){t=e.indexOf("rv:");return parseInt(e.substring(t+3,e.indexOf(".",t)),10)}}catch(e){}return 0}(),d=document.documentMode||e,p=!d;function noop(){}function _attr(e,t,a){if(_isEl(e))return 3==arguments.length?(e.setAttribute(t,a),e):e.getAttribute(t)}K.isIE=d,K.isNonIE=p,K.noop=noop,function(){for(var e,t=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],a=t.length,n=window.console=window.console||{};a--;)n[e=t[a]]||(n[e]=function(){});"none"in window||(window.none=""),"noop"in window||(window.noop=function(){})}(),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t}while(null!==(t=t.parentElement||t.parentNode)&&1===t.nodeType);return null});var l="hasOwnProperty,prototype,__proto__,isPrototypeOf".split(",");function _hasOwnProp(e,t){return o.hasOwnProperty.call(e,t)}function _argsToArr(e){return V.slice.call(e)}function cOut(e,t){K.debug&&console[e]&&console[e].apply(null,t)}K.debug=!1,K.debugger={on:function(){K.debug=!0},off:function(){K.debug=!1},toggle:function(){K.debug=!K.debug}};var u,W={clear:function(){console.clear()},assert:function(){cOut("assert",_argsToArr(arguments))},count:function(){cOut("count",_argsToArr(arguments))},debug:function(){cOut("debug",_argsToArr(arguments))},dir:function(){cOut("dir",_argsToArr(arguments))},dirxml:function(){cOut("dirxml",_argsToArr(arguments))},error:function(){cOut("error",_argsToArr(arguments))},exception:function(){cOut("exception",_argsToArr(arguments))},group:function(){cOut("group",_argsToArr(arguments))},groupCollapsed:function(){cOut("groupCollapsed",_argsToArr(arguments))},groupEnd:function(){cOut("groupEnd",_argsToArr(arguments))},info:function(){cOut("info",_argsToArr(arguments))},log:function(){cOut("log",_argsToArr(arguments))},markTimeline:function(){cOut("markTimeline",_argsToArr(arguments))},profile:function(){cOut("profile",_argsToArr(arguments))},profileEnd:function(){cOut("profileEnd",_argsToArr(arguments))},table:function(){cOut("table",_argsToArr(arguments))},time:function(){cOut("time",_argsToArr(arguments))},timeEnd:function(){cOut("timeEnd",_argsToArr(arguments))},timeStamp:function(){cOut("timeStamp",_argsToArr(arguments))},trace:function(){cOut("trace",_argsToArr(arguments))},warn:function(){cOut("warn",_argsToArr(arguments))}};function _sanitizeHTML(e){var t=document.createElement("div");return t.textContent=e,t.innerHTML}function _sanitizeScript(e){return(""+e).replace(/<\s*\/+\s*(\bscript\b)/gi,"&lt;/script&gt;</pre").replace(/<\s*(\bscript\b)/gi,"<pre>&lt;script")}function _sanitizeXSS(e){var t="string"==typeof e,e=(t?e:JSON.stringify(e)).replace(/<\s*script/gi,"<xss-script").replace(/\/\s*script/gi,"/xss-script").replace(/\s+on([a-z]+)\s*=/gi," xss-on$1=").replace(/javascript:/gi,"xss-js:");return t?e:JSON.parse(e)}function _getMatchStr(e){switch(e){case"{":return"}";case"[":return"]";case"<":return">";default:return e}}function _strToNative(e){var t=e.trim();switch(!0){case function isNumeric(){var e=t.replace(/[0-9]/g,"");return!!t.length&&(!e.length||("-"==e||"+"==e||"."==e))}():return+t;case function isBoolean(){return"true"==t||"false"==t}():return"true"==t;case function isObject(){return"{"==t[0]&&"}"==t[t.length-1]}():return t.toJSON();case function isArray(){return"["==t[0]&&"]"==t[t.length-1]}():return("{xArr:"+t+"}").toJSON().xArr;default:return e}}function _isValidEvalStr(e){if(!K.jsonDataSanityCheck)return 1;var t=e.indexOf("(");if(!(0<=t&&e.indexOf(")",t)>t))return 1;console.warn("Insecured String with braces():",e)}function _toObj(t,e){var a;if(_isStr(t)){if(!_isValidEvalStr(a=t.trimStr().trimStr(",").trimStr(";")))return t;if(a.match(/^\</))return t;if(!(a.containsStr("{")||a.containsStr(":")||a.containsStr("\\[")||a.containsStr("'")||a.containsStr('"'))){if(a.containsStr(",")||a.containsStr(";"))return a.replace(/ /g,"").replace(/;/g,",").split(",");if(!e)return _strToNative(a);a="{"+e+":"+a+"}"}a.containsStr(":")&&!a.containsStr(",")&&a.containsStr(";")&&(a=a.replace(/\;/g,",")),a.beginsWithStr("{")||a.beginsWithStr("\\[")?a.beginsWithStr("{")&&!a.containsStr(":")&&a.containsStr("=")&&(a=""+a.replace(/=/g,":")):a=a.containsStr(":")?"{"+a+"}":a.containsStr("=")?"{"+a.replace(/=/g,":")+"}":"["+a+"]",!a.beginsWithStr("{")&&e&&(a="{"+e+":"+a+"}")}var n={};try{n=_isStr(t)||"object"!=typeof t?_isBlank(t)?null:Function('"use strict";return ('+a+")")():t}catch(e){console.error('Error JSON Parse: Invalid String >> "'+t+'"\n>> '+e.stack.substring(0,e.stack.indexOf("\n")))}return n}function _of(e){return o.toString.call(e).slice(8,-1).toLowerCase()}function _is(e,t){return"*"==(""+t)[0]?0<=_of(e).indexOf((""+t).toLowerCase().substring(1)):0<=(""+t).toLowerCase().indexOf(of(e))}function _isArr(e){return _is(e,"array")}function _isBool(e){return _is(e,"boolean")}function _isFn(e){return _is(e,"function")}function _isObj(e){return _is(e,"object")}function _isObjLike(e){return"object"==typeof e||"function"==typeof e}function _isStr(e){return _is(e,"string")}function _isNum(e){return _is(e,"number")}function _isNumStr(e){return(""+e).isNumberStr()}function _isUndef(e){return _is(e,"undefined")}function _isDefined(e){return!_is(e,"undefined")}function _isEl(e){return _is(e,"*element")}function _is$El(e){return _isObj(e)&&!!e.jquery}function _isArrLike(e){return!!_isArr(e)||!!e&&("object"==typeof e&&(1===e.nodeType?!!e.length:0===e.length||0<e.length&&(0 in e&&e.length-1 in e)))}function _isEmptyObj(e){for(var t in e)return!1;return!0}function _isBlank(e){var t=!0;if(null!=e)switch(!0){case _isStr(e):t=0==e.trimStr().length;break;case _isFn(e):t=!1;break;case _isArr(e):case _isObj(e):t=_isEmptyObj(e);break;default:t=0==(""+e).trimStr().length}return t}function _isElementExist(e){return!_isEmptyObj(H(e).get())}function _toStr(e){var t=""+e;return _isObj(e)&&(t=JSON.stringify(e)),t}function _now(){return""+(new Date).getTime()}function _year(e){return e=e||0,(new Date).getFullYear()+K.toInt(e)}function _range(e,t,a){var n=[],r=arguments.length;if(r){1===r?(t=e,a=(e=0)<=t?1:-1):2===r&&(a=e<=t?1:-1);for(var i=Math.max(Math.ceil((t-e)/(a||1)),0);i--;)n.push(e),e+=a}return n}function _freeTimer(e){e&&clearTimeout(e)}function _initKeyTracking(){var e=arguments.length&&arguments[0]?arguments[0]:"[data-disable-keys],[data-focus-next],[data-focus-back]",t=H(2==arguments.length&&arguments[1]?arguments[1]:"body").find(e);W.info("Finding Key-Tracking for element(s): "+e),t.each(function(e,t){H(t).keydown(K._trackAndControlKey),W.info("SPA is tracking keys on element:"),W.info(t)})}function _selectOptionsFor(e,t,a,n){t=(t||"value").toLowerCase(),n=n||",",_isArr(a)&&(n="~~",a=a.join(n)),a=(n+a+n).toLowerCase();var r=K.getDocObj(e);if(r)for(var i,o=0;o<r.length;o++)i=(n+r.options[o][t]+n).toLowerCase(),i=0<=a.indexOf(i),(r.options[o].selected=i)?_attr(r.options[o],"selected",""):r.options[o].removeAttribute("selected")}function _rand(e,t){return Math.floor(Math.random()*(t-e+1))+e}K.console=W,K.ajaxPreProcess,K.onInit,K.onInitComplete,K.onReady,K.onUrlChange,K.onUrlHashChange,K.onReload,s&&(s.yyyymmdd=function(e){var t=this.getMonth()+1,a=this.getDate();return[this.getFullYear(),(9<t?"":"0")+t,(9<a?"":"0")+a].join(e||"")},s.hhmmss=function(e){var t=this.getHours(),a=this.getMinutes(),n=this.getSeconds();return[(9<t?"":"0")+t,(9<a?"":"0")+a,(9<n?"":"0")+n].join(e||"")}),i&&(i.trimLeftStr=function(e){return(""+this).replace(new RegExp("^["+(e||"\\s")+"]+","g"),"")},i.trimRightStr=function(e){return(""+this).replace(new RegExp("["+(e||"\\s")+"]+$","g"),"")},i.trimStr=function(e){return(""+this).trimLeftStr(e).trimRightStr(e)},i.getLeftStr=function(e){return"string"==typeof e&&(e=(""+this).indexOf(e)),e?(""+this).substring(0,e):""},i.getRightStr=function(e){var t=1;return"string"==typeof e&&(t=e.length,e=(""+this).indexOf(e)),e<0?"":(""+this).substring(e+t)},i.isBlankStr=function(){return""==(""+this).trimStr()},i.ifBlankStr=function(e,t){return e=void 0===e?"":e,t=void 0===t?(""+this).trimStr():t,(""+this).isBlankStr()?e:t},i.isNumberStr=function(){var e=(""+this).trim(),t=e.replace(/[0-9]/g,"").replace(".","").trimStr(),a=e[0];return e&&(0==t.length||1==t.length&&("+"==a||"-"==a))},i.normalizeStr=function(){return(""+this).trimStr().replace(/\s+/g," ")},i.beginsWithStr=function(e,t){t=t?"i":"";t=new RegExp("^"+e,t);return!!(""+this).normalizeStr().match(t)},i.beginsWithStrIgnoreCase=function(e){e=new RegExp("^"+e,"i");return!!(""+this).normalizeStr().match(e)},i.endsWithStr=function(e,t){t=t?"i":"";t=new RegExp(e+"$",t);return!!(""+this).normalizeStr().match(t)},i.endsWithStrIgnoreCase=function(e){e=new RegExp(e+"$","i");return!!(""+this).normalizeStr().match(e)},i.containsStr=function(e,t){return t=t?"gi":"g",new RegExp(""+e,t).test(""+this)},i.containsStrIgnoreCase=function(e){return new RegExp(""+e,"gi").test(""+this)},i.equals=function(e){return""+this==e},i.equalsIgnoreCase=function(e){return String((""+this).toLowerCase())==String(e).toLowerCase()},i.toProperCase=function(e){return(void 0===e||e?(""+this).normalizeStr():""+this).toLowerCase().replace(/^(.)|\s(.)/g,function(e){return e.toUpperCase()})},i.toTitleCase=function(e){return(void 0===e||e?(""+this).normalizeStr():""+this).toLowerCase().replace(/^(.)|\s(.)/g,function(e){return e.toUpperCase()})},i.capitalize=function(){return(""+this).charAt(0).toUpperCase()+(""+this).slice(1)},i.unCapitalize=function(){return(""+this).charAt(0).toLowerCase()+(""+this).slice(1)},i.sanitizeHTML=function(){return _sanitizeHTML(""+this)},K.sanitizeHTML=_sanitizeHTML,i.sanitizeScript=function(){return _sanitizeScript(""+this)},K.sanitizeScript=_sanitizeScript,i.sanitizeXSS=function(){return _sanitizeXSS(""+this)},K.sanitizeXSS=_sanitizeXSS,i.splitToArray=i.toArray=function(e){return _isBlank(""+this)?[]:(""+this).split(e)},i.extractStrBetweenIn=function(e,t,a){e=e||((e=(""+this).match(/[^a-z0-9\:\.\/\\]/i))?e[0]:""),t=t||_getMatchStr(e);t=(""+this).match(RegExp("\\"+e+"([^\\"+e+"\\"+t+"].*?)\\"+t,"g"))||[];return a&&!_isBlank(t)&&(t=t.__unique()),t},i.extractStrBetweenEx=function(e,t,a){var n="\\"+(e=e||((e=(""+this).match(/[^a-z0-9\:\.\/\\]/i))?e[0]:""))+"\\"+(t=t||_getMatchStr(e)),r=new RegExp("["+n+"]","g"),t=((""+this).match(new RegExp("\\"+e+"([^"+n+"].*?)\\"+t,"g"))||[]).map(function(e){return e.replace(r,"")});return a&&!_isBlank(t)&&(t=t.__unique()),t},i.toNative=function(){return _strToNative(""+this)},i.toBoolean=function(){var e=!0;switch((""+this).trimStr().toLowerCase()){case"":case"0":case"-0":case"nan":case"null":case"false":case"undefined":e=!1}return e=e&&!(""+this).trimStr().beginsWithStr("-")},i.padStr=function(e,t,a){e=e||"",t=t||1,a=a||2;for(var n="",r=0;r<t;r++)n+=e;return(-1===a||2===a?n:"")+""+this+(1===a||2===a?n:"")},i.toObj=i.toObject=i.toJSON=function(){return _toObj(""+this)},i.bindData=i.bindWith=function(e){return function _bindData(t,a,n,r){t=""+t,n=n||"{",r=r||"}";var e=K.extractStrBetweenEx(t,n,r,!0);t&&!_isBlank(e)&&_isObj(a)&&_each(e,function(e){t=t.replace(new RegExp(n+"\\s*("+e.trim()+")\\s*"+r,"g"),_find(a,e,""))});return t}(""+this,e)}),K.strToNative=_strToNative,K.extractStrBetweenIn=function(e,t,a,n){return(e||"").extractStrBetweenIn(t,a,n)},K.extractStrBetweenEx=function(e,t,a,n){return(e||"").extractStrBetweenEx(t,a,n)},K.strToArray=function(e){return"string"==typeof e&&(e=[e]),e},K.jsonDataSanityCheck,K.toJSON=K.toObj=_toObj,K.lastSplitResult=[],K.getOnSplit=K.pickOnSplit=function(e,t,a){return K.lastSplitResult=e.split(t),K.getOnLastSplit(a)},K.getOnLastSplit=K.pickOnLastSplit=function(e){return e<0?_last(K.lastSplitResult):K.lastSplitResult[e]},K.of=of=_of,K.is=is=_is,K.isArray=_isArr,K.isArrayLike=_isArrLike,K.isBoolean=_isBool,K.isFunction=_isFn,K.isObject=_isObj,K.isObjectLike=_isObjLike,K.isString=_isStr,K.isNumber=_isNum,K.isDef=_isDefined,K.isDefined=_isDefined,K.isUndefined=_isUndef,K.isEmptyObject=_isEmptyObj,K.isElement=_isEl,K.is$El=_is$El,K.isElementExist=_isElementExist,K.isBlank=K.isEmpty=_isEmpty=_isBlank,K.toBoolean=function(e){var t=!0;switch((""+e).trimStr().toLowerCase()){case"":case"0":case"-0":case"nan":case"null":case"false":case"undefined":t=!1}return t},K.toInt=function(e){return e=_isBlank(e=(""+e).replace(/[^+-0123456789.]/g,""))?"0":0<=e.indexOf(".")?e.substring(0,e.indexOf(".")):e,parseInt(+e,10)},K.toFloat=function(e){return e=_isBlank(e=(""+e).replace(/[^+-0123456789.]/g,""))?"0":e,parseFloat(+e)},K.toStr=_toStr,K.toString=function(e){return W.warn("xsr.toString is deprecated. use xsr.toStr instead."),_toStr(e)},K.dotToX=function(e,t){return e.replace(/\./g,t)},K.dotToCamelCase=function(e){e=e.replace(/\./g," ").toProperCase().replace(/ /g,"");return e[0].toLowerCase()+e.substring(1)},K.dotToTitleCase=function(e){return e.replace(/\./g," ").toProperCase().replace(/ /g,"")},K.toDottedPath=function(e){return(e||"").trim().replace(/]/g,"").replace(/(\[)|(\\)|(\/)/g,".").replace(/(\.+)/g,".").trimStr("\\.")},K.ifBlank=K.ifEmpty=K.ifNull=function(e,t,a){return t=(""+(t||"")).trimStr(),a=void 0===a?(""+e).trimStr():a,_isBlank(e)?t:a},K.now=_now,K.year=_year,K.sizeOf=function _sizeOf(e,t){var n=0;function sizeOf(e){if(null!=e)switch(typeof e){case"number":n+=8;break;case"string":n+=2*e.length;break;case"boolean":n+=4;break;case"object":var t=o.toString.call(e).slice(8,-1);if("Object"===t||"Array"===t)for(var a in e)e.hasOwnProperty(a)&&(n+=2*a.length,sizeOf(e[a]));else n+=2*e.toString().length}return n}return _isUndef(t)||t?function formatByteSize(e){return e<1024?e+" B":e<1048576?(e/1024).toFixed(3)+" KB":e<1073741824?(e/1048576).toFixed(3)+" MB":(e/1073741824).toFixed(3)+" GB"}(sizeOf(e)):sizeOf(e)},K.range=function(){var e=arguments.length;if(!e||1===e&&"0"===(""+arguments[0]).trim())return[];var t="string"!=typeof arguments[0]&&e?1===e?"0.."+arguments[0]+":1":2===e?arguments[0]+".."+arguments[1]+":1":arguments[0]+".."+arguments[1]+":"+arguments[2]:arguments[0];(t=(t=t.toUpperCase()).replace(/Y([0-9])/g,"Y+$1")).indexOf("..")<0&&(t=(-1<t.indexOf("Y")?"Y..":"0..")+t),-1<t.indexOf("Y")&&t.indexOf("..Y")<0&&(t=t.replace(/\.\.([0-9])/g,"..+$1").replace(/\.\./g,"..Y"));var a=t.split(".."),n=""+a[0],r=""+a[1],e="1";0<r.indexOf(":")&&(r=""+a[1].split(":")[0],e=""+a[1].split(":")[1]),0<=n.indexOf("Y")&&(n=_year(n.split(/[^0-9+-]/)[1])),0<=r.indexOf("Y")&&(r=_year(r.split(/[^0-9+-]/)[1]));t=K.toInt(n),a=K.toInt(r),e=K.toInt(e);return r<n?_range(a,t+1,e).reverse():_range(t,a+1,e)},K.checkAndPreventKey=function(e,t){var a=0<=(t=t||"").indexOf("+shift"),n=""+e.keyCode,t=0<=t.padStr(",").indexOf(n.padStr(","))&&(a?!!e.shiftKey:!e.shiftKey);return t&&(e.preventDefault(),W.info("Key ["+n+(a?"+Shift":"")+"] has been disabled in this element.")),t},K._trackAndControlKey=function(e){var t=e.currentTarget,a=H(t),n=(""+a.data("disableKeys")).toLowerCase();K.checkAndPreventKey(e,n);t=!_isBlank((""+a.data("focusNext")).replace(/undefined/,"").toLowerCase()),n=!_isBlank((""+a.data("focusBack")).replace(/undefined/,"").toLowerCase());t&&K.checkAndPreventKey(e,"9")&&H(a.data("focusNext")).get(0).focus(),n&&K.checkAndPreventKey(e,"9,+shift")&&H(a.data("focusBack")).get(0).focus()},K.initKeyTracking=_initKeyTracking,K.getDocObj=function(e){e="object"==typeof e?e:(e.beginsWithStr("#")?"":"#")+e;return _isEl(e)?e:H(e).get(0)},K.getDocObjs=function(e){e=(e.beginsWithStr("#")?"":"#")+e;return H(e).get()},K.hasCssRule=function(e){var t=!1;if(e){e=e.split(",");for(var a=0;a<document.styleSheets.length;a++){var n,r=document.styleSheets[a].rules||document.styleSheets[a].cssRules;if(t)break;for(n in r)if(t=t||"string"==typeof r[n].selectorText&&0<=e.indexOf(r[n].selectorText))break}}return t},K.getCssRule=function(e){var t,a;if(e)for(var n=0;n<document.styleSheets.length;n++){var r,i=document.styleSheets[n].rules||document.styleSheets[n].cssRules;if(t)break;for(r in i)if(t=t||"string"==typeof i[r].selectorText&&e==i[r].selectorText){a=i[r];break}}return a},K.setFocus=function(e,t){e=K.getDocObj(e);e&&(e.focus(),t&&e.select())},K.swapClass=function(e,t,a){H(e).removeClass(t),H(e).addClass(a)},K.docObjValue=function(e,t){var a=K.getDocObj(e),n="";return a&&(n=a.value,2===arguments.length&&(a.value=t)),n},K.optionSelectedIndex=function(e,t){var a=-1,n=K.getDocObj(e);return n&&(a=n.selectedIndex,2===arguments.length&&(n.selectedIndex=t)),a},K.optionIndexOfValue=function(e,t,a){var n=-1,r=K.getDocObj(e);if(r)for(var i=0;i<r.length;i++)if((""+t).equalsIgnoreCase(r.options[i].value)){n=i;break}return n},K.optionIndexOfText=function(e,t){var a=-1,n=K.getDocObj(e);if(n)for(var r=0;r<n.length;r++)if(t.equalsIgnoreCase(n.options[r].text)){a=r;break}return a},K.optionIndexOfValueBeginsWith=function(e,t){var a=-1,n=K.getDocObj(e);if(n)for(var r=0;r<n.length;r++)if(n.options[r].value.beginsWithStrIgnoreCase(t)){a=r;break}return a},K.optionsSelectedValues=function(e,t){return e=(e.beginsWithStr("#")?"":"#")+e,t=t||",",_map(H(e+" option:selected"),function(e){return e.value}).join(t)},K.optionsSelectedTexts=function(e,t){return e=(e.beginsWithStr("#")?"":"#")+e,t=t||",",_map(H(e+" option:selected"),function(e){return e.text}).join(t)},K.optionValueOfIndex=function(e,t){var a="",e=K.getDocObj(e);return e&&0<=t&&t<e.length&&(a=e.options[t].value),a},K.optionTextOfIndex=function(e,t){var a="",e=K.getDocObj(e);return e&&0<=t&&t<e.length&&(a=e.options[t].text),a},K.selectOptionsForValues=function(e,t,a){_selectOptionsFor(e,"value",t,a)},K.selectOptionsForTexts=function(e,t,a){_selectOptionsFor(e,"text",t,a)},K.selectOptionsAll=function(e){var t=K.getDocObj(e);if(t)for(var a=0;a<t.length;a++)t.options[a].selected=!0,_attr(t.options[a],"selected","")},K.selectOptionsNone=function(e){var t=K.getDocObj(e);if(t)for(var a=0;a<t.length;a++)t.options[a].selected=!1,t.options[a].removeAttribute("selected")},K.selectOptionForValue=function(e,t){var a=-1,n=K.getDocObj(e);return n&&(a=K.optionIndexOfValue(e,t),n.selectedIndex=a,_attr(n.options[a],"selected","")),a},K.selectOptionForValueBeginsWith=function(e,t){var a=-1,n=K.getDocObj(e);return n&&(a=K.optionIndexOfValueBeginsWith(e,t),n.selectedIndex=a,_attr(n.options[a],"selected","")),a},K.selectOptionForText=function(e,t){var a=-1,n=K.getDocObj(e);return n&&(a=K.optionIndexOfText(e,t),n.selectedIndex=a,_attr(n.options[a],"selected","")),a},K.optionsReduceToLength=function(e,t){t=t||0;var a=K.getDocObj(e);a&&(K.selectOptionsNone(e),a.length=t)},K.optionsRemoveAll=function(e){K.optionsReduceToLength(e,0)},K.optionRemoveForIndex=function(e,t){e=(e.beginsWithStr("#")?"":"#")+e;e=K.getDocObj(e);e&&((""+t).equalsIgnoreCase("first")&&(t=0),(""+t).equalsIgnoreCase("last")&&(t=e.length-1),e.remove(t))},K.optionRemoveForValue=function(e,t){K.optionRemoveForIndex(e,K.optionIndexOfValue(e,t))},K.optionRemoveForText=function(e,t){K.optionRemoveForIndex(e,K.optionIndexOfText(e,t))},K.optionRemoveForValueBeginsWith=function(e,t){K.optionRemoveForIndex(e,K.optionIndexOfValueBeginsWith(e,t))},K.optionAppend=function(e,t,a,n){var r=-1,i=K.getDocObj(e);return i&&(r=void 0===n?(e=i.length,i.length=e+1,i.options[e].value=t,i.options[e].text=a,e):(H(i).find("option").eq(n).before('<option value="'+t+'">'+a+"</option>"),n)),r},K.optionsLoad=function(a,e,t,n){if(t=t||0,n=n||0,_isStr(e)&&(0<e.indexOf("..")?e=K.range(e):0<e.indexOf(",")&&(e=e.split(",").map(function(e){return e.trim()}))),0<=t&&K.optionsReduceToLength(a,t),_isArr(e))_each(e,function(e){K.optionAppend(a,e,e)});else if(0<n){var r,i=[];for(r in e)i.push({key:r,value:e[r]});_each(_sortBy(i,["","key","value"][n]),function(e){K.optionAppend(a,e.key,e.value)})}else _each(e,function(e,t){K.optionAppend(a,t,e)})},K.optionsList=function(t,e,a,n,r){var i=K.getDocObj(t);_isUndef(a)&&(a=_attr(i,"data-options-from")),_isUndef(n)&&(n=_attr(i,"data-sort-on")),_isUndef(r)&&(r=_attr(i,"data-sort-by"));var o,s,l,c=(_attr(i,"data-value-key")||"value").toLowerCase(),d=(_attr(i,"data-text-key")||"text").toLowerCase(),p=["",c,d];a=+(a||0),n=+((n||0)+"").replace(new RegExp(c,"i"),"1").replace(new RegExp(d,"i"),"2"),r=((r||"")+"").trim().toLowerCase(),0<=a&&K.optionsReduceToLength(t,a),_isStr(e)&&(e=0<e.indexOf("..")?K.range(e):i.hasAttribute("data-split-by")?e.split(_attr(i,"data-split-by")).map(function(e){return e.trim()}):[e]),_isObj(e)&&(o=[],_each(e,function(e,t){var a={};a[c]=t,a[d]=e,o.push(a)}),e=o),_isArr(e)&&((n||r)&&(_isObj(e[0])?(e=_sortBy(e,p[n]),"d"==r[0]&&(e=e.reverse())):"a"==r[0]?e=e.sort():"d"==r[0]&&(e=e.sort().reverse())),_each(e,function(e){_isObj(e)?(s=e[c],l=e[d]):s=l=e,K.optionAppend(t,s,l)}))},K.checkedState=function(e,t){var a=!1,n=K.getDocObj(e);return n&&(a=n.checked,2===arguments.length&&(n.checked=t)),a},K.isChecked=function(e,t){return 0<H(e).find("input[name="+t+"]:checked").length},K.radioSelectedValue=function(e,t){t=H(e).find("input[name="+t+"]:checked").val();return t||""},K.radioClearSelection=function(e,t){H(e).find("input[name="+t+"]:checked").attr("checked",!1)},K.radioSelectForValue=function(e,t,a){H(e).find("input[name="+t+"]:radio").each(function(e){e.checked=e.value.equalsIgnoreCase(a)})},K.checkboxCheckedValues=function(e,t,a){return a=a||",",H(e).find("input[name="+t+"]:checked").map(function(){return this.value}).get().join(a)},K.sleep=function(e){var t=new Date;for(t.setTime(t.getTime()+1e3*e);(new Date).getTime()<t.getTime(););},K.filterJSON=function(e,t){console.warn("xsr.filterJSON has been removed. please use alternate filter.")},K.randomPassword=function(e,t){for(var a=t||"9a8b77C8D9E8dkfhseidF7G6H5QJ3c6d5e4f32L3M4N5P6Qg2h3i4j5kV6W5X4Y3Z26m7n8p9q8r7s6t5u4v3w2x3y4z5A6BK7R8S9T8U7",n="",r=0;r<(e||8);r++){var i=Math.floor(Math.random()*a.length);n+=a.charAt(i)}return n},K.rand=_rand,K.appendToObj=function(e,t,a){_hasKey(e,t)?(_isArr(e[t])||(e[t]=[e[t]]),e[t].push(a)):e[t]=a},K.parseKeyStr=function(e,t){return(t?e.toLowerCase():e).replace(/[^_0-9A-Za-z\$\[\]\?\*\-]/g,"")};var f={};function _$qrySelector(e){var t,a,n;return _isStr(e)&&(n=(t=e.trim().split(" "))[0],/app\.(.+)\./.test(n)?(a=n.split(".")[1],t[0]=t[0].replace("app."+a+".",'[data-rendered-component="'+n.split(".")[1]+'"] '),e=t.join(" ")):n.beginsWithStr("\\$")&&(0<(a=n.substring(1)).indexOf(":")?(n=K.toInt(a.getRightStr(":").trim()),a=a.getLeftStr(":"),t[0]='[data-rendered-component="'+a+'"]:eq('+n+")"):t[0]='[data-rendered-component="'+a+'"]',e=t.join(" "))),e}function _serializeUncheckedCheckboxes(e){var a,n,r="object"==typeof e,i=r?e:{},o=r&&!e?"":e;return H(this).find("input[data-unchecked]:checkbox:enabled:not(:checked)[name]").each(function(e,t){n=H(t),a=n.attr("name"),n=n.data("unchecked"),n=void 0===n?"":n,r?K.appendToObj(i,a,n):o+=(o?"&":"")+a+"="+n}),r?i:o}function _serializeFormToObject(e,t,a){var n=H(this),r=n[0];if(!r)return console.warn("Form not found! (_serializeFormToObject)"),{};var i,o,s=n.serializeToArray(),l=n.data(),c="object"==typeof e?e:{},d="boolean"==typeof e?e:t||!1,p=l.serializeIgnorePrefix,u=l.hasOwnProperty("typeNative");return f={},a&&(p=a),_each(s,function(){i=p?this.name.replace(p,""):this.name,c=K.setObjProperty(c,i,u?this.value.toNative():this.value,d)}),n.find("input[data-unchecked]:checkbox:enabled:not(:checked)[name]").each(function(){(i=H(this).attr("name"))&&(o=H(this).data("unchecked"),p&&(i=i.replace(p,"")),o=""+(void 0===o?"":o),c=K.setObjProperty(c,i,u?o.toNative():o,d))}),(r.hasAttribute("data-disabled")&&_isBlank(_attr(r,"data-disabled"))||_strToNative(l.disabled||"false"))&&n.find("[disabled][name]").each(function(){(i=H(this).attr("name"))&&(o=K.getElValue(this),p&&(i=i.replace(p,"")),o=""+(void 0===o?"":o),c=K.setObjProperty(c,i,u?o.toNative():o,d))}),c}function _serializeFormToSimpleObject(e,t){var a=H(this),n=a[0];if(!n)return console.warn("Form not found! (serializeFormToSimpleObject)"),{};var r,i,o,s,l=a.data(),a=this.serializeToArray(),c="object"==typeof e?e:{},l="boolean"==typeof e?e:_is(t,"boolean")?t:n.hasAttribute("data-disabled")&&_isBlank(_attr(n,"data-disabled"))||_strToNative(l.disabled||"false");return _each(a,function(){K.appendToObj(c,this.name,this.value)}),l&&H(this).find("[disabled][name]").each(function(){K.appendToObj(c,this.name,K.getElValue(this))}),H(this).find("input[data-unchecked]:checkbox:enabled:not(:checked)[name]").each(function(){o=H(this).attr("name"),s=""+(void 0===(s=H(this).data("unchecked"))?"":s),K.appendToObj(c,o,s)}),H(this).find("[data-to-json-group][name]").each(function(){r=this.name,(i=H(this).data("toJsonGroup"))&&(c[i]||(c[i]={}),K.appendToObj(c[i],r,K.getElValue(this)))}),c}function _find(e,t,a){if(_isObjLike(e)&&t){var n=_map(t.split("|"),function(e){return e.trim()});t=n.shift();n=n.join("|");if(0<=t.indexOf("*"))s=function(e,t){var a;if(_isObjLike(e))if(e.hasOwnProperty(t))a=e[t];else for(var n=_keys(e),r=0;_isUndef(a)&&r<n.length;)a=arguments.callee(e[n[r++]],t);return a}(e,t.replace(/\*/g,""));else for(var r=0,i=K.toDottedPath(t).split("."),o=i.length,s=e;r<o;r++)if(_isArr(s))s=s[K.toInt(i[r])];else{if(!_isObjLike(s)){s=void 0;break}s=s[i[r].trim()]}return _isUndef(s)?n?_find(e,n,a):_isFn(a)?a.call(e,e,t):a:s}return 3==arguments.length?_isFn(a)?a.call(e,e,t):a:e}function _hasKey(e,t){if(arguments.length<2)return!1;if("object"!=typeof e||"string"!=typeof t||/[\.\[\]\/\|\&\,]/g.test(t)){var a=e,n=!1;try{n=!!_isValidEvalStr(t)&&void 0!==_find(a,t)}catch(e){console.warn("Key["+t+"] error in object.\n"+e.stack)}return n}return e.hasOwnProperty(t.trim())}function _isObjHasKeys(e,t,l){function checkForAll(e,t){for(var a,n=t.split(","),r="",i=0,o=!0,s=0;s<n.length;s++)(r=n[s].trim())&&(i++,a=l&&(0<r.indexOf(".")||0<r.indexOf("["))?K.hasKey(e,r):e.hasOwnProperty(r),o=o&&a);return i&&o}var a=!1;if(_isObj(e)&&t)switch(!0){case 0<(t=""+t).indexOf("&"):a=checkForAll(e,t.replace(/\&/g,","));break;case 0<t.indexOf("|"):a=function checkForAny(e,t){for(var a,n=t.split(","),r="",i=0,o=!1,s=0;s<n.length&&((r=n[s].trim())&&(i++,a=l&&(0<r.indexOf(".")||0<r.indexOf("["))?K.hasKey(e,r):e.hasOwnProperty(r),o=o||a),!o);s++);return i&&o}(e,t.replace(/\|/g,","));break;default:a=checkForAll(e,t)}return a}function _keys(e){var t=[];try{t=Object.keys(e)}catch(e){}return t}function _keysDotted(e){var n,r,i,o=[];return function(e,t){if(t=t||"","object"==typeof e)for(var a in e)i=t.substring(1),n=_isNumStr(a)?"[":".",r=i&&"["==n?"]":"",arguments.callee(e[a],t+n+a+r)&&o.push(i+(i?n:"")+a+r)}(e=e||{}),o}function _each(t,a){if(_isArrLike(t))for(var e=0;e<t.length;e++)a.call(t[e],t[e],e,t);else _keys(t).forEach(function(e){a.call(t[e],t[e],e,t)})}function _map(t,a){var n=[];if(_isArrLike(t))for(var e=0;e<t.length;e++)n.push(a.call(t[e],t[e],e,t));else _keys(t).forEach(function(e){n.push(a.call(t[e],t[e],e,t))});return n}function _every(e,t){var a=!0;if(_isArrLike(e))for(var n=0,r=e.length;a&&n<r;n++)a=!!t.call(e[n],e[n],n,e);else for(var i,o=_keys(e),n=0,r=o.length;a&&n<r;n++)i=o[n],a=!!t.call(e[i],e[i],i,e);return a}function _some(e,t){var a=!1;if(_isArrLike(e))for(var n=0,r=e.length;n<r&&!(a=!!t.call(e[n],e[n],n,e));n++);else for(var i,o=_keys(e),n=0,r=o.length;n<r&&(i=o[n],!(a=!!t.call(e[i],e[i],i,e)));n++);return a}function _filter(t,a){var n=[];if(_isArrLike(t))for(var e=0;e<t.length;e++)a.call(t[e],t[e],e,t)&&n.push(t[e]);else _keys(t).forEach(function(e){a.call(t[e],t[e],e,t)&&n.push(t[e])});return n}function _removeOn(t,a){var n=[];if(_isArrLike(t))for(var e=0;e<t.length;e++)a.call(t[e],t[e],e,t)&&n.push(t.splice(e--,1)[0]);else _keys(t).forEach(function(e){a.call(t[e],t[e],e,t)&&(n.push(t[e]),delete t[e])});return n}function _sortBy(e,i){return _isArrLike(e)&&i?e.sort(function(e,t){var a=_isNumStr(e[i])?+e[i]:e[i],n=_isNumStr(t[i])?+t[i]:t[i],r=typeof a,e=typeof n,t=0;return"string"==r&&"string"==e?((a=a.toUpperCase())<(n=n.toUpperCase())&&(t=-1),n<a&&(t=1)):"number"==r&&"number"==e&&(t=a-n),t}):e}function _zipObj(e,t){var a={};if(_isArrLike(e)&&_isArrLike(t))for(var n=0;n<e.length;n++)a[e[n]]=t[n];return a}function _compress(e){if(K.strZip)return K.strZip(e);for(var t,a={},n=(e+"").split(""),r=[],i=n[0],o=256,s=1;s<n.length;s++)null!=a[i+(t=n[s])]?i+=t:(r.push(1<i.length?a[i]:i.charCodeAt(0)),a[i+t]=o,o++,i=t);r.push(1<i.length?a[i]:i.charCodeAt(0));for(s=0;s<r.length;s++)r[s]=String.fromCharCode(r[s]);return r.join("")}function _getSign(e){return _compress(function _getSignature(e,t){var a=t=t||"",n=typeof e;if("object"==n)for(var r=Object.keys(e).sort(),i=0;i<r.length;i++)a+=_getSignature(e[r[i]],r[i]);else"function"==n?(n=e.name)&&n!==t?a+="F"+n:(t=e.toString(),a+=(n=/function(.*?)\(/.exec(t)[1].trim())?"F"+n:t):a+=e;return a}(e).replace(/\s/g,"_").replace(/\"/g,"d").replace(/\'/g,"s").replace(/\\/g,"b").replace(/\//g,"f").replace(/function/g,"Fn"))}function _isProto(e){return"object"==typeof e&&(e==__proto__||_hasOwnProp(e,"isPrototypeOf")||e.isPrototypeOf(new Object)||e.isPrototypeOf(new Array)||e.isPrototypeOf(new Function)||e.isPrototypeOf(new String)||e.isPrototypeOf(new Number)||e.isPrototypeOf(new Boolean)||e.isPrototypeOf(new Date)||e.isPrototypeOf(new RegExp))}function _isSafeKey(e,t){return!(function _isReservedKey(e){return-1<l.indexOf(e)}(t)||"constructor"===t&&_isFn(e[t]))}function _extend(){var e=(arguments.length?arguments[0]:{})||{};if(_isProto(e))return e;if(arguments.length)for(var t,a=0;a<arguments.length;a++)if(_isObj(t=arguments[a]))for(var n in t)_isSafeKey(e,n)&&_hasOwnProp(t,n)&&(e[n]=t[n]);else _isArr(t)&&(e=_mergeArray.call(null,e,t));return e}function _mergeDeep(){var e=(arguments.length?arguments[0]:{})||{};if(_isProto(e))return e;if(arguments.length)for(var t,a=0;a<arguments.length;a++)if(_isObj(t=arguments[a]))for(var n in t)_isSafeKey(e,n)&&_hasOwnProp(t,n)&&(_isObj(t[n])?e[n]=_mergeDeep(e[n],t[n]):_isArr(t[n])?e[n]=_mergeArray(e[n],t[n]):e[n]=t[n]);else _isArr(t)&&(e=_mergeArray.call(null,e,t));return e}function _mergeArray(){var e=(arguments.length?arguments[0]:[])||[];if(arguments.length)for(var t,a=0;a<arguments.length;a++)if(_isArr(t=arguments[a]))for(var n=0;n<t.length;n++)if(_isUndef(e[n]))e[n]=t[n];else switch(_of(t[n])){case"object":e[n]=_mergeDeep(e[n],t[n]);break;case"array":e[n]=_mergeArray(e[n],t[n]);break;case"undefined":break;default:e[n]=t[n]}return e}function _last(e,t){var a;return _isArrLike(e)&&0<e.length&&(a="number"==typeof t&&1<t?e.slice(-1*t):e[e.length-1]),a}function _clone(e,t){if(t){t=_isArr(e)?[]:!!_isObj(e)&&{};return t&&_extend(t,e)||e}return JSON.parse(JSON.stringify(e))}function _getFullPath4Component(e,t){var a,n=e;return t=(t||"").replace(/[^a-z0-9]/gi,"/"),0<=".{$".indexOf(e[0])&&(e="$"==(e=(a=e.split("/"))[0].replace(/[\{\}]/g,""))||"."==e?t:e.replace(/[\{\$\}]/,""),e=K.defaults.components.inFolder?e+"/":"",a[0]=(K.defaults.components.rootPath+e).trimRightStr("/"),n=a.join("/")),n}K.setObjProperty=function(e,t,a,n){n=n||!1;var r,i,o,s=e,l=0<=(t=""+t).indexOf(".")||t==t.toUpperCase()?t.split("."):t.split(/(?=[A-Z])/),c=t.replace(/[0-9A-Za-z\[\]\?\*\_]/g,"").trim();c&&""!=c&&(l=t.split(c[0]));for(var d="";1<l.length;)_isBlank(r=K.parseKeyStr(l.shift(),n))||(d+=r.replace(/[\?\[\]\*\_]/g,""),s=0<r.indexOf("[")&&r.indexOf("]")==r.length-1?(i=(o=r.substring(0,r.length-1).replace(/\[/g,".").split("."))[0],o=o[1],void 0===s[i]&&(s[i]=[]),o.replace(/[0-9]/g,"")&&(o=o.replace(/[^0-9]/g,""),f.hasOwnProperty(d)?o=f[d]:void 0===s[i][o]&&(f[d]=s[i].length,o=s[i].length)),void 0===s[i][o]&&(s[i][o]={}),s[i][o]):(void 0===s[r]&&(s[r]={}),s[r]));return r=K.parseKeyStr(l.shift(),n),K.appendToObj(s,r,a),e},K.setSimpleObjProperty=function(e,t,a){for(var n,r=e,i=(t=""+t).split(".");1<i.length;)_isBlank(n=K.parseKeyStr(i.shift(),!1))||(void 0===r[n]&&(r[n]={}),r=r[n]);return r[n=K.parseKeyStr(i.shift(),!1)]=a,e},K.objProp=K.objProperty=K.objectProp=K.objectProperty=function(){var e=arguments[0],t=arguments[1],a=arguments[2];return 3==arguments.length?K.setSimpleObjProperty(e,t,a):2==arguments.length?_find(e,t):e},K.extract=function _extract(){var e=V.slice.call(arguments);try{_isObj(e[0])||e.unshift({}),_isStr(e[1])&&(e[1]=e[1].split(","))}catch(e){console.error("Invalid arguments",e)}if(_isObj(e[0])&&_isArr(e[1])){var a,n,r,i,o,s=e[0],t=e[1],l=e.slice(2);return l.unshift(window),_each(t,function(e){if(e=(e||"").trim(),i=!(e&&"@0"!=e),!i&&(/^\@([0-9])+/.test(e)&&((r=n=(e.getRightStr(".")||"").trim())?e=r+":"+e:(_mergeDeep(s,l[K.toInt(e)]),i=!0)),!i)){if(a=e.split(":"),n=(a[0]||"").trim(),i=K.toInt((a[1]||"").split(".")[0]),r=((a[1]||"").getRightStr(".")||"").trim(),n=n||r,o=r?_find(l[i],r):i?l[i]:{},n.endsWithStr("\\+")){n=n.trimRightStr("+");var t=_find(s,n);switch(_of(t)){case"object":_isObj(o)&&(o=_mergeDeep({},t,o));break;case"array":o=_isArr(o)?t.concat(o):t.push(o)}}K.setSimpleObjProperty(s,n,o)}}),s}console.error("Invalid arguments.")},K.setElValue=function(e,t){var a=H(_$qrySelector(e));switch((e=a.get(0)).tagName.toUpperCase()){case"INPUT":switch(e.type.toLowerCase()){case"text":case"password":case"hidden":case"color":case"date":case"datetime":case"datetime-local":case"email":case"month":case"number":case"search":case"tel":case"time":case"url":case"range":case"button":case"submit":case"reset":a.val(t),a.isEnabled()&&a.trigger("keyup");break;case"checkbox":case"radio":e.checked=e.value.equalsIgnoreCase(t),e.checked&&a.isEnabled()&&a.trigger("click")}break;case"SELECT":K.selectOptionForValue(e,t),a.isEnabled()&&a.trigger("change");break;case"TEXTAREA":a.val(t),a.isEnabled()&&a.trigger("keyup");break;default:a.html(K.sanitizeXSS(t)),a.val(t),a.isEnabled()&&a.trigger("keyup")}},K.getElValue=function(e,t){if(e=H(_$qrySelector(e)).get(0)){var a,n,r,i;switch(e.tagName.toUpperCase()){case"INPUT":switch(e.type.toLowerCase()){case"checkbox":n=H(e).data("unchecked"),r="true"==e.value||"false"!=e.value&&e.value,a=e.checked?r:void 0===n?"":n;break;case"radio":a=e.checked?e.value:"";break;default:a=H(e).val()}break;case"SELECT":a=_map(H(e).find("option:selected"),function(e){return e.value}).join(",");break;case"TEXTAREA":a=H(e).val();break;default:a=t?H(e).text():H(e).html()}return _isBlank(a)&&e.hasAttribute("data-default")&&("@"===(i=_attr(e,"data-default")||"")[0]?_isFn(i=_find(c,i.replace(/^[@\s]+/,""),""))&&_isUndef(i=i.call(e,e))&&(i=""):"@"===i[1]&&(i=i.trim()),a=i),a}},K.serialize=function(e,t,a){_isBool(e)&&(a=e,e=""),_isBool(t)&&(a=t,t="");var n,r,i={},t=t?'[data-serialize-context*="'+t+'"]':"";return H(e=e||"body").find("[data-serialize]"+t+",input[name]"+t+",select[name]"+t+",textarea[name]"+t).each(function(e,t){r=H(t).data(),n=t.name||r.serialize,r=r.serializeType?r.serializeType.equalsIgnoreCase("text"):a,r=K.getElValue(t,r),i.hasOwnProperty(n)?_isBlank(r)||(_isBlank(i[n])?i[n]=r:_isArr(i[n])?i[n].push(r):i[n]=[i[n],r]):i[n]=r}),i},K.serializeToQueryString=function(e,t){return K.toQueryString(K.serialize(e,t))},K.serializeDisabled=function(e){var t="";return H(e).find("[disabled][name]").each(function(){t+=(t?"&":"")+H(this).attr("name")+"="+K.getElValue(this)}),t},K.serializeForms=function(e,t){var a,n=H(e).serialize();return H(e).find("input[data-unchecked]:checkbox:enabled:not(:checked)[name]").each(function(){a=H(this).data("unchecked"),n+=(n?"&":"")+H(this).attr("name")+"="+(void 0===a?"":a)}),t&&(e=K.serializeDisabled(e),n+=(n&&e?"&":"")+e),n},K.queryStringToJson=K.queryStringToObject=function(e){var t={},a=e||location.search,n=(""+a).indexOf("?"),e=(""+a).indexOf("&");return a&&0<a.length&&0<=n&&(0==n||n<e)&&(a=a.substring(n+1)),_each(a.split("&"),function(e){(e=e.split("="))[0]&&K.appendToObj(t,e[0],decodeURIComponent(e[1]||""))}),t},K.toQueryString=K.ObjectToQueryString=K.objectToQueryString=K.JsonToQueryString=K.jsonToQueryString=function _toQueryString(n){return _isObj(n)?_keys(n).reduce(function(e,t,a){return[e,0===a?"":"&",t=encodeURIComponent(t),"=",_isArr(n[t])?_map(n[t],function(e){return encodeURIComponent(e)}).join(","):encodeURIComponent(n[t])].join("")},""):""},K.serializeUncheckedCheckboxes=function(e,t){return H(e).serializeUncheckedCheckboxes(t)},K.serializeFormToJSON=K.serializeFormToObject=function(e,t,a,n){return H(e).serializeFormToJSON(t,a,n)},K.serializeFormToSimpleJSON=K.serializeFormToSimpleObject=function(e,t,a){return H(e).serializeFormToSimpleJSON(t,a)},K.findSafe=K.findInObj=K.findInObject=K.findIn=K.find=_find,K.keys=_keys,K.has=K.hasKey=_hasKey,K.hasKeys=function _spa_hasKeys(e,t){return _isObjHasKeys(e,t,!0)},K.hasPrimaryKeys=function _spa_hasPrimaryKeys(e,t){return _isObjHasKeys(e,t)},K.keysDottedAll=function _keysDottedAll(e){return(e=_keysDotted(e))&&!_isEmpty(e)&&(e=K.toDottedPath(e.join(",")).split(",")),e},K.keysDotted=_keysDotted,K.keysCamelCase=function _keysCamelCase(e){return _map(_keysDotted(e),function(e){e=e.replace(/\./g," ").toProperCase().replace(/ /g,"");return e[0].toLowerCase()+e.substring(1)})},K.keysTitleCase=function _keysTitleCase(e){return _map(_keysDotted(e),function(e){return e.replace(/\./g," ").toProperCase().replace(/ /g,"")})},K.keys_=function _keysLodash(e){return _map(_keysDotted(e),function(e){return e.replace(/\./g,"_")})},K.strZip,K.strUnzip,K.map=_map,K.uniq=function _uniq(a){return _filter(a,function(e,t){return a.indexOf(e)==t})},K.omit=function _omit(t,a){var n={};return _isArrLike(a)&&a.length?(_isObj(t)&&_each(_keys(t),function(e){a.indexOf(e)<0&&(n[e]=t[e])}),n):t},K.union=function _union(){for(var e,t={},a=0;a<arguments.length;a++)if(_isArrLike(e=arguments[a]))for(var n=0;n<e.length;n++)t[_getSign(e[n])]=e[n];else t[_getSign(e)]=e;W.log(">>union-collection[keys, obj, src]:",_keys(t),t,arguments);var r,i=[];for(r in t)t.hasOwnProperty(r)&&i.push(t[r]);return t=null,i},K.filter=_filter,K.sortBy=_sortBy,K.zipObj=_zipObj,K.removeOn=_removeOn,K.each=K.forEach=_each,K.every=K.forEvery=_every,K.some=K.forSome=_some,K.indexOf=function _indexOf(e,t){var a=-1;if(_isArrLike(e)&&e.length&&_isObj(t)){var n,r=_keys(t);if(r.length)for(var i=0;i<e.length;i++){for(var o=0;o<r.length&&(n=t[r[o]]===e[i][r[o]]);o++);if(n){a=i;break}}}return a},K.clone=_clone,K.extend=_extend,K.merge=_mergeDeep,Object.defineProperties(V,{__now:{value:function(){return JSON.parse(JSON.stringify(this))}},__clone:{value:function(){return _clone(this,!0)}},__toObject:{value:function(a){var n={};return this.forEach(function(e,t){a?n[e]=t:n[t]=e}),n}},__unique:{value:function(){return this.filter(function(e,t,a){return a.indexOf(e)===t})}},__rotate:{value:function(e){if(0<(e=e||1))for(;e--;)this.push(this.shift());else if(e<0)for(;e++;)this.unshift(this.pop());return this}},__has:{value:function(e,t){var a;function optionsHas(e){return 0<=t.indexOf(e)}if(t=(t||"").trim()){t.indexOf("i")&&_isStr(e)&&(e=e.toLowerCase());for(var n=0;n<this.length;n++){var r=this[n];switch(t.indexOf("i")&&_isStr(r)&&(r=r.toLowerCase()),!0){case optionsHas("b"):case optionsHas("^"):a=optionsHas("~")?e.beginsWithStr(r):r.beginsWithStr(e);break;case optionsHas("e"):case optionsHas("$"):a=optionsHas("~")?e.endsWithStr(r):r.endsWithStr(e);break;case optionsHas("c"):case optionsHas("*"):a=optionsHas("~")?0<=e.indexOf(r):0<=r.indexOf(e);break;case optionsHas("<"):a=r<e;break;case optionsHas("<="):a=r<=e;break;case optionsHas(">"):a=e<r;break;case optionsHas(">="):a=e<=r;break;default:a=r==e}if(a)break}}else a=0<=this.indexOf(e);return a}},__last:{value:function(e){return _last(this,e)}}}),Object.defineProperties(o,{__now:{value:function(){return JSON.parse(JSON.stringify(this))}},__clone:{value:function _obj_clone(){return _clone(this,!0)}},__keys:{value:function _obj_keys(e){return e?_keysDotted(this):Object.keys(this)}},__keysAll:{value:function _obj_keysAll(){return _keysDotted(this)}},__hasKey:{value:function _obj_hasKey(e){return K.hasKey(this,e)}},__hasKeys:{value:function _obj_hasKeys(e){return _isObjHasKeys(this,e,!0)}},__hasPrimaryKeys:{value:function _obj_hasPrimaryKeys(e){return _isObjHasKeys(this,e)}},__valueOf:{value:function _obj_getValueOf(e,t){return _find(this,e,t)}},__merge:{value:function _obj_merge(){return V.unshift.call(arguments,this),_mergeDeep.apply(void 0,arguments)}},__stringify:{value:function(){return JSON.stringify(this)}},__toQueryString:{value:function(){return K.toQueryString(this)}},__extract:{value:function(){return V.unshift.call(arguments,this),K.extract.apply(this,arguments)}}});var m=["target","template","templateCache","templateScript","sanitizeApiXss","templateUrl","templateUrlMethod","templateUrlParams","templateUrlPayload","templateUrlHeaders","onTemplateUrlError","style","styleCache","styles","stylesCache","scripts","scriptsCache","require","dataPreRequest","data","skipDataBind","dataCollection","dataUrl","dataUrlMethod","dataUrlParams","dataUrlHeaders","defaultPayload","stringifyPayload","dataParams","dataType","dataModel","dataCache","dataUrlCache","dataDefaults","onDataUrlError","onError","dataValidate","dataProcess","dataPreProcessAsync","renderMode","onRender","onRefresh","onRemove","renderCallback","refreshCallback","events"],h=m.map(function(e){return"try{(typeof _"+e+'!="undefined")&&(__def$props__.'+e+"=_"+e+")}catch(e){}"}).join(";")+";var _spa$prop={};try{ extend(_spa$prop, props || {}); }catch(e){ try{ extend(_spa$prop, prop || {}); }catch(e){ try{ extend(_spa$prop, $props || {}); }catch(e){ try{ extend(_spa$prop, __spa$publicProp__ || {}); }catch(e){}; }; }; };",g=(d?"var":"const")+" render=spa.$render, refresh=spa.$refresh, merge=spa.merge, extend=spa.extend,export$Props=function(o){spa.extend(__spa$publicProp__,o||{});}, export$Prop=function(k,v){export$Props({k:v});},exportProps=export$Props, extendProps=export$Props, exportProp=export$Prop, extendProp=export$Prop;";function _spaComponentScriptHandle(e,t){var a,n,r,i,o,s,l;e.trim()&&(i=r=s=n=a="",o=/spa\.\$extend\s*\(/g.test(e),(l=(K.defaults.components.functional||/^\s*\/\/\s*@(spaComponent|spa\$)\s*/.test(e))&&!o)&&(o=e.substring(0,e.indexOf("\n")).trim(),/^\s*\/\/\s*@(spaComponent|spa\$):\s*/.test(o)?s=o.substring(o.indexOf(":")+1).trim():(s=t.substring(0,t.indexOf(".js")).replace(new RegExp(".*"+K.defaults.components.rootPath+"(.*)"),"$1"),K.defaults.components.inFolder&&(s=s.substring(0,s.lastIndexOf("/")))),s&&(r=s.replace(/\//g,"_"),i=s&&" __spa$"+r,function verifyPropsInGlob(){var t=[];m.forEach(function(e){c.hasOwnProperty("_"+e)&&t.push("_"+e)}),c.hasOwnProperty("prop")&&t.push("prop"),c.hasOwnProperty("props")&&t.push("props"),c.hasOwnProperty("$props")&&t.push("$props"),t.length&&console.warn("Found reserved spaComponent properties[ "+t.join(", ")+" ] in global scope.")}(),a='var _spa$="'+s+'", __spa$publicProp__={};'+(d?"var":"const")+" __def$props__={};"+g+"\n/*--- ---*/\n\n",n="\n\n/*--- ---*/\nif(!spa.is$Loaded(_spa$)){"+h+"spa.$(_spa$, extend(__def$props__, _spa$prop));}")),t="",((s=p&&(l||/import (.*) from /g.test(e)))||/async |await /g.test(e))&&(t=d?"":"async ",K.componentsAsync[r]=1),_attr(l=document.createElement("script"),"id","js-"+r+_now()),K.defaults.csp.nonce&&_attr(l,"nonce",K.defaults.csp.nonce),s?(_attr(l,"type","module"),l.text=a+e+n):l.text="("+t+"function"+i+"(){\n"+a+e+n+"\n})();",document.head.appendChild(l).parentNode.removeChild(l))}function _cachedScript(e,t){return W.log("Ajax for script:",e,"options:",t),!(e=_getFullPath4Component(e,t?t.spaComponent:"")).endsWithStrIgnoreCase(".js")&&e.indexOf("?")<0&&(e+=K.defaults.components.scriptExt),(t=t||{}).hasOwnProperty("cache")||(t.cache=!0),t.hasOwnProperty("dataType")||(t.dataType="javascript"),t=_extend(t,{url:e}),W.info("Loading Script('"+e+"') ..."),ue(t)}K.is$Loaded=function _is$Loaded(e){return!!K.components[e.replace(/\//g,"_")]},K.componentsAsync={},K.addScriptTag=function(e,t){var a;e=e.replace(/#/,""),W.group("spaAddScriptTag"),_isElementExist("#spaScriptsContainer")||(W.info("#spaScriptsContainer NOT Found! Creating one..."),H("body").append("<div id='spaScriptsContainer' style='display:none' rel='Dynamic Scripts Container'></div>")),_isElementExist("#"+e)?W.info("script ["+e+"] already found in local."):(W.info("script ["+e+"] NOT found. Added script tag with src ["+t+"]"),a=t?' src="'+t+'"':"",t=K.defaults.csp.nonce?' nonce="'+K.defaults.csp.nonce+'"':"",H("#spaScriptsContainer").append('<script id="'+e+'" type="text/javascript"'+a+t+"><\/script>")),W.groupEnd("spaAddScriptTag")},K.addStyle=function(e,t){e=e.replace(/#/,""),W.group("spaAddStyle"),_isElementExist("#spaStylesContainer")||(W.info("#spaStylesContainer NOT Found! Creating one..."),H("body").append("<div id='spaStylesContainer' style='display:none' rel='Dynamic Styles Container'></div>")),_isElementExist("#"+e)?W.info("style ["+e+"] already found in local."):(W.info("style ["+e+"] NOT found. Added link tag with href ["+t+"]"),H("#spaStylesContainer").append("<link id='"+e+"' rel='stylesheet' type='text/css' href='"+t+"'/>")),W.groupEnd("spaAddStyle")},K.loadScript=function(a,n,e,t,r){return a=a.replace(/#/,""),e=e||!1,t=t||[],W.group("spaScriptsLoad"),_isBlank(n)?W.error("script path ["+n+"] for ["+a+"] NOT defined."):e?K.addScriptTag(a,n):(W.info("ajaxQ for script: ",n),t.push(_cachedScript(n,r).done(function(e,t){W.info("Loaded script ["+a+"] from ["+n+"]. STATUS: "+t)}))),W.groupEnd("spaScriptsLoad"),t},K.getComponentsFullPath=function(e){return _map(e=K.strToArray(_toObj(e)),function(e){return K.defaults.components.rootPath+(K.defaults.components.inFolder||/[^a-z0-9]/gi.test(e)?e:"")+"/"+function _getComponentFileName(e){if(/[^a-z0-9]/gi.test(e)){var t=e.split(/[^a-z0-9]/gi);return t[t.length-1]}return e}(e)+K.defaults.components.scriptExt})},K.loadComponents=function(e,t,a){e=_filter(K.strToArray(_toObj(e)),function(e){return!K.components.hasOwnProperty(e.replace(/[^a-z0-9]/gi,"_"))}),e=K.getComponentsFullPath(e);K.loadScripts(e,t,a)},K.loadScripts=function(e,t,a){var n;_isBlank(e=K.strToArray(_toObj(e)))||(n=[],_each(e,function(a){n.push(_cachedScript(a,{dataType:"spacomponent"}).done(function(e,t){W.info("Loaded script from ["+a+"]. STATUS: "+t)}).fail(function(){W.info("Failed Loading script from ["+a+"].")}))}),ce.apply(H,n).then(function(){K.renderUtils.runCallbackFn(t)}).fail(function(){K.renderUtils.runCallbackFn(a)}))},K.loadScriptsSync=function(e,t,a){var n,r;_isBlank(e=K.strToArray(_toObj(e)))?K.renderUtils.runCallbackFn(t):(n=!0,(r=e.shift())?(/^~/.test(r)&&(n=!1,r=r.substring(1)),W.info("Load script from   ["+r+"], cache:",n),_cachedScript(r,{cache:n}).done(function(){W.info("Loaded script from ["+r+"]"),K.loadScriptsSync(e,t,a)}).fail(function(){console.error("Failed Loading script from ["+r+"].",arguments),K.renderUtils.runCallbackFn(a)})):K.loadScriptsSync(e,t,a))},K.loadStyle=function(a,n,e,t){var r;return a=a.replace(/#/,""),e=!!e,t=t||[],W.group("spaStylesLoad"),_isBlank(n)?W.error("style path ["+n+"] for ["+a+"] NOT defined."):(r=!e,e&&(H("#"+a,"head").length?W.info("Style('"+n+"') already loaded."):r=!0),r&&(W.info("ajaxQ for style:",n),t.push(function _cachedStyle(a,e,t){var n=H("#"+a,"head");return(t=t||{}).hasOwnProperty("cache")||(t.cache=!0),n.length||(t.cache=K.defaults.components.offline),t=_extend(t,{dataType:"text",url:e,success:function(e){n.remove();var t=K.defaults.csp.nonce?' nonce="'+K.defaults.csp.nonce+'"':"";H("head").append('<style id="'+a+'" type="text/css"'+t+">"+e+"</style>")}}),W.info("Loading style('"+e+"') ... "),ue(t)}(a,n,{cache:K.defaults.components.offline}).done(function(e,t){W.info("Loaded style ["+a+"] from ["+n+"]. STATUS: "+t)})))),W.groupEnd("spaStylesLoad"),t},K.addTemplateScript=function(e,t,a){e=e.replace(/#/,""),a=a||"x-template",_isElementExist("#spaViewTemplateContainer")||(W.info("#spaViewTemplateContainer NOT Found! Creating one..."),H("body").append("<div id='spaViewTemplateContainer' style='display:none' rel='Template Container'></div>")),W.info("Adding <script id='"+e+"' type='text/"+a+"'>");var n="_BlockedScript_";t=t.replace(/<(\s)*script/gi,"<"+n+' src-ref="'+e+'"').replace(/<(\s)*(\/)(\s)*script/gi,"</"+n).replace(/<(\s)*link/gi,"<_LINKTAGINTEMPLATE_").replace(/<(\s)*(\/)(\s)*link/gi,"</_LINKTAGINTEMPLATE_");n=K.defaults.csp.nonce?' nonce="'+K.defaults.csp.nonce+'"':"";H("#spaViewTemplateContainer").append('<script id="'+e+'" type="text/'+a+'"'+n+">"+t+"<\/script>")},K.updateTemplateScript=function(e,t,a){e=e.replace(/#/,"");var n=H("#spaViewTemplateContainer").find("#"+e);n.length&&n.remove(),K.addTemplateScript(e,t,a)},K.loadTemplate=function(n,r,i,e,t,a,o){var s,l,c;return n=n.replace(/#/g,""),r="."===(r=r.ifBlankStr("inline").trimStr())||"#"===r?"inline":r,i=i||"x-template",e=e||"#DummyInlineTemplateContainer",t=t||[],o=o||{},W.group("spaTemplateAjaxQue"),_isElementExist("#"+n)?(s=H("#"+n),a?(W.info("Reload Template["+n+"] of ["+i+"]"),s.remove(),t=K.loadTemplate(n,r,i,e,t,a,o)):_isBlank(s.html())?(W.warn("Template["+n+"] of ["+i+"] script found EMPTY!"),_isBlank(l=""+s.attr("path"))||(i=(s.attr("type")||"").ifBlankStr(i).toLowerCase().replace(/text\//gi,""),W.info("prepare/remove to re-load Template["+n+"]  of ["+i+"] from external path: ["+l+"]"),s.remove(),t=K.loadTemplate(n,l,i,e,t,a,o))):W.info("Template["+n+"]  of ["+i+"] already found in local.")):(W.info("Template["+n+"] of ["+i+"] NOT found. Source ["+r+"]"),r&&"undefined"==r?(K.addTemplateScript(n,"",i),W.info("Loaded Empty Template["+n+"] of ["+i+"]")):r.equalsIgnoreCase("inline")||r.beginsWithStr("#")?(a=r.equalsIgnoreCase("inline")?e:r,_isBlank(e=(c=H(a)).html())?W.error("Template["+n+"] of ["+i+"] NOT defined inline in ["+a+"]."):(K.addTemplateScript(n,e,i),r.equalsIgnoreCase("inline")&&c.html(""))):r.equalsIgnoreCase("none")?W.info("Template["+n+"] of ["+i+"] defined as NONE. Ignoring template."):r.equalsIgnoreCase("script")?W.error("Template["+n+"] of ["+i+"] NOT defined in <script>."):(c=String(o.method||"get").toLowerCase(),o.params&&(r=K.api.url(r,o.params)),W.info(">>>>>>>>>> Making New Template Request"),o=ue({url:r,method:c,headers:o.headers,data:o.payload,cache:K.defaults.components.offline,dataType:"html",onTmplError:o.onError,success:function(e){K.addTemplateScript(n,e,i),W.info("Loaded Template["+n+"] of ["+i+"] from ["+r+"]")},error:function(e,t,a){this.onTmplError&&_isFn(this.onTmplError)&&this.onTmplError.call(this,e,t,a),W.error("Failed Loading Template["+n+"] of ["+i+"] from ["+r+"]. ["+t+":"+a+"]")}}),W.info("ajaxQ for template: ",r),t.push(o))),W.groupEnd("spaTemplateAjaxQue"),t},K.urlParams=function(e){e=(e=e||window.location.search||"").beginsWithStr("\\?")||e.indexOf("//")<7?e.substring(e.indexOf("?")+1):e;var n={};return e.replace(/([^&=]+)=?([^&]*)(?:&+|$)/g,function(e,t,a){(n[t]=n[t]||[]).push(decodeURIComponent(a))}),_each(n,function(e,t){n[t]=_isArr(e)&&1==e.length?e[0]:e}),n},K.urlParam=function(e,t){return K.urlParams(t)[e]};var y="";function _getAboluteUrl(e,t){return(e||"").trimRightStr("/")+"/"+(t||"").trimLeftStr("/")}K.getLocHash=function(e){var t=(y||window.location.hash).replace("#","");return t||_isUndef(e)||"#"==e||(t=window.location.pathname.replace(/(\/)*(index|default)\.([a-z])*/i,"").replace(e.replace(/\s*/g,"").trimRightStr("/"),"")),t},K.urlHash=function(e,t){var a=K.getLocHash(t);return(e||_isNum(e))&&(t=(a=a.beginsWithStr("/")?a.substring(a.indexOf("/")+"/".length):a).length?a.split("/"):[],_isNum(e)?a=e<0?t[t.length-1]:t&&t.length>e?t[e]:"":_isArr(e)?a=0===e.length?t:_zipObj(e,t):_isStr(e)&&"?"==e&&(a=a.containsStr("\\?")?K.getOnSplit(a,"?",1):"")),a},K.urlHashFull=function(e){return _getAboluteUrl(e=e||"#",K.urlHash("",e))},K.hashParam=function(e){var t=""+K.urlHash("?");return void 0===e||_isBlank(t)||(t=K.urlParam(""+e,t)),t};var S,O={},k={},C=0;function _isFailedLang(e){return k.hasOwnProperty(e.replace(/[^a-z]/gi,""))}function _docLang(){return document.querySelector("html").getAttribute("lang")}function _browserLang(e){var t=navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage||_docLang()||"en";return e?(t||"").substring(0,2).toLowerCase():t}function _init_i18n_Lang(e){var t=function _normalizeLanguageCode(e){return(!e||e.length<2)&&(e=_browserLang()),3<(e=e.toLowerCase().replace(/-/,"_")).length&&(e=e.substring(0,3)+e.substring(3).toUpperCase()),e}((e=_extend({reset:!0,language:"",url:"",method:"GET",path:"language/",prefix:"Language_",ext:".txt",cache:!0,async:!0,callback:null},e)).language),a=e.path+e.prefix,n=e.ext||".properties",r="";5<=t.length?r=t.substring(0,5):2<=t.length&&(r=t.substring(0,2));t=_extend({},e.urlParams||{},{lang:r.replace(/_/g,"-")}),n=a+(a.indexOf("{")<0?r:"")+n;!function _loadAndParseLangFile(e,t){W.info("Attempt to get language properties from:",e,t);var a={url:e,method:(t.method||"GET").toUpperCase(),async:t.async,cache:t.cache,dataType:"text",success:function(e){C=0,e?(t.reset&&(W.info("Resetting previous language dictionary."),O={}),function _updateLangDictionary(t){var e,n,r,i,o=[];if(t&&/^\s*{/.test(t)){try{e=JSON.parse(t),W.log("Lang Properties Object:",e)}catch(e){console.warn("Error Parsing Language Properties JSON.",e,"\n"+t)}e&&function(e,t){if(t=t||"","object"==typeof e)for(var a in e)r=t.substring(1),n=_isNumStr(a)?"[":".",i=r&&"["==n?"]":"",arguments.callee(e[a],t+n+a+i)||"object"==typeof e[a]||(i=r+(r?n:"")+a+i,o.push(i+"="+e[a]))}(e)}else o=(""+t).split(/\n/);W.log("Lang Properties Array:",o);for(var a=/(\\u.{4})/gi,s=0;s<o.length;s++)if(o[s]=o[s].replace(/^\s\s*/,"").replace(/\s\s*$/,""),0<o[s].length&&"#"!=o[s].match("^#")){var l=o[s].split("=");if(0<l.length){for(var c=decodeURI(l[0]).replace(/^\s\s*/,"").replace(/\s\s*$/,""),d=1==l.length?"":l[1];"\\"==d.match(/\\$/);)d=d.substring(0,d.length-1),d+=o[++s].replace(/\s\s*$/,"");for(var p=2;p<l.length;p++)d+="="+l[p];var u=(d=d.replace(/^\s\s*/,"").replace(/\s\s*$/,"")).match(a);if(u)for(var f=0;f<u.length;f++)d=d.replace(u[f],function unicodeToChar(e){var t=[],e=parseInt(e.substring(2),16);0<=e&&e<Math.pow(2,16)&&t.push(e);for(var a="",n=0;n<t.length;++n)a+=String.fromCharCode(t[n]);return a}(u[f]));O[c]=d}}S=!0}(e),t.callback&&t.callback()):console.warn("Received empty language properties.")},error:function(){C++,k[t.language.replace(/[^a-z]/gi,"")]=e,console.warn("Failed to get language properties from: "+e),t.callback&&t.callback()}},n=t.data||t.payload;_isBlank(n)||(a.data=n),t.headers&&(a.data=t.headers),ue(a)}(K.api.url(e.url||n,t),e)}function _i18nTextValue(e,t){var a,n,r=K.i18n.value(e);t&&_is(t,"object|array")&&(n=a="",_each(_keys(t),function(e){a=""+t[e],n=a.trim(),a&&(n.beginsWithStrIgnoreCase("i18n:")||n.beginsWithStrIgnoreCase("@"))&&(a=K.i18n.value(n)),r=r.replace(new RegExp("{\\s*("+e.trim()+")\\s*}","g"),a)}));var i,o=[e];return function parseMessage(t){var e=K.extractStrBetweenEx(t,"{","}",!0);return _isBlank(e)?t:(_each(e,function(e){(i=i||0<=o.indexOf(e))||(o.push(e),t=t.replace(new RegExp("{\\s*("+e.trim()+")\\s*}","g"),K.i18n.value(e)))}),i?(console.error("i18nKey circular issue found:",o.join(" > ")),t):parseMessage(t))}(r)}function _setLang(e,t,a){var n;_isObj(e)&&(e=(t=e).lang||""),e&&"*"!=e||(e=_docLang()||_browserLang(1)),e&&(K.i18n.onLangChange&&(e=_isStr(a=_isFn(n=K.i18n.onLangChange)?n.call(void 0,e,a):e)?a:e),H("html").attr("lang",e.replace("_","-")),K.i18n.setLanguage(e,_mergeDeep({},K.defaults.lang,_find(window,"app.conf.lang",{}),_find(window,"app.lang",{}),t||{})))}function _pipeSort(e,t){var a,n=e;if(_isArr(e))n=e.sort(),t&&(n=n.reverse());else if(_isStr(e)){switch(!0){case 0<=e.indexOf(","):a=",";break;case 0<=e.indexOf(" "):a=" "}a&&(n=e.split(a).sort().join(a),t&&(n=n.reverse()))}return n}function _pipeLower(e){return(""+e).toLowerCase()}function _pipeUpper(e){return(""+e).toUpperCase()}function _pipeTitle(e){return(""+e).toTitleCase()}function _pipeSortDesc(e){return _pipeSort(e,!0)}function _defaultAttr(e){var t="html";switch(e.tagName.toUpperCase()){case"INPUT":switch(e.type.toLowerCase()){case"checkbox":case"radio":t="check";break;default:t="value"}break;case"TEXTAREA":t="value";break;case"SELECT":t="options"}return t}function _unmaskHandlebars(e){return e.replace(/(\/)*&gt;/g,">").replace(/ _XHBTINSPA_--(>|&gt;)/gi,"").replace(/(>|&gt;)(<|&lt;)!--_XHBTINSPA_/gi,"").replace(/<IMG-X-TMP /gi,"<img ").replace(/<IFRAME-X-TMP /gi,"<iframe ").replace(/<\/IFRAME-X-TMP/gi,"</iframe")}K.i18n=_i18nTextValue,K.i18n.loaded=!1,K.i18n.off,K.i18n.settings={reset:!0,url:"",method:"GET",path:"language/",prefix:"Language_",ext:".txt"},K.i18n.browserLang=_browserLang,K.i18n.setLanguage=function(t,a){t=(t||_browserLang()).replace(/-/g,"_"),a=_extend(K.i18n.settings,a),_init_i18n_Lang({language:t,reset:a.reset,url:a.url,method:a.method,urlParams:a.urlParams,headers:a.headers,data:a.data||a.payload,target:a.target||"",prefix:a.prefix,path:a.path,ext:a.ext,cache:a.cache,async:a.async,callback:function(){var e;_isElementExist("#i18nSpaRunTime")||H("body").append('<div id="i18nSpaRunTime" style="display:none"></div>'),S=void 0===S?!_isEmptyObj(O):S,K.i18n.loaded=K.i18n.loaded||S,1<t.length&&!S&&(e=(2<t.length?t.substring(0,2):_browserLang(1)).toLowerCase(),t!=e?_isFailedLang(e)||(console.warn("Error Loading Language File ["+t+"]. Attempt to get default language ["+e+"]."),K.i18n.setLanguage(e,a)):"en"!=t&&(_isFailedLang("en")||(console.warn("Error Loading default language ["+t+"]. Attempt to get [en]."),K.i18n.setLanguage("en",a)))),K.i18n.apply(a.target),a.callback&&a.callback(S)}})},K.i18n.setLang=function(e,t){_isObj(e)&&(e=(t=e).lang||""),_setLang(e,t)},K.i18n.updateLang=function(e,t){_isObj(e)&&(e=(t=e).lang||""),_setLang(e,_mergeDeep({reset:!1},t||{}))},K.i18n.value=function(e){return K.i18n.loaded||window.Liferay?((e=(""+e).replace(/i18n:/i,"").trim()).beginsWithStrIgnoreCase("@")&&(e=e.substring(1).trim(),e=_find(window,e,e)),function _i18nValue(e){var t=e;try{t=(""+(!K.i18n.loaded&&window.Liferay?Liferay.Language.get(e):function _i18nRaw(e){var t,a=O[e];if(_is(a,"null|undefined"))return e;if("string"==typeof a){for(r=0;-1!=(r=a.indexOf("\\",r));)a="t"==a.charAt(r+1)?a.substring(0,r)+"\t"+a.substring(2+r++):"r"==a.charAt(r+1)?a.substring(0,r)+"\r"+a.substring(2+r++):"n"==a.charAt(r+1)?a.substring(0,r)+"\n"+a.substring(2+r++):"f"==a.charAt(r+1)?a.substring(0,r)+"\f"+a.substring(2+r++):"\\"==a.charAt(r+1)?a.substring(0,r)+"\\"+a.substring(2+r++):a.substring(0,r)+a.substring(r+1);for(r=0;r<a.length;)if("'"==a.charAt(r))if(r==a.length-1)a=a.substring(0,r);else if("'"==a.charAt(r+1))a=a.substring(0,r)+a.substring(++r);else{for(t=r+2;-1!=(t=a.indexOf("'",t));){if(t==a.length-1||"'"!=a.charAt(t+1)){a=a.substring(0,r)+a.substring(r+1,t)+a.substring(t+1),r=t-1;break}a=a.substring(0,t)+a.substring(++t)}-1==t&&(a=a.substring(0,r)+a.substring(r+1))}else r++}if(0==a.length)return"";if(1==a.length&&"string"==typeof a[0])return a[0];for(var n="",r=0;r<a.length;r++)"string"==typeof a[r]?n+=a[r]:n+="{"+a[r]+"}";return n}(e))).trim()}catch(e){console.warn("i18n lookup error:",e)}return t}(e)):(W.info("jQ-xsr.i18n module not found. Skipping i18n value lookup."),e)},K.i18n.text=_i18nTextValue,K.i18n.update=function(e,t,a){t=t||"";var n,r,i,o=H(e),s=o.attr("data-i18n")||"",l="",l=_isBlank(s)||0==t.indexOf(":")||0==t.indexOf("=")||s.indexOf(":")<=0&&t.indexOf(":")<=0?t.trimLeftStr(":").trimLeftStr("="):(n=0<s.indexOf(":")?_toObj(s||{}):{html:s.trimLeftStr(":").replace(/'/g,"")},r=0<t.indexOf(":")?_toObj(t||{}):{html:t.trimLeftStr(":").replace(/'/g,"")},_each(_keys(n),function(t){_each(t.split("_"),function(e){e&&(n[e]=n[t])})}),_each(_keys(r),function(t){_each(t.split("_"),function(e){e&&(r[e]=r[t])})}),_each(_keys(i=_mergeDeep({},n,r)),function(e){e.indexOf("_")<=0&&(l+=e+":'"+i[e]+"',")}),l.trimRightStr(","));return o.attr("data-i18n",l).data("i18n",l),(a||_isUndef(a))&&K.i18n.apply(e),o},K.i18n.apply=K.i18n.render=function(e,t){if(!K.i18n.off){t=t||"";var a=(e=e||"html").beginsWithStr("<");a&&(H("#i18nSpaRunTime").html(e),e="#i18nSpaRunTime");var n='[data-i18n]:not([data-i18n=""])',r=H(e).find(t+n);return(r.length||(r=H(e).filter(t+n)),!r.length||K.i18n.loaded||C)?(r.each(function(e,t){var n=H(t),t=n.data("i18n")||"";t&&!t.containsStr(":")&&(t="html:'"+t+"'");var r=_toObj(t||"{}"),i=r.data||r.i18ndata;i?(delete r.data,delete r.i18ndata):i=_toObj(n.data("i18nData")||"{}"),r&&!_isEmptyObj(r)&&_each(_keys(r),function(e){var t=r[e],a=K.i18n.text(t,i);_each(e.split("_"),function(e){switch(e.toLowerCase()){case"html":n.html(K.sanitizeXSS(a));break;case"text":n.text(a);break;default:n.attr(e,a)}})})}),a?H("#i18nSpaRunTime").html():void 0):(W.info("Language is not initialized! Attempt to initialize."),void _setLang(_docLang()||_browserLang(1)))}},K.pipes={trimLeft:function(e){return(""+e).trimLeftStr()},trimRight:function(e){return(""+e).trimRightStr()},normalize:function(e){return(""+e).normalizeStr()},lower:_pipeLower,lowerCase:_pipeLower,toLower:_pipeLower,upper:_pipeUpper,upperCase:_pipeUpper,toUpper:_pipeUpper,title:_pipeTitle,titleCase:_pipeTitle,toTitleCase:_pipeTitle,capitalize:function(e){return(""+e).capitalize()},unCapitalize:function(e){return(""+e).unCapitalize()},not:function(e){return!e},sort:_pipeSort,sortAsc:_pipeSort,sortDesc:_pipeSortDesc,asc:_pipeSort,desc:_pipeSortDesc,reverse:function(e){var t,a=e;if(_isArr(e))a=e.reverse();else if(_isStr(e)){switch(!0){case 0<=e.indexOf(","):t=",";break;case 0<=e.indexOf(" "):t=" "}t&&(a=e.split(t).reverse().join(t))}return a}},K.bindElement=function(e){K.bindElements(e,".")},K.bindElements=function(e,t){e=H(e||"body");(e=(t=t||"")&&"."==t?e.filter("[bind-element]:not([attached])"):e.find("[bind-element]:not([attached])"+t)).each(function(e,t){var a,n=_toObj(t.getAttribute("bind-element"))||{};for(a in _isBlank(n)||_attr(t,"attached",""),n)t.addEventListener(a.toLowerCase(),function(){!function _bindElEvent(e,t,a){var n=K.getElValue(e);n&&"undefined"!=n&&"null"!=n&&((t={__:{on:t,el:e}}).__[_attr(e,"name")||_attr(e,"id")||"_"]=n,K.bindData(a,t))}(this,a,n[a])})})},K.dataBind=K.bindData=function(e,t,a,n){1==arguments.length&&(_isStr(e)&&"#"==e[0]||_isEl(e)||_is$El(e))&&(t={_:0}),a=a||"";var r,i,o=_isStr(e=e||"body")&&/\s*</.test(e);if(i=o?(r="blocked-script-in-template",O=e.replace(/<\s*script/gi,"<"+r).replace(/<\s*(\/)\s*script/gi,"</"+r).replace(/<\s*textarea/gi,"<spa-vdom-textarea").replace(/<\s*(\/)\s*textarea/gi,"</spa-vdom-textarea"),H('<div style="display:none">'+O+"</div>")):H(e),_isBlank(t))return i;var s="";"$"==a[0]&&(s=a.substring(1).trim(),a="");var d,l,p,u,f,_,m,h,g,y,c,b,v=(s=s||i.attr("data-rendered-component"))||"_unknown_",S=_mergeDeep({__computed__:{}},_isObj(t)?t:{__raw__:t}),O=i.find(a+"[data-bind]");function _getValue(e,t){return"-"==(e=(e||"").trim())[0]?H(t).data(e.substring(1)):"#"==e[0]?K.getElValue(e):"."==e||"this"==e?S.hasOwnProperty("__raw__")?S.__raw__:S:_find(S,e,e)}function _templateDynId(e,t){return["_runTimeTemplate",e,s,t.replace(/[^a-z0-9]/gi,"_"),_now()].join("_")}function _inlineTemplate(e,t){return K.compiledTemplates4DataBind.hasOwnProperty(v)||(K.compiledTemplates4DataBind[v]={}),K.compiledTemplates4DataBind[v][e]=Handlebars.compile(_unmaskHandlebars(t))}function _formatBindValue(e,t,a,n){var r=t,i=(e=e.trim()).trim(),o=i.indexOf("("),s=[];if(0<o&&(i=i.substring(0,o)),"."==i[0]){if(i=i.substring(1),!K.pipes.hasOwnProperty(i)){s=(s=e.substring(o+1,e.indexOf(")")).trim())?s.split(",").map(_strToNative):[];try{r=t[i].apply(t,s)}catch(e){console.warn("Error calling format function ."+i+"() on:",t,n,e)}return r}i="xsr.pipes."+i}return K.renderUtils.runCallbackFn(i,["(...)",t,a,S,n],n)}return O.length||(O=i.filter(a+"[data-bind]")),O.length&&!o&&s&&(O=O.filter(function(){return H(this).closest("[data-rendered-component]").attr("data-rendered-component")==s})),_each(O,function(c){var e,t;d=H(c),c.hasAttribute("data-src")&&!c.hasAttribute("async-in-progress")?(t=!0,(e=_toObj(_attr(c,"data-src"))).hasOwnProperty("on")&&(t=S&&S.__,e.on&&t&&(S=S.__,t=0<=e.on.split(",").map(function(e){return e.trim()}).indexOf(S.on))),t&&(_attr(c,"async-in-progress",""),c.id||_attr(c,id,"el-"+_now()+_rand(1,9999)),t={url:K.api.url(e.url,S),method:e.method||"GET",success:function(e){K.bindData("#"+c.id,e)},error:function(){c.removeAttribute("async-in-progress"),e.onError?K.renderUtils.runCallbackFn(e.onError,["(...)",c,this],c):console.warn("Failed to retrieve data.")}},e.payload&&(delete S.on,delete S.el,t.data="stringify"==e.payload?JSON.stringify(S):S),e.headers&&(t.headers=e.headers),W.log("async data-bind:",c,t),ue(t))):(c.removeAttribute("async-in-progress"),(l=d.data("bind")||"")&&!l.containsStr(":")&&(l=_defaultAttr(c)+":'"+l+"'"),p=_toObj(l||"{}"),g=K.renderUtils.getFn(d.attr("data-bind-callback")||""),p&&!_isEmptyObj(p)&&_each(_keys(p),function(e){u=(p[e]+"|").split("|"),f=u.shift().trim(),y="!"==f[0],_is(m=y?!_getValue(f=f.substring(1).trim(),c):_getValue(f,c),"undefined|null")&&(m="");for(var t=0;t<u.length;t++)(_=u[t].trim())&&(m="!"==_[0]?"!"==_?!m:!_formatBindValue(_=_.substring(1).trim(),m,f,c):_formatBindValue(_,m,f,c));_each(e.split("_"),function(e){var t="";if(e=e.trim(),!_isUndef(m))switch(e.toLowerCase()){case"html":d.html(K.sanitizeXSS(m));break;case"text":d.text(m);break;case"value":_attr(c,"value",m);break;case"options":var a=p.startAt||_attr(c,"data-options-from")||0,n=p.sortOn||_attr(c,"data-sort-on")||0,r=p.sortBy||_attr(c,"data-sort-by")||"";p.valueKey&&_attr(c,"data-value-key",p.valueKey),p.textKey&&_attr(c,"data-text-key",p.textKey),K.optionsList(c,m,a,n,r),delete p.options,delete p.sortOn,delete p.sortBy,delete p.startAt,delete p.valueKey,delete p.textKey;break;case"sorton":case"sortby":case"startat":case"valuekey":case"textkey":break;case"selectvalue":case"selectedvalue":p.hasOwnProperty("options")?console.warn("Incorrect Order. Move options: first, finally select...",c):/select/i.test(c.tagName)&&(c.hasAttribute("multiple")?(_isArr(m)||(i=_attr(c,"data-split-by")||",",m=(""+m).split(i).map(function(e){return e.trim()})),_selectOptionsFor(c,"value",m)):K.selectOptionForValue(c,m));break;case"selecttext":case"selectedtext":p.hasOwnProperty("options")?console.warn("Incorrect Order. Move options: first, finally select...",c):/select/i.test(c.tagName)&&(c.hasAttribute("multiple")?(_isArr(m)||(i=_attr(c,"data-split-by")||",",m=(""+m).split(i).map(function(e){return e.trim()})),_selectOptionsFor(c,"text",m)):K.selectOptionForText(c,m));break;case"selectindex":case"selectedindex":p.hasOwnProperty("options")?console.warn("Incorrect Order. Move options: first, finally select...",c):/select/i.test(c.tagName)&&(c.hasAttribute("multiple")?(_isArr(m)||(i=_attr(c,"data-split-by")||",",m=(""+m).split(i).map(function(e){return e.trim()})),m.forEach(function(e){_isEl(c.options[+e])&&(c.options[+e].selected=!0,_attr(c.options[+e],"selected",""))})):_isEl(c.options[+m])&&(c.options[+m].selected=!0,_attr(c.options[+m],"selected","")));break;case"$":case"check":/checkbox|radio/i.test(c.type)&&("boolean"===_of(m)?c.checked=m:c.checked=c.value.equalsIgnoreCase(""+m),c.checked?_attr(c,"checked",""):c.removeAttribute("checked"));break;case"if":t=f.replace(/[^a-z0-9]/gi,"_"),S.__computed__[t]=m;var i,o=d.attr("data-bind-template");o?s=K.compiledTemplates4DataBind[v][o]:(i="{{#if __computed__."+t+" }}"+d.html().trim()+"{{/if}}",s=_inlineTemplate(o=_templateDynId("if",f),i),d.attr("data-bind-template",o)),d.html(s(S));break;case"repeat":t=f.replace(/[^a-z0-9]/gi,"_"),S.__computed__[t]=m;var s,l,o=d.attr("data-bind-template");o?l=K.compiledTemplates4DataBind[v][o]:(s="{{#each __computed__."+t+((s=(p.repeatAs||p.as||"").replace(/[,|:]/g," ").normalizeStr())?" as |"+s+"|":"")+" }}"+d.html().trim()+"{{/each}}",l=_inlineTemplate(o=_templateDynId("repeat",f),s),d.attr("data-bind-template",o)),d.html(l(S));break;case"as":case"repeatas":break;default:!0===/^\./.test(e)?(l=e.replace(/[\.\,]/g," ").normalizeStr(),d[m?"addClass":"removeClass"](l)):(d.attr(e,m),e.beginsWithStr("data-")&&(h=K.dotToCamelCase(e.getRightStr("-").replace(/-/g,".")))&&d.data(h,m))}}),g&&g.call(c,c)}))}),n||o||!i.is("[data-rendered-component]")||(_isBlank(c=i.attr("data-rendered-component"))||(O="app."+c+".bindCallback",K.renderUtils.runCallbackFn(O,S,app[c]))),o||(c=i.find("[data-rendered-component]").filter(function(){return this.hasAttribute("data-x-component-$data")||this.hasAttribute("data-x-$data")||this.hasAttribute("data-spa-component-$data")||this.hasAttribute("data-spa-$data")||this.hasAttribute("spa-$data")})).length&&c.each(function(){b=function _get$dataInAttr(e,t,a){var n="app."+(t=t.replace(/[^a-z0-9]/gi,"_"))+".";_isObj(a)&&(K.tempBind$data.hasOwnProperty(t)||(K.tempBind$data[t]={}),K.tempBind$data[t].$data=_mergeDeep({},_find(app,t+".$data",{}),a),n="xsr.tempBind$data."+t+".");r=H(e),a=r.data(),t=(r.attr("data-x-component")||r.attr("data-spa-component")||"").split("|"),(e=(t[1]||"").trim())&&(/\:\s*\$data/.test(e)&&(e=e.replace(/\:\s*\$data/g,":"+n+"$data")),e=_toObj(e));t=r.attr("data-x-component-options")||r.attr("data-x-$options")||r.attr("data-spa-component-options")||r.attr("data-spa-$options")||r.attr("spa-$options")||"{}";(a=_mergeDeep({},e,a,_toObj(t))).hasOwnProperty("data")&&_isStr(a.data)&&(t=a.data.trim(),/^\$data/.test(t)&&(t=n+t),a.data=_mergeDeep({},_find(window,t,{})));var r=(r.attr("data-x-component-$data")||r.attr("data-x-$data")||r.attr("data-spa-component-$data")||r.attr("data-spa-$data")||r.attr("spa-$data")||"").trim();r&&(/\:\s*\$data/.test(r)&&(r=r.replace(/\:\s*\$data/g,":"+n+"$data")),_isBlank(a.data)?a.data=_toObj(r):_mergeDeep(a.data,_toObj(r)));!_isBlank(a.data)&&a.data.hasOwnProperty("$data")&&(r=_mergeDeep({},a.data.$data),delete a.data.$data,_mergeDeep(a.data,r));return a.hasOwnProperty("data")?a.data:{}}(this,s,t),K.bindData(this,b)}),S=null,o?i.html().replace(new RegExp(r,"g"),"script").replace(/spa-vdom-textarea/g,"textarea"):i},K.bindTemplateData=function(e,t){var a=e;if(/^\s*#[a-z]+/i.test(e)&&(a=H(e).html()),_isBlank(t))return a;if(/ data-bind\s*=/i.test(a)&&(a=K.bindData(e,t)),/{{(.+)}}/.test(a))if("undefined"!=typeof Handlebars&&Handlebars)try{a=Handlebars.compile(a)(t)}catch(e){console.log("Error Handlebars compile/bind.",e)}else console.warn("Handlebars Template Library not found!");return a},K.togglePassword=function(e){var t;H(e).next(".icon.eye").length||((t=H('<i class="icon eye"></i>')).on("click",function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();var t=H(this).prevAll(".toggle-password"),e="text"==t.attr("type")?"password":"text";t.attr("type",e).toggleClass("text")}),H(t).insertAfter(e))},K.initTogglePassword=function(e){H(e||"body").find(".toggle-password").each(function(e,t){W.info("Initializing toggle password",t),K.togglePassword(t)})},K.isElValueChanged=function(e){var a,t,e=H(e);if(e.length)if("checkbox"==(t=e[0]).type)a=t.checked!=t.defaultChecked;else if("radio"==t.type)H(t).closest("form").find(':radio[name="'+t.name+'"]').each(function(e,t){a=a||t.checked!=t.defaultChecked});else if(0<="INPUT,TEXTAREA".indexOf(t.tagName))a=t.value!=t.defaultValue;else if("SELECT"==t.tagName){for(var n,r=0,i=0,o=t.options.length;i<o;i++)n=t.options[i],a=a||n.selected!=n.defaultSelected,n.defaultSelected&&(r=i);a&&!t.multiple&&(a=r!=t.selectedIndex)}return a},K.resetElDefaultValue=function(e){H(e).each(function(e,t){if(0<",checkbox,radio".indexOf(t.type))t.defaultChecked=t.checked;else if(0<",INPUT,TEXTAREA".indexOf(t.tagName))t.defaultValue=t.value;else if("SELECT"==t.tagName)for(var a,n=0,r=t.options.length;n<r;n++)(a=t.options[n]).defaultSelected=a.selected;H(t).trigger("change")})},K.resetToDefaultValue=function(e){H(e).each(function(e,t){if(0<",checkbox,radio".indexOf(t.type))t.checked=t.defaultChecked;else if(0<",INPUT,TEXTAREA".indexOf(t.tagName))t.value=t.defaultValue;else if("SELECT"==t.tagName)for(var a,n=0,r=t.options.length;n<r;n++)(a=t.options[n]).selected=a.defaultSelected;H(t).trigger("change")})},K.updateTrackFormCtrls=function(e){var t,a,n,r,i,o,s;e&&(a=(t=H(e)).find(".tracking-change.changed").length,e=!(_isBlank(e=K.validateForm("#"+t.attr("id")))||1==e[0].errcode)||t.find(".validation-error,.validation-pending").length,n=0<a&&!e,r=!e,e=t.find(".ctrl-on-change,.ctrl-on-validate"),t.attr("data-changed",a).data("changed",a),e.each(function(e,t){i=H(t),o=i.hasClass("ctrl-on-change")?n:r,_isBlank(s=i.attr("onBeforeChange"))||(0<s.indexOf("(")&&(s=s.getLeftStr("(")),s=_find(window,s.trim(),void 0),o=_isFn(s)?!!s.call(t,o):o),i.is(":disabled")==o&&(i.prop("disabled",!o).addClass(o?"":"disabled").removeClass(o?"disabled":""),i.trigger("change"))}))},K.trackFormElChange=function _trackFormElChange(e,t){function eTrackChange(e){if("change"==e.type||e.key&&(1==e.key.length||0<="BackspaceDelete".indexOf(e.key))){var t,a=!1,n=H(this).closest("form"),r=n.find(".tracking-change.changed").length;if("checkbox"==this.type)a=this.checked!=this.defaultChecked;else if("radio"==this.type)n.find(':radio[name="'+this.name+'"]').each(function(e,t){t.checked==t.defaultChecked&&H(t).removeClass("changed"),a=a||t.checked!=t.defaultChecked});else if(0<="INPUT,TEXTAREA".indexOf(this.tagName))a=this.value!=this.defaultValue,t="change"!=e.type;else if("SELECT"==this.tagName){for(var i,o=0,s=0,l=this.options.length;s<l;s++)i=this.options[s],a=a||i.selected!=i.defaultSelected,i.defaultSelected&&(o=s);a&&!this.multiple&&(a=o!=this.selectedIndex)}H(this)[a?"addClass":"removeClass"]("changed"),K.updateTrackFormCtrls(n),null!=r&&t&&n.trigger("change")}}H(t||"body").find(e).each(function(e,t){"FORM"==t.tagName.toUpperCase()?K.trackFormElChange(H(t).find(".track-change").length?".track-change":"input,textarea,select",t):function elTrackChange(e){var t,a,n,r="change",i=H(e);if(0<",checkbox,radio".indexOf(e.type))e.defaultChecked=e.checked;else if(0<",INPUT,TEXTAREA".indexOf(e.tagName))e.defaultValue=e.value,r="keyup change";else{if("SELECT"!=e.tagName)return;for(t=0,a=e.options.length;t<a;t++)(n=e.options[t]).defaultSelected=n.selected}i.removeClass("track-change changed"),K.updateTrackFormCtrls(i.closest("form")),e.className.indexOf("tracking-change")<0&&i.addClass("tracking-change").on(r,eTrackChange)}(t)})},K.initTrackFormElChanges=function(e){H(e||"body").find("form.track-changes,form:has(.ctrl-on-change,.track-change)").each(function(e,t){W.info("Initializing Form Elements Track: Form ["+(t.id||t.name)+"]"),K.trackFormElChange(t)})},K.getModifiedElement=function(e){var t,a=void 0;return _every(H(e||"form:not([data-ignore-change]) :input:not(:disabled,:button,[data-ignore-change])"),function(e){return t||((e.tagName.match(/^(select|textarea)$/i)&&e.value!=e.defaultValue||e.tagName.match(/^input$/i)&&(e.type.match(/^(checkbox|radio)$/i)&&e.checked!=e.defaultChecked||e.type.match(/^(text|password|hidden|color|email|month|number|tel|time|url|range|date|datetime|datetime-local)$/i)&&e.value!=e.defaultValue))&&(t=!0),t&&(a=e)),!t}),a},K.getModifiedElements=function(e){var a,n=[];return H(e||"form:not([data-ignore-change]) :input:not(:disabled,:button,[data-ignore-change])").each(function(e,t){a=!1,(t.tagName.match(/^(select|textarea)$/i)&&t.value!=t.defaultValue||t.tagName.match(/^input$/i)&&(t.type.match(/^(checkbox|radio)$/i)&&t.checked!=t.defaultChecked||t.type.match(/^(text|password|hidden|color|email|month|number|tel|time|url|range|date|datetime|datetime-local)$/i)&&t.value!=t.defaultValue))&&(a=!0),a&&n.push(t)}),n},K.initTrackElValueChanges=K.resetElementsDefaultValue=function(e){H(e||"form :input:not(:disabled)").each(function(e,t){t.defaultValue=t.value,t.tagName.match(/^input$/i)&&t.type.match(/^(checkbox|radio)$/i)&&t.checked!=t.defaultChecked&&(t.defaultChecked=t.checked)})},K.trash={container:[],push:function(e){this.container.push(e)},empty:function(){this.container=[]},pick:function(e){return e?this.container[e]:this.container}},K.fillData=function(s,l,e){var t="object"==typeof s;l&&"object"==typeof l&&(e=l,l=null),l=l||"body";var c={dataParams:{},method:"GET",async:!0,dataCache:!1,keyFormat:"aBc",selectPattern:"[name='?']",formatterCommon:null,formatterOnKeys:null,resetElDefault:!0,resetElDefaultInContext:!0,keysMap:{}};_extend(c,e),t||ue({url:s,method:(""+(c.method||"GET")).toUpperCase(),data:c.dataParams,cache:c.dataCache,async:c.async,dataType:"text",success:function(e){s=_toObj(""+e),function _fillData(){var o=c.keyFormat;o=null!=(o=null!=o.match(/^[a-z]/)?"aBc":o).match(/^[A-Z]/)?"AbC":o;var e=_keysDotted(s);W.group("fillData"),W.info(e),_each(e,function(e){W.group(">>"+e);var t=""+(e.replace(/[\[\]]/g,"_")||""),a=e.replace(/\[[0-9]+\]/g,""),n=/\[[0-9]+\]/.test(e);switch(o){case"_":t=K.dotToX(t,"_"),a=K.dotToX(a,"_");break;case"AbC":t=K.dotToTitleCase(t),a=K.dotToTitleCase(a);break;default:t=K.dotToCamelCase(t),a=K.dotToCamelCase(a)}var r={patternKey:t+(n?" || "+a:""),formatterKey:a,isArrayChild:n};K.trash.push(r),W.info(r),K.trash.empty();n=c.selectPattern.replace(/\?/g,t);(c.keysMap[t]||c.keysMap[a])&&(c.keysMap[t]=c.keysMap[t]||{},c.keysMap[a]=c.keysMap[a]||{},c.keysMap[t].pattern=c.keysMap[t].pattern||c.keysMap[a].pattern,c.keysMap[t].pattern&&(n=c.keysMap[t].pattern.replace(/\?/g,t)),c.keysMap[a].formatter&&(c.formatterOnKeys=c.formatterOnKeys||{},c.formatterOnKeys[a]=c.keysMap[a].formatter));r=H(l).find(n).length;W.info(">> "+n+" found: "+r);var i=null;0<r&&(i=_find(s,e),!c.formatterOnKeys&&c.formatterCommon&&(i=c.formatterCommon(i,e,s)),c.formatterOnKeys&&(c.formatterOnKeys[a]?i=c.formatterOnKeys[a](i,e,s):c.formatterCommon&&(i=c.formatterCommon(i,e,s))),W.info({value:i})),H(l).find(n).each(function(e,t){switch(W.info(t),t.tagName.toUpperCase()){case"INPUT":switch(t.type.toLowerCase()){case"text":case"password":case"hidden":case"color":case"date":case"datetime":case"datetime-local":case"email":case"month":case"number":case"search":case"tel":case"time":case"url":case"range":case"button":case"submit":case"reset":H(t).val(i),!c.resetElDefaultInContext&&c.resetElDefault&&(t.defaultValue=t.value);break;case"checkbox":case"radio":t.checked=t.value.equalsIgnoreCase(i),!c.resetElDefaultInContext&&c.resetElDefault&&(t.defaultChecked=t.checked)}break;case"SELECT":K.selectOptionForValue(t,i),!c.resetElDefaultInContext&&c.resetElDefault&&(t.defaultValue=t.value);break;case"TEXTAREA":H(t).val(i),!c.resetElDefaultInContext&&c.resetElDefault&&(t.defaultValue=t.value);break;default:H(t).html(K.sanitizeXSS(i))}}),W.groupEnd(">>"+e)}),W.groupEnd("fillData"),c.resetElDefaultInContext&&K.resetElementsDefaultValue(l+" :input")}()},error:function(e,t,a){W.error("Failed loading data from ["+s+"]. ["+t+":"+a+"]"),(_isFn(app.api.onError)?app.api.onError:K.api.onReqError).call(this,e,t,a)}})},K.toRenderDataStructure=function(t,e,a){function Qv(t,a){return a&&_keys(a).length&&_each(_keys(a),function(e){t=t.replace(new RegExp("{"+e+"}","gi"),a[e])}),t}var n={},r={},i={},o={};switch(e&&(o=_isStr(e)?K.queryStringToJson(e):_isObj(e)?e:{}),!0){case _isStr(t):t.containsStr("\\|")&&(n.dataModel=K.getOnSplit(t,"|",0),t=K.getOnLastSplit(1)),n.dataUrl=Qv(t,a),_isEmpty(o)||(n.dataParams=o);break;case _isArr(t):r={urls:[]},i={},_each(t,function(e){i={url:Qv(e,a),params:o},e.containsStr("\\|")&&(i.target=K.getOnSplit(e,"|",0),i.url=Qv(K.getOnLastSplit(1),a)),r.urls.push(i)});break;case _isObj(t):r={urls:[]},i={},_each(_keys(t),function(e){i={name:e,url:Qv(t[e],a),params:o},t[e].containsStr("\\|")&&(i.target=K.getOnSplit(t[e],"|",0),i.url=Qv(K.getOnLastSplit(1),a)),r.urls.push(i)})}return _isEmpty(r.urls)||(n.dataCollection=r),n};var w={};function _adjustComponentOptions(e,t){var a,n="_rtt_"+e,r="";return t&&_isObj(t)&&K.hasPrimaryKeys(t,"template|templateStr|templateString|templateUrl")&&(t.hasOwnProperty("template")&&((a=t.template.trim()).beginsWithStr("#")&&!a.containsStr(" ")||"inline"==a||"."==a?"inline"!=a&&"."!=a&&"#"!=a||(t.templateUrl="inline"):t.templateStr=t.template),K.hasPrimaryKeys(t,"templateStr|templateString")?(r=t.templateStr||t.templateString||"",K.updateTemplateScript(n,r),t.template="#"+n):K.hasPrimaryKeys(t,"templateUrl")&&((r=(t.templateUrl||"").trim())&&/^(\.\/)/.test(r)&&(n=/[^a-z0-9]/gi.test(e),r=K.defaults.components.rootPath+(K.defaults.components.inFolder||n?e.replace(/[^a-z0-9]/gi,"/")+"/":"")+r.substring(2)),t.template=r)),t&&_isObj(t)&&!K.hasPrimaryKeys(t,"data|dataUrl")&&K.hasPrimaryKeys(K.api.urls,"$"+e)&&(t.dataUrl="@$"+e),W.log("$ Adj.Options>>>>",e,t&&t.__now()),t}function handleOnDomReady(e){((r||t)&&n?n:_onDomReady)(e)}function _onDomReady(e){"complete"===v.readyState||"loading"!==v.readyState&&!v.documentElement.doScroll?e():v.addEventListener("DOMContentLoaded",e)}function __$refresh(e){var t=this.__name__;return _onDomReady(function(){K.refreshComponent(t,e)}),this}function __$render(e){var t=this.__name__;return _onDomReady(function(){K.renderComponent(t,e)}),this}function __$show(e){var t=this.__name__;return _onDomReady(function(){K.showComponent(t,e)}),this}function __$hide(){var e=this.__name__;return _onDomReady(function(){K.hideComponent(e)}),this}function __$enable(){var e=this.__name__;return _onDomReady(function(){K.enableComponent(e)}),this}function __$disable(){var e=this.__name__;return _onDomReady(function(){K.disableComponent(e)}),this}function __$remove(){return K.removeComponent(this.__name__)}function __$destroy(){return K.destroyComponent(this.__name__)}function SPAComponent(e){this.__name__=e}K.env="",K.compiledTemplates4DataBind={},K.compiledTemplates={},K.viewModels={},K.renderHistory={},K.renderHistoryMax=0,K.components={},K.tempBind$data={},K.defaults={alias:"",components:{templateEngine:"handlebars",rootPath:"app/components/",inFolder:!0,templateExt:".html",scriptExt:".js",templateScript:!0,templateCache:!0,dataPreRequest:"",render:"",callback:"",extend$data:!0,offline:!1,functional:!0,sanitizeApiXss:!1},routes:{base:"#",attr:{route:"data-spa-route",params:"data-spa-route-params",onNavAway:"onNavAway"},className:{hide:"HIDE-SPA-NAV",block:"BLOCK-SPA-NAV",allow:"ALLOW-SPA-NAV"},onClickAs:"click"},lang:{reset:!0,url:"",method:"GET",path:"app/language/",prefix:"Language_",ext:".txt",cache:!0,async:!0},validation:{xss:{on:"input_onBlur",fn:"_check.xss",msg:"i18n:invalid.input"}},csp:{nonce:""},set:function(e,t){return _isObj(e)?(e.hasOwnProperty("set")&&delete e.set,_mergeDeep(this,e)):"string"==typeof e&&("components.extend$data"==e?K.defaults.components.extend$data=t:K.setSimpleObjProperty(this,e,t)),this}},SPAComponent.prototype={render:__$render,refresh:__$refresh,show:__$show,hide:__$hide,enable:__$enable,disable:__$disable,remove:__$remove,destroy:__$destroy,render$:__$render,refresh$:__$refresh,show$:__$show,hide$:__$hide,enable$:__$enable,disable$:__$disable,remove$:__$remove,destroy$:__$destroy};var x="api,debug,lang";function _spaComponentOp(){var e,t=this.action;arguments.length&&(1==(e=arguments).length&&(_isArr(arguments[0])?e=arguments[0]:_isStr(arguments[0])&&(e=arguments[0].split(","))),W.log(e),e&&e.length&&_each(e,function(e){W.info(t+" x-component:",e),spa[t](e.trim())}))}function __finalValue(e,t){var a=e,n=t,r=V.slice.call(arguments,2);return _isStr(a)&&(0<a.indexOf("(")&&(a=a.getLeftStr("(")),a=_find(window,a.trim(),void 0)),_isFn(a)&&1<arguments.length&&(a=a.apply(n,r)),a}K.component=K.$=K.registerComponent=function(e,t){var a=!!t,n=e;if(t=t||{},e)if(_isObj(e)&&(e=((t=_mergeDeep({},e)).name||t.componentName||"spaComponent"+_now()).trim().trimLeftStr("/").trimLeftStr("_"),t.componentName=e,n=e),_isStr(n)){if(e=e.trim().trimLeftStr("/").trimLeftStr("_"),0<=x.indexOf(n=e))console.error('Invalid component name "'+n+'". Cannot create a component with these names: '+x);else if(_isStr(n)&&n&&(n=n.trim())){if(!a){var r,i=-1;return 0<n.indexOf(" ")&&(r=n.getRightStr(" ").trim(),n=n.getLeftStr(" ")),0<n.indexOf(":")&&(i=K.toInt(n.getRightStr(":").trim()),n=n.getLeftStr(":")),n=n.replace(/[^a-z0-9]/gi,"_"),K.components[n]||console.warn('Unknown SPA Component "'+(e.getLeftStr(" ")||e)+'"'),(a=H('[data-rendered-component="'+n+'"]')).length&&0<=i&&(a=H(a[i])),r&&a.length&&(a="<"==r[0]?(r=r.getRightStr(0).trim(),a.find("[data-rendered-component]").length?a.find(r).filter(function(){return H(this).closest("[data-rendered-component]").data("renderedComponent")==n}):a.find(r)):a.find(r)),a}if(!/[^a-z0-9\/]/gi.test(n)&&/^([a-z])/i.test(n)){if(/[^a-z0-9]/gi.test(n)&&(n=n.replace(/[^a-z0-9]/gi,"_")),!K.components[n]){t.componentName=n,t.hasOwnProperty("beforeRender")||(t.beforeRender="app."+n+".onRender"),t.hasOwnProperty("renderCallback")||(t.renderCallback="app."+n+".renderCallback"),t.hasOwnProperty("require")&&K.loadComponents(t.require,function(){W.log("Required components successfully loaded.")},function(){W.log("Failed to load required components.")});var o=_mergeDeep({},t=_adjustComponentOptions(n,t));return _each(["target","template","templateCache","templateScript","sanitizeApiXss","templateUrl","templateUrlMethod","templateUrlParams","templateUrlPayload","templateUrlHeaders","onTemplateUrlError","style","styleCache","styles","stylesCache","scripts","scriptsCache","require","dataPreRequest","data","skipDataBind","dataCollection","dataUrl","dataUrlMethod","dataUrlParams","dataUrlHeaders","defaultPayload","stringifyPayload","dataParams","dataType","dataModel","dataCache","dataUrlCache","dataDefaults","data_","dataExtra","dataXtra","onDataUrlError","onError","dataValidate","dataProcess","dataPreProcessAsync","renderMode","lang","beforeRender","beforeRefresh","componentName"],function(e){delete t[e]}),_isStr(t.renderCallback)&&delete t.renderCallback,_each(_keys(t),function(e){delete o[e]}),o.renderCallback="app."+n+".renderCallback",o&&o.data&&_isObj(o.data)&&o.dataUrl&&(_isObj(o.dataDefaults)?o.dataDefaults=_mergeDeep({},o.dataDefaults,o.data):o.dataDefaults=o.data,delete o.data),K.components[n]=o,K.extendComponent(e,t),window.app[n]||new SPAComponent(e)}}else console.error('Invalid component name "'+n+'" to create. Component name must contain only Alphanumeric (a-z A-Z 0-9) and must begin with alphabet (a-z A-Z).')}}else console.error("Invalid ComponentName:",n);else console.error("Missing ComponentName to register.")},K.$$=K.registerComponents=function(){var t;arguments.length&&(1==(t=arguments).length&&(t=!_isArr(arguments[0])&&_isStr(arguments[0])?arguments[0].split(","):arguments[0]),_isObj(t)?_each(_keys(t),function(e){W.info("Registering x-component:["+e+"]"),K.registerComponent(e,t[e])}):t&&t.length&&_each(t,function(e){W.info("Registering x-component:",e),K.registerComponent(e.trim(),{})}))},K.extendComponent=K.$extend=K.module=function(e,t){t=t||{},e?(_isObj(e)&&(e=((t=_mergeDeep({},e)).name||t.componentName||"spaComponent"+_now()).trim().trimLeftStr("/").trimLeftStr("_"),t.componentName=e),_isStr(e)&&e?(e=e.trim().trimLeftStr("/").trimLeftStr("_"))&&(0<=x.indexOf(e)?console.error("Invalid component name "+e+". Cannot extend Reserved components: "+x.join()):!/[^a-z0-9\/]/gi.test(e)&&/^([a-z])/i.test(e)?(/[^a-z0-9]/gi.test(e)&&(e=e.replace(/[^a-z0-9]/gi,"_")),window.app=window.app||{},window.app[e]=window.app[e]||new SPAComponent(e),t&&_isFn(t)&&(t=t.call(K.components[e]||{})),t=_isObj(t)?t:{},K.components[e]||(K.components[e]={componentName:e,beforeRender:"app."+e+".onRender",renderCallback:"app."+e+".renderCallback"}),K.components[e]&&(t.__prop__&&_mergeDeep(K.components[e],_extend({},t.__prop__)),t.__prop__=K.components[e]),_extend(window.app[e],t),window["$$"+e]=window.app[e]):console.error('Invalid component name "'+e+'" to extend. Component name must contain only Alphanumeric (a-z A-Z 0-9) and must begin with alphabet (a-z A-Z).')):console.error("Invalid ComponentName:",e)):console.error("Missing ComponentName to extend.")},K.extendComponents=K.$$extend=function(){var t;arguments.length&&(1==(t=arguments).length&&(t=!_isArr(arguments[0])&&_isStr(arguments[0])?arguments[0].split(","):arguments[0]),_isObj(t)?_each(_keys(t),function(e){W.info("Extend x-component:["+e+"]"),K.extendComponent(e,t[e])}):t&&t.length&&_each(t,function(e){W.info("Extend x-component:",e),K.extendComponent(e.trim())}))},K.$bind=function(e,t){e=String(e).replace(/[^a-z0-9]/gi,"_"),_isBlank(t)&&(t=_find(app,e+".$data",{})),K.$(e).spaBindData(t)},K.$data=function(t,e,a){var n,r;return t=((t=String(t).replace(/[^a-z0-9]/gi,"_"))||"").trim(),a=a||"update",t&&(app.hasOwnProperty(t)?(r=_find(app,t+".$data"),e&&(r=function update$data(e){return _isObj(e)&&(["update","merge"].__has(a,"i")?_mergeDeep(app[t].$data,e):["*","reset","replace","overwrite"].__has(a,"i")&&(app[t].$data=e)),app[t].is$DataUpdated=K.components[t].is$DataUpdated=!0,app[t].$data}(_isFn(e)?e.call(app[t],app[t].$data):e),K.$(t).is(":visible")?(e=(n=K.components[t]).dataCache,n=(n.on$dataChange||"").trim().toLowerCase(),e&&n&&["render","refresh","bind"].__has(n)&&(W.log(t+"$"+n+" on $data update ..."),spa["$"+n](t)),K.renderUtils.runCallbackFn("app."+t+".$dataChangeCallback",app[t].$data,app[t])):console.log("Component is not visible! Skipped $on$dataChange."),K.$dataNotify(t))):W.warn("SPA Component[",t,"] is not loaded.")),r},K.$dataWatch=function(e,t,a){if((e=String(e).replace(/[^a-z0-9]/gi,"_"))&&t&&_isFn(a)){if(w.hasOwnProperty(e)||(w[e]={}),!w[e].hasOwnProperty(t))return w[e][t]=a,!0;console.warn("$dataWatch [",t,"] already exists in spa$[",e,"]")}},K.$dataUnwatch=function(e,t){var a;return(e=String(e).replace(/[^a-z0-9]/gi,"_"))&&t&&w.hasOwnProperty(e)&&("*"==t&&(delete w[e],a=!0),w[e].hasOwnProperty(t)&&(delete w[e][t],a=!0)),a||console.warn("$dataWatch [",t,"] does not exist in spa$[",e,"]"),a},K.$dataNotify=function(t,e){var a;(t=String(t).replace(/[^a-z0-9]/gi,"_"))&&w.hasOwnProperty(t)&&(a=_keys(w[t]),e&&(a=e.split(",")),_each(a,function(e){e=(e||"").trim(),w[t].hasOwnProperty(e)&&w[t][e].call(void 0,app[t].$data,app[t],e)}))},K.$renderCount=function(e){return _find(window,"app."+String(e).replace(/[^a-z0-9]/gi,"_")+".__renderCount__",0)},K.removeComponent=function(e,n){var t,a,r;function isOk2Remove$(e){var t,a=_isBlank(e=String(e).replace(/[^a-z0-9]/gi,"_").trim());return(a=a||(_isUndef(t=K.renderUtils.runCallbackFn("app."+e+".onRemove",n||"_script_",app[e]))||_isBool(t)&&t))||W.warn("Remove $"+e+" request denied onRemove()"),a}return e=(e||"").replace(/[^a-z0-9]/gi,"_").trim(),n=n&&(e==n?"_self_":n),e&&((a=H('[data-rendered-component="'+e+'"]')).length?(0==(r=a.find("[data-rendered-component]").map(function(){return H(this).attr("data-rendered-component")})).length||_every(r,isOk2Remove$))&&isOk2Remove$(e)&&(a.html("").text("").val("").data("renderedComponent","").removeAttr("data-rendered-component"),t=!0):t=!0),_isBool(t)&&t},K.destroyComponent=function(e){var t;return(e=(e||"").replace(/[^a-z0-9]/gi,"_").trim())&&K.removeComponent(e)&&(delete app[e],K.components[e]&&((t=_find(K.components[e],"template",""))&&!t.beginsWithStr("#")&&(t="#__tmpl_"+(""+t).replace(/[^a-z0-9]/gi,"_")),H("script"+t).remove(),delete K.components[e],delete K.compiledTemplates4DataBind[e],delete K.compiledTemplates[e],delete w[e],t=!0)),t},K.showComponent=function(e,t){var a=(e||"").replace(/[^a-z0-9]/gi,"_").trim();a&&((a=H('[data-rendered-component="'+a+'"]')).length?a.show():K.$render(e,t))},K.hideComponent=function(e){(e=(e||"").replace(/[^a-z0-9]/gi,"_").trim())&&H('[data-rendered-component="'+e+'"]').hide()},K.disableComponent=function(e){(e=(e||"").replace(/[^a-z0-9]/gi,"_").trim())&&H('[data-rendered-component="'+e+'"]').css("pointer-events","none").addClass("disabled").attr("disabled","disabled")},K.enableComponent=function(e){(e=(e||"").replace(/[^a-z0-9]/gi,"_").trim())&&H('[data-rendered-component="'+e+'"]').css("pointer-events","auto").removeClass("disabled").removeAttr("disabled")},K.removeComponents=K.$remove=K.$$remove=function(){_spaComponentOp.apply({action:"removeComponent"},arguments)},K.destroyComponents=K.$destroy=K.$$destroy=function(){_spaComponentOp.apply({action:"destroyComponent"},arguments)},K.showComponents=K.$show=K.$$show=function(){_spaComponentOp.apply({action:"showComponent"},arguments)},K.hideComponents=K.$hide=K.$$hide=function(){_spaComponentOp.apply({action:"hideComponent"},arguments)},K.enableComponents=K.$enable=K.$$enable=function(){_spaComponentOp.apply({action:"enableComponent"},arguments)},K.disableComponents=K.$disable=K.$$disable=function(){_spaComponentOp.apply({action:"disableComponent"},arguments)},K.refreshComponent=K.$refresh=function(e,t){e&&_isObj(t=t||{})&&(t.hasOwnProperty("beforeRender")||(t.beforeRender=t.beforeRefresh||"app."+e.replace(/[^a-z0-9]/gi,"_")+".onRefresh"),t.hasOwnProperty("renderCallback")||(t.renderCallback=t.refreshCallback||"app."+e.replace(/[^a-z0-9]/gi,"_")+".refreshCallback"),t.isRefreshCall=!0,W.info("Calling refreshComponent: "+e+" with below options"),W.info(t),K.$render(e,t))};var T={};function lock$render(e){T[e]=1}function unlock$render(e){delete T[e]}function is$renderLocked(e){var t=_isStr(e)&&T[e];return t&&W.warn("Component ["+e+"] is locked. Wait or use spa.$unlock("+e+");"),t}function _spaRenderRefreshComponents(){var t,a=this.action;arguments.length&&(1==(t=arguments).length&&(t=!_isArr(arguments[0])&&_isStr(arguments[0])?arguments[0].split(","):arguments[0]),_isObj(t)?_each(_keys(t),function(e){W.info("Rendering x-component:["+e+"]"),spa[a](e,t[e])}):t&&t.length&&_each(t,function(e){W.info("Rendering x-component:",e),spa[a](e.trim())}))}function _spaTagsSelector(e){return e.split(",").map(function(e){return e.trim()+"[src]:not([data-spa-component]):not([data-x-component])"}).join(",")}function _isDynSpa$(e){return/^(\$)*(dyn)*SPA\$/i.test(e)}function _renderForComponent(){var l,e=event,c=this,t=_attr(c,"for")||"",a=t.indexOf(":"),n=t.indexOf("|"),t=((0<a&&(n<0||a<n)?"|":"")+t+"|").split("|").map(function(e){return e.trim()}),d=t.shift(),t=t[0].trim(),p={};!t||_isObj(p=_toObj(t))&&!_isBlank(p)?(l=setTimeout(function(){var e,t,a,n,r="#"+_attr(c,"id"),i=!0,o={},s="";(d.length<2&&(!d||/[^a-z]/g.test(d))||_isDynSpa$(d))&&((d=_attr(c,"spa-dyn-comp-name"))||(d="$dynSPA$"+_now()+_rand(0,999),_attr(c,"spa-dyn-comp-name",d))),"FORM"===c.tagName.toUpperCase()?(i=_isBlank(n=K.validateForm(r,!0)))?(o=c.hasAttribute("data-nested")?K.serializeFormToObject(r):K.serializeFormToSimpleObject(r),t=c.hasAttribute("method")&&_attr(c,"method")||"",a=c.hasAttribute("action")&&_attr(c,"action")||"",s=c.hasAttribute("data-render-target")&&_attr(c,"data-render-target")||"",t&&(p.dataUrlMethod=t),a&&(p.dataUrl=a),s&&!p.target&&(p.target=s)):W.info("Form has validation error(s):",n):(!c.hasAttribute("data-validate")||(s=c.closest("form"))&&((i=_isBlank(n=K.validateForm("#"+s.id,r,!0)))||W.info("Element has validation error(s):",n)),i&&(e=K.getElValue(c),(i=c.hasAttribute("required")?!_isBlank(e):i)&&c.hasAttribute("name")&&(o[_attr(c,"name")]=e))),i&&(p.target||(i=c.hasAttribute("data-render-target")&&_attr(c,"data-render-target")||"")&&(p.target=i),p.hasOwnProperty("dataXtra")||_isBlank(o)||(p.dataXtra=o),p.hasOwnProperty("dataUrlParams")||_isBlank(o)||(p.dataUrlParams=o),p.dataParams=p.hasOwnProperty("payload")&&!p.payload?{}:o,"stringify".equalsIgnoreCase(p.payload)&&(p.stringifyPayload=!0),K.$render(d,p)),_freeTimer(l)},p.delay?+p.delay:0),e&&"submit"==e.type&&e.preventDefault()):console.warn("Invalid Options in:",c)}function _registerRenderForEl(e){var t,a,n=e.tagName.toUpperCase(),r="FORM"===n?"submit":"click",i=(_attr(e,"for")||"").trim();i&&(/on(\s*):/i.test(i)&&(t=i.indexOf(":"),a=i.indexOf("|"),r=(_toObj(((0<t&&(a<0||t<a)?"|":"")+i+"|").split("|").map(function(e){return e.trim()})[1]).on+"").toLowerCase()),"FORM"===n&&(e.hasAttribute("id")||_attr(e,"id","spaForm-"+_now()+_rand(1,999))),(n=(e.hasAttribute("target")&&_attr(e,"target")||"").trim())&&"#"==n[0]&&(_attr(e,"data-render-target",n),e.removeAttribute("target")),_attr(e,"render-on",r),e.removeEventListener(r,_renderForComponent),e.addEventListener(r,_renderForComponent))}function _Event(e,t){var a;return d?(a=document.createEvent("Event")).initEvent(e,!0,!0):a=new Event(e,{bubbles:!0,cancelable:!0}),t&&(a.targetElement=t),a}function _triggerClickEventOnAttr(t,a){var e,n=(K.defaults.routes.onClickAs||"click").toLowerCase(),r=H(t),i=(""+_attr(t,a)||"").trim(),o="click"!==n;if(i&&"null"!=i&&"undefined"!=i&&!(r.hasClass("disabled")||r.is("[disabled]")||r.is(":disabled")))try{o?(e="on"+n,r.renameAttr(a,e),t.dispatchEvent(_Event(n,t)),r.renameAttr(e,a)):i.split(";").forEach(function(e){e.trim()&&Function("event","("+e.trim()+")").call(t,_Event(n,t))})}catch(e){console.error(e.stack.substring(0,e.stack.indexOf("\n"))+"! Failed to trigger ["+n+"(:->"+a+")] event on Element:\n",t)}}function _disabledElClick(e){var t=H(this);t.hasClass("disabled")||t.is("[disabled]")||t.is(":disabled")?(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()):_triggerClickEventOnAttr(this,"onclickthis")}function _initSpaElements(e){var t=H(e||"body"),a=t.find("form:not([action]):not([method]):not([onsubmit])"),n=ae?".no-spa-route":"",e=t.find('a[href*="//"]:not([target])'+n),n=t.find("a:not([href]):not(.no-link)"),t=t.find("[onclick]:not(:input):not(["+ee+"]):not([onclickthis])");a.filter(function(){return!H(this).closest("pre").length}).attr("onsubmit","return false;").addClass("spa-form"),e.filter(function(){return!H(this).closest("pre").length}).attr("target","_blank").attr("rel","noopener noreferrer").addClass("spa-external-link"),n.filter(function(){return!H(this).closest("pre").length}).attr("href","javascript:;").addClass("spa-link"),t.filter(function(){return!H(this).closest("pre").length}).addClass("as-btn").renameAttr("onclick","onclickthis").on("click",_disabledElClick)}function _initFormValidation(e){var t,a,n,r,i,o,s=H(e),l=_find(spa,"_validate.defaults.offline",!0);1==s.length&&((n=s.attr("id")||"")||(n=s.attr("name")||"spaForm"+_now(),s.attr("id",n)),t=s.data(),a=s.has(".ctrl-on-change,.ctrl-on-validate").length,l&&((i=(s.attr("data-validate-defaults")||"").trim())?(i.indexOf("offline")<0&&(i.endsWithStr("}")?(r=i.lastIndexOf("}"),i=[i.slice(0,r),",offline:true",i.slice(r)].join("")):i+=",offline:true"),s.attr("data-validate-defaults",i)):s.attr("data-validate-defaults","{offline:true}")),s.is("[data-validate-form]")||s.attr("data-validate-form",""),s.attr("data-validation-initialized",""),s.attr("onsubmit")||s.attr("onsubmit","return false;"),s.on("change",function(){K.updateTrackFormCtrls(this)}),s.find("textarea,input:not(:checkbox),input:not(:radio)").filter(":not([data-validate])").each(function(){_attr(this,"data-validate","{onInput:{fn:_check.noop}}")}),o="",l=K.defaults.validation.xss,r=(s.attr("data-validate-xss")||"").trim(),i=(l.msg||"").trim(),/msg\s*:/g.test(r)&&((i=_toObj(r).msg)?r="on":i="Invalid input."),i&&!(r.equalsIgnoreCase("off")||r.equalsIgnoreCase("no")||r.equalsIgnoreCase("skip")||r.equalsIgnoreCase("false"))&&(o=4<r.length?","+r:",on"+l.on.capitalize()+":{fn:'"+l.fn+"',msg:'"+i+"'}"),i="onFocus:{fn:_clearSpaValidateMsg,offline:false}"+o,(o=(s.attr("data-validate-common")||"").trim())?o.indexOf("_clearSpaValidateMsg")<0&&(o="{"==o[0]?(o[0]=",","{"+i+o):"{"+i+","+o+"}",s.attr("data-validate-common",o)):s.attr("data-validate-common","{"+i+"}"),K.initDataValidation("#"+((t.validateForm||t.validateScope||"").replace(/[#onRender]/gi,"")||n)),!s.hasClass("track-changes")&&a&&K.trackFormElChange(e),"onRender".equalsIgnoreCase(t.validateForm)&&K.validateForm("#"+n,!0,!0))}K.$lock=lock$render,K.$unlock=unlock$render,K.$Locked=is$renderLocked,K.renderComponent=K.$render=function(e,a){var n=e;if(!is$renderLocked(n)){if(!b)return lock$render(n),void handleOnDomReady(function(){unlock$render(n),K.renderComponent(e,a)});if("complete"!==v.readyState&&("loading"===v.readyState||v.documentElement.doScroll))return lock$render(n),W.info("DOM NOT Ready. will render component ["+e+"] on DOM Ready."),void v.addEventListener("DOMContentLoaded",function(){unlock$render(n),K.renderComponent(e,a)});if(W.info(">>> spa.$render:",e,a),a=a||{},e){var r=e;_isObj(e)&&(a=_mergeDeep({},e),e=a.name||a.componentName||"spaComponent"+_now(),a.componentName=e,r=e);a._reqFrTag_;if(_isStr(e))if(e=e.trim(),"$"==e[0]||"#"!=e[0]){if(!(a&&_isObj(a)&&a.isRefreshCall)&&K.$renderCount(r)&&_find(window,"app."+r+".refreshCallback",""))return W.info("Component ["+e+"] has been rendered already. Refreshing instead of re-render."),void K.refreshComponent(r,a);if(W.info("Called renderComponent: "+e+" with options",a),/\/$|\/\/|\.|\?|\#/.test(r)&&"$"!=e[0]){var t,i,o=r;return r[0]===K.api.urlKeyIndicator&&(i=r.trimLeftStr(K.api.urlKeyIndicator),o=K.api.urls[i]||""),a.componentUrl=o,W.info("Called to render ServerComponent: ["+r+"] with options",a),i&&!o&&console.warn("ComponentURL undefined: app.api.urls."+i),void(o&&(t=a.targetEl,p=__finalValue(_toObj(a.urlHeaders),a),d=__finalValue(_toObj(a.urlParams),a),s=__finalValue(_toObj(a.urlPayload),a),i=(a.urlMethod||"GET").toLowerCase(),u="false"!==String(a.urlCache||"false").toLowerCase(),o=K.api.url(o,d),d=__finalValue(a.urlError),W.log("Loading ServerComponent ..."),K.api[i](o,s,function _onSuccess(e){H(t).html(e),K.renderComponentsInHtml(t)},function _onFail(e,t,a){this.onError&&_isFn(this.onError)?this.onError.call(this,e,t,a):(console.warn("Unable to load ServerComponent."),console.error(String(t).toUpperCase()+":"+a,e))},{ajaxOptions:{dataType:"html",headers:p,cache:u,onError:d}})))}var s=!_isDynSpa$(e)&&/[^a-z0-9]/gi.test(e);s&&(r=e.replace(/[\s\$]/g,"").replace(/[^a-z0-9]/gi,"_").trimLeftStr("_"));var l,c="_rtt_"+r;a=_adjustComponentOptions(r,a);var d,p=s?r.replace(/[^a-z0-9]/gi,"/"):r,u=r;s&&(u=(d=r.split("_"))[d.length-1]);function oy(){W.info("_renderComp: "+r+" with below options"),W.info(a),K.components[r].hasOwnProperty("template")||(K.components[r].hasOwnProperty("templateStr")||K.components[r].hasOwnProperty("templateString")?(l=K.components[r].templateStr||K.components[r].templateString||"",K.updateTemplateScript(c,l),K.components[r].template="#"+c):K.hasPrimaryKeys(K.components[r],"templateUrl")?((e=(K.components[r].templateUrl||"").trim())&&/^(\.\/)/.test(e)&&(e=f+e.substring(2)),K.components[r].template=e):K.components[r].template=m),W.info("render-options: xsr.components["+r+"]"),W.info(K.components[r]);var e,t=a&&a.saveOptions?K.components[r]:_extend({},K.components[r]);a&&(a.hasOwnProperty("mountComponent")||delete t.mountComponent,_extend(t,a),W.info("Extended> render-options: xsr.components["+r+"]"),W.info(t)),t.hasOwnProperty("style")&&_isStr(t.style)&&(t.dataStyles={},t.dataStyles[r+"Style"]="."==t.style||"$"==t.style?_+".css":/^(\.\/)/.test(t.style)?f+t.style.substring(2):t.style,delete t.style,W.info("Using component style for ["+r+"]"),W.info(t)),t&&_isObj(t)&&t.dataCache&&(_isBlank(e=_find(app,r+".$data",{}))?(t.dataCache=!1,W.log("dataCache:false; Using/Ajaxing new data ...")):(t.data=e,t.dataProcess=!1,W.log("dataCache:true; Using $data and ignored data + dataProcess ..."))),t.inProgress=n,K.render(t)}var f=K.defaults.components.rootPath+(K.defaults.components.inFolder||s?p+"/":""),_=f+u,m=_+K.defaults.components.templateExt,u=K.defaults.components.scriptExt,h=a&&_isObj(a)&&a.hasOwnProperty("script")?a.script:u?_+u:"",g=300,y=function(){var e;h?W.info("Loaded component ["+r+"] source from ["+h+"]"):W.info("Skipped Loading component ["+r+"] source from script file."),W.info("In Source> xsr.components["+r+"]"),W.info(K.components[r]),K.components.hasOwnProperty(r)||((e=K.componentsAsync[r])?g--?(W.info("Awaiting async component to load."),setTimeout(y,15)):console.error("Failed to load async component:",r):(W.info("xsr.components["+r+"] NOT DEFINED in ["+(h||"xsr.components")+"]. Creating *NEW*"),_isBlank(a)&&(a={}),a.hasOwnProperty("componentName")||(a.componentName=r),K.components[r]=a,W.info("NEW> xsr.components["+r+"]"),W.info(K.components[r]))),e||oy()};K.components.hasOwnProperty(r)?(W.info("Re-rending xsr.components["+r+"]"),W.info(K.components[r]),oy()):h&&!_isDynSpa$(e)?(W.info("Attempt to load component ["+e+"]'s properties from ["+h+"]"),_cachedScript(h,{spaComponent:p,dataType:"spaComponent",success:y,cache:K.defaults.components.offline}).done(noop).fail(function(){W.info("Attempt to Load component ["+e+"]'s properties from ["+h+"] has FAILED. Not to worry. Continuing to render with default properties."),y()})):y()}else H(e).spaRender(a);else console.error("Invalid ComponentName:",e)}else console.error("Missing ComponentName to render.")}},K.renderComponents=K.$$render=function(){_spaRenderRefreshComponents.apply({action:"renderComponent"},arguments)},K.refreshComponents=K.$$refresh=function(){_spaRenderRefreshComponents.apply({action:"refreshComponent"},arguments)},K.renderComponentsInHtml=function(e,i,t){e&&"object"==typeof e&&e.length&&!e[0]&&(e=""),e=e||"body",renderOptions="object"==typeof i?i:"",i="string"==typeof i?i.trim():"";var o,s,l,c,d,a=H(e);t||(function _registerEventsForComponentRender(e){H(e=e||"body").find('[href][target^="#"]:not([for])').each(function(e,t){t.setAttribute("for",t.getAttribute("href").replace(/^[#\s]+/,""))}),H(e).find("[for]:not(label):not([render-on])").each(function(e,t){_registerRenderForEl(t)}),H(e).find('form[action^="$"]:not([for]):not([render-on])').each(function(e,t){_attr(t,"for",_attr(t,"action").substring(1)),t.removeAttribute("action"),_registerRenderForEl(t)})}(e),t=_spaTagsSelector("spa-template,x-template"),H(e).find(t).each(function(){_attr(this,"data-x-component",_attr(this,"src")),_attr(this,"data-skip-data-bind","true"),_attr(this,"data-template-script","true"),this.style.display="none"}),t=_spaTagsSelector("spa-html,x-html"),H(e).find(t).each(function(){var e,t=_attr(this,"src");"$"!==t[0]&&/[^a-z0-9]/gi.test(t)||K.components[t.replace(/[^a-z0-9]/gi,"_")]||(e={templateScript:!0},!(this.hasAttribute("data")||this.hasAttribute("data-url"))?e.skipDataBind=!0:this.hasAttribute("data-url")||(e.data=this.hasAttribute("data")?_toObj(_attr(this,"data")):{}),K.$(t,e)),_attr(this,"data-x-component",t)}),t=_spaTagsSelector("spa-component,x-component"),H(e).find(t).each(function(){_attr(this,"data-x-component",_attr(this,"src"))}),a=a.find("[data-x-component],[data-spa-component]").filter(":not([render-after])")),a.length&&a.each(function(e,t){o=H(t),d=o.data();var a,n,r={url:"dataUrl",urlParams:"dataUrlParams",urlMethod:"dataUrlMethod",urlError:"dataUrlErrorHandle",urlErrorHandle:"dataUrlErrorHandle",urlHeaders:"dataUrlHeaders",params:"dataParams",type:"dataType",model:"dataModel",cache:"dataCache",validate:"dataValidate",process:"dataProcess"};Object.keys(d).forEach(function(e){r.hasOwnProperty(e)&&(d[r[e]]=/params|headers/gi.test(e)?_toObj(d[e]):d[e],delete d[e])}),c=(o.attr("data-x-component")||o.attr("data-spa-component")||"").split("|"),s=c[0].trim(),(l=(c[1]||"").trim())&&(/\:\s*\$data/.test(l)&&(l=l.replace(/\:\s*\$data/g,":app."+i+".$data")),l=_toObj(l)),s&&(!K.components[s]&&(t.hasAttribute("no-script")||t.hasAttribute("noscript")||t.hasAttribute("nojs")||t.hasAttribute("no-js"))&&K.$(s,{}),t.id||("$"==(a=String(s).trim())[0]&&(a=a.replace(/[^a-z0-9]/gi,"_")),a=a.replace(/[^a-z0-9_]/gi,""),c="spaCompContainer_"+a+"_"+(H("body").find("[rel=spaComponentContainer_"+a+"]").length+1),t.id=c,_attr(t,"rel","spaComponentContainer_"+a)),a=o.attr("data-x-component-options")||o.attr("data-x-$options")||o.attr("data-spa-component-options")||o.attr("data-spa-$options")||o.attr("spa-$options")||"{}",l=_mergeDeep({target:"#"+t.id,targetEl:t,spaComponent:s.trim(),_reqFrTag_:1},l,d,_toObj(a),renderOptions),(t.hasAttribute("skipDataBind")||t.hasAttribute("skip-data-bind"))&&(l.skipDataBind=!0),l.hasOwnProperty("data")&&_isStr(l.data)&&(n=l.data.trim(),/^\$data/.test(n)&&(n="app."+i+"."+n),l.data=_mergeDeep({},_find(window,n,{}))),(n=(o.attr("data-x-component-$data")||o.attr("data-x-$data")||o.attr("data-spa-component-$data")||o.attr("data-spa-$data")||o.attr("spa-$data")||"").trim())&&(/\:\s*\$data/.test(n)&&(n=n.replace(/\:\s*\$data/g,":app."+i+".$data")),_isBlank(l.data)?l.data=_toObj(n):_mergeDeep(l.data,_toObj(n))),!_isBlank(l.data)&&l.data.hasOwnProperty("$data")&&(n=_mergeDeep({},l.data.$data),delete l.data.$data,_mergeDeep(l.data,n)),l.hasOwnProperty("data")&&(l.data_=_mergeDeep({},l.data),delete l.data),W.log("inner-component",s,"options:",l),K.renderComponent(s,l))})},K.renderUtils={array2ObjWithKeyPrefix:function(e,t,a){var n={};return _each(e,function(e){(e=(""+e).trimStr())&&(n[t+(e.equals(".")?a:e).replace(/[^a-z0-9]/gi,"_")]=""+e)}),W.log([t,n]),n},getFn:function(e){var t=e;return e&&_isStr(e)&&(t=_find(window,e)),t&&_isFn(t)?t:void 0},runCallbackFn:function(e,t,a){if(e){var n,r=e,a=a;if(_isStr(r)&&(a||(e.match("]$")?n=e.substring(0,e.lastIndexOf("[")):0<e.indexOf(".")&&(n=e.substring(0,e.lastIndexOf("."))),a=n?_find(window,n):window),0<(n=r.indexOf("("))&&(r=r.substring(0,n)),r=_find(window,r)),r){if(_isFn(r))return W.info("calling callback: ","Fn:"+(e.name||""),e),_isArr(t)&&"(...)"==t[0]?(t.shift(),r.apply(a,t)):r.call(a,t);W.error("CallbackFunction <"+e+" = "+r+"> is NOT a valid FUNCTION.")}else W.info("CallbackFunction <"+e+"> is NOT defined.")}},registerComponentEvents:function(r){var e;r&&app[r]&&app[r].hasOwnProperty("events")&&_each(_keys(app[r].events),function(n){app[r].events[n].hasOwnProperty("target")&&!_isBlank(app[r].events[n].target)&&(e=app[r].events[n].target,K.$(r+" "+e).filter(":not([spa-events-"+n+'="'+r+'"])').attr("spa-events-"+n,r).each(function(e,a){_each(_keys(app[r].events[n]),function(t){0==t.indexOf("on")&&_each(t.split("_"),function(e){W.log("registering component ["+r+"] event: "+n+"-"+e),H(a).on(e.trimLeftStr("on").toLowerCase(),app[r].events[n][t])})})}))})}},K.render=function(j,P){if(W.log("xsr.render",j,P),arguments.length){if(1===arguments.length&&"object"==typeof j)return(P=_mergeDeep({},j)).hasOwnProperty("target")?(j=P.target,delete P.target):(o=H('[data-rendered-component="'+P.componentName+'"]').attr("id"),(j=(o?"#":"")+o)||(console.warn("Render target is missing."),j="dynRender_"+_now()+"_"+K.rand(1e3,9999))),void K.render(j,P);P&&function transOptions(a){_each({template:"dataTemplate",templates:"dataTemplates",templateCache:"dataTemplatesCache",templatesCache:"dataTemplatesCache",html:"dataTemplate",htmls:"dataTemplates",htmlCache:"dataTemplatesCache",htmlsCache:"dataTemplatesCache",script:"dataScripts",scripts:"dataScripts",scriptCache:"dataScriptsCache",scriptsCache:"dataScriptsCache",style:"dataStyles",styles:"dataStyles",styleCache:"dataStylesCache",stylesCache:"dataStylesCache",renderType:"dataRenderType",beforeRender:"dataBeforeRender",dataRenderCallBack:"dataRenderCallback",renderCallback:"dataRenderCallback",renderCallBack:"dataRenderCallback",callback:"dataRenderCallback",callBack:"dataRenderCallback",onRemove:"dataRemoveCallback",dataRenderMode:"dataRenderMode",renderMode:"dataRenderMode",renderId:"dataRenderId"},function(e,t){a.hasOwnProperty(t)&&(a[e]=P[t],delete a[t])})}(P);var R={id:"",view:{},model:{},cron:"",elDataAttr:{},target:j,iOptions:P},L=[],$=!1,e=_isElementExist(j);e&&(R.elDataAttr=H(j).data());var D=1<arguments.length,U=D&&P.hasOwnProperty("data"),B=P&&P.componentName?P.componentName:"",N={data:{},dataPreRequest:K.defaults.components.dataPreRequest,dataUrl:"",dataUrlParams:{},dataUrlMethod:"GET",dataUrlErrorHandle:"",dataUrlHeaders:{},dataParams:{},dataType:"",dataExtra:{},dataXtra:{},data_:{},dataDefaults:{},dataModel:"",dataValidate:!1,dataProcess:"",dataUrlCache:!1,dataCache:!1,extend$data:K.defaults.components.extend$data,dataCollection:{},dataTemplates:{},dataTemplate:"",dataTemplatesCache:!0,templateScript:!1,templateEngine:"",sanitizeApiXss:!1,dataScripts:{},dataScriptsCache:!0,dataStyles:{},dataStylesCache:!0,dataBeforeRender:"",dataRenderCallback:"",dataRemoveCallback:"",dataRenderMode:"",skipDataBind:!1,render:"",dataRenderId:""};if(e||(_isElementExist("#spaRunTimeHtmlContainer")||H("body").append("<div id='spaRunTimeHtmlContainer' style='display:none;'></div>"),H("#spaRunTimeHtmlContainer").append("<div id='"+j.replace(/\#/gi,"")+"'></div>")),D){var t,a={dataTemplatesCache:K.defaults.components.templateCache},n=(P=_mergeDeep({},a,P)).hasOwnProperty("saveOptions")&&P.saveOptions;for(t in P)N[t]=P[t],n&&"data"!==t&&"saveOptions"!==t&&H(j).data(""+(""+((""+t)[4]||"")).toLowerCase()+t.slice(5),K.toStr(P[t]))}W.log(B+".$"+(N.isRefreshCall?"refresh":"render")+" with options:",N,"$data",_find(app,B+".$data")),lock$render(N.inProgress);var F=H(j),r=F.attr("data-rendered-component")||"",i=r==B;if(_isSpaNavBlocked(F)){W.log("Component container [",j,"] blocks navigation.");var o=F.hasClass(G)?F:F.find(Z);if(1<o.length&&(o=H(o[0])),o.length){var s,l,e=(o.attr(ne)||"").trim();if(e){if("#"==e[0]||">"==e[0]){a=">"==e[0]?e.substring(1).trim():e,a=o.find(a).filter(":not(.disabled):not(:disabled)");if(a.length)return void a.trigger("click")}else if((s=_find(window,e.split("(")[0].split(";")[0]))&&_isFn(s)&&(l=s.call(app[r],app[r],app[B])),s&&(!_isBool(l)||!l))return}else if((s=_find(app,r+".onNavBlock"))&&_isFn(s)&&(l=s.call(app[r],app[r],app[B])),s&&(!_isBool(l)||!l))return}W.log("Render continues.")}i&&(W.log("$refresh - Auto-Detected",B,N),"auto".equalsIgnoreCase(""+N.render)&&(W.log("Finding for refresh events."),_fixRefreshCalls("dataBeforeRender",".onRender","onRefresh"),_fixRefreshCalls("dataRenderCallback",".renderCallback","refreshCallback")));function gB(e){return(""+F.data(e)).replace(/undefined/,"")}function hB(e,t){var a=_isBlank(N[e])?gB(t):N[e];return W.info("{."+e+"} | [data-"+t+"]",a),a}i=hB("dataRenderId","renderId");R._renderId=i.ifBlankStr("spaRender"+_now()+K.rand(1e3,9999));var I=hB("dataRenderMode","renderMode")||"replace";W.log("Render Mode: <"+I+">");var z="x-spa-template",M=(N.templateEngine||K.defaults.components.templateEngine||"handlebars").toLowerCase();W.group("spaLoadingViewScripts"),D&&P.hasOwnProperty("dataScriptsCache")?W.info("Override [data-scripts-cache] with user option [dataScriptsCache]: "+N.dataScriptsCache):_isBlank(c=gB("scriptsCache"))||(N.dataScriptsCache=c.toBoolean(),W.info("Override [data-scripts-cache] with [data-scripts-cache] option in tag-attribute: "+N.dataScriptsCache));var c=gB("scripts");c&&_isBlank((c||"").replace(/[^:'\"]/g,""))&&(c="'"+c.split(",").join("','")+"'");var d,p,u=_toObj(c||"{}");return!_isObj(N.dataScripts)&&_isStr(N.dataScripts)&&(_isBlank(((c=(N.dataScripts||"").trimStr())||"").replace(/[^:'\"]/g,""))&&(c="'"+c.split(",").join("','")+"'"),N.dataScripts=_toObj(c)),_isEmptyObj(N.dataScripts)||(u=N.dataScripts),_isArr(u)&&_removeOn(u,function(e){return!e}),W.info(u),c=[],u&&!_isEmptyObj(u)?(_isArr(u)&&(W.info("Convert array of script(s) without scriptID to object with scriptID(s)."),d=K.renderUtils.array2ObjWithKeyPrefix(u,"__scripts_",j),W.info("Scripts(s) with scriptID(s)."),W.log(d),u=_isEmpty(d)?{}:d),W.info("External scripts to be loaded [cache:"+N.dataScriptsCache+"] along with view container ["+j+"] => "+JSON.stringify(u)),d=_keys(u)):W.info("No scripts defined [data-scripts] in view container ["+j+"] to load."),W.groupEnd("spaLoadingViewScripts"),d&&(c=_map(d,function(e){return!(p=_getFullPath4Component(u[e],B)).endsWithStrIgnoreCase(".js")&&p.indexOf("?")<0&&(p+=K.defaults.components.scriptExt),(N.dataScriptsCache?"":"~")+p})),W.log("Loading component [",B,"] scripts:",c),K.loadScriptsSync(c,function _onScriptsLoadComplete(){W.info("External Scripts Loaded."),!q&&_keys(app.api).length&&_initApiUrls();var e=N?N.dataPreRequest:"";if(_isStr(e)&&(e=K.renderUtils.getFn(e)),_isFn(e))try{var t=e.call(app[B]);t&&_isObj(t)&&_keys(t).forEach(function(e){0==e.indexOf("data")&&(N[e]=t[e])})}catch(e){console.error("dataPreRequest-Error in app."+B,e)}W.group("spaDataModel");var d,a,n=hB("dataModel","model"),r=hB("dataUrl","url"),i=U||r.beginsWithStrIgnoreCase("local:"),o=r.beginsWithStrIgnoreCase("local:")?r.replace(/local:/gi,""):"data",p=function _appApiDefaultPayload(){var e=_find(app,"api.ajaxOptions.defaultPayload",{});return _isFn(e)?e():_isObj(e)?_mergeDeep({},e):e}(),u=N&&N.hasOwnProperty("stringifyPayload")?N.stringifyPayload:_find(app,"api.ajaxOptions.stringifyPayload");W.info("dataModelUrl initial:",r),n=n.ifBlankStr(o),d=n.replace(/\./g,"_");var f={};if(U)f[d]=_isFn(N.data)?N.data():N.data,W.info("Loaded data model ["+n+"] from argument");else if(D&&P.hasOwnProperty("dataCache")?W.info("Override [data-cache] with user option [dataCache]: "+N.dataCache):_isBlank(s=gB("cache"))||(N.dataCache=s.toBoolean(),W.info("Override [data-cache] with [data-cache] option in tag-attribute: "+N.dataCache)),_isBlank(r)){f[d]={};var m=(m=gB("collection"))&&_toObj(m);_isBlank(N.dataCollection)||(m=N.dataCollection),_isArr(m)&&(m={urls:m});var h,g,s=m.urls;_isBlank(s)?(W.info("Model Data ["+n+"] or [data-url] or [data-collection] NOT found! Check the arguments or html markup. Rendering with options."),f[d]=_mergeDeep({},N.dataDefaults,N.data_,N.dataExtra,N.dataXtra)):_isArr(s)?(W.info("Processing data-URLs"),h=0,g=m.nameprefix||"data",_each(s,function(s){var e=g+h,l=_hasKey(s,"name")?(""+s.name).replace(/[^a-zA-Z0-9]/gi,""):_hasKey(s,"target")?""+s.target:e,c=_hasKey(s,"url")?s.url:_hasKey(s,"path")?s.path:"";l.containsStr(".")&&(l=_last(l.split("."))),l=l.ifBlankStr(e),W.info("processing data-api for: "+l),W.log(s),c?(c=K.api.url(c,_hasKey(s,"urlParams")?s.urlParams:{}),_isBlank(e=_hasKey(s,"headers")?s.headers:N.dataUrlHeaders)&&(e=_find(window,"app.api.ajaxOptions.headers",{})),a=_hasKey(s,"params")?s.params:_hasKey(s,"data")?s.data:{},_hasKey(s,"defaultPayload")||_isBlank(p)||(a=_mergeDeep({},p,!_isBlank(a)&&_isObj(a)?a:{})),!_isBlank(a)&&u&&(a=JSON.stringify(a)),W.info("ajaxQ for dataCollection:",c),L.push(ue({url:c,method:(""+(s.method||"GET")).toUpperCase(),headers:_isFn(e)?e():e,data:a,cache:_hasKey(s,"cache")?s.cache:N.dataCache,dataType:_hasKey(s,"type")?s.type:N.dataType||_find(window,"app.api.ajaxOptions.dataType","text"),success:function(e,t,a){var n,r=_hasKey(s,"target")?""+s.target:"",i=_isStr(e)?_toObj(""+e,"data"):e;if(0<r.indexOf("."))n=K.hasKey(i,r)?_find(i,r):i;else try{n=i.hasOwnProperty(r)?i[r]:i}catch(e){console.warn("Error in Data Model ["+r+"] in URL ["+c+"].\n"+e.stack)}f[d][l]?(f[d][l]=[f[d][l]],f[d][l].push(n)):f[d][l]=n,W.info("Loaded data model ["+l+"] from ["+c+"]");var o=s.success||s.onsuccess||s.onSuccess;(o=o||(m.success||m.onsuccess||m.onSuccess))&&(_isFn(o)?o.call(this,i,s,t,a):_isStr(o)&&(_isFn(e=_find(window,o))?e.call(this,i,s,t,a):W.log("Unknown ajax success handle: "+o)))},error:function(e,t,a){W.warn("Error processing data-api ["+c+"]");var n,r=s.error||s.onerror||s.onError;r||(r=m.error||m.onerror||m.onError,n=N.dataUrlErrorHandle||N.onDataUrlError||N.onError,!r&&n&&(r=n)),r?_isFn(r)?r.call(this,e,t,a):_isStr(r)&&(_isFn(n=_find(window,r))?n.call(this,oResult,s):W.log("Unknown ajax error handle: "+r)):(_isFn(app.api.onError)?app.api.onError:K.api.onReqError).call(this,e,t,a)}}))):W.error("data-api-url not found. Please check the arguments or html markup. Skipped this data-api request"),h++})):W.warn("Invalid [data-urls].Check the arguments or html markup. Rendering with empty data {}.")}else if(W.info("dataModelUrl:",r),r.beginsWithStrIgnoreCase("local:")){var l=r.replace(/local:/gi,""),c={};if(_isValidEvalStr(l)){try{c=Function('"use strict";return ('+l+")")()}catch(e){console.error("Error in xsr.$('"+N.componentName+"'): Invalid Data Model >> \"local:"+l+'"\n>> '+e.stack.substring(0,e.stack.indexOf("\n")))}W.info("Using LOCAL Data Model: "+l)}if(!i&&0<n.indexOf("."))f[d]=K.hasKey(c,n)?_find(c,n):c;else try{f[d]=c.hasOwnProperty(n)?c[n]:c}catch(e){console.warn("Error in Data Model ["+n+"] in Local Object ["+l+"].\n"+e.stack)}}else{W.info("dataModelUrl without params fill:",r),r=K.api.url(r,_isBlank(N.dataUrlParams)?{}:N.dataUrlParams),W.info("Request Data ["+n+"] [cache:"+(N.dataUrlCache||N.dataCache)+"] from URL =>"+r);var y=N.dataUrlHeaders;_isBlank(y)&&(y=_find(window,"app.api.ajaxOptions.headers",{})),a=N.dataParams,N.hasOwnProperty("defaultPayload")||_isBlank(p)||(a=_mergeDeep({},p,!_isBlank(a)&&_isObj(a)?a:{})),!_isBlank(a)&&u&&(a=JSON.stringify(a));var b={url:r,method:(""+(hB("dataUrlMethod","urlMethod")||"GET")).toUpperCase(),headers:_isFn(y)?y():y,data:a,cache:N.dataUrlCache||N.dataCache,dataType:N.dataType||_find(window,"app.api.ajaxOptions.dataType","text"),success:function(e){W.log("API response:",e);var t=_isStr(e)?_toObj(""+e,"data"):e,a=hB("dataValidate","validate");if(0<n.indexOf("."))f[d]=K.hasKey(t,n)?_find(t,n):t;else try{"data"!=n||t.hasOwnProperty(n)||(d=n="Data"),f[d]=!a&&t.hasOwnProperty(n)?t[n]:t}catch(e){console.error("Error in Data Model ["+n+"] in URL ["+r+"].\n"+e.stack)}W.info("Loaded data model ["+n+"] from ["+r+"]")},error:function(e,t,a){var n,r=hB("dataUrlErrorHandle","urlErrorHandle")||N.onDataUrlError||N.onError;r?_isFn(n=_isStr(r)?_find(window,r):r)?n.call(this,e,t,a):W.log("Unknown ajax error handle: "+r):(_isFn(app.api.onError)?app.api.onError:K.api.onReqError).call(this,e,t,a)}};W.info("ajaxQ for data:",r),L.push(ue(b))}W.info("End of Data Processing -",B),W.log({o:f}),W.groupEnd("spaDataModel");y=gB("template")||gB("html"),b=gB("templates")||gB("htmls");b&&_isBlank((b||"").replace(/[^:'\"]/g,""))&&(b="'"+b.split(",").join("','")+"'");var v,S,O,k,x,C,w,T,E,A=_toObj(b||"{}");!_isObj(N.dataTemplates)&&_isStr(N.dataTemplates)&&(_isBlank(((b=(N.dataTemplates||"").trimStr())||"").replace(/[^:'\"]/g,""))&&(b="'"+b.split(",").join("','")+"'"),N.dataTemplates=_toObj(b)),_isEmptyObj(N.dataTemplates)||(A=N.dataTemplates,b=""+JSON.stringify(A)),(_isEmpty(_toObj((b||"").trimStr()))||_isArr(A)&&1==A.length&&_isBlank(A[0]))&&(A={},b=""),W.info("Templates:"),W.info(A),_isArr(A)&&!_isEmpty(A)&&(W.info("Array of template(s) without templateID(s)."),v=K.renderUtils.array2ObjWithKeyPrefix(A,"__tmpl_",j),W.info("Template(s) with template ID(s)."),W.log(v),b=_isEmpty(v)?(A={},""):(A=v,""+JSON.stringify(A))),A&&!_isEmptyObj(A)||(A={},S=v="",_isBlank(b=N.dataTemplate)&&(_isBlank(y)||(W.info("Template to load from location <"+y+">"),b=y)),b=(b||"").trimStr(),W.info("Primary Template: <"+b+">"),_isBlank(b)||b.equalsIgnoreCase("inline")||b.equals(".")?(W.info("Using target container (inline) content as template."),v="_tmplInline_"+j.trimStr("#")):b.beginsWithStr("#")?(W.info("Using page container <"+b+"> content as template."),v=b.trimStr("#")):(W.info("External path <"+b+"> content as template."),v="__tmpl_"+(""+b).replace(/[^a-z0-9]/gi,"_"),S=b),A[v]=S.replace(/['\"]/g,""),W.info(A)),W.group("spaView"),A&&!_isEmptyObj(A)?(W.info("Templates of ["+z+"] to be used in view container ["+j+"] => "+JSON.stringify(A)),S=_keys(A),W.group("spaLoadingTemplates",L),W.group("spaLoadingTemplatesCache"),D&&P.hasOwnProperty("dataTemplatesCache")?W.info("Override [data-templates-cache] with user option [dataTemplatesCache]: "+N.dataTemplatesCache):_isBlank(O=gB("templatesCache")||gB("templateCache")||gB("htmlsCache")||gB("htmlCache"))||(N.dataTemplatesCache=O.toBoolean(),W.info("Override [data-templates-cache] with [data-templates-cache] option in tag-attribute: "+N.dataTemplatesCache)),W.info("$"+B+"-ajaxRequests",L),W.groupEnd("spaLoadingTemplatesCache"),W.info("Load Templates"),W.info(A),(O=N.templateUrlPayload)&&(_isFn(O)||_isStr(O)&&O.indexOf("=")<0)&&(O=__finalValue(O,N)),k={method:N.templateUrlMethod,params:__finalValue(N.templateUrlParams,N),payload:O,headers:__finalValue(N.templateUrlHeaders,N),onError:__finalValue(N.onTemplateUrlError||N.onError)},_each(S,function(e,t){W.info([t,e,A[e],z,j,N]),L=K.loadTemplate(e,A[e],z,j,L,!N.dataTemplatesCache,k)}),x="#"+S[0].trimStr("#"),W.info("External Data/Templates Loading Status: ",L),W.groupEnd("spaLoadingTemplates"),W.info("Render TemplateID: "+x),W.group("spaLoadingViewStyles",L),D&&P.hasOwnProperty("dataStylesCache")?W.info("Override [data-styles-cache] with user option [dataStylesCache]: "+N.dataStylesCache):_isBlank(C=gB("stylesCache"))||(N.dataStylesCache=C.toBoolean(),W.info("Override [data-styles-cache] with [data-styles-cache] option in tag-attribute: "+N.dataStylesCache)),(C=gB("styles"))&&_isBlank((C||"").replace(/[^:'\"]/g,""))&&(C="'"+C.split(",").join("','")+"'"),w=_toObj(C||"{}"),_isEmptyObj(N.dataStyles)||(w=N.dataStyles),_isArr(w)&&_removeOn(w,function(e){return!e}),w&&!_isEmptyObj(w)?(_isArr(w)&&(W.info("Convert array of style(s) without styleID to object with styleID(s)."),T=K.renderUtils.array2ObjWithKeyPrefix(w,"__styles_",j),W.info("Style(s) with styleID(s)."),W.log(T),w=_isEmpty(T)?{}:T),W.info("External styles to be loaded [cache:"+N.dataStylesCache+"] along with view container ["+j+"] => "+JSON.stringify(w)),T=_keys(w),W.group("spaLoadingStyles"),_each(T,function(e){E=_getFullPath4Component(w[e],B),L=K.loadStyle(e,E,N.dataStylesCache,L)}),W.info("External Styles Loading Status: "+JSON.stringify(L)),W.groupEnd("spaLoadingStyles")):W.info("No styles defined [data-styles] in view container ["+j+"] to load."),W.info("$"+B+"-ajaxRequests",L),W.groupEnd("spaLoadingViewStyles"),W.group("$"+B+"-ajaxRequests",L),ce.apply(H,L).then(function(){W.group("spaRender["+M+"] - xsr.renderHistory["+R._renderId+"]"),W.info("Rendering "+j+" using master template: "+x);var e=Array.isArray(this)?this[0]:this;try{var k,C=!1,t=hB("dataValidate","validate"),a=!t;a&&_isFn(app.api.isCallSuccess)?a=app.api.isCallSuccess.call(e,f[d],e):a||(W.info("Validating Data"),(n=t)&&_isStr(n)&&(n=_find(window,n)),a=n&&_isFn(n)?n.call(f[d],f[d],e):(_isFn(app.api.isCallSuccess)?app:K).api.isCallSuccess.call(e,f[d],e));var n=f[d],w=f[d];!t||(t=hB("dataModel","model"))&&(w=f[d]=K.hasKey(w,t)?_find(w,t):w),W.log(B,"Template Data from API:",w),a?ce.apply(H,function _dataPreProcessAsync(){var e,t=hB("dataPreProcessAsync","preProcessAsync");return t&&_isStr(t)&&(t=_find(window,t)),R.modelOriginal=_clone(w,!0),R.model=w,t&&_isFn(t)&&(C=!0,e=_extend({},app[B]||{},P||{}),e=t.call(e,w),(C=!_isUndef(e))||(e=[]),C&&(k=!_isArr(e)||_isArr(e)&&1==e.length,_isArr(e)||(e=[e]))),e}()).done(function(){var a=V.slice.call(arguments);C&&(W.log(B,".dataPreProcessAsync() =>",a.__now()),k&&1<a.length&&"success"==a[1]?(a[0]=_toObj(a[0]),a.splice(1)):_each(a,function(e,t){e&&_isArr(e)&&1<e.length&&"success"==e[1]&&(a[t]=_toObj(e[0]))}),W.log(a.__now()));var e=hB("dataProcess","process");e&&_isStr(e)&&(e=_find(window,e));var t,n=N.sanitizeApiXss||K.defaults.components.sanitizeApiXss;n&&(w=_isFn(n)?n.call(w,w)||w:_sanitizeXSS(w)),R.modelOriginal=_clone(w,!0),R.model=w,e&&_isFn(e)?(t=_extend({},app[B]||{},P||{}),a.unshift(w),t=e.apply(t,a)):C&&(W.warn(B,".dataPreProcessAsync without dataProcess. Merging responses."),a.unshift(w),_mergeDeep.apply(_,a)),R.model=_isUndef(t)?w:t,"object"!=typeof R.model&&(R.model=R.modelOriginal),W.log(B,"Template Data initial:",R.model),B&&(_isObj(app)&&app.hasOwnProperty(B)&&((s=_mergeDeep({},_isObj(R.model)?R.model:{_noname:R.model})).hasOwnProperty("spaComponent")?app[B].$data={}:app[B].$data=N.extend$data?_mergeDeep({},N.dataDefaults,N.data_,N.dataExtra,N.dataXtra,N.dataParams,s):{},app[B].__global__=window||{}),R.model._this=_mergeDeep({},_find(window,"app."+B,{})),R.model._this_=_mergeDeep({},K.components[B]||{},P)),R.model._global_=window||{};var r,i=R.model;W.log(B,"Template Data Final:",R.model);var o=(H(x).html()||"").replace(/_LINKTAGINTEMPLATE_/g,"link"),s=N.templateScript||K.defaults.components.templateScript,s=(o=s?o.replace(/_BlockedScript_ src-ref="([^"])*"/g,"script").replace(/_BlockedScript_/g,"script"):o.replace(/<\/_BlockedScript_>/g,"&lt;/_BlockedScript_&gt;")).match(/({\s*\@\$(.*?)\s*})/g);!N.skipDataBind&&s&&_each(s,function(e){o=o.replace(new RegExp(e.replace(/\$/,"\\$"),"g"),e.replace(/{\s*\$this|{\s*\@\$/g,"_global_.app.").replace(/}/,".").replace(/\s/g,"").replace(/\.\./,"."+(B||"")+"."))});s=o.match(/({\s*\$(.*?)\s*})/g);if(!N.skipDataBind&&s&&_each(s,function(e){o=o.replace(new RegExp(e.replace(/\$/,"\\$"),"g"),e.replace(/{\s*\$this|{\s*\$/g,"app.").replace(/}/,".").replace(/\s/g,"").replace(/\.\./,"."+(B||"")+"."))}),r=o,W.groupCollapsed("Template Source ..."),W.log(o),W.groupEnd("Template Source ..."),W.log("DATA for Template:",i),!_isBlank(i))if(N.skipDataBind)W.log("Skipped Data Binding.");else if(N.dataTemplatesCache||(delete K.compiledTemplates4DataBind[B],delete K.compiledTemplates[B]),K.compiledTemplates4DataBind.hasOwnProperty(B)||/ data-bind\s*=/i.test(o)&&(o=function _maskHandlebars(e){return e.replace(/<img /gi,"<IMG-X-TMP ").replace(/<iframe /gi,"<IFRAME-X-TMP ").replace(/<\/iframe/gi,"</IFRAME-X-TMP").replace(/{{/g,">\x3c!--_XHBTINSPA_{{").replace(/}}/g,"}} _XHBTINSPA_--\x3e")}(o),W.log("TemplateBeforeBind",o),g=_isObj(i)?_mergeDeep({},N.dataDefaults,N.data_,N.dataExtra,N.dataXtra,N.dataParams,i):i,W.log("SPA built-in binding ... ...",g),o=_unmaskHandlebars(o=K.bindData(o,g,"$"+B)),W.log("TemplateAfterBind",o),K.compiledTemplates4DataBind.hasOwnProperty(B)||(K.compiledTemplates4DataBind[B]={}),b=!0),0<=M.indexOf("handlebar")||0<=M.indexOf("{"))if("undefined"!=typeof Handlebars&&Handlebars){W.groupCollapsed("Data bind using handlebars on Template ..."),W.log(o),W.groupEnd("Data bind using handlebars on Template ...");try{var l=K.compiledTemplates[B]||Handlebars.compile(o),c=_isObj(i)?_mergeDeep({},R,N.dataDefaults,N.data_,N.dataExtra,N.dataXtra,N.dataParams,i):i,d=c;K.compiledTemplates.hasOwnProperty(B)||(K.compiledTemplates[B]=l),r=l(c),W.log(r)}catch(e){console.error("Error in Template",e)}}else W.error("handlebars.js is not loaded.");W.groupCollapsed("Compiled Template ..."),W.log(r),W.groupEnd("Compiled Template ..."),$=!1,R.view=r.replace(/\_\{/g,"{{").replace(/\}\_/g,"}}");var p=B?_mergeDeep({},app[B]||{},{__prop__:_mergeDeep({},P||{})}):{};p.__prop__&&p.__prop__.data&&(delete p.__prop__.data._global_,delete p.__prop__.data._this_,delete p.__prop__.data._this),R.model&&(delete R.model._global_,delete R.model._this_,delete R.model._this);var u,f,m,h=hB("dataBeforeRender","beforeRender"),g=function(){if(h){var e={template:o,data:R.model,view:R.view};if(!_isUndef(u=K.renderUtils.runCallbackFn(h,e,p)))switch(_of(u)){case"string":R.view=u,m=u.beginsWithStr("\x3c!----\x3e");break;case"boolean":f=!u}}};if(g(),f||m||(h=K.defaults.components.render,g()),f?(R={},W.warn("Render aborted by "+h)):m||(v=F.attr("data-rendered-component"))&&!K.removeComponent(v,B)&&(f=!0,R={},W.warn("Render $"+B+" aborted by $"+v+".onRemove()")),!f){if(m)W.log("Rendering component [",B,"] view aborted.");else{var y=hB("dataRenderType","renderType");switch(W.log("Injecting component in DOM (",j,")."+(y||"html")),y){case"value":H(j).val(R.view);break;case"text":H(j).text(R.view);break;default:switch($=!0){case I.equalsIgnoreCase("append"):H(j).append(R.view);break;case I.equalsIgnoreCase("prepend"):H(j).prepend(R.view);break;default:H(j).html(R.view)}}}H(j).attr("data-rendered-component",B).data("renderedComponent",B),function _$renderCountUpdate(e){e=String(e).replace(/[^a-z0-9]/gi,"_"),app[e]&&(app[e].__renderCount__=K.toInt(K.$renderCount(e))+1)}(B),unlock$render(N.inProgress),W.info("Render: SUCCESS");var b,v=_keys(K.renderHistory),y=v.length;if(y>K.renderHistoryMax&&_each(v.splice(0,y-K.renderHistoryMax),function(e,t){delete K.renderHistory[t]}),R.cron=""+_now(),0<K.renderHistoryMax&&(K.renderHistory[R._renderId]=R),$&&!m)if(K.renderUtils.registerComponentEvents(B),H(j).find(".lang-icon,.lang-text,[data-i18n-lang]").length&&K.i18n.displayLang(),_init_SPA_DOM_(j),b||K.bindData(j,d,"",!0),K.bindElements(j),H(j).find('[data-i18n]:not([data-i18n=""])').length&&(!_isBlank(K.defaults.components.lang)||!_isBlank(N.lang)||K.defaults.lang.url&&0<=K.defaults.lang.url.indexOf("$")?(y=K.defaults.components.lang,O=_mergeDeep({target:j},_isObj(y)&&!_isBlank(y)?K.defaults.components.lang:{},_isObj(N.lang)&&!_isBlank(N.lang)?N.lang:{}),b={componentName:B,componentPath:B.replace(/_/g,"/"),componentData:d,componentLang:O},_is(y,"string|function")&&_isObj(S=K.renderUtils.runCallbackFn(y,b,b))&&(O=_mergeDeep(O,S),b.lang=O),_is(N.lang,"string|function")&&_isObj(S=K.renderUtils.runCallbackFn(N.lang,b,b))&&(O=_mergeDeep(O,S)),S={$name:B,$path:B.replace(/_/g,"/")},O.urlParams&&_isObj(O.urlParams)&&(S=_mergeDeep(S,O.urlParams)),O.urlParams=S,K.i18n.updateLang(O)):K.i18n.apply(j)),function _routeReloadUrl(e){var t=(K.sesStore.get("_spaReloadUrl")||"").trim();if(e&&0!=t.indexOf(e))return;if(t)return K.sesStore.remove("_spaReloadUrl"),t=t.replace(/.*#/gi,""),K.route(t,!0),!0}(B))return R;W.log(R);var S=gB("renderCallback");N.dataRenderCallback&&(S=N.dataRenderCallback);var O=_isStr(S)&&S.equalsIgnoreCase("off");W.info("Processing callback: "+S),O||K.renderUtils.runCallbackFn(S,R),K.renderUtils.runCallbackFn(K.defaults.components.callback,R,p),function _delayedRenderFor(a){var n,e=H("body").find('[render-after*="'+a+'"]');e.length&&(n="",e.each(function(e,t){(n=(" "+_attr(t,"render-after").replace(/,/g," ").replace(/\s+/g," ")+" ").replace(" "+a+" ","").trim())?_attr(t,"render-after",n):(t.removeAttribute("render-after"),K.renderComponentsInHtml(t,"",!0))}))}(B),$&&!m&&(H(j).find("[rel='spaRender'],[data-render],[data-sparender],[data-spa-render]").spaRender(),K.renderComponentsInHtml(j,B))}}):(unlock$render(N.inProgress),(_isFn(app.api.onResError)?app:K).api.onResError.call(e,n,"Invalid-Data",void 0))}catch(e){unlock$render(N.inProgress),console.error(e)}W.groupEnd("spaRender["+M+"] - xsr.renderHistory["+R._renderId+"]")}).fail(function(){unlock$render(N.inProgress),console.error("External Data|Template|Style|Script Loading failed! Unexpected!! Check the template Path / Network. Rendering aborted.")}),W.groupEnd("ajaxRegister")):(unlock$render(N.inProgress),W.error("No templates defined [data-templates] in view container ["+j+"] to render. Check HTML markup.")),W.groupEnd("spaView")},function _onScriptsLoadFailed(){unlock$render(N.inProgress),console.error("External Scripts Loading Failed! Unexpected!? Check the Script Path/Network.")}),R}function _fixRefreshCalls(e,t,a){_isStr(N[e])&&N[e]=="app."+B+t&&app[B].hasOwnProperty(a)&&(N[e]="app."+B+"."+a)}},K.initElementsIn=_initSpaElements;var E=/\r?\n/g,A=/^(?:input|select|textarea|keygen)/i,j=/^(?:submit|button|image|reset|file)$/i,P=/^(?:checkbox|radio)$/i;function _jQserializeArray(){W.group("_jQserializeArray");var e=this.map(function(e,t){var a=t.elements,a=a?[].slice.call(a):t;return W.info("Form elements",e,t,a),a}).filter(function(e,t){var a=t.name&&!H(t).is(":disabled")&&A.test(t.nodeName)&&!j.test(t.type)&&(t.checked||!P.test(t.type));return W.info("Filter",e,t,!!a),a}).map(function(e,t){W.info("Final element",e,t);e=K.getElValue(t);return null==e?null:Array.isArray(e)?_map(e,function(e){return{name:t.name,value:_isStr(e)?e.replace(E,"\r\n"):e}}):{name:t.name,value:_isStr(e)?e.replace(E,"\r\n"):e}}).get();return W.info("result:",e),W.groupEnd("_jQserializeArray"),e}function _isLiveApiUrl(e,t){var a="",n=t||_find(window,"app.api.liveApiPrefix",""),t=e.beginsWithStr("!");if(e=e.trimLeftStr("!"),n){var r,i,o=[],s=0;if(_isStr(n)?o=n.split(","):_isArr(n)&&(o=n),0<(r=o.length))for(;!a&&s<r;)a=(i=o[s++].trim())&&(e.beginsWithStr(i)||!_isRelativePath(e)&&0<e.indexOf(i))?i:"";else a=e.beginsWithStr(n)||!_isRelativePath(e)&&0<e.indexOf(n)?n:""}else t&&(a="??");return a}function _isRelativePath(e){e=e.getLeftStr(6).toLowerCase();return!(e.beginsWithStr("http:")||e.beginsWithStr("https:")||e.beginsWithStr("//"))}function _removeMockParams(e){return e.replace(/{{([^}])*}}(\/*)/g,"")}function _ajaxPrefilter(t,e,a){t.url.beginsWithStr(K.api.urlKeyIndicator)&&(t.url=K.api.url(t.url.trimLeftStr(K.api.urlKeyIndicator),t.data));var n=t.url;_find(window,"app.api.reqHeaders")&&(t.beforeSend=function(e){!function _ajaxSetReqHeaders(t,e){var a=_find(window,"app.api.reqHeaders"),n=_isFn(a)?a(t,e):a;_isObj(n)?_each(_keys(n),function(e){t.setRequestHeader(e,n[e])}):_isStr(n)&&(_isLiveApiUrl(e.url)?(e.data=e.data||"",e.data+=(_isBlank(e.data)?"":"&")+n):t.setRequestHeader("reqHeadersInLiveUrl",n))}(e,t)}),"script"==t.dataType||t.hasOwnProperty("error")||(t.error=app.api.onError||K.api.onReqError);var r,i="",o=/({+)([^}])*(}+)/;if(K.api.mock||app.api.mock||n.beginsWithStr("!"))if(n.beginsWithStr("~"))t.url=(_isRelativePath(n.trimLeftStr("~"))&&K.api.baseUrl||"")+n.trimLeftStr("~")+(K.api.liveUrlSuffix||""),K.api.baseUrl&&(t.crossDomain=!0);else{var s=("/"+(t.method||t.type).toUpperCase()).replace("/GET","");if(t.type=t.method="GET",i=_isLiveApiUrl(n),n=n.trimLeftStr("!"),i){if(n.containsStr("\\?")||(n=n.trimRightStr("/")+"?"),o.test(n)){W.log("URL has undefined params >>",n,t.data);try{r=_isStr(t.data)?JSON.parse(t.data):t.data,n=K.api.url(n.replace(/{{/g,"{").replace(/}}/g,"}"),r)}catch(e){}W.log("Updated URL>>",n)}var l=function _mockFinalUrl(e,t,a){e=e||"/",t=t||"","??"===(a=a||_isLiveApiUrl(e))&&((o=e.indexOf("//"))<0?e=(a="/MOCK-ROOT/")+e.trimLeftStr("/"):a=e.substring(0,e.indexOf("/",o+2)+1)),ie&&(e.indexOf("//")<0?e=(a="__DEFAULT_MOCK_API_ROOT__/")+e.trimLeftStr("/"):(e=e.replace(new RegExp(a),"__DEFAULT_MOCK_API_ROOT__/"+a.trimLeftStr("/")),a="__DEFAULT_MOCK_API_ROOT__/"));var n="",r=_find(app,"api.mockBaseUrl")||_find(spa,"api.mockBaseUrl")||"",i=r?"":(_find(app,"api.mockRootFolder")||_find(spa,"api.mockRootFolder")||"api_").trimRightStr("/")+"/",o=_find(app,"api.mockDataFile")||_find(spa,"api.mockDataFile")||"",n=(e||"").replace(/[\{\}]/g,"").replace(RegExp("(.*)(/*)"+a.trimLeftStr("/")),i).replace(/(\/)*\?/,t+"/"+o+"?").replace(/\?$/,"");return r&&(r=r.trimRightStr("/")+"/",(o=n.indexOf("//"))<0?n=r+n:o<7&&(n=r+n.substring(n.indexOf("/",n.indexOf("//")+2)+1))),n}(n,s,i);t.url=l,(app.api&&app.api.debug||app.debug||spa.debug)&&console.warn(">>>>>>Intercepting Live API URL: ["+n+"] ==> ["+l+"]"),d=!0}}else i=_isLiveApiUrl(n),(app.debug||spa.debug)&&console.log("actualUrl:"+n+",baseUrl:"+K.api.baseUrl+",liveApiPrefix:"+i),i&&(t.url=(_isRelativePath(n)&&K.api.baseUrl||"")+n+(K.api.liveUrlSuffix||""),K.api.baseUrl&&(t.crossDomain=!0));if(W.log("Remove mock params if any in URL>",t.url),t.url=_removeMockParams(t.url),o.test(t.url)){W.log("URL has undefined params>",t.url,t.data);try{r=_isStr(t.data)?JSON.parse(t.data):t.data,t.url=K.api.url(t.url.replace(/{</g,"{").replace(/>}/g,"}"),r)}catch(e){}}W.log("Final Ajax URL>",t.url),(o.test(t.url)||/<([^>])*>/.test(t.url))&&(console.warn("URL has undefined params >>",t.url,t.data),t.url=t.url.replace(/[{<>}]/g,"_"));var c,d,s=app.api.defaultPayload||K.api.defaultPayload;s&&(i="string"==(l=_of(t.data))?_toObj(t.data):t.data,_isFn(s)?_isObj(o=s.call(t,i,t))&&(_isBlank(c=JSON.parse(JSON.stringify(o)))||(t.data="string"==l?JSON.stringify(c):c)):(c=_is(s,"object|array")?JSON.parse(JSON.stringify(s)):s,c=_is(c,"object|array")&&_is(i,"object|array")?_mergeDeep({},c,i):c,t.data=_isBlank(c)||"string"!=l?c:JSON.stringify(c))),K.ajaxPreProcess&&K.ajaxPreProcess(t,e,a),(_isBlank(t.data)||_isStr(t.data)&&!/[a-z0-9]/i.test(t.data))&&(W.log("REMVOING EMPTY PAYLOAD"),delete t.data),d&&((d=_isStr(t.data)?t.data:JSON.stringify(t.data))&&_isStr(d)&&6144<d.length&&(d="LAREGE-PAYLOAD-WITH-CHAR-LENGTH:"+d.length),t.headers=_mergeDeep({},t.headers,{"Z-Live-URL":n,"Z-Payload":d}),delete t.data),(app.api&&app.api.debug||app.debug||spa.debug)&&console.log("ajax Options",t)}K.initDataValidation=function(){W.log("include validate framework lib (spa-validate.js) to use this feature!")},K.doDataValidation=function(){W.log("include validate framework lib (spa-validate.js) to use this feature!")},K.properties={version:K.VERSION},K.api={baseUrl:"",liveUrlSuffix:"",urls:{},mock:!1,mockBaseUrl:"",mockRootFolder:"api_",mockDataFile:"data.json",defaultPayload:!1,forceParamValuesInMockUrls:!1,urlKeyIndicator:"@",url:function(e,r){e=(e||"").trim()[0]===K.api.urlKeyIndicator?(e||"").trimLeftStr(K.api.urlKeyIndicator):e||"",r=r||{};var i,o,s,l,c=function _getUrl(e){var t=e=(e+"").trim().trimLeftStr(K.api.urlKeyIndicator);return _isObj(K.api.urls)&&Object.keys(K.api.urls).length&&((t=0<=e.indexOf(".")?_find(K.api.urls,e,""):K.api.urls[e]||"$"!==e[0]&&K.api.urls["$"+e]||"")||/[^a-z0-9_]/gi.test(e)||console.warn("URL undefined for key:",e)),t}(e)||e,d=c.beginsWithStr("!")||K.api.mock||app.api.mock,p=c.beginsWithStr("!!")||c.beginsWithStr("~")||K.api.forceParamValuesInMockUrls,e=c.extractStrBetweenIn("{","}",!0),u=[],f=[],_={url:c,urlParams:r};return K.api.mock||app.api.mock||c.beginsWithStr("!")||(c=_removeMockParams(c)),_isBlank(e)||_each(e,function(e){if(f=[],u=[],i=e.replace(/[{}<>]/g,"").trim()){var t;0<i.indexOf("|")&&(i=(u=i.split("|").map(function(e){return e.replace(/\(.*\)/g,"").trim()})).shift()),0<i.indexOf(":")&&(i=(t=i.split(":"))[0].trim(),l=t[1].trim()),"#"==i[0]?o=K.getElValue(i):(s=_isBlank(r))||("string"==typeof(o=_find(r,i,r._undefined))&&0==o.indexOf("$#")&&(0<o.indexOf("|")&&(o=(f=o.split("|").map(function(e){return e.replace(/\(.*\)/g,"").trim()})).shift()),o=K.getElValue(o.substring(1))),o=!d||p||e.containsStr(">")?o:"_"+i);for(var a=0,n=(u=f.concat(u)).length;a<n;a++)if(u[a])if("."==u[a][0])try{o=o[u[a].substring(1)]()}catch(e){console.error("Error parsing urlParam: "+o+u[a]+"()","param:",o,_,e)}else":"==u[a][0]?l=u[a].substring(1).trim():o=K.renderUtils.runCallbackFn(u[a],o,_);void 0!==o&&"undefined"!==o||(o=l),s&&_isBlank(u)&&!o||(c=c.replace(new RegExp(e.replace(/([^a-zA-Z0-9])/g,"\\$1"),"g"),""+o))}}),c},success:function(e){return[e,"success"]},isCallSuccess:function(){return!0},onReqError:function(e,t,a){W.error([e,t,a]),W.error(H(e.responseText).text())},onResError:function(){},_call:function(i){var e,t=_find(window,"app.api.ajaxOptions",{}),a=_isObj(i)&&i.hasOwnProperty("error")?i.error:app.api.onError||K.api.onReqError;return(i=_extend({},t,i,{error:a,success:function(e,t,a){e=_isStr(e)&&"html"!=String(this.dataType).toLowerCase()?_toObj(e):e;var n,r=this.sanitizeApiXss;r&&(e=_isFn(r)?r.call(e,e)||e:_sanitizeXSS(e)),_isFn(app.api.isCallSuccess)?n=app.api.isCallSuccess.call(this,e,this):_isFn(K.api.isCallSuccess)&&(n=K.api.isCallSuccess.call(this,e,this)),(n?i._success:(_isFn(app.api.onResError)?app:K).api.onResError).call(this,e,t,a)}})).data&&_isObj(i.data)&&i.stringifyPayload&&(delete i.stringifyPayload,i.data=JSON.stringify(i.data)),i.defaultPayload&&(t=_of(i.data),a=_isFn(a=i.defaultPayload)?a(e):_isObj(a)?_mergeDeep({},a):a,e="string"==t?_toObj(i.data):i.data,_isObj(a)&&(_isBlank(a=_isObj(e)?_mergeDeep({},a,e):a)||"string"!=t||(a=JSON.stringify(a)),i.data=a)),i.dataType&&"json".equalsIgnoreCase(i.dataType)&&!i.contentType&&(i.contentType="application/json"),i.url.beginsWithStr(K.api.urlKeyIndicator)&&(i.url=K.api.url(i.url.trimLeftStr(K.api.urlKeyIndicator),i.data)),(app.api&&app.api.debug||app.debug||spa.debug)&&console.info(["API(ajax) call with options",i]),ue(i)},_params2AxOptions:function(){var t,a,n,r,i={method:"GET",url:"",data:{},_success:function(){},async:!0};return _each(arguments,function(e){switch(!0){case _isStr(e):t="url",i.url&&(a=!0,t="data");break;case _isFn(e):t=r?"error":(r=!0,"_success");break;case _isBool(e):t="async";break;case _isObj(e):a||e.__hasPrimaryKeys("ajaxOptions|dataUrlParams")?(t="axOptions",n=e.hasOwnProperty("ajaxOptions")?e.ajaxOptions:e):(t="data",a=!0);break;default:t="unknown"}"axOptions"!=t&&(i[t]=e)}),n&&(n.dataUrlParams&&((""+i.url).beginsWithStr(K.api.urlKeyIndicator)&&(i.url=K.api.url(i.url.trimLeftStr(K.api.urlKeyIndicator),n.dataUrlParams)),delete n.dataUrlParams),_mergeDeep(i,n)),W.log("API ajax options >>"),W.log(i),i},get:function(){return K.api._call(K.api._params2AxOptions.apply(void 0,arguments))},post:function(){return K.api._call(_extend(K.api._params2AxOptions.apply(void 0,arguments),{method:"POST"}))},put:function(){return K.api._call(_extend(K.api._params2AxOptions.apply(void 0,arguments),{method:"PUT"}))},del:function(){return K.api._call(_extend(K.api._params2AxOptions.apply(void 0,arguments),{method:"DELETE"}))},mix:function(){for(var e=[],t=arguments[arguments.length-1],a=0;a<arguments.length;a++)_isArr(arguments[a])?e=e.concat(arguments[a]):_isFn(arguments[a])||e.push(arguments[a]);return ce.apply(H,e).done(function(){var a=V.slice.call(arguments);1==e.length&&1<a.length&&"success"==a[1]?(a[0]=_toObj(a[0]),a.splice(1)):_each(a,function(e,t){e&&_isArr(e)&&1<e.length&&"success"==e[1]&&(a[t]=_toObj(e[0]))}),t&&_isFn(t)&&t.apply(void 0,a)})}},K.i18n.onLangChange,K.i18n.displayLang=function(){var e,t,a,n,r,i=H("html").attr("lang");return i&&(t=(e=i).replace("-","_"),a=H('[data-i18n-lang="'+e+'"],[data-i18n-lang="'+t+'"]'),n=(H("body").attr("i18n-lang-key-prefix")||"lang.name.")+t,r="-",H(".lang-text").attr("data-i18n",n).data("i18n",n),H("[data-i18n-lang]").removeClass("active"),a.length&&(a.addClass("active"),r=(H(a[0]).data("i18nLang")||"").replace(/[a-z]/gi,""),H(".lang-icon").removeClass(V.join.call(H("[data-i18n-lang]").map(function(e,t){return H(t).data("i18nLang")})," "))),H(".lang-icon").addClass("-"==r?e:t),K.i18n.apply(".lang-text")),i};var R={},i={pub:function(a,e,n,r){var i,o;_isFn(e)?(r=arguments[2],n=e):i=e;var s,l,c=0,d=[];return _each(R[a],function(t){try{c++,s=t.fn,l=null,s&&(l=s.call(i||{},a,i,n,r)),d.push({id:""+(t.name||c),response:l}),!o&&_isBool(l)&&(o=!l)}catch(e){console.warn("Execution error in subscribed function:"+t.name+" on-"+a),console.error(e.stack)}}),o?r&&_isFn(r)&&r(d):n&&_isFn(n)&&n(d),d},sub:function(e,t,a){return R.hasOwnProperty(e)||(R[e]=[]),R[e].push({fn:t,name:a}),R[e].length},unSub:function(e,t){var a=!1;return R.hasOwnProperty(e)&&(a=!0,t?R[e][t-1]=null:R[e]=[]),a}};K.event={on:i.sub,off:i.unSub,trigger:i.pub,announce:i.pub};var L,$,D="#",U="",B=!0,N=[],F=100,I=!1,z="",M="",X=!1,J="",Q="",G="",Z="",Y="",ee="",te="",ae=!1,ne="";function _blockSpaNavigation(e){e=H(e||"body :first");return e.addClass(G),L=_isSpaNavBlocked()||!0,e}function _allowSpaNavigation(e){e=H(e||Z);return e.removeClass(G),e.find(Z).removeClass(G),L=_isSpaNavBlocked(),e}function _isToShowSpaNav(){return!$}function _isSpaNavBlocked(e){if(e){e=H(e);return e.hasClass(G)||0<e.find(Z).length}return!!H(Z).length}function _isSpaNavAllowed(e){return!_isSpaNavBlocked(e)}function _onpageshow(){!function _blockBrowserNav(){L&&_replaceUrlHash(z)}()}var re="x"+_now();function _onPopStateChange(e){!function _routeSpaUrlOnHashChange(){var e=K.urlHashFull(D);W.log("on Hash Change: Url To [",e,"] from[",z,"] on click:",I," block-Navigation:",L,"isDelayed:",X),!I&&L?(W.log("-------------\x3e",z,e,X,J),W.log("lastBlocked:",Q),Q=Q||z,"#"==D[0]?(_replaceUrlHash(X?J:z,e),Q==e&&_handleNavAwayEvent(e)):(_replaceUrlHash(X?J:z,e),_handleNavAwayEvent(e))):(W.log("Triggering next hash... by href:",ae,"autoRoute:",B,"byClick",I),_triggerNextHash(B||!I))}(),M=M&&M!=re?(W.warn("Blocked:",M),re):(M!=re&&(K.onUrlHashChange?K.onUrlHashChange(K.urlHash([],D),e):K.onUrlChange&&K.onUrlChange(K.urlHash([],D),e)),"")}function _onWindowReload(){var e,t;switch(K.onReload&&(e=K.onReload()),_of(e)){case"boolean":if(!e)return t="xsr.message.on.window.reload",K.i18n.text(t).replace(t,"");break;case"string":return(e=e.trim())&&((t=e.beginsWithIgnoreCase("i18n")?e.replace(/i18n(:)*/i,""):"")?K.i18n.text(t).replace(t):e);default:if(t="xsr.message.on.window.reload",L)return K.i18n.text(t).replace(t,"")}}function _handleNavAwayEvent(e,t){var a,n,r,i;Q=e,W.log("Trying to navigate away from:["+z+"] To:["+e+"] by",t),H(Z).each(function(){a=H(this),"#"==(r=(a.attr(ne)||"").trim())[0]||">"==r[0]?(n=">"==r[0]?r.substring(1).trim():r,(n=a.find(n).filter(":not(.disabled):not(:disabled)")).length&&(t&&(i="id:'"+t.attr("id")+"', spaRoute:'"+t.attr(ee)+"'"),n.data("navToUrl",e).attr("data-nav-to-url",e),n.data("navBy",i).attr("data-nav-by",i),n.trigger("click"))):(r=_find(window,r.split("(")[0].split(";")[0]))&&_isFn(r)&&r.call(a,e,a,t)})}K.blockNav=_blockSpaNavigation,K.allowNav=_allowSpaNavigation,K.isNavBlocked=_isSpaNavBlocked,K.isNavAllowed=_isSpaNavAllowed,K.isToShowNav=_isToShowSpaNav,K.isInBlockedSpaNavContainer=function _inBlockedSpaNavContainer(e){return!!H(e).closest(Z).length},window.onerror=function(e,t,a){console.warn("Invalid Content: Check the network/path/content.",e,t,a)};var ie,oe=[];function _processDynHash(e,t){var n,a,r,i,o=0<=e.indexOf(":"),s=t;return _isBool(t)&&(s=t?"click":""),o&&(i=o?e.split(":")[0]:"",n={},_each(0<e.indexOf("&")?e.split("&"):0<e.indexOf(",")?e.split(","):[e],function(e){a=e.split(":")[0],r=e.getRightStr(":"),n[a]=decodeURIComponent(r)}),(o=!_isBlank(i=((t=H("["+ee+'*="/'+i+':"]['+te+"]")).attr(te)||"").trim()))&&(oe.push(e),_each(_toObj(i),function(e,t){var a;e=e.trim(),/(^app\.(.)+\.)|(^\$)|(^\#)/.test(e)?K.setElValue(e,n[t]):/^fn:/i.test(e)&&((a=(a=e.split(" ")[0].getRightStr(":").trim().split("(")[0])?_find(window,a):"")&&_isFn(a)?a(t,n[t]):console.warn("Not a function",e))}),s&&t.isEnabled()&&!t.hasClass("AUTO-ROUTING")&&t.trigger(s))),o}function _triggerNextHash(e){e&&function _initAutoRoute(){N=[],F=50}(),B=_isUndef(e)?B:e;var t,a,n=K.urlHash([],D),r=n.length-1;if(F<0&&(B=!1),B){F--;for(var i=r;0<=i&&(l=n[i-1]||"",B&&0<l.indexOf(":")&&!N.__has(l)&&i--,t=n[i],a=i==r,B&&!N.__has(t));i--)if(t){var o=0<=t.indexOf(":"),s=o?t.split(":")[0]:"",l="["+ee+'$="/'+t+'"]:not(:disabled):not(.disabled):not(.AUTO-ROUTING):first';o&&(l="["+ee+'*="/'+s+':"]['+te+"]");l=H(l);if(l.length){if(o=o&&_processDynHash(t),N.push(t),B=!a,l.isEnabled()&&!l.hasClass("AUTO-ROUTING")&&l.addClass("AUTO-ROUTING").trigger(l.data("routeEvent")||"click"),a){y="";break}i+=2}}}I=!1}function _updateBrowserAddress(e,t){W.log("_updateBrowserAddress >>>>>>>>>[",e,"]delay:",t,"prev:",z);t="#"==D[0];e&&(z=e,t?(W.log(e),(t=H("#_spaRouteLink_")).length||(t=H('<a id="_spaRouteLink_" href=""></a>'),H("body").append(t)),W.log("################# "+e),t.attr("href",e)[0].click()):(W.log(e),"#"!=(e=e.trimLeftStr("/"))[0]&&(e="//"+window.location.host+_getAboluteUrl("/",e),W.log("updating the address bar with >>>>>",e)),W.log(">>>>>>>>>>>>>>>>> "+e),history.pushState(null,null,e)))}function _replaceUrlHash(e,t){e!=t&&(W.log("attempt to set URL:",e,"insteadOf",t),M=t,_updateBrowserAddress(e))}function _getNewMatchingRoutes(e){if(!(e=(e||"").trim()))return[];var t=K.urlHash([],D),a=e.trimStr("/").split("/"),n=[],r=a[0];var i=t.indexOf(r);if(0<r.indexOf("*")){r=r.getLeftStr("*");for(var o=0;o<t.length;o++)if(t[o].beginsWithStr(r)){i=o;break}}if(0<=i){for(var s,l=t.splice(i),c=0;c<a.length;c++)s=a[c].indexOf("*"),n[c]=s<0?a[c]:s?function getMatchHash(e,t){var a=t,n=t.getLeftStr("*");if(n)for(var r=0;r<e.length;r++)if(e[r].beginsWithStr(n)){a=e[r];break}return a}(l,a[c]):l[c];n=t.concat(n)}else n="/"==e[0]?a:t.concat(a);return n}function _onRouteElClick(e){var a,n,r,i,o,t,s,l=K.urlHash([],D),c=H(this);if(c.hasClass("disabled")||c.is(":disabled"))return e.stopImmediatePropagation(),e.stopPropagation(),void e.preventDefault();function update(e,t){"#"==(a=(e||"").trim())[0]&&(a=a.substring(1)),n="<"==a[0],r=">"==a[0],i=t||a[r?1:0],o=a.substring(r?2:1),s=!1}"#"!=D[0]&&e.preventDefault(),update(c.attr(ee),c.attr("data-route-dir"));var d,p=(c.attr(te)||"").trim();if(p&&_each(_toObj(p),function(e,t){var a;/(^app\.(.)+\.)|(^\$)|(^\#)/.test((d=e).trim())?d=K.getElValue(e):/^fn:/i.test(e.trim())&&((a=(a=e.split(" ")[0].getRightStr(":").trim().split("(")[0])?_find(window,a):"")&&_isFn(a)?d=a(t):console.warn("Not a function",e)),o=o.replace(new RegExp(t+":","g"),t+":"+encodeURIComponent(d))}),_triggerClickEventOnAttr(this,"onrouteclick"),c.hasClass("AUTO-ROUTING"))c.removeClass("AUTO-ROUTING");else{switch("^"==i&&(_isBlank(l)?update(a.substring(1)):(e.preventDefault(),s=!0,i="/",o=K.urlHash("",D))),"#/-<>".indexOf(i)<0&&(o=i+o,i="?"),i){case"#":case"/":l=_getNewMatchingRoutes(o);break;case"-":var u=K.toInt(o.replace(/[^0-9]/g,""))||1;l.length&&(l.length=l.length-u);break;case"<":t=z;break;case"?":l=_getNewMatchingRoutes(o)}n||(t=_getAboluteUrl(D,l.join("/"))),L&&(n||c.hasClass(Y)||c.inBlockedSpaNavContainer()||(r=!0,_handleNavAwayEvent(t,c))),W.log("Routing to...",t,"delay:",r,"prev:",z),function _updateUrlHash(e,t,a){W.log("Updating url with:",e,"delay:",t,"autoRoute:",a),B=a,J=(X=t)?z:"",t?z=e:(I=!0,K.isToShowNav()?B||_updateBrowserAddress(e,t):z=e)}(t,r,s)}}function _onRouteAutoReg(){K.route(_attr(this,ee+"-AUTO").substring(1))}function _initRouteHash(e){H(e||"body").find("["+ee+'^="*"]:not(.ROUTE):not(.ROUTE-AUTO)').renameAttr(ee,ee+"-AUTO").addClass("ROUTE-AUTO").on("click",_onRouteAutoReg);var t,a,n,e=H(e||"body").find("["+ee+"]:not(.ROUTE)").renameAttr("onclick","onrouteclick").addClass("ROUTE").off("click",_onRouteElClick).on("click",_onRouteElClick);ae&&e.length&&e.each(function(){t=H(this),a=t.attr("href").replace(/\s*/g,"").trim(),n="","#"==a[0]?0<="^><-".indexOf(a[1])&&(n=a[1],a=a.substring(2)):0<="^".indexOf(a[0])&&(n=a[0],a=a.substring(1)),t.attr("href","#"+a).removeAttr("target").attr("data-route-dir",n)}),_triggerNextHash(),L=K.isNavBlocked()}function _routeToUrl(e){if(e=(e||"").trim()){var t,a,n=e[0],r=1;switch("#/-<>".indexOf(n)<0&&(n="?",r=0),t=e.substring(r),n){case"/":a=_getNewMatchingRoutes(t);break;case"-":a=K.urlHash([],D);var i=K.toInt(e.replace(/[^0-9]/g,""))||1;a.length&&(a.length=a.length-i);break;case"?":a=_getNewMatchingRoutes(t);break;default:a=[t]}return _getAboluteUrl(D,a.join("/"))}}function _StoreMgmt(i){function _set(t,e){function _store(e,t){e=(""+e).trim();var a,n,r=/^\[(.)+]$/.test(e);0<e.indexOf(".")?(r&&(e=e.slice(1,-1)),n=(a=e.split(".").map(function(e){return e.trim()})).shift(),r&&(n="["+n+"]"),_store(n,0<=Object.keys(i).indexOf(n)?K.objProp(_get(n),a.join("."),t):K.objProp({},a.join("."),t))):(t=JSON.stringify(t),r&&(t=_compress(t)),i.setItem(e,t))}1==arguments.length?_type(t,"object")?Object.keys(t).forEach(function(e){_store(e,t[e])}):_type(t,"array")&&t.forEach(function(e,t){_store(t,e)}):2==arguments.length&&_store(t,e)}function _get(e){if(0==arguments.length)return _all();if(1!=arguments.length)return _all.apply(null,arguments);if(_type(e,"string")){if(0<(e=e.trim()).indexOf(","))return _all.apply(null,e.split(","));if(0<e.indexOf(".")){var t=/^\[(.)+]$/.test(e);t&&(e=e.slice(1,-1));var a=e.split(".").map(function(e){return e.trim()}),n=a.shift();return t&&(n="["+n+"]"),_find(_get(n),a.join("."))}a=i.getItem(e);return/^\[(.)+]$/.test(e)&&(a=function _deCompress(e){if(K.strUnzip)return K.strUnzip(e);for(var t={},a=(e+"").split(""),n=a[0],r=n,i=[n],o=256,s=1;s<a.length;s++){var l=a[s].charCodeAt(0),l=l<256?a[s]:t[l]||r+n;i.push(l),n=l.charAt(0),t[o]=r+n,o++,r=l}return i.join("")}(a)),JSON.parse(a)}return _type(e,"array")?_all.apply(null,e):void 0}function _all(){var t=arguments.length,a=V.slice.call(arguments).map(function(e){return(""+e).trim()}),n={};return Object.keys(i).forEach(function(e){(!t||-1<a.indexOf(e))&&(n[e]=_get(e))}),n}function _clear(){var t;arguments.length?(t=V.slice.call(arguments).map(function(e){return(""+e).trim()}),Object.keys(i).forEach(function(e){t.indexOf(e)<0&&i.removeItem(e)})):i.clear()}function _type(e,t){var a=o.toString.call(e).split(" ")[1].toLowerCase().replace(/\]$/gi,"");return 2==arguments.length?-1<(""+t).toLowerCase().indexOf(a):a}function RK(e,t){return 0==arguments.length?_all():1==arguments.length?_type(e,"object|array")?(_set(e),e):_get(e):2==arguments.length?(_set(e,t),_get(e)):void 0}return RK.set=_set,RK.get=_get,RK.getAll=_all,RK.remove=function _remove(e){function _removeItems(){arguments.length&&V.slice.call(arguments).forEach(function(e){i.removeItem(e)})}0==arguments.length?_clear():1==arguments.length?_type(e,"string")?0<e.indexOf(",")?_removeItems.apply(null,e.split(",")):function _removeItem(e){i.removeItem(e)}(e):_type(e,"array")&&_removeItems.apply(null,e):_removeItems.apply(null,arguments)},RK.removeAll=_clear,RK.removeExcept=_clear,RK.clear=_clear,RK.clearExcept=_clear,RK}K.parseRoutes=_getNewMatchingRoutes;try{K.sesStore=_StoreMgmt(sessionStorage)}catch(e){console.warn("No Access to sessionStorage.",e)}try{K.locStore=_StoreMgmt(localStorage)}catch(e){console.warn("No Access to localStorage.",e)}function _onViewDataChange(){var e=this,t=H(e),a=K.getElValue(e),n={},r=t.spa$()[0],i=t.spa$name(),o="2way".equalsIgnoreCase(K.components[i].dataBindType);e.classList.add("DATA-MODEL-CHANGE-SRC");t=function _getBindKeyOf(e,t){var a,n,r=_attr(e,"data-bind"),i="";return r&&!r.containsStr(":")&&(r=_defaultAttr(e)+":'"+r+"'"),(a=_toObj(r||"{}"))&&!_isEmptyObj(a)&&_some(_keys(a),function(e){return!i&&new RegExp(t,"i").test(e)&&(n=a[e].split("|"),i=n.shift().trim()),!!i}),i}(e,"value|$");K.setSimpleObjProperty(n,t,a),o&&(_mergeDeep(K.$data(i),n),app[i].is$DataUpdated=K.components[i].is$DataUpdated=!0),K.bindData(r,n,'[data-bind*="'+t+'"]:not(.DATA-MODEL-CHANGE-SRC)',!0),e.classList.remove("DATA-MODEL-CHANGE-SRC"),o&&K.renderUtils.runCallbackFn("app."+i+".$dataChangeCallback",app[i].$data,app[i])}function _initDataBind(e,t){function _bindEvent(e,t){H(e).on((_attr(e,"data-bind-event")||t).toLowerCase(),_onViewDataChange)}var a="[data-bind]:not(.SPA-DATA-BOUND)",n=H(e||"body").find((t||"")+" "+a);n.length||t||(n=H(e+a)),n.length&&(n.filter("textarea,input:not([type=radio]):not([type=checkbox])").addClass("SPA-DATA-BOUND").each(function(){_bindEvent(this,"keyup")}),n.filter("select,input[type=radio],input[type=checkbox]").addClass("SPA-DATA-BOUND").each(function(){_bindEvent(this,"change")}))}function _init_SPA_DOM_(e){_initKeyTracking("",e),function _initKeyPauseEvent(e){H(e||"body").find("[onKeyPause]:not([onKeyPauseReg])").each(function(e,t){H(t).attr("onKeyPauseReg","").on("input propertychange paste",function(){var t=this,e=+((""+_attr(t,"data-pause-time")).replace(/[^0-9]/g,"")||"1250");_freeTimer(u),u=setTimeout(function(){var e=_attr(t,"onKeyPause").split("(")[0],e=_find(window,e);e&&e.call(t,t),_freeTimer(u)},e)})})}(e),_initSpaElements(e),K.initTrackFormElChanges(e),function _initFormValidationInScope(e){K.hasOwnProperty("initDataValidation")?H(e||"body").find("[data-validate-form],[data-validate-scope],form:has([data-validate])").filter(":not([data-validation-initialized])").each(function(e,t){_initFormValidation(t)}):console.warn("SPA validation module is not loaded.")}(e),_initRouteHash(e),K.initTogglePassword(e),_initDataBind(e),function _processDynHashInUrl(){for(var e,t,a=K.urlHash([],D),n=0;n<a.length;n++)e=a[n],0<=(t=oe.indexOf(e))?oe.splice(t,1):_processDynHash(e,n==a.length-1)}()}function _init_SPA_(){!function _ctrlBrwowserNav(){window.onpageshow=_onpageshow,d?window.onhashchange=_onPopStateChange:window.onpopstate=_onPopStateChange,is(window,"window")&&(window.onbeforeunload=_onWindowReload)}(),function init_i18n_Lang(){if(K.i18n.off=K.i18n.off||H('body[i18n-lang="-"]').length,!K.i18n.off){H(document).on("click","[data-i18n-lang]",function(){var e=H(this).data(),a=e.i18nLang||"",n=(e.i18nLang||"").replace("-","_"),r=(H("body").attr("i18n-lang-key-prefix")||"lang.name.")+n;_setLang(n,{callback:function(){var e="-",t=H("[data-i18n-lang]:first");t.length&&(e=(t.data("i18nLang")||"").replace(/[a-z]/gi,"")),H(".lang-text").attr("data-i18n",r).data("i18n",r),H(".lang-icon").removeClass(V.join.call(H("[data-i18n-lang]").map(function(e,t){return H(t).data("i18nLang")})," ")).addClass("_"==e?n:a),H("[data-i18n-lang]").removeClass("active"),H('[data-i18n-lang="'+a+'"],[data-i18n-lang="'+n+'"]').addClass("active"),K.i18n.apply(".lang-text")}})});var e,t=_docLang()||"",t=(H("body").attr("i18n-lang")||"").replace(/ /g,"")||/,|\*/.test(t)&&t||K.defaults.lang.url&&(t||_browserLang(1))||"",a=t.split(",")[0];if(t){if("*"==a&&(a=_browserLang(),(","+t.toLowerCase()+",").indexOf(","+a.toLowerCase()+",")<0)){a=a.getLeftStr(2).toLowerCase();var n=t.split(","),r="",i="";if(1<n.length){for(var o=0;o<n.length;o++)if(0==(r=(n[o]||"").trim()).toLowerCase().indexOf(a)){i=r;break}a=i||t.split(",")[1]||""}}a&&(_setLang(a,{},!0),e=setTimeout(function(){K.i18n.displayLang(),_freeTimer(e)},500))}}}(),_init_SPA_DOM_("body"),K.i18n.apply("body")}function _initApiUrls(){(q=!!_keys(app.api).length)&&W.log("Initializing app.api");var e=_find(window,"app.api.baseUrl");_isBlank(e)||(K.api.baseUrl=e);var t,a,n,r,i,o,e=_find(window,"app.api.urls");_isBlank(K.api.urls)&&!_isBlank(e)&&(K.api.urls=app.api.urls),_isBlank(K.api.urls)||(_isBlank(e=_find(window,"app.api.liveApiPrefix|app.api.mockRootAtPaths"))&&!_isBlank(K.api.urls)&&(t=[],_each(K.api.urls,function(e){e=e.replace(/^!|~/,""),a=e.indexOf("//"),1<(n=a<0?e.substring(0,e.indexOf("/",1))+"/":(a=e.indexOf("/",a+2)+1,(n=e.indexOf("/",a))<0?e.substring(a-1):e.substring(a,n+1))).length&&t.indexOf(n)<0&&t.push(n)}),(ie=!!t.length)&&(W.log("Auto find - live api identifier list:",t),e=app.api.liveApiPrefix=K.api.liveApiPrefix=app.api.mockRootAtPaths=t)),_isBlank(e)||(_each(r=_isArr(e)?e:(""+e).split(","),function(a,e){a=a.trim(),"!"!=(i=a[0])&&"~"!=i||(a=a.substring(1),_each(K.api.urls,function(e,t){"!"!=(o=e[0])&&"~"!=o&&(0==e.indexOf(a)||0<e.indexOf("/"+a))&&(K.api.urls[t]=i+e)})),r[e]=a}),app.api.liveApiPrefix=r,delete app.api.mockRootAtPaths))}function _initSpaApp(){function runSpaEvent(e){if(spa[e])return spa[e]()}le(runSpaEvent("onInit")).done(function initSpaModules(){var e;K.env&&"dev".equalsIgnoreCase(K.env)&&(e={components:{templateCache:!(K.api.mock=!0),callback:function(){console.log("spa$>",this.__prop__.componentName)}}},K.defaults.set(e)),le(_init_SPA_()).done(function(){le(runSpaEvent("onInitComplete")).done(function(){le(runSpaEvent("onReady")).done(K.renderComponentsInHtml)})})})}function _initSpaDefaults(){var t,a,e=H("body"),n=e[0],r=e.data();_isBlank(r)||(r.spaDefaults=_toObj(_attr(n,"data-spa-defaults")||_attr(n,"data-app-defaults")||{}),_each(_keys(K.defaults),function(e){e.equalsIgnoreCase("set")||(a=e.toTitleCase(),_isBlank(t=r.spaDefaults[e]||r["spaDefaults"+a]||r["appDefaults"+a])||(_isObj(a=_toObj(t))?_mergeDeep(K.defaults[e],a):K.defaults[e]=t))})),K.defaults.alias&&(c[K.defaults.alias]=K),function _initRoutesDefaults(){z=K.urlHashFull(D),D=(_find(spa,"defaults.routes.base","")||"#").trim(),G=(_find(spa,"defaults.routes.className.block","")||"BLOCK-SPA-NAV").trim(),Z="."+G,Y=(_find(spa,"defaults.routes.className.allow","")||"ALLOW-SPA-NAV").trim(),U=(_find(spa,"defaults.routes.className.hide","")||"HIDE-SPA-NAV").trim(),ee=(_find(spa,"defaults.routes.attr.route","")||"data-spa-route").trim(),te=(_find(spa,"defaults.routes.attr.params","")||"data-spa-route-params").trim(),ae=ee.equalsIgnoreCase("href"),ne=(_find(spa,"defaults.routes.attr.onNavAway","")||"onNavAway").trim(),$=H("body").hasClass(U)}(),_initApiUrls()}K.reload=function(e){e&&K.sesStore.set("_spaReloadUrl",e||""),K.allowNav(),window.location.reload()},K.hasReloadUrl=function(){return!!(K.sesStore.get("_spaReloadUrl")||"").trim()},K.initRoutes=_initRouteHash,K.route=function _routeNewUrl(e,t){var a=_routeToUrl(e);W.log("Route:",e,"URL:",a),a&&(!t&&L?_handleNavAwayEvent(a):(t=function _$routeElement(e){return H("["+ee+'$="'+e.trim()+'"].ROUTE:first')}(e)).length?t.hasClass("disabled")||t.is("[disabled]")?console.warn("Route:",e,"is disabled."):t.click():($?y=a:_updateBrowserAddress(a),"/"==e.trim()?(K.allowNav(),window.location.reload()):_onPopStateChange()))},K.routeUrl=_routeToUrl,K.routeEl=function _$routeElements(e){return H("["+ee+'$="'+e.trim()+'"].ROUTE')},K.initDataBind=_initDataBind,K.async=function(a){var n,r=V.slice.call(arguments,1);n=setTimeout(function fnAsyc(){var e=a.apply(void 0,r),t=r.length;(t=t?r[t-1]:"")&&_isFn(t)&&t(e),_freeTimer(n)},0)};var se,le,ce,de,pe,ue=c.$&&H.ajax||c.spaXHR&&spaXHR.ajax;function _initXHR(){c.spaXHR&&(K.ajax=spaXHR.ajax),(se=H.ajax&&H||spaXHR)&&(le=se.when,ue=se.ajax,ce=se.when,de=se.ajaxSetup,pe=se.ajaxPrefilter,H&&!H.ajax&&(H.ajax=ue,H.ajaxQ=ce,H.ajaxSetup=de,H.ajaxPrefilter=pe),de({dataParsers:{javascript:!1,spacomponent:!1},converters:{"text javascript":function(){},"text spaComponent":function(){}},dataFilter:function(e,t){t=(t||"").toLowerCase();return"spacomponent"===t?_spaComponentScriptHandle(e,this.url):"javascript"===t&&function _spaGlbScriptHandle(e){var t;e.trim()&&(_attr(t=document.createElement("script"),"id","js-"+_now()),K.defaults.csp.nonce&&_attr(t,"nonce",K.defaults.csp.nonce),t.text=e,document.head.appendChild(t).parentNode.removeChild(t))}(e),e}}))}function _beginSPA(){_initXHR(),K.strZip=!K.strZip&&c.LZString&&LZString.compress,K.strUnzip=!K.strUnzip&&c.LZString&&LZString.decompress,se?(_initSpaDefaults(),pe(_ajaxPrefilter),_initSpaApp(),b=!0,W.info("Initialized SPA.")):console.error("Could not find XHR(ajax) module. Use jQuery Full version or include spaXHR module."),v.removeEventListener("DOMContentLoaded",_beginSPA)}handleOnDomReady(function _initDOM(){K.debug=K.urlParam("spa.debug")||K.hashParam("spa.debug")||K.debug,n=c.jQuery;var e=(a=c.dom||n)("body"),t=e.attr("dom-alias");r=e.hasClass("use-jquery")||e[0].hasAttribute("use-jquery")||r,H=n&&r?n:a,t&&(c[t]=a),t=H.fn.jquery,W.info("DOM is ready -",new Date),W.info("DOM-Query using "+(t?"jQ-"+t:"dom-"+H.version)),function extendjQ(){var e={serializeToArray:_jQserializeArray,serializeUncheckedCheckboxes:_serializeUncheckedCheckboxes,serializeFormToJSON:_serializeFormToObject,serializeFormToObject:_serializeFormToObject,serializeFormToSimpleJSON:_serializeFormToSimpleObject,serializeFormToSimpleObject:_serializeFormToSimpleObject,i18n:function(e){return this.each(function(){e&&H(this).attr("data-i18n",e).data("i18n",e),K.i18n.apply(this)}),this},spaRender:function(e){this.each(function(){K.renderComponentsInHtml(this,e,!0)})},renameAttr:function(e,t){return this.each(function(){_attr(this,t,_attr(this,e)),this.removeAttribute(e)}),this},spa$:function(){return this.map(function(){return H(this).closest("[data-rendered-component]")})},spa$name:function(){var e=this.map(function(){return H(this).closest("[data-rendered-component]").attr("data-rendered-component")});return 1==e.length?e[0]:e},spaBindData:function(e,t){return K.bindData(this,e,t)},inBlockedSpaNavContainer:function(){return!!this.closest(Z).length},blockNav:function(){return _blockSpaNavigation(this),this},allowNav:function(){return _allowSpaNavigation(this),this},isNavBlocked:function(){return _isSpaNavBlocked(this)},isNavAllowed:function(){return _isSpaNavAllowed(this)},disable:function(e){return e||_isUndef(e)?this.css("pointer-events","none").addClass("disabled").attr("disabled","disabled"):this.enable(!0)},enable:function(e){return e||_isUndef(e)?this.css("pointer-events","auto").removeClass("disabled").removeAttr("disabled"):this.disable(!0)},value:function(e,t){return _isUndef(e)?this.val():(this.each(function(){H(this).val(e).trigger(t||"change")}),this)},htm:function(e){return _isUndef(e)?this.html():(this.each(function(){H(this).html(K.sanitizeScript(e))}),this)},dataJSON:function(e,t,a){var n,r,i;return arguments.length?(i=_isObj(i=_toObj(this.data(e)))?i:{},_isUndef(t)||(i=a?t:_mergeDeep(i,t),n=JSON.stringify(i),r=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),this.attr("data-"+r,n).data(e,n))):i=this.data(),i},isDisabled:function(e){var t=this.hasClass("disabled")||this.is("[disabled]");return t&&e&&e.call(this,this),t},isEnabled:function(e){var t=!this.isDisabled();return t&&e&&e.call(this,this),t},trackChanges:function(){K.trackFormElChange(this)},isChanged:function(e){var t="ALL"==(e=(e||"ANY").toUpperCase()),a=!t,n=!1,r=this;if(r.length)for(var i=0;i<r.length;i++){var o=r[i].tagName.toUpperCase();if("FORM"==o)n=H(r[i]).find("input,textarea,select").isChanged(e);else if(0<"/INPUT/TEXTAREA/SELECT/".indexOf(o)){if(n=K.isElValueChanged(r[i]),a&&n)break;if(t&&!n)break}}return n},initSpaRoutes:function(){_initRouteHash(this)},initFormValidation:function(){var e=this.filter("form");if(!e.length)return"Form Not Found";e.each(function(e,t){_initFormValidation(t)})},validateForm:function(e,t,a){var n,r=this;return 1<r.length?[{errcode:1,errmsg:"Too many forms to validate."}]:1==r.length?(n="#"+r.attr("id"),"FORM"==(r.prop("tagName")||"").toUpperCase()?_isStr(e)?(r=r.find(e).map(function(){return this.id}).get().join(),K.validateForm(n,r,t,a)):K.validateForm(n,e,t):[{errcode:1,errmsg:"NOT a FORM"}]):[{errcode:1,errmsg:"Form Not Found."}]},updateValidation:function(a,n){this.each(function(e,t){K._validate._showValidateMsg(t,n,a)})},updateValidationPromise:function(e,t,a){K.updateValidationPromise(e,this,a,t)}};n&&n.fn.extend(e),a.fn.extend(e,!0)}(),handleOnDomReady(_beginSPA)})}(),xsr.console.info("SPA.js is loaded.",new Date);
/*@license SPA.js (XHR/ajax) [MIT]*/
!function(t){var r=Object.prototype,n=Array.prototype,F=0;function _argsToArr(e,t){return 1===arguments.length?n.slice.call(e):n.slice.call(e,t)}function _isReservedKey(e){return-1<s.indexOf(e)}function _hasOwnProp(e,t){return r.hasOwnProperty.call(e,t)}var s="hasOwnProperty,prototype,__proto__".split(",");function _fnProps(t,r){return Object.keys(r).forEach(function(e){_isReservedKey(e)||Object.defineProperty(t,e,{value:r[e]})}),t}function _clearTimer(e){e&&(Array.isArray(e)?e:[e]).forEach(function(e){e&&clearTimeout(e)})}var a=spa.extractStrBetweenIn,i=spa.is,T=spa.isString,o=spa.isArray,x=spa.isObject,l=spa.isObjectLike,O=spa.isFunction,E=spa.isUndefined,w=spa.extend,S=spa.merge,c=spa.find,j=spa.sanitizeXSS;function _toQueryString(e){if(x(e)){var n,s,a,i=e;return _hasOwnProp(e,"_payload_")||function _isSimple(e){var t=!0;if("object"==typeof e)for(var r=Object.keys(e),n=0;t&&n<r.length;n++)t="object"!=typeof e[r[n]]||o(e[r[n]])&&_isSimple(e[r[n]]);return t}(e)||(i={_payload_:e}),Object.keys(i).reduce(function(e,t,r){return n=0===r?"":"&",s=encodeURIComponent(t),a=o(i[t])?i[t].map(_toQryParamValue).join(","):_toQryParamValue(i[t]),[e,n,s,"=",a].join("")},"")}return String(e);function _toQryParamValue(e){return encodeURIComponent("object"==typeof e?JSON.stringify(e):e)}}function _isDeferred(e){return e instanceof XHR||e instanceof XHRQ||e instanceof SimplePromise||t.Promise&&e instanceof Promise||t.jqXHR&&e instanceof jqXHR||t.Thenable&&e instanceof Thenable||t.Deferred&&e instanceof Deferred}function _shiftFnsToNxtPromise(e,t,r){var n=e.fnQ.then,s=e.fnQ.fail,a=e.fnQ.done,r={then:"then,fail,done",fail:"fail,done",done:"done"}[r];if(_isDeferred(t)){if(-1<r.indexOf("then"))for(;0<n.length;)t.then(n.shift());else e.fnQ.then=[];if(-1<r.indexOf("fail"))for(;0<s.length;)t.catch(s.shift());else e.fnQ.fail=[];if(-1<r.indexOf("done"))for(;0<a.length;)t.finally(a.shift())}}function SimplePromise(t,r,n){Object.defineProperty(this,"fnQ",{value:{then:[],fail:[],done:[]}}),this.isPending=!0,this.isResolved=!1,this.isRejected=!1,this.response,this.prevFnRes;var s,a,i=this;function complete(e,t){function _runFn(e,t){for(;0<e.length;)i.prevFnRes=[e.shift().apply(i,i.prevFnRes)],_shiftFnsToNxtPromise(i,i.prevFnRes[0],t)}var r;i.isPending?(i.isPending=!1,i.response=t,i.prevFnRes=t,i.isResolved=e,i.isRejected=!e,r=i.fnQ.then,t=i.fnQ.fail,e=i.fnQ.done,i.isResolved?_runFn(r,"then"):_runFn(t,"fail"),_runFn(e,"done")):console.warn("Already this promise has been "+(i.isResolved?"Resolved.":"Rejected.")),_clearTimer([l,s,a])}function resolve(){complete.call(i,!0,Array.prototype.slice.call(arguments))}function reject(){complete.call(i,!1,Array.prototype.slice.call(arguments))}var o={resolve:resolve,reject:reject},l=setTimeout(function(){var e;O(t)?(e=t.call(o,resolve,reject),n&&(s=setTimeout(function(){i.isPending&&complete.call(i,!!e,[e])},E(e)?n:r||F))):a=setTimeout(function(){i.isPending&&complete.call(i,!!t,[t])},r||F)},F)}function _registerPromiseFn(e,t,r){var n=e;return"function"==typeof r&&(e=!n.isPending,"then"===t?e=e&&n.isResolved:"fail"===t&&(e=e&&n.isRejected),e?_isDeferred(e=r.apply(n,n.prevFnRes))?n=e:n.prevFnRes=[e]:n.fnQ[t].push(r)),n}function _onPromiseError(e){return _registerPromiseFn(this,"fail",e)}function _onPromiseAlways(e){return _registerPromiseFn(this,"done",e)}function XHRQ(e){Object.defineProperty(this,"fnQ",{value:{then:[],fail:[],done:[]}}),this.requests=e,this.responses=[],this.length=e.length,this.isPending=e.length,this.isFailed=!1,this.failed=[],this.prevFnRes;var t,s=this;function _runFn(e){for(var t,r=s.fnQ[e];0<r.length;)try{t=void 0===s.prevFnRes?[]:[s.prevFnRes],s.prevFnRes=r.shift().apply(s,t.concat(s.responses)),_shiftFnsToNxtPromise(s,s.prevFnRes,e)}catch(e){console.error("Function Execution Error.",e)}}function updateQ(){s.isPending--;try{s.isPending||(s.isFailed?_runFn("fail"):_runFn("then"),_runFn("done"),_clearTimer(t))}catch(e){console.error("Function Execution Error.",e),_clearTimer(t)}}t=setTimeout(function(){e.forEach(function(e,t){var r,n;_isDeferred(e)||l(e)&&(O(e.then)||O(e.fail)||O(e.catch))?("function"==typeof e.then&&e.then(function(){s.responses[t]=_argsToArr(arguments),updateQ()}),(n="function"==typeof e.fail?"fail":"function"==typeof e.catch?"catch":"")&&e[n](function(){s.responses[t]=_argsToArr(arguments),s.isFailed=!0,s.failed.push(t),updateQ()})):("function"==typeof e?(n=void 0!==(r=e.call(s,s.requests,s.responses,t))&&!r,s.responses[t]=r,s.isFailed=s.isFailed||n,n&&s.failed.push(t)):(s.responses[t]=e,s.isFailed=s.isFailed||!e,s.isFailed&&s.failed.push(t)),updateQ())})},F)}function _registerXHRQChainFn(e,t,r){var n=e;return"function"==typeof r&&(e=!n.isPending,"then"===t?e=e&&!n.isFailed:"fail"===t&&(e=e&&n.isFailed),e?(e=void 0===n.prevFnRes?[]:[n.prevFnRes],n.prevFnRes=r.apply(n,e.concat(n.responses)),_isDeferred(n.prevFnRes)&&(n=n.prevFnRes)):n.fnQ[t].push(r)),n}function _onXHRQError(e){return _registerXHRQChainFn(this,"fail",e)}function _onXHRQAlways(e){return _registerXHRQChainFn(this,"done",e)}function _xhrQ(){var r,n,s=[],a={};if(arguments.length)for(var e=0;e<arguments.length;e++)Array.isArray(arguments[e])?s=s.concat(arguments[e]):s.push(arguments[e]);s.forEach(function(e,t){"string"==typeof e&&(/^(GET|POST|PUT|DELETE|PATCH|HEAD|OPTIONS)(:+)/i.test(e)?(r=e.split(":")[0],(n=e.replace(/^(GET|POST|PUT|DELETE|PATCH|HEAD|OPTIONS)(:+)/i,""))?e={url:n,method:r}:a.method=r):e={url:e},s[t]=e),"object"!=typeof e||e.url||(a=w(a,e))});var t=[];return s.forEach(function(e){x(e)&&e.url&&!_isDeferred(e)?t.push(_xhr(w({},a,e))):_isDeferred(e)?t.push(e):t.push(function _defer(e,t,r){return arguments.length?new SimplePromise(e,t,r):new SimplePromise(1,F)}(e))}),new XHRQ(t)}function XHR(e){Object.defineProperty(this,"fnQ",{value:{then:[],fail:[],done:[]}}),this.xhr=new XMLHttpRequest,this.reqOptions=e,this.isPending=!0,this.isSuccess=!1,this.isFailed=!1,this.response="",this.prevFnRes}function _registerXHRChainFn(e,t,r){var n,s=e;return"function"==typeof r&&(e=!s.isPending,"then"===t?e=e&&s.isSuccess:"fail"===t&&(e=e&&s.isFailed),e?(s.isFailed?(n=void 0===s.prevFnRes?s:s.prevFnRes,s.prevFnRes=r.call(s.reqOptions,n,s.statusText,s.statusMessage,s.response)):(n=void 0===s.prevFnRes?s.response:s.prevFnRes,s.prevFnRes=r.call(s.reqOptions,n,s.statusText,s,s.response)),_isDeferred(s.prevFnRes)&&(s=s.prevFnRes)):s.fnQ[t].push(r)),s}function _onXhrError(e){return _registerXHRChainFn(this,"fail",e)}function _onXhrAlways(e){return _registerXHRChainFn(this,"done",e)}!function _attachPrototypes(t,r,n){Object.keys(r).forEach(function(e){_isReservedKey(e)||(n?t.prototype[e]=r[e]:Object.defineProperty(t.prototype,e,{value:r[e]}))})}(SimplePromise,{then:function _onPromiseSuccess(e){return _registerPromiseFn(this,"then",e)},else:_onPromiseError,fail:_onPromiseError,catch:_onPromiseError,done:_onPromiseAlways,always:_onPromiseAlways,finally:_onPromiseAlways}),Object.defineProperties(XHRQ.prototype,{then:{value:function _onXHRQSuccess(e){return _registerXHRQChainFn(this,"then",e)}},fail:{value:_onXHRQError},catch:{value:_onXHRQError},done:{value:_onXHRQAlways},always:{value:_onXHRQAlways},finally:{value:_onXHRQAlways}}),Object.defineProperties(XHR.prototype,{then:{value:function _onXhrSuccess(e){return _registerXHRChainFn(this,"then",e)}},fail:{value:_onXhrError},catch:{value:_onXhrError},done:{value:_onXhrAlways},always:{value:_onXhrAlways},finally:{value:_onXhrAlways}});var A={defaults:{dataType:"text",async:!0,cache:!1,method:"GET",headers:{},auth:null,timeout:0,success:null,error:null,finally:null},dataParsers:{css:function _cssParser(e){var t=document.createTextNode(e),r=document.createElement("style");return r.setAttribute("id","css-"+(new Date).getTime()),r.setAttribute("type","text/css"),r.appendChild(t),document.head.appendChild(r),e},json:function _jsonParser(e){var t=e;try{t=JSON.parse(e)}catch(e){}return t},script:_scriptParser,javascript:_scriptParser},urls:{},url:_xhrUrl,setup:_setupGlobalXHRDefaults,preFilter:_setupPreFilter,get:function(){return n.unshift.call(arguments,"get"),_xhr.apply(void 0,arguments)},post:function(){return n.unshift.call(arguments,"post"),_xhr.apply(void 0,arguments)},put:function(){return n.unshift.call(arguments,"put"),_xhr.apply(void 0,arguments)},del:function(){return n.unshift.call(arguments,"delete"),_xhr.apply(void 0,arguments)},patch:function(){return n.unshift.call(arguments,"patch"),_xhr.apply(void 0,arguments)},head:function(){return n.unshift.call(arguments,"head"),_xhr.apply(void 0,arguments)},options:function(){return n.unshift.call(arguments,"options"),_xhr.apply(void 0,arguments)}},e="url,setup,converters,preFilter,get,post,put,del,patch,head,options".split(",");function _setupGlobalXHRDefaults(r){x(r)&&Object.keys(r).forEach(function(t){if(e.indexOf(t)<0)switch(t){case"dataParsers":case"urls":x(r[t])&&Object.keys(r[t]).forEach(function(e){A[t][e]=r[t][e]});break;default:A.defaults[t]=r[t]}})}function _setupPreFilter(e){O(e)&&(A.defaults.preFilter=e)}function _getOptionalVal(e,t){t=(_hasOwnProp(e,t)?e:A.defaults)[t];return t}function _scriptParser(e){var t;return e.trim()&&((t=document.createElement("script")).setAttribute("id","js-"+(new Date).getTime()),t.text=e,document.head.appendChild(t).parentNode.removeChild(t)),e}var Q={200:"OK",301:"Moved Permanently",400:"Bad Request",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",511:"Network Authentication Required"},H={text:"text/plain",html:"text/html",css:"text/css",style:"text/css",csv:"text/csv",xml:"text/xml",json:"application/json",pdf:"application/pdf",script:"application/javascript",spacomponent:"application/javascript",zip:"application/zip"};function _xhrUrl(e){var t="@"===String(e||"")[0];e=String(e||"").replace(/^[@\s]+/,"");var r,n=t?A.urls[e]||c(A.urls,e,e):e,s=_argsToArr(arguments,1).map(function(e){return i(e,"object|array")?e:{}}),s=S.apply(null,s);return Object.keys(s).length&&-1<n.indexOf("{")&&a(n,"{","}",!0).forEach(function(e){r=e.replace(/[{}<>]/g,""),r=c(s,r,s._undefined),n=n.replace(new RegExp(e.replace(/([^a-zA-Z0-9])/g,"\\$1"),"g"),r)}),n}function _xhr(){if(!arguments.length)return _xhrQ.apply(null,[]);if(2===arguments.length&&T(arguments[0])&&!/^(GET|POST|PUT|DELETE|PATCH|HEAD|OPTIONS)$/i.test(arguments[0])&&x(arguments[1])&&!_hasOwnProp(arguments[1],"url")){var e=arguments[1];return e.url=arguments[0],_xhr(e)}if(1<arguments.length||Array.isArray(arguments[0]))return _xhrQ.apply(null,arguments);if(_isDeferred(arguments[0]))return arguments[0];var t=x(arguments[0])?arguments[0]:T(arguments[0])?{url:arguments[0]}:{},r={},n=[];t.skipDefaults?("string"==typeof(n=t.skipDefaults)?n=n.split(","):"boolean"==typeof n&&(n=["payload","headers"]),Array.isArray(n)&&n.length?(n=n.map(function(e){return(e=e.replace(/default/gi,"").trim())?"default"+e[0].toUpperCase()+e.slice(1):""}),Object.keys(A.defaults).forEach(function(e){n.indexOf(e)<0&&(r[e]=A.defaults[e])})):(n=[],r=w({},A.defaults))):r=w({},A.defaults),r.method=t.method||t.type||A.defaults.method;var s=w({},r,t);if(s.url){s.type=s.method=s.method.toUpperCase();var c=s.dataType.toLowerCase(),e=H[c]||(c&&c.indexOf("/")<-1?"text/"+s.dataType:s.dataType),a={},t=s.defaultHeaders;O(t)&&(t=t.call(s,s)),O(s.headers)&&(s.headers=s.headers.call(void 0,s)),x(s.headers)&&Object.keys(s.headers).forEach(function(e){a[e]=s.headers[e]}),x(t)&&(E(a)?a=t:x(a)&&(a=w(t,a))),!a.hasOwnProperty("Content-Type")&&e&&(a["Content-Type"]=e),a["X-Requested-With"]="XMLHttpRequest",a["Cache-Control"]=s.cache?"max-age=86400000":"no-cache, no-store, must-revalidate, max-age=0",a.Expires=s.cache?new Date((new Date).setDate((new Date).getDate()+1)).toUTCString():"0",s.cache||(a.Pragma="no-cache"),s.headers=a;var u,p,f,h,d,y=new XHR(s),i=y.xhr,_=y.reqOptions,v=y.fnQ;O(_.success)&&v.then.push(_.success),O(_.error)&&v.fail.push(_.error),O(_.finally)&&v.done.push(_.finally),Object.keys(_).forEach(function(t){var e=t.toLowerCase();"onreadystatechange"===e&&O(_[t])?d=_[t]:0===e.indexOf("on")&&O(_[t])&&(i[e]=function(e){_[t].call(i,e,y)})}),i.onreadystatechange=_xhrReadyStateChange;e=_.defaultPayload;O(e)&&(e=e.call(_,_));var o=_.data;x(e)&&(E(o)?o=e:x(o)&&(o=S(e,o))),_.data=o;e=_getOptionalVal(_,"preFilter");e&&O(e)&&e.call(y,_,w({},_),y);var l=_xhrUrl(_.url,_.urlParams,_.data);/^(GET|POST|PUT|DELETE|PATCH|HEAD|OPTIONS)(:+)/i.test(l)&&(_.method=l.split(":")[0].toUpperCase(),l=l.replace(/^(GET|POST|PUT|DELETE|PATCH|HEAD|OPTIONS)(:+)/i,"")),_.url=l;var P=_.method=_.method.toUpperCase(),e=_.cache,o=_.data;e||(e=(new Date).getTime(),_.headers["X-T-"+e]=e,"GET"===P&&(l+=(l.indexOf("?")<0?"?":/\?$|&$/.test(l)?"":"&")+"_="+e)),"GET"===P&&o&&(o=_toQueryString(o))&&(l+=(l.indexOf("?")<0?"?":/\?$|&$/.test(l)?"":"&")+o);try{_.auth&&x(_.auth)?_.auth.hasOwnProperty("user")&&(_.auth.hasOwnProperty("pwd")?i.open(P,l,_.async,_.auth.user,_.auth.pwd):i.open(P,l,_.async,_.auth.user)):i.open(P,l,_.async);var m,g=_getOptionalVal(_,"beforeSend"),R=!0;if(g&&O(g))try{R=(R=g.call(i,i,_))||E(R),o=_.data}catch(e){R=!1,console.warn("beforeSend function failed.",e,y)}R?(m=_.headers,x(m)&&Object.keys(m).forEach(function(e){i.setRequestHeader(e,m[e])}),_.timeout&&(i.timeout=_.timeout,u=setTimeout(function(){p=!0,y.isPending&&0<i.readyState&&i.readyState<4&&i.abort()},_.timeout)),"GET"!==P&&o?(o=T(o)?o:JSON.stringify(o),_.async?h=setTimeout(function(){i.send(o)},F):i.send(o)):_.async?h=setTimeout(function(){i.send()},F):i.send()):(f=!0,i.abort(),_xhrReadyStateChange())}catch(e){console.warn("XHR-Exception",i,e)}return y}function _xhrReadyStateChange(e){var t=this,r=t.status;if(d&&d.call(_,t,e),f||4===t.readyState){y.isPending=!1,y.readyState=t.readyState,y.status=t.status,y.responseText=t.responseText,y.response=t.responseText;var n,s,a=t.responseText;if(200<=r&&r<300||304===r){if(y.isSuccess=!0,y.statusText="success",y.statusMessage="OK",(n=_hasOwnProp(_,"dataParser")?_.dataParser:A.dataParsers[c])&&O(n))try{s=n(a,c)}catch(e){console.warn("dataParsing failed.",a,y,e)}E(s)||(a=s);var i,o=_getOptionalVal(_,"dataFilter");if(o&&O(o))try{i=o.call(y.reqOptions,a,c)}catch(e){console.warn("dataFilter failed.",a,y,e)}E(i)||(a=i);var l=_.sanitizeApiXss;l&&(a=O(l)?l.call(a,a)||a:j(a)),"json"===c&&(y.responseJSON=a)}else a=t.responseText,y.isFailed=!0,u&&p?(y.statusText="timeout",y.statusMessage="timeout"):f?(y.statusText="canceled",y.statusMessage="canceled"):(y.statusText="error",y.statusMessage=Q[r]||"Unknown Error");y.response=a,y.isSuccess?_runFn("then"):y.isFailed&&_runFn("fail"),_runFn("done"),_clearTimer([u,h])}function _runFn(e){for(var t,r=v[e];0<r.length;)try{y.isFailed?(t=void 0===y.prevFnRes?y:y.prevFnRes,y.prevFnRes=r.shift().call(_,t,y.statusText,y.statusMessage,y.response)):(t=void 0===y.prevFnRes?y.response:y.prevFnRes,y.prevFnRes=r.shift().call(_,t,y.statusText,y,y.response)),_shiftFnsToNxtPromise(y,y.prevFnRes,e)}catch(e){console.error("Function Execution Error.",e)}}}console.error("XHR without URL.",arguments,s)}function xhrLib(){return _xhrQ.apply(t,_argsToArr(arguments))}_fnProps(_xhr,A),_fnProps(xhrLib,{ajax:_xhr,ajaxQ:_xhrQ,when:_xhrQ,defer:_xhrQ,ajaxSetup:_setupGlobalXHRDefaults,ajaxPrefilter:_setupPreFilter}),t.spaXHR=xhrLib}(this);
/*@license SPA.js (Form Validation Extension) [MIT]*/
!function(a){var E=a.jQuery;spa.usejQuery&&E||(E=dom),spa._validateDefaults={required:"Required",digits:"Digits",numbers:"Numbers",integer:"Integer",alphabet:"Alpha",alphanumeric:"AlphaNumeric",pattern:"PatternMatch",range:"ValueRange",fixedlength:"Lengths",minlength:"LengthMin",maxlength:"LengthMax",email:"Email",url:"Url",date:"Date",cardno:"CardNo",ipv4:"IPv4",ipv6:"IPv6",ipaddress:"IP",subnetmask:"Subnet",phoneUS:"PhoneUS",wordsize:"WordSize",compare:"Compare",promise:"Promise",xss:"CheckXSS",noop:"Noop"};var t=document.body.classList.contains("allow-xss");spa._validate={defaults:{offline:!0},_isOnOfflineValidation:!1,_validateAlertTemplate:'<div class="errortxt error-txt break-txt" data-i18n=""></div>',_offlineValidationRules:{},_fn:{Noop:function _fnNoop(){return!0},CheckXSS:function _fnCheckXSS(a){var e=spa.getElValue(a);return!(!t&&!E(a).hasClass("allow-xss"))||!(/<\s*\/?\s*(\bscript\b)/gi.test(e)||/\s*on([a-z])+\s*=|javascript:/gi.test(e))},Promise:function _fnPromise(a){var e;return spa._validate._isOnOfflineValidation||(a=(e=E(a)).data("validate")||"",/(promise)(\s)*:(\s)*(\'|\")/.test(a)&&spa._validate._addValidationClass(e,"validation-pending")),!0},Required:function _fnRequired(a){a=spa.getElValue(a);return!spa.isBlank(a)},Digits:function _fnValidDigits(a){a=E(a).val();return 0===a.length||/^\d+$/.test(a)},Numbers:function _fnValidNumbers(a){a=E(a).val();return 0===a.length||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)},Integer:function _fnValidInteger(a){a=E(a).val();return 0===a.length||/^-?\d+$/.test(a)},Alpha:function _fnValidAlpha(a){a=E(a).val();return 0===a.length||!/[^a-z]/gi.test(a)},AlphaNumeric:function _fnValidAlphaNumeric(a){a=E(a).val();return 0===a.length||!/[^a-z0-9]/gi.test(a)},PatternMatch:function _fnValidPatternMatch(a){var e=E(a).val(),t=0===e.length;return t||(t=new RegExp(E(a).data("validatePattern"),E(a).data("validatePatternOptions").replace(/!/g,"")).test(e),0<=E(a).data("validatePatternOptions").indexOf("!")&&(t=!t)),t},ValueRange:function _fnValidValueRange(a){var e,t,n,i=E(a).val(),s=0===i.length;return s||(s=!1,/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(i)&&(e=spa.toFloat(i),n=(" "+(E(a).data("validateRange")||"")+": ").split(":"),t=!spa.isBlank(n[0]),i=!spa.isBlank(n[1]),a=spa.toFloat(n[0]),n=spa.toFloat(n[1]),t&&i?s=a<=e&&e<=n:t?s=a<=e:i&&(s=e<=n))),s},LengthMin:function _fnValidLengthMin(a){var e=E(a).val(),a=spa.toInt(E(a).data("minlength")||E(a).data("minLength")||E(a).attr("minlength"));return e.length>=a},LengthMax:function _fnValidLengthMax(a){var e=E(a).val(),a=spa.toInt(E(a).data("maxlength")||E(a).data("maxLength"));return e.length<=a},Lengths:function _fnValidLengths(a){var e,t=E(a).val().length;return a.hasAttribute("data-fixed-length")||a.hasAttribute("data-fixedlength")?t==+(a.getAttribute("data-fixed-length")||a.getAttribute("data-fixedlength")):(e=spa.toInt(E(a).data("minlength")||E(a).data("minLength")||E(a).attr("minlength")),a=spa.toInt(E(a).data("maxlength")||E(a).data("maxLength")),e<=t&&t<=a)},WordSize:function _fnValidWordSize(a){var e=(""+E(a).val()).replace(/[-\n]/g," ").split(" ").map(function(a){return a.length});return(spa.isBlank(e)?0:Math.max.apply(null,e))<=(spa.toInt(E(a).data("validWordSize"))||20)},Email:function _fnValidEmail(a){a=E(a).val();return 0===a.length||(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(a)||/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i.test(a))&&/[a-z0-9]/i.test(a[a.length-1])&&1==((a||"").match(/@/g)||[]).length},Url:function _fnValidUrl(a){a=E(a).val();return 0===a.length||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},Date:function _isValidDate(a){var e=E(a).val();if(!(r=0===e.length)){r=!1;var t,n,i,s=E(a).data("validateFormat")||"YMD",l="^\\d{1,2}[\\/\\-\\.]\\d{1,2}[\\/\\-\\.]\\d{4}$",o=e.replace(/[^a-z]/gi,"");o&&((a=["","JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"].indexOf(o.toUpperCase()))<=0&&(a=["","JANUARY","FEBRUARY","MARCH","APRIL","MAY","JUNE","JULY","AUGUST","SEPTEMBER","OCTOBER","NOVEMBER","DECEMBER"].indexOf(o.toUpperCase())),0<a&&(e=e.replace(new RegExp(o,"gi"),a)));var r,d=(e=e.replace(/[^0-9]/g," ").normalizeStr().replace(/ /g,"/")).split("/");switch(s.toUpperCase()){case"YMD":l="^\\d{4}[\\/\\-\\.]\\d{1,2}[\\/\\-\\.]\\d{1,2}$",t=d[0],n=d[1],i=d[2];break;case"MDY":n=d[0],i=d[1],t=d[2];break;case"DMY":i=d[0],n=d[1],t=d[2]}new RegExp(l,"").test(e)&&(i=parseInt(i,10),n=parseInt(n,10),t=parseInt(t,10),r=(e=new Date(t,n-1,i)).getFullYear()===t&&e.getMonth()===n-1&&e.getDate()===i)}return r},CardNo:function _fnValidCardNo(a){var e=E(a).val(),t=0===e.length;if(!t){var n=!/[^0-9 \-]+/.test(e),i=e.replace(/[^0-9]/g,""),a=i.length;if(n&&a&&0<"0345".indexOf(i[0])&&(15==a||16==a)){for(var s=0,l=0,o=!1,r=e.replace(/\D/g,""),d=r.length-1;0<=d;d--){var u=r.charAt(d),l=parseInt(u,10);o&&9<(l*=2)&&(l-=9),s+=l,o=!o}t=s%10==0}}return t},IPv4:function _fnValidIpv4(a){a=E(a).val();return 0===a.length||/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i.test(a)&&spa.every(a.split("."),function(a){return!(1<a.length)||!a.beginsWithStr("0")})},IPv6:function _fnValidIpv6(a){a=E(a).val();return 0===a.length||/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i.test(a)},IP:function _fnValidIpAddress(a,e){var t,n,i=E(a).val(),s=0===i.length;return s||(t=i,n=spa.toInt(E(a).data("validateIpaddressOctates")||4)-1,s=new RegExp("^(([01]?[0-9]?[0-9]|2([0-4][0-9]|5[0-5]))\\.){"+n+"}([01]?[0-9]?[0-9]|2([0-4][0-9]|5[0-5]))$","g").test(t)&&spa.every(t.split("."),function(a){return!(1<a.length)||!a.beginsWithStr("0")}),spa._validate._showValidateMsg(a,e,s),i=E(a).data("validateIpaddressClass"),s&&i&&(n={A:{oct1:{B:0,E:127},oct2:{B:0,E:256},oct3:{B:0,E:256},oct4:{B:1,E:255}},B:{oct1:{B:127,E:192},oct2:{B:1,E:256},oct3:{B:0,E:256},oct4:{B:0,E:255}},C:{oct1:{B:191,E:224},oct2:{B:0,E:256},oct3:{B:1,E:256},oct4:{B:1,E:255}},D:{oct1:{B:223,E:240},oct2:{B:0,E:256},oct3:{B:0,E:256},oct4:{B:0,E:256}},E:{oct1:{B:239,E:255},oct2:{B:0,E:256},oct3:{B:0,E:256},oct4:{B:0,E:255}}},s=+(t=t.split("."))[0]>n[i].oct1.B&&+t[0]<n[i].oct1.E&&(+t[1]>=n[i].oct2.B&&+t[1]<n[i].oct2.E&&(+t[2]>=n[i].oct3.B&&+t[2]<n[i].oct3.E&&(+t[3]>n[i].oct4.B&&+t[3]<n[i].oct4.E))),spa._validate._showValidateMsg(a,e,s))),s},Subnet:function _fnValidSubnet(a){var e=E(a).val(),a=0===e.length;return a=a||new RegExp("^((128|192|224|240|248|252|254)\\.0\\.0\\.0)|(255\\.(((0|128|192|224|240|248|252|254)\\.0\\.0)|(255\\.(((0|128|192|224|240|248|252|254)\\.0)|255\\.(0|128|192|224|240|248|252|254)))))$").test(e)&&spa.every(e.split("."),function(a){return!(1<a.length)||!a.beginsWithStr("0")})},PhoneUS:function _fnValidPhoneUS(a){a=E(a).val();return 0===a.length||9<a.length&&a.match(/^(\+?1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/)},Compare:function _fnValidCompare(a){var e=0===E(a).val().length;if(!e){var t,n=E(a).data(),i=spa.toJSON(n.validateCompare||"{}");if(!spa.isBlank(i)&&i.target){t=E(i.target);var n=i.valid||"=",s=spa.getElValue(a),l=spa.getElValue(t);if(("number".equalsIgnoreCase(i.type)||0<=n.indexOf("<")||0<=n.indexOf(">"))&&(s=spa.toFloat(s),l=spa.toFloat(l)),!"date".equalsIgnoreCase(i.type))switch(n){case"!=":e=s!=l;break;case"!==":e=s!==l;break;case"===":e=s===l;break;case">":e=l<s;break;case"<":e=s<l;break;case">=":e=l<=s;break;case"<=":e=s<=l;break;default:e=s==l}}}return e}},_showValidateMsg:function __showValidateMsg(a,e,t,n,i){e=e||"";var s=E(a);if(s.length){2<arguments.length&&spa.isString(t)&&(n=t),2<arguments.length&&spa.isBoolean(t)&&t&&(e="");var l=!(n=n||spa._validate._validateAlertTemplate).beginsWithStrIgnoreCase("<"),o=s.parent(),r=s.data("errorClassTarget"),d=r?s.closest(r):o,u=s.data("errorPosition");a=s[0],spa._validate._isOnOfflineValidation||(d.removeClass("has-error-msg no-error-msg")[!1===t?"addClass":"removeClass"]("validation-error "+(e?"has-error-msg":"no-error-msg")),s[!1===t?"addClass":"removeClass"]("invalid-data"),i||spa.updateTrackFormCtrls(a.form));var p=l?E(n):s.next();!l&&u&&("first".equalsIgnoreCase(u)?p=o.children().first():"last".equalsIgnoreCase(u)&&(p=o.children().last()));var F,f="",r="";return E(p).attr("class")===E(n).attr("class")||l?(e.beginsWithStrIgnoreCase("i18n:")&&(spa.console.group("i18n-Msg"),spa.console.log("msg:",e),F=(e.getLeftStr("|")||e).replace(/i18n:/gi,""),r=e.getRightStr("|"),f="{html:'"+F+"'}",d=spa.toJSON(r),d=spa.isObject(d)?d:{},spa.console.log("i18nData@msg:",d),l=s.dataJSON("i18nData"),spa.isBlank(l)||(spa.console.log("i18nData@el",l),d=spa.merge(d,l),spa.console.log("i18nData:",d)),e=spa.i18n.text(F,d),spa.console.groupEnd("i18n-Msg")),spa._validate._isOnOfflineValidation||(E(p).attr("data-i18n",f).data("i18n",f),E(p).attr("data-i18n-data",r).data("i18nData",r),E(p).html(e))):spa.isBlank(e)||(u?"first".equalsIgnoreCase(u)?E(n).prependTo(o):"last".equalsIgnoreCase(u)?E(n).appendTo(o):E(n).insertAfter(s):E(n).insertAfter(s),spa._validate._showValidateMsg(a,e,t,n)),t}spa.console.warn("Validation config/setup is wrong for validation Msg:["+e+"] forEl:",a)},_getValidationClassTarget:function(a){var e=E(a),a=e.data("errorClassTarget");return a?e.closest(a):e.parent()},_addValidationClass:function(a,e){spa._validate._getValidationClassTarget(a).addClass(e)},_removeValidationClass:function(a,e){spa._validate._getValidationClassTarget(a).removeClass(e)},_deferValidate:function(){return!0},_registerPromise:function(a,e,t,n){var i,s=!spa.isBlank(a);return!s||(e=(i=E(e)).data("promises")||"").indexOf("["+a+"]")<0&&(spa.console.log("validating promise: "+a),e+="["+a+"]",i.attr("data-promises",e).data("promises",e),spa._validate._addValidationClass(i,"validation-pending"),spa.isFunction(t)&&t.call(i,i,n,a)),s},expose:function(e){return e=e||{},spa.keys(spa._validateDefaults).forEach(function(a){e[a]=spa._validate._fn[spa._validateDefaults[a]]}),e}},spa.initValidation=spa.initDataValidation=function(a){spa.console.group("initValidation"),spa.console.log(">>>>> initDataValidation request for context:"+a);function cc(t){return t=t||{},spa.each(spa.keys(t),function(e){0==e.indexOf("on")&&0<e.indexOf("_")&&(spa.each(e.split("_"),function(a){a.indexOf("on")<0&&(a="on"+a),t[a]?spa.isArray(t[a])?t[a].push(t[e]):t[a]=[t[a],t[e]]:t[a]=[t[e]]}),delete t[e])}),t}var e=E(a=a||"body"),t=e.data("validateElFilter")||"";spa.console.log("$context",e),spa.console.log("data-validate-common",e.data("validateCommon"));var c=cc(spa.toJSON(e.data("validateCommon")||"{}")),n=spa.merge({},c.onFocus),g=!!spa.toJSON(e.attr("data-validate-defaults")||{}).offline;spa.console.log("commonValidateRules");var v,h,_,m,i={fn:"_check.promise",offline:!1};spa.isBlank(n)?c.onFocus=i:(spa.isArray(n)||(n=[n]),n.push(i)),c.onFocus=n,spa.console.log("commonValidateRules",c);var A=(e.data("validateForm")||e.data("validateScope")||"").replace(/onRender/i,"").replace(/[^a-zA-Z0-9]/g,"");spa.isBlank(A)&&(A=a.replace(/[^a-zA-Z0-9]/g,"")),spa.console.log("offlineValidationKey: "+A);var D=!spa.isBlank(A);D&&(spa.console.log("resetting the rules for "+A),spa._validate._offlineValidationRules[A]={rules:{}}),spa.console.log(A,spa._validate._offlineValidationRules[A]),e.find(t+"[data-validate]").each(function(a,e){var i=e.getAttribute("id");i||(i=(e.name||e.type).replace(/[^a-z]/gi,"")+a,e.setAttribute("id",i));var t,r={},n=E(e).data("validate");n&&n.indexOf("{")<0&&(t=(E(e).data("validateEvents")||"onBlur").replace(/[^a-z]/gi," ").normalizeStr().replace(/ /g,"_"),a=",offline:"+(E(e).data("validateOffline")||g||"false"),n="{"+t+":["+("{fn:"+n.replace(/[,;]/," ").normalizeStr().replace(/ /g,a+"},{fn:")+a+"}")+"]}"),r=cc(spa.toJSON(n));var s,l,o={},d="",u=e.attributes;if(u&&u.length){for(var p=u.length;0<=p;p--)if(d=u[p]?u[p].name:"",d&&/^data-validate-on/i.test(d)&&(s="."+function _formatEventName(a){return/^on/i.test(a)&&(a=(a=a.toLowerCase()).substring(0,2)+a[2].toUpperCase()+a.substring(3)),a}(d.replace(/data-validate-/i,"")),l=spa.toJSON(e.getAttribute(d)),!spa.isBlank(l)))if(Array.isArray(l))for(var F=0,f=l.length;F<f;F++)spa.setObjProperty(o,s,l[F]);else spa.setObjProperty(o,s,l);spa.isBlank(o)||(o=cc(o),Object.keys(o).forEach(function(a){spa.setObjProperty(r,"."+a,o[a])}))}spa.console.log(n),spa.each(spa.keys(c),function(n){var a=c[n];spa.isArray(a)||(a=[a]),a.reverse(),spa.console.group("vRules #"+i),spa.each(a,function(a){var e,t;m=!0,v="<",_=a.offline||!1,h=!1,a.el?(e=a.el.replace(/ /g,"").split(","),t=a.el.replace(/[< >!]/g,"").split(",").indexOf(i),(m=0<=t)&&(v=0<=e[t].indexOf(">")?">":"<",h=0<=e[t].indexOf("!"))):a.ex&&(m=a.ex.replace(/[< >!]/g,"").split(",").indexOf(i)<0),m&&(m=spa.omit(a,["el","ex"]),spa.console.log(">>commonRule2El:",m,a),h&&(m.offline=!_),r[n]||(r[n]=[]),spa.console.group("-"+n),"<"===v?(spa.console.log(v+"all:",[m],r[n]),r[n]=spa.union([m],r[n])):(spa.console.log(v+"all:",r[n],[m]),r[n]=spa.union(r[n],[m])),spa.console.log("uniq:",r[n]),spa.console.groupEnd("-"+n))}),spa.console.group("-FinalRules"),spa.console.log(r),spa.console.groupEnd("-All"),spa.console.groupEnd("vRules #"+i)}),spa.each(spa.keys(r),function(o){var a=o.substring(2,3).toLowerCase()+o.substring(3);spa.console.log("settingup event on["+a+"]..."),spa.isArray(r[o])||(r[o]=[r[o]]),spa.console.log(r),D&&spa.each(r[o],function(a){spa.isArray(a)||(a=[a]),spa.each(a,function(a){a.hasOwnProperty("offline")||(a.offline=g),spa.console.log(a),a.offline&&!a.promise&&(a={fn:a.fn,msg:a.msg},spa._validate._offlineValidationRules[A].rules[i]||(spa._validate._offlineValidationRules[A].rules[i]=[]),spa.indexOf(spa._validate._offlineValidationRules[A].rules[i],a)<0&&spa._validate._offlineValidationRules[A].rules[i].push(a))})}),spa.console.log("registering an event: "+o),o.beginsWithStrIgnoreCase("on")&&!"test".equalsIgnoreCase(a)&&E(e).on(a,function(){var e,t,n,i=this,a=E(i),s=i&&i.hasAttribute("data-validate-pause")&&spa.toBoolean(i.getAttribute("data-validate-pause")+""||"true"),l=i&&i.hasAttribute("data-ignore-validation-if-invisible")&&spa.toBoolean(i.getAttribute("data-ignore-validation-if-invisible")+""||"true");s||l&&!a.is(":visible")||spa.every(r[o],function(a){return spa.isArray(a)?spa.every(a,function(a){return e=a.fn,spa.isString(e)&&(e=spa.findSafe(window,e)),spa.isFunction(e)||console.error("data-validate-function Not Found: "+a.fn),t=a.msg||E(i).data("validateMsg")||"",spa._validate._registerPromise(a.promise,i,e,t)&&(e=spa._validate._deferValidate),n=!!spa.isFunction(e)&&e.call(i,i,t),spa.isBoolean(n)&&spa._validate._showValidateMsg(i,t,n),n}):(e=a.fn,spa.isString(e)&&(e=spa.findSafe(window,e)),spa.isFunction(e)||console.error("data-validate-function Not Found: "+a.fn),t=a.msg||E(i).data("validateMsg")||"",spa._validate._registerPromise(a.promise,i,e,t)&&(e=spa._validate._deferValidate),n=!!spa.isFunction(e)&&e.call(i,i,t),spa.isBoolean(n)&&spa._validate._showValidateMsg(i,t,n),n)})})})}),spa.console.groupEnd("initValidation")},spa.validateForm=spa.validate=spa.doDataValidation=function(a,e,s){var t;spa.isString(arguments[1])&&(t="#"+arguments[1].replace(/[ #]/g,"").replace(/,/g,",#")+",",e=arguments[2],s=arguments[3]);var l,n,i=a.replace(/[^a-zA-Z0-9]/g,""),o="#"+a.replace(/#/g,""),r=E(o),d=[];return spa._validate._offlineValidationRules[i]?(l=spa._validate._offlineValidationRules[i].rules,spa.console.log("vRules:",l),spa.isEmptyObject(l)?(i=1,n="Offline rules not found in scope ["+a+"].",r.find(".validation-error,.validation-pending").length&&(i=3,n+=" Found .validation-error|.validation-pending"),d=[{errcode:i,errmsg:n}]):(n=spa.keys(l),t&&(n=n.map(function(a){return 0<=t.indexOf("#"+a+",")?a:""})),spa._validate._isOnOfflineValidation=!e,spa.every(n,function(a){return!a||(a=a,n=r.find("#"+a),(i=n[0])&&i.hasAttribute("data-validate-pause")&&spa.toBoolean(i.getAttribute("data-validate-pause")+""||"true")||spa.toBoolean(n.data("ignoreValidationIfInvisible"))&&!n.is(":visible")||spa.every(l[a],function(a){return t=a.fn,spa.isString(t)&&(t=spa.findSafe(window,t)),spa.isFunction(t)||console.error("data-validate-function Not Found: "+a.fn),e=a.msg||n.data("validateMsg")||"",t=!!spa.isFunction(t)&&t.call(i,i,e),spa.isBoolean(t)&&spa._validate._showValidateMsg(n,e,t,"",!0),t||(a={errcode:2,el:i,fn:a.fn,msg:e},d.push(a)),t})||s);var e,t,n,i}),spa._validate._isOnOfflineValidation=!1)):r.length?r.is("[data-validate-form]")&&(d=[{errcode:1,errmsg:"Form Not Initialized."}]):d=[{errcode:1,errmsg:"Form Not Found."}],d},spa.pauseValidation=function(a,e){var t=void 0===e||e;E(a).each(function(a,e){t?e.setAttribute("data-validate-pause",t):e.removeAttribute("data-validate-pause")})},spa.clearValidation=spa.removeValidationMsg=function(a){a&&E(a).each(function(a,e){spa._validate._showValidateMsg(e,"",!0)})},spa.updateValidation=function(a,t,n,i){2==arguments.length&&(n=spa.isBlank(t)),E(a).each(function(a,e){spa._validate._showValidateMsg(e,t,n,i)})},spa.updateValidationPromise=function(t,a,n,i,s){var l,o;E(a).each(function(a,e){l=E(e),spa.each(t.split(","),function(a){o=(l.data("promises")||"").replace("["+a.trim()+"]",""),l.attr("data-promises",o).data("promises",o),spa.isBlank(o)&&spa._validate._removeValidationClass(l,"validation-pending")}),spa._validate._showValidateMsg(e,n,i,s)})},a._clearSpaValidateMsg=function _clearSpaValidateMsg(a){return spa._validate._showValidateMsg(a),!0},a._check=spa._validate.expose()}(this);
/*@license SPA.js (Handlebars Helpers) [MIT]*/
!function(){var O=Array.prototype;function E(e){return Object.prototype.toString.call(e).replace(/\[object /,"").replace(/\]/,"").toLowerCase()}function C(e,t){return 0<=(""+t).toLowerCase().indexOf(E(e))}function n(e,t){function n(e,t){for(var n=t.split(","),r="",a=0,o=!0,i=0;i<n.length;i++)(r=n[i].trim())&&(a++,o=o&&e.hasOwnProperty(r));return a&&o}var r=!1;if(C(e,"object")&&t)switch(!0){case 0<(t=""+t).indexOf("&"):r=n(e,t.replace(/\&/g,","));break;case 0<t.indexOf("|"):r=function(e,t){for(var n=t.split(","),r="",a=0,o=!1,i=0;i<n.length&&((r=n[i].trim())&&(a++,o=o||e.hasOwnProperty(r)),!o);i++);return a&&o}(e,t.replace(/\|/g,","));break;default:r=n(e,t)}return r}function a(e,t){return!!(C(e,"object")&&n(e,"name,hash,data")&&n(e.data,"root"))&&(!t||e.name==t)}function M(e){return a(e)&&n(e,"fn,inverse")}function S(e){return a(e)&&Object.keys(e.hash).length}function D(e,t){var n=S(e)?e.hash:{};return t?(Object.keys(n).forEach(function(e){t[e]=C(n[e],"string")?n[e].trim():n[e]}),t):n}function w(e,t){var n=S(e)?e.hash:{};return t?(Object.keys(n).forEach(function(e){t[e]=n[e]}),t):n}function e(){if(arguments.length<2)throw console.error("missing argument(s)"),new Error("missing argument(s)");for(var s,e,t,c=O.splice.call(arguments,arguments.length-1,1)[0],u=c.data.root||{},f=c.hasOwnProperty("fn")||c.hasOwnProperty("inverse"),n=":if"==c.name,r={"==":function(e,t){return e==t},"===":function(e,t){return e===t},"!=":function(e,t){return e!=t},"!==":function(e,t){return e!==t},"<":function(e,t){return e<t},">":function(e,t){return t<e},"<=":function(e,t){return e<=t},">=":function(e,t){return t<=e},":typeof":function(e,t){return typeof e===t},":instanceof":function(e,t){return E(e).toLowerCase()===(""+t).trim().toLowerCase()},":is":function(e,t){return E(e).toLowerCase()===(""+t).trim().toLowerCase()},"=ic":function(e,t){return(""+e).toLowerCase()==(""+t).toLowerCase()},"!=ic":function(e,t){return(""+e).toLowerCase()!=(""+t).toLowerCase()},"+":function(e,t){return e+t},"-":function(e,t){return e-t},"*":function(e,t){return e*t},"/":function(e,t){return e/t}},a=Object.keys(r),o=O.slice.call(arguments),i=0;i<o.length;i++)if("string"===E(o[i])&&(t=o[i],s=0<=a.indexOf(t)?i:0)){e=o[i];break}if(n&&(!f||!C(o[0],"function")&&!s))throw new Error("[Template Syntax Error] :if must have 'CONDITION' and BLOCK. use {{#:if ... 'CONDITION' ... }} ... {{else}} ... {{/:if}}");if(s){var l=o.slice(0,s),p=o.slice(s+1),d=m.apply(void 0,l),h=m.apply(void 0,p),g=r[e](d,h);if(f){var b,y=d,v=h;return S(c)&&(b=w(c))&&((b.hasOwnProperty("thenWith")||b.hasOwnProperty("with")||b.hasOwnProperty("thenContext")||b.hasOwnProperty("context")||b.hasOwnProperty("thenData")||b.hasOwnProperty("data"))&&(y=b.thenWith||b.with||b.thenContext||b.context||b.thenData||b.data),(b.hasOwnProperty("elseWith")||b.hasOwnProperty("with")||b.hasOwnProperty("elseContext")||b.hasOwnProperty("context")||b.hasOwnProperty("elseData")||b.hasOwnProperty("data"))&&(v=b.elseWith||b.with||b.elseContext||b.context||b.elseData||b.data)),g?c.fn(y):c.inverse(v)}return g}return m.apply(void 0,arguments);function m(){var r,a,o=O.slice.call(arguments);function i(t){if(void 0===r)r=t;else{var e=E(t);switch(E(r)){case"array":switch(e){case"array":r=r.concat(t);break;default:r.push(t)}break;case"object":switch(e){case"array":for(var n=0;n<t.length;n++)r[n]=t[n];break;case"object":Object.keys(t).forEach(function(e){r[e]=t[e]});break;default:r["_"+(Object.keys(r).length+1)]=t}break;default:switch(e){case"object":t=JSON.stringify(t);break;case"array":t=t.join()}r+=" "+t}}}if(o.forEach(function(e,t){if(!a)switch(E(e)){case"function":var n=o.slice(t+1);n.push(u);var r=e.apply(void 0,n);f?s?i(r):"boolean"===E(r)?i(r?c.fn(r):c.inverse(r)):i(c.fn(r)):i(r),a=!0;break;case"array":f?s?i(e):e.length?e.forEach(function(e){i(c.fn(e))}):i(c.inverse(u)):i(e);break;case"object":f?s?i(e):Object.keys(e).length?i(c.fn(e)):i(c.inverse(u)):i(e);break;default:i(f?s?e:e?c.fn(u):c.inverse(u):e)}}),f)return r;switch(E(r)){case"object":return JSON.stringify(r);case"array":return r.join();default:return r}}}function B(e){return E(e)}function o(e,t){var n=arguments[arguments.length-1],r=a(t)?"undefined":t;return M(n)?C(e,r)?n.fn(e):n.inverse(e):C(e,r)}function t(e){return(""+(e||"")).toLowerCase()}function r(e){return(""+(e||"")).toUpperCase()}function i(e){return(""+(e||"")).toLowerCase().replace(/^(.)|\s(.)/g,function(e){return e.toUpperCase()})}function s(e){return(""+e).charAt(0).toLowerCase()+(""+e).slice(1)}function c(e){return d(e).replace(/\s+/g," ")}function u(e){return e=(e=(""+e).replace(/[^+-0123456789.]/g,"")).trim().length?0<=e.indexOf(".")?e.substring(0,e.indexOf(".")):e:"0",parseInt(1*e,10)}function f(e){return e=(e=(""+e).replace(/[^+-0123456789.]/g,"")).trim().length?e:"0",parseFloat(1*e)}function l(e){switch(E(e)){case"object":return JSON.stringify(e);case"array":return e.join();default:return""+e}}function p(e){switch(E(e)){case"function":return!0;case"object":return 0<Object.keys(e).length;case"array":return 0<e.length;default:var t=!0;switch((""+e).trim().toLowerCase()){case"":case"0":case"-0":case"nan":case"null":case"false":case"undefined":t=!1}return t}}function d(e,t){return e=l(e),C(t,"string")?h(g(e,t),t):e.trim()}function h(e,t){return e=l(e),C(t,"string")||(t=""),e.replace(new RegExp("^["+(t||"\\s")+"]+","g"),"")}function g(e,t){return e=l(e),C(t,"string")||(t=""),e.replace(new RegExp("["+(t||"\\s")+"]+$","g"),"")}function b(e,t){return e=l(e),C(t,"string|number")||(t=0),"string"==typeof t&&(t=e.indexOf(t)),(t=u(t))?e.substr(0,t):""}function y(e,t){e=l(e),C(t,"string|number")||(t=0);var n=1;return"string"==typeof t&&(n=t.length,t=e.indexOf(t)),(t=u(t))<0?"":e.substr(t+n)}function v(e){var t=arguments[arguments.length-1];return M(t)?void 0===e?t.fn(e):t.inverse(e):void 0===e}function m(e){var t;if(v(e)||null===e)t=!0;else switch(E(e)){case"undefined":case"null":t=!0;break;case"function":t=!1;break;case"object":t=0==Object.keys(e).length;break;case"array":t=0==e.length;break;case"boolean":t=e;break;case"number":t=0==e;break;case"string":t=0==e.trim().length;break;default:t=!1}var n=arguments[arguments.length-1];return M(n)?t?n.fn(e):n.inverse(e):!!t}function P(e,t){var n=[];return m(e)||(n=t?e.split(t):0<e.indexOf(",")?e.split(","):0<e.indexOf("|")?e.split("|"):0<e.indexOf(" ")?e.split(" "):0<e.indexOf("-")?e.split("-"):[e]),n}function I(e){var t;return C(e,"string")&&(e=e.trim())&&(C(t=T(window,e),"function")||(t=void 0)),t}function x(n,e){var r,t,a,o,i=arguments[arguments.length-1],s="",c={sortOn:"",sortBy:"",splitBy:",",alias:"",fnFilter:"",fnEmpty:"",fnEnd:"",fnError:""},u=!1,f=0;if(S(i)&&(c=D(i,c),r=I(c.fnFilter),t=I(c.fnEmpty),a=I(c.fnEnd),o=I(c.fnError)),M(i)){switch(B(n)){case"string":n=P(n,c.splitBy);case"array":if(c.sortOn||c.sortBy){var l="sortOn:"+c.sortOn.trim()+";sortBy:"+(c.sortBy||"asc").trim();n=N(n,l)}case"object":if(m(n))s+=i.inverse(n);else{var p,d=C(e,"string")&&e.trim()?P(e):c.alias?P(c.alias):["",""],h=(d[0]||"").trim(),g=(d[1]||"").trim(),b=g||"index";u=!0,Object.keys(n).forEach(function(e,t){c.key=e,p=h?{}:n[e],h&&(h&&(p[h]=n[e]),g&&(p[g]=e)),r?(c[b+"Src"]=t,r.call(void 0,p)&&(c[b]=f++,s+=i.fn(p,{data:c}))):(c[b]=f++,s+=i.fn(p,{data:c}))})}break;default:o&&o.call(void 0,n),s+=i.inverse(n)}return u&&(f?a&&a.call(void 0,n):(t&&t.call(void 0,n),s+=i.inverse(n))),s}return n}function k(){return e.apply(void 0,arguments)?"disabled":""}function j(){return e.apply(void 0,arguments)?"":"disabled"}function L(e){if(C(e,"number"))return!0;if(C(e,"string")){var t=e.replace(/[0-9]/g,"").trim();return 0<e.length&&(""==t||1<e.length&&"."==t)}return!1}function T(e,t,n){return spa.findInObject(e,t,n)}function N(e,t){var n,r,a=arguments[arguments.length-1],o=[],i={sortOn:"",sortBy:"asc",splitBy:","};function s(e,t){return e<t?-1:t<e?1:0}if(S(a)?i=D(a,i):C(t,"string")&&P(t,";").forEach(function(e){var t=e.split(":");i[t[0].trim()]=C(t[1],"undefined")?"":t[1].trim()}),n="asc"==i.sortBy.toLowerCase(),r=i.sortOn||"",C(e,"string")&&0<e.length&&(e=P(e,i.splitBy)),C(e,"array")&&0<e.length){if(1==e.length)o=e;else switch(E(e[0])){case"number":o=e.sort(function(e,t){return e-t});break;case"string":o=L(e[0])?e.sort(function(e,t){return 1*e-1*t}):e.sort();break;case"boolean":o=e.sort(function(e,t){return s(e,t)});break;case"object":if(r)switch(E(T(e[0],r))){case"number":o=e.sort(function(e,t){return T(e,r)-T(t,r)});break;case"string":o=L(T(e[0],r))?e.sort(function(e,t){return 1*T(e,r)-1*T(t,r)}):e.sort(function(e,t){return s(T(e,r),T(t,r))});break;case"boolean":o=e.sort(function(e,t){return s(T(e,r),T(t,r))});break;default:o=e}else o=e;break;default:o=e}n||(o=o.reverse())}return M(a)?o.length?a.fn(o):a.inverse(e):o}function F(){var t,e=O.pop.call(arguments);function n(e){if(!C(e,"undefined|null"))switch(E(t)){case"undefined":case"null":t=e;break;case"array":switch(E(e)){case"array":t=t.concat(e);break;default:t.push(e)}break;case"object":switch(E(e)){case"object":t=function n(){var r={},e=0,t=arguments.length;function a(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&("[object Object]"===Object.prototype.toString.call(e[t])?r[t]=n(r[t],e[t]):r[t]=e[t])}for(;e<t;e++)a(arguments[e]);return r}(t,e);break;default:t.hasOwnProperty("__joined__")?t.__joined__.push(e):t.__joined__=[e]}break;default:switch(E(e)){case"array":e.length&&(t+=e.join());break;case"object":Object.keys(e).length&&(t+=JSON.stringify(e));break;default:t+=""+e}}}return O.forEach.call(arguments,function(e){n(e)}),M(e)?e.fn(t):t}function _(){var e=s(O.pop.call(arguments).name.replace(/:console/g,""));"time"==e&&arguments.length&&console.log.apply(void 0,arguments),0==e.indexOf("mem")?console.log(console.memory):console[e].apply(void 0,arguments)}"undefined"!=typeof Handlebars&&Handlebars&&Handlebars.registerHelper({":":e,":if":e,":is":o,":isEmpty":m,":ofType":B,":?":function(e,t,n){return p(e)?t:n},":ifEmpty":function(e,t,n){return m(e)?t:C(n,"object")&&":ifEmpty"==n.name?e:n},":ifNotEmpty":function(e,t,n){return m(e)?C(n,"object")&&":ifNotEmpty"==n.name?e:n:t},":of":function(e,t){var n=arguments[arguments.length-1],r=o(e,"array|object")?T(e,t):e;return M(n)?void 0!==r?n.fn(r):n.inverse(r):r},":each":x,":forEach":x,":split":function(e,t){var n=arguments[arguments.length-1],r=P(e,o(t,"string")?t:void 0);return M(n)?m(r)?n.inverse(e):n.fn(r):r},":sort":N,":join":F,":merge":F,":joinWithStr":function(){var e=O.pop.call(arguments),t=O.shift.call(arguments),n=O.join.call(arguments,t);return M(e)?e.fn(n):n},":fn":function(){var e,t,n,r=O.pop.call(arguments),a=O.shift.call(arguments),o=I(a);return o&&(a.match("]$")?e=a.substring(0,a.lastIndexOf("[")):0<a.indexOf(".")&&(e=a.substring(0,a.lastIndexOf("."))),t=e?T(window,e):window,n=o.apply(t,arguments)),M(r)?C(n,"undefined")||C(n,"boolean|number|string")&&!n||C(n,"array|object")&&spa.isBlank(n)?r.inverse(n):r.fn(n):n},":jsonify":function(){var e=O.pop.call(arguments),t=O.shift.call(arguments),r={},g=O.splice.call(arguments,0);return C(t,"string")&&P(t,";").forEach(function(e){var t=b(e,":").trim(),n=y(e,":").trim();t&&(n=function t(e){e=e.trim();if(!e.length)return e;var n=e[0],r=e;switch(!0){case"true"==e:r=!0;break;case"false"==e:r=!1;break;case L(e):r=1*e;break;case"["==n:e=e.substring(1,e.lastIndexOf("]"))+",";case 0<e.indexOf(",")&&e.indexOf("{")<0:var a=[];e.split(",").forEach(function(e){""!=(e=e.trim())&&a.push(t(e))}),r=a;break;case"{"==n:e=e.substring(1,e.lastIndexOf("}"));var o,i,s={};e.split(",").forEach(function(e){e=e.trim(),o=b(e,":").trim(),i=y(e,":").trim(),o&&(s[o]=t(i))}),r=s;break;case"@"==n&&"["!=e[1]:var c=e.substring(1,e.indexOf("."));if(L(c)){r=g[c];var u=0<e.indexOf(".")?e.substr(e.indexOf(".")+1):"";u&&C(r,"array|object")&&(r=T(r,u))}}if(C(r,"string")&&0<=r.indexOf("@[")){var f,l,p,d,h=r.match(/(@\[\s*(.*?)\s*])/g);h&&h.forEach(function(e){f=e.replace(/@\[/,"").replace(/]/,""),l=f.substring(0,f.indexOf(".")),p="",L(l)&&(p=g[l],(d=0<f.indexOf(".")?f.substr(f.indexOf(".")+1):"")&&C(p,"array|object")&&(p=T(p,d))),r=r.replace(new RegExp(e.replace(/\[/,"\\["),"g"),p)})}return r}(n),r[t]=n)}),M(e)?e.fn(r):r},":jsonParse":function(){var t=O.pop.call(arguments),e=O.shift.call(arguments),n={};if(C(e,"string"))try{n=JSON.parse(e)}catch(e){if(M(t))return t.inverse(e)}return M(t)?t.fn(n):n},":consoleClear":_,":consoleLog":_,":consoleWarn":_,":consoleInfo":_,":consoleError":_,":consoleGroup":_,":consoleGroupEnd":_,":consoleGroupCollapsed":_,":consoleMem":_,":consoleMemory":_,":consoleProfile":_,":consoleProfileEnd":_,":consoleTable":_,":consoleTime":_,":consoleTimeEnd":_,":options":function(t,e){var a,o,i,n,r,s,c,u,f,l,p,d=arguments[arguments.length-1],h="",g=-1,b={value:"",text:"",value_text:"",splitBy:",",vtSplit:"",sortOn:"",sortBy:"",fnFilter:"",fnEmpty:"",fnEnd:"",selIndex:"",selValue:"",selText:""},y=[],v=[],m=[],O="",w=[];function x(e,t){w.push({value:e,text:t})}function k(e,t){return g++,'<option value="'+e+'" '+(n=e,r=t,a&&0<=y.indexOf(""+g)||o&&0<=v.indexOf(""+n)||i&&0<=m.indexOf(""+r)?"selected":"")+">"+t+"</option>";var n,r}switch(C(e,"string")&&P(e,";").forEach(function(e){var t=e.split(":");b[t[0].trim()]=C(t[1],"undefined")?"":t[1].trim()}),S(d)&&(b=D(d,b)),y=b.selIndex?P(b.selIndex):[],v=b.selValue?P(b.selValue):[],m=b.selText?P(b.selText):[],a=y.length,o=v.length,i=m.length,O=b.value||b.value_text,f=b.text||b.value_text,l=(b.vtSplit||"").replace(/colon/gi,":"),p="index"==O.toLowerCase(),n=b.sortOn.trim(),(r=b.sortBy.trim())&&!n&&(n="text"),n&&!r&&(b.sortBy="asc"),s=I(b.fnFilter),c=I(b.fnEmpty),u=I(b.fnEnd),C(t,"string")&&(t=P(t,b.splitBy)),B(t)){case"object":Object.keys(t).forEach(function(e){x(e,t[e])});break;case"array":t.forEach(function(t,e){switch(E(t)){case"object":var n=Object.keys(t);O&&f?x(t[O],t[f]):1==n.length&&n.forEach(function(e){x(e,t[e])});break;case"string":if(p){x(e,t);break}t=l?t.split(l):[t];case"array":O&&f?x(t[O],t[f]):1==t.length?x(t[0],t[0]):1<t.length&&x(t[0],t[1]);break;default:x(p?e:t,t)}})}if(s&&w.length){var j=[];w.forEach(function(e,t){e.index=t;var n=s.call(void 0,e);n&&j.push(C(n,"object")?n:e)}),w=j}if(w.length){if(n||r)w=N(w,"sortOn:"+n+";sortBy:"+r);w.forEach(function(e){h+=k(e.value,e.text)}),u&&u.call(void 0,w,t)}else c&&c.call(void 0,w,t);return M(d)?h?d.fn(new Handlebars.SafeString(h)):d.inverse(this):new Handlebars.SafeString(h)},":checkedIf":function(){return e.apply(void 0,arguments)?"checked":""},":checkedIfNot":function(){return e.apply(void 0,arguments)?"":"checked"},":enabledIf":j,":enabledIfNot":k,":disabledIf":k,":disabledIfNot":j,":selectedIf":function(){return e.apply(void 0,arguments)?"selected":""},":selectedIfNot":function(){return e.apply(void 0,arguments)?"":selected},":lower":t,":lowerCase":t,":toLowerCase":t,":lowerCaseOf":t,":upper":r,":upperCase":r,":toUpperCase":r,":upperCaseOf":r,":title":i,":titleCase":i,":toTitleCase":i,":titleCaseOf":i,":capitalize":function(e){return(""+e).charAt(0).toUpperCase()+(""+e).slice(1)},":unCapitalize":s,":normalize":c,":normalizeStr":c,":int":u,":toInt":u,":intOf":u,":float":f,":toFloat":f,":floatOf":f,":toStr":l,":toString":l,":toBool":p,":toBoolean":p,":trim":d,":trimStr":d,":trimLeft":h,":trimLeftStr":h,":trimRight":g,":trimRightStr":g,":replace":function(e){var t=arguments[arguments.length-1],n={searchStr:"",replaceStr:"",rxPattern:"",rxOption:""};return S(t)&&(n=w(t,n)),n.rxPattern?(""+e).replace(new RegExp(n.rxPattern,n.rxOption),n.replaceStr):(""+e).replace(n.searchStr,n.replaceStr)},":getLeftStr":b,":getRightStr":y,":dateNowMs":function(){return""+(new Date).getTime()},":dateNow":function(e){var t=new Date;if(!C(e,"string"))return""+t;var n=e,r=["January","February","March","April","May","June","July","August","September","October","November","December"],a=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],s=["Su","Mo","Tu","We","Th","Fr","Sa"];function c(e){return(9<e?"":"0")+e}var u={YYYY:t.getFullYear(),YY:t.getFullYear(),Y:t.getFullYear(),Mmmm:r[t.getMonth()],MMMM:r[t.getMonth()].toUpperCase(),Mmm:a[t.getMonth()],MMM:a[t.getMonth()].toUpperCase(),"0M":c(t.getMonth()+1),MM:t.getMonth()+1,Dddd:o[t.getDay()],DDDD:o[t.getDay()].toUpperCase(),Ddd:i[t.getDay()],DDD:i[t.getDay()].toUpperCase(),Dd:s[t.getDay()],DD:s[t.getDay()].toUpperCase(),"0d":c(t.getDate()),dd:t.getDate(),"0h":c(t.getHours()),hh:t.getHours(),"0m":c(t.getMinutes()),mm:t.getMinutes(),"0s":c(t.getSeconds()),ss:t.getSeconds(),ms:t.getMilliseconds()};return Object.keys(u).forEach(function(e){n=n.replace(e,u[e])}),n},":moment":function(e,t,n){return"undefined"==typeof moment?(console.warn("Missing moment.js"),e):C(n,"string")?moment(e,t).format(n):a(n)?moment(e).format(t):a(t)?moment().format(e):a(e)?moment():void 0},":rand":function(e,t){return C(e,"number")||(e=1),C(t,"number")||(t=e+999),Math.floor(Math.random()*(t-e+1))+e},":randPwd":function(e,t){C(e,"number")||(e=8),C(t,"string")||(t=""),e=e||8;for(var n=t||"9a8b77C8D9E8F7G6H5I4J3c6d5e4f32L3M4N5P6Qg2h3i4j5kV6W5X4Y3Z26m7n8p9q8r7s6t5u4v3w2x3y4z5A6BK7R8S9T8U7",r="",a=0;a<e;a++){var o=Math.floor(Math.random()*n.length);r+=n.charAt(o)}return r},":ifDefined":function(e){var t=arguments[arguments.length-1];return M(t)?void 0!==e?t.fn(e):t.inverse(e):void 0!==e},":ifUndefined":v,":bytesToSize":function(e){if(0==e)return"0";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return parseFloat(e/Math.pow(1024,t)).toFixed(2)+" "+["Bytes","KB","MB","GB","TB","PB"][t]}})}();
