/** @license SPA.js v2.34.0 | (c) Kumararaja <sucom.kumar@gmail.com> | License (MIT) */
window.app=window.app||{},function(){for(var e,t=function(){},a=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],n=a.length,r=window.console=window.console||{};n--;)e=a[n],r[e]||(r[e]=t);"none"in window||(window.none=""),"noop"in window||(window.noop=function(){})}(),function(){function e(e,t){return e>t}function t(e){return e}function a(e,t,a){for(var n=-1,r=e.length;r>++n;){var s=e[n],i=t(s);if(null!=i&&(void 0===o?i===i&&!st(i):a(i,o)))var o=i,p=s}return p}function n(n){return n&&n.length?a(n,t,e):void 0}function r(e){return e}function s(e,t,a){if(!W(a))return!1;var n=typeof t;return("number"==n?tt(a)&&et(t,a.length):"string"==n&&t in a)?ut(a[t],e):!1}function i(e,t){return Qa.setToString(Qa.overRest(e,t,r),e+"")}function o(e){return i(function(t,a){var n=-1,r=a.length,s=r>1?a[r-1]:void 0,i=r>2?a[2]:void 0;for(s=e.length>3&&"function"==typeof s?(r--,s):void 0,i&&isIterateeCall(a[0],a[1],i)&&(s=3>r?void 0:s,r=1),t=Object(t);r>++n;){var o=a[n];o&&e(t,o,n,s)}return t})}function p(e,t,a){var n=-1,r=fa,s=e.length,i=!0,o=[],p=o;if(a)i=!1,r=ga;else if(s>=Qa.LARGE_ARRAY_SIZE){var l=t?null:Qa.createSet(e);if(l)return Qa.setToArray(l);i=!1,r=_a,p=new Qa.SetCache}else p=t?[]:o;e:for(;s>++n;){var c=e[n],u=t?t(c):c;if(c=a||0!==c?c:0,i&&u===u){for(var d=p.length;d--;)if(p[d]===u)continue e;t&&p.push(u),o.push(c)}else r(p,u,a)||(p!==o&&p.push(u),o.push(c))}return o}function l(e){return G(e)&&tt(e)}function c(e,t,a,n,r){var s=-1,i=e.length;for(a||(a=ot),r||(r=[]);i>++s;){var o=e[s];t>0&&a(o)?t>1?c(o,t-1,a,n,r):ca(r,o):n||(r[r.length]=o)}return r}function u(e){var t=null==e?0:e.length;return t?c(e,1):[]}function d(e){var t=e.length,a=e.constructor(t);return t&&"string"==typeof e[0]&&en.call(e,"index")&&(a.index=e.index,a.input=e.input),a}function f(e,t,a){var n=t(e);return Q(e)?n:ca(n,a(e))}function g(e){return f(e,L,ln)}function m(e,t){return t=h(t,e),e=na(e,t),null==e||delete e[mt(bt(t))]}function h(e,t){return Q(e)?e:nt(e,t)?[e]:Tt(vt(e))}function v(e){return Qa.setToString(Qa.overRest(e,void 0,u),e+"")}function y(e){if(!G(e)||ra(e)!=Qa.objectTag)return!1;var t=sn(e);if(null===t)return!0;var a=en.call(t,"constructor")&&t.constructor;return"function"==typeof a&&a instanceof a&&an.call(a)==nn}function _(e){return y(e)?void 0:e}function b(e,t){var a=-1,n=e.length;for(t||(t=Array(n));n>++a;)t[a]=e[a];return t}function S(e,t,a,n){var r=!a;a||(a={});for(var s=-1,i=t.length;i>++s;){var o=t[s],p=n?n(a[o],e[o],o,a,e):void 0;void 0===p&&(p=e[o]),r?oa(a,o,p):N(a,o,p)}return a}function O(e,t){if(t)return e.slice();var a=e.length,n=tn?tn(a):new e.constructor(a);return e.copy(n),n}function T(e){return"function"!=typeof e.constructor||rt(e)?{}:Qa.baseCreate(sn(e))}function C(e){var t=new e.constructor(e.byteLength);return new Qa.Uint8Array(t).set(new Qa.Uint8Array(e)),t}function w(e,t){var a=t?C(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}function k(e){var t=-1,a=Array(e.size);return e.forEach(function(e,n){a[++t]=[n,e]}),a}function A(e,t,a,n){var r=-1,s=null==e?0:e.length;for(n&&s&&(a=e[++r]);s>++r;)a=t(a,e[r],r,e);return a}function x(e,t){var a=t?C(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}function R(e){var t=new e.constructor(e.source,Qa.reFlags.exec(e));return t.lastIndex=e.lastIndex,t}function j(e,t){return e.set(t[0],t[1]),e}function E(e,t){return e.add(t),e}function $(e,t,a){var n=t?a(k(e),Qa.CLONE_DEEP_FLAG):k(e);return A(n,j,new e.constructor)}function I(e,t,a){var n=t?a(Qa.setToArray(e),Qa.CLONE_DEEP_FLAG):Qa.setToArray(e);return A(n,E,new e.constructor)}function P(e){return Qa.symbolValueOf?Object(Qa.symbolValueOf.call(e)):{}}function D(e,t,a,n){var r=e.constructor;switch(t){case Qa.numberTag:case Qa.stringTag:return new r(e);case Qa.boolTag:case Qa.dateTag:return new r(+e);case Qa.arrayBufferTag:return C(e);case Qa.float32Tag:case Qa.float64Tag:case Qa.int8Tag:case Qa.int16Tag:case Qa.int32Tag:case Qa.uint8Tag:case Qa.uint8ClampedTag:case Qa.uint16Tag:case Qa.uint32Tag:return w(e,n);case Qa.mapTag:return $(e,n,a);case Qa.dataViewTag:return x(e,n);case Qa.regexpTag:return R(e);case Qa.setTag:return I(e,n,a);case Qa.symbolTag:return P(e)}}function N(e,t,a){var n=e[t];en.call(e,t)&&ut(n,a)&&(void 0!==a||t in e)||oa(e,t,a)}function M(e){return W(e)?Xt(e):z(e)?Xt(e.split("")):[]}function L(e){return tt(e)?ea(e,!0):Zt(e)}function V(e){return f(e,keys,Qa.getSymbols)}function U(e,t){return S(e,Qa.getSymbols(e),t)}function F(e,t){return S(e,ln(e),t)}function B(e,t){return e&&S(t,M(t),e)}function H(e,t){return e&&S(t,L(t),e)}function K(e,t){for(var a=-1,n=null==e?0:e.length;n>++a&&t(e[a],a,e)!==!1;);return e}function q(e,t,a,n,r,s){var i,o=t&CLONE_DEEP_FLAG,p=t&CLONE_FLAT_FLAG,l=t&CLONE_SYMBOLS_FLAG;if(a&&(i=r?a(e,n,r,s):a(e)),void 0!==i)return i;if(!W(e))return e;var c=Q(e);if(c){if(i=d(e),!o)return b(e,i)}else{var u=ia(e),f=u==Qa.funcTag||u==Qa.genTag;if(Xa(e))return O(e,o);if(u==Qa.objectTag||u==Qa.argsTag||f&&!r){if(i=p||f?{}:T(e),!o)return p?F(e,H(i,e)):U(e,B(i,e))}else{if(!Qa.cloneableTags[u])return r?e:{};i=D(e,u,q,o)}}s||(s=new Qa.Stack);var m=s.get(e);if(m)return m;s.set(e,i);var h=l?p?g:V:p?L:M,v=c?void 0:h(e);return K(v||e,function(n,r){v&&(r=n,n=e[r]),N(i,r,q(n,t,a,r,e,s))}),i}function z(e){return"string"==typeof e||!Q(e)&&G(e)&&ra(e)==Qa.stringTag}function W(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function G(e){return null!=e&&"object"==typeof e}function J(e){return null!=e&&"function"==typeof e}function Q(e){return"[object Array]"===Object.prototype.toString.call(e)}function X(e){return e===!0||e===!1||G(e)&&ra(e)==Qa.boolTag}function Y(e){return"number"==typeof e||G(e)&&ra(e)==Qa.numberTag}function Z(e){return"number"==typeof e&&e>-1&&0==e%1&&Qa.MAX_SAFE_INTEGER>=e}function et(e,t){return t=null==t?Qa.MAX_SAFE_INTEGER:t,!!t&&("number"==typeof e||Qa.reIsUint.test(e))&&e>-1&&0==e%1&&t>e}function tt(e){return null!=e&&Z(e.length)&&!J(e)}function at(e){var t=typeof e;return"undefined"==t||null==e?!0:"string"==t||"[object Array]"===Object.prototype.toString.call(e)?!e.length:"object"==t?!Object.keys(e).length:!1}function nt(e,t){if(Q(e))return!1;var a=typeof e;return"number"==a||"symbol"==a||"boolean"==a||null==e?!0:Qa.reIsPlainProp.test(e)||!Qa.reIsDeepProp.test(e)||null!=t&&e in Object(t)}function rt(e){var t=e&&e.constructor,a="function"==typeof t&&t.prototype||Qa.objectProto;return e===a}function st(e){return"symbol"==typeof e||G(e)&&ia(e)==Qa.symbolTag}function it(e){return G(e)&&Z(e.length)&&!!Qa.typedArrayTags[ia(e)]}function ot(e){return Q(e)||!!(Qa.spreadableSymbol&&e&&e[Qa.spreadableSymbol])}function pt(e){return Ya.call(e)}function lt(e){return e===e&&!W(e)}function ct(e){return S(e,L(e))}function ut(e,t){return e===t||e!==e&&t!==t}function dt(e,t){for(var a=e.length;a--;)if(ut(e[a][0],t))return a;return-1}function ft(e){return e!==e}function gt(e){var t=Qa.INFINITY,a=Qa.MAX_INTEGER;if(!e)return 0===e?e:0;if(e=1*e,e===t||e===-t){var n=0>e?-1:1;return n*a}return e===e?e:0}function mt(e){if("string"==typeof e)return e;var t=e+"";return"0"==t&&1/e==-Qa.INFINITY?"-0":t}function ht(e){if("string"==typeof e)return e;if(Q(e))return _t(e,ht)+"";var t=e+"";return"0"==t&&1/e==-Qa.INFINITY?"-0":t}function vt(e){return null==e?"":ht(e)}function yt(e){var t=gt(e),a=t%1;return t===t?a?t-a:t:0}function _t(e,t){for(var a=-1,n=null==e?0:e.length,r=Array(n);n>++a;)r[a]=t(e[a],a,e);return r}function bt(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}function St(e,t,a,n){for(var r=-1,s=Math.max(Math.ceil((t-e)/(a||1)),0),i=Array(s);s--;)i[n?s:++r]=e,e+=a;return i}function Ot(e,t,a){return a&&"number"!=typeof a&&(a=void 0),e=gt(e),void 0===t?(t=e,e=0):t=gt(t),a=void 0===a?t>e?1:-1:gt(a),St(e,t,a,!1)}function Tt(e){var t=[];return Qa.reLeadingDot.test(e)&&t.push(""),e.replace(Qa.rePropName,function(e,a,n,r){t.push(n?r.replace(Qa.reEscapeChar,"$1"):a||e)}),t}function Ct(e,t,a){t=h(t,e);for(var n=-1,r=t.length,s=!1;r>++n;){var i=mt(t[n]);if(!(s=null!=e&&a(e,i)))break;e=e[i]}return s||++n!=r?s:(r=null==e?0:e.length,!!r&&Z(r)&&Q(e))}function wt(e,t){return null!=e&&en.call(e,t)}function kt(e,t){return null!=e&&Ct(e,t,wt)}function At(e,t){return null!=e&&t in Object(e)}function xt(e,t){return null!=e&&Ct(e,t,At)}function Rt(e,t){return pa(e||[],t||[],N)}function jt(e,t,a){var n=null==e?0:e.length;if(!n)return-1;var r=null==a?0:yt(a);return 0>r&&(r=Math.max(n+r,0)),Gt(e,t,r)}function Et(e,t,a){var n=null==e?void 0:aa(e,t);return void 0===n?a:n}function $t(e,t,a){var n=null==e?0:e.length;if(!n)return-1;var r=null==a?0:yt(a);return 0>r&&(r=Math.max(n+r,0)),Ta(e,Ia(t,3),r)}function It(e,t,a){var n=Object(e);if(!tt(e)){var r=Ia(t,3);e=M(e),t=function(e){return r(n[e],e,n)}}var s=$t(e,t,a);return s>-1?n[r?e[s]:s]:void 0}function Pt(e){return nt(e)?ja(mt(e)):Ea(e)}function Dt(e,t){var a=[];if(!e||!e.length)return a;var n=-1,r=[],s=e.length;for(t=Ia(t,3);s>++n;){var i=e[n];t(i,n,e)&&(a.push(i),r.push(n))}return Pa(e,r),a}function Nt(e,t){return e&&e.length&&t&&t.length?Va(e,t):e}function Mt(e,t){var a=Q(e)?K:dn;return a(e,Ia(t,3))}function Lt(e,t,a){var n=Q(e)?ua:Ua;return a&&s(e,t,a)&&(t=void 0),n(e,Ia(t,3))}function Vt(e,t){var a=Q(e)?_t:Fa;return a(e,Ia(t,3))}function Ut(e,t,a){var n=Q(e)?da:Ba;return a&&s(e,t,a)&&(t=void 0),n(e,Ia(t,3))}function Ft(e){return e&&e.length?p(e):[]}function Bt(e,t){var a=Q(e)?ma:qa;return a(e,Ia(t,3))}function Ht(e,t){return function(a){return null==a?!1:a[e]===t&&(void 0!==t||e in Object(a))}}function Kt(e,t){return nt(e)&&lt(t)?Ht(mt(e),t):function(a){var n=Et(a,e);return void 0===n&&n===t?xt(a,e):wa(t,n,Qa.COMPARE_PARTIAL_FLAG|Qa.COMPARE_UNORDERED_FLAG)}}function qt(e,t){return zt(e,t,function(t,a){return xt(e,a)})}function zt(e,t,a){for(var n=-1,r=t.length,s={};r>++n;){var i=t[n],o=aa(e,i);a(o,i)&&Wt(s,h(i,e),o)}return s}function Wt(e,t,a,n){if(!W(e))return e;t=h(t,e);for(var r=-1,s=t.length,i=s-1,o=e;null!=o&&s>++r;){var p=mt(t[r]),l=a;if(r!=i){var c=o[p];l=n?n(c,p,o):void 0,void 0===l&&(l=W(c)?c:et(t[r+1])?[]:{})}N(o,p,l),o=o[p]}return e}function Gt(e,t,a){return t===t?Oa(e,t,a):Ta(e,ft,a)}function Jt(e,t,a,n){for(var r=a-1,s=e.length;s>++r;)if(n(e[r],t))return r;return-1}function Qt(e,t){for(var a=-1,n=Array(e);e>++a;)n[a]=t(a);return n}function Xt(e){if(!rt(e))return rn(e);var t=[];for(var a in Object(e))en.call(e,a)&&"constructor"!=a&&t.push(a);return t}function Yt(e){var t=[];if(null!=e)for(var a in Object(e))t.push(a);return t}function Zt(e){if(!W(e))return Yt(e);var t=rt(e),a=[];for(var n in e)("constructor"!=n||!t&&en.call(e,n))&&a.push(n);return a}function ea(e,t){var a=Q(e),n=!a&&un(e),r=!a&&!n&&Xa(e),s=!a&&!n&&!r&&it(e),i=a||n||r||s,o=i?Qt(e.length,String):[],p=o.length;for(var l in e)!t&&!en.call(e,l)||i&&("length"==l||r&&("offset"==l||"parent"==l)||s&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||et(l,p))||o.push(l);return o}function ta(e,t,a){var n=-1,r=e.length;0>t&&(t=-t>r?0:r+t),a=a>r?r:a,0>a&&(a+=r),r=t>a?0:a-t>>>0,t>>>=0;for(var s=Array(r);r>++n;)s[n]=e[n+t];return s}function aa(e,t){t=h(t,e);for(var a=0,n=t.length;null!=e&&n>a;)e=e[mt(t[a++])];return a&&a==n?e:void 0}function na(e,t){return 2>t.length?e:aa(e,ta(t,0,-1))}function ra(e){return null==e?void 0===e?Qa.undefinedTag:Qa.nullTag:Qa.symToStringTag&&Qa.symToStringTag in Object(e)?sa(e):pt(e)}function sa(e){var t=en.call(e,Qa.symToStringTag),a=e[Qa.symToStringTag];try{e[Qa.symToStringTag]=void 0;var n=!0}catch(r){}var s=Ya.call(e);return n&&(t?e[Qa.symToStringTag]=a:delete e[Qa.symToStringTag]),s}function ia(e){return null==e?void 0===e?Qa.undefinedTag:Qa.nullTag:Qa.symToStringTag&&Qa.symToStringTag in Object(e)?sa(e):pt(e)}function oa(e,t,a){"__proto__"==t&&Qa.defineProperty?Qa.defineProperty(e,t,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[t]=a}function pa(e,t,a){for(var n=-1,r=e.length,s=t.length,i={};r>++n;){var o=s>n?t[n]:void 0;a(i,e[n],o)}return i}function la(e,t){for(var a=-1,n=t.length,r=Array(n),s=null==e;n>++a;)r[a]=s?void 0:Et(e,t[a]);return r}function ca(e,t){for(var a=-1,n=t.length,r=e.length;n>++a;)e[r+a]=t[a];return e}function ua(e,t){for(var a=-1,n=null==e?0:e.length;n>++a;)if(!t(e[a],a,e))return!1;return!0}function _t(e,t){for(var a=-1,n=null==e?0:e.length,r=Array(n);n>++a;)r[a]=t(e[a],a,e);return r}function da(e,t){for(var a=-1,n=null==e?0:e.length;n>++a;)if(t(e[a],a,e))return!0;return!1}function fa(e,t){var a=null==e?0:e.length;return!!a&&Gt(e,t,0)>-1}function ga(e,t,a){for(var n=-1,r=null==e?0:e.length;r>++n;)if(a(t,e[n]))return!0;return!1}function ma(e,t){for(var a=-1,n=null==e?0:e.length,r=0,s=[];n>++a;){var i=e[a];t(i,a,e)&&(s[r++]=i)}return s}function ha(e,t,a,n,r,s){var i=a&Qa.COMPARE_PARTIAL_FLAG,o=e.length,p=t.length;if(o!=p&&!(i&&p>o))return!1;var l=s.get(e);if(l&&s.get(t))return l==t;var c=-1,u=!0,d=a&Qa.COMPARE_UNORDERED_FLAG?new Qa.SetCache:void 0;for(s.set(e,t),s.set(t,e);o>++c;){var f=e[c],g=t[c];if(n)var m=i?n(g,f,c,t,e,s):n(f,g,c,e,t,s);if(void 0!==m){if(m)continue;u=!1;break}if(d){if(!da(t,function(e,t){return _a(d,t)||f!==e&&!r(f,e,a,n,s)?void 0:d.push(t)})){u=!1;break}}else if(f!==g&&!r(f,g,a,n,s)){u=!1;break}}return s["delete"](e),s["delete"](t),u}function va(e,t,a,n,r,s,i){switch(a){case Qa.dataViewTag:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Qa.arrayBufferTag:return e.byteLength==t.byteLength&&s(new Qa.Uint8Array(e),new Qa.Uint8Array(t))?!0:!1;case Qa.boolTag:case Qa.dateTag:case Qa.numberTag:return ut(+e,+t);case Qa.errorTag:return e.name==t.name&&e.message==t.message;case Qa.regexpTag:case Qa.stringTag:return e==t+"";case Qa.mapTag:var o=k;case Qa.setTag:var p=n&Qa.COMPARE_PARTIAL_FLAG;if(o||(o=Qa.setToArray),e.size!=t.size&&!p)return!1;var l=i.get(e);if(l)return l==t;n|=Qa.COMPARE_UNORDERED_FLAG,i.set(e,t);var c=ha(o(e),o(t),n,r,s,i);return i["delete"](e),c;case Qa.symbolTag:if(Qa.symbolValueOf)return Qa.symbolValueOf.call(e)==Qa.symbolValueOf.call(t)}return!1}function ya(e,t,a,n,r,s){var i=a&Qa.COMPARE_PARTIAL_FLAG,o=V(e),p=o.length,l=V(t),c=l.length;if(p!=c&&!i)return!1;for(var u=p;u--;){var d=o[u];if(!(i?d in t:en.call(t,d)))return!1}var f=s.get(e);if(f&&s.get(t))return f==t;var g=!0;s.set(e,t),s.set(t,e);for(var m=i;p>++u;){d=o[u];var h=e[d],v=t[d];if(n)var y=i?n(v,h,d,t,e,s):n(h,v,d,e,t,s);if(!(void 0===y?h===v||r(h,v,a,n,s):y)){g=!1;break}m||(m="constructor"==d)}if(g&&!m){var _=e.constructor,b=t.constructor;_!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof _&&_ instanceof _&&"function"==typeof b&&b instanceof b)&&(g=!1)}return s["delete"](e),s["delete"](t),g}function _a(e,t){return e.has(t)}function ba(e,t){if(e!==t){var a=void 0!==e,n=null===e,r=e===e,s=st(e),i=void 0!==t,o=null===t,p=t===t,l=st(t);if(!o&&!l&&!s&&e>t||s&&i&&p&&!o&&!l||n&&i&&p||!a&&p||!r)return 1;if(!n&&!s&&!l&&t>e||l&&a&&r&&!n&&!s||o&&a&&r||!i&&r||!p)return-1}return 0}function Sa(e,t,a){for(var n=-1,r=e.criteria,s=t.criteria,i=r.length,o=a.length;i>++n;){var p=ba(r[n],s[n]);if(p){if(n>=o)return p;var l=a[n];return p*("desc"==l?-1:1)}}return e.index-t.index}function Oa(e,t,a){for(var n=a-1,r=e.length;r>++n;)if(e[n]===t)return n;return-1}function Ta(e,t,a,n){for(var r=e.length,s=a+(n?1:-1);n?s--:r>++s;)if(t(e[s],s,e))return s;return-1}function Ca(e,t,a,n,r,s){var i=Q(e),o=Q(t),p=i?Qa.arrayTag:ia(e),l=o?Qa.arrayTag:ia(t);p=p==Qa.argsTag?Qa.objectTag:p,l=l==Qa.argsTag?Qa.objectTag:l;var c=p==Qa.objectTag,u=l==Qa.objectTag,d=p==l;if(d&&Xa(e)){if(!Xa(t))return!1;i=!0,c=!1}if(d&&!c)return s||(s=new Qa.Stack),i||it(e)?ha(e,t,a,n,r,s):va(e,t,p,a,n,r,s);if(!(a&Qa.COMPARE_PARTIAL_FLAG)){var f=c&&en.call(e,"__wrapped__"),g=u&&en.call(t,"__wrapped__");if(f||g){var m=f?e.value():e,h=g?t.value():t;return s||(s=new Qa.Stack),r(m,h,a,n,s)}}return d?(s||(s=new Qa.Stack),ya(e,t,a,n,r,s)):!1}function wa(e,t,a,n,r){return e===t?!0:null==e||null==t||!G(e)&&!G(t)?e!==e&&t!==t:Ca(e,t,a,n,wa,r)}function ka(e,t,a,n){var r=a.length,s=r,i=!n;if(null==e)return!s;for(e=Object(e);r--;){var o=a[r];if(i&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;s>++r;){o=a[r];var p=o[0],l=e[p],c=o[1];if(i&&o[2]){if(void 0===l&&!(p in e))return!1}else{var u=new Qa.Stack;if(n)var d=n(l,c,p,e,t,u);if(!(void 0===d?wa(c,l,Qa.COMPARE_PARTIAL_FLAG|Qa.COMPARE_UNORDERED_FLAG,n,u):d))return!1}}return!0}function ft(e){return e!==e}function Aa(e){return G(e)&&ra(e)==Qa.argsTag}function xa(e){for(var t=M(e),a=t.length;a--;){var n=t[a],r=e[n];t[a]=[n,r,lt(r)]}return t}function Ra(e){var t=xa(e);return 1==t.length&&t[0][2]?Ht(t[0][0],t[0][1]):function(a){return a===e||ka(a,e,t)}}function ja(e){return function(t){return null==t?void 0:t[e]}}function Ea(e){return function(t){return aa(t,e)}}function $a(e){return"function"==typeof e?e:null==e?r:"object"==typeof e?Q(e)?Kt(e[0],e[1]):Ra(e):Pt(e)}function Ia(){var e=$a;return arguments.length?e(arguments[0],arguments[1]):e}function Pa(e,t){for(var a=e?t.length:0,n=a-1;a--;){var r=t[a];if(a==n||r!==s){var s=r;et(r)?Qa.splice.call(e,r,1):m(e,r)}}return e}function Da(e){return function(t){return e(t)}}function Na(e,t,a,n){for(var r=-1,s=Object(e),i=a(e),o=i.length;o--;){var p=i[n?o:++r];if(t(s[p],p,s)===!1)break}return e}function Ma(e,t){return e&&Na(e,t,M)}function La(e,t){return function(a,n){if(null==a)return a;if(!tt(a))return e(a,n);for(var r=a.length,s=t?r:-1,i=Object(a);(t?s--:r>++s)&&n(i[s],s,i)!==!1;);return a}}function Va(e,t,a,n){var r=n?Jt:Gt,s=-1,i=t.length,o=e;for(e===t&&(t=b(t)),a&&(o=_t(e,Da(a)));i>++s;)for(var p=0,l=t[s],c=a?a(l):l;(p=r(o,c,p,n))>-1;)o!==e&&Qa.splice.call(o,p,1),Qa.splice.call(e,p,1);return e}function Ua(e,t){var a=!0;return dn(e,function(e,n,r){return a=!!t(e,n,r)}),a}function Fa(e,t){var a=-1,n=tt(e)?Array(e.length):[];return dn(e,function(e,r,s){n[++a]=t(e,r,s)}),n}function Ba(e,t){var a;return dn(e,function(e,n,r){return a=t(e,n,r),!a}),!!a}function Ha(e,t){var a=e.length;for(e.sort(t);a--;)e[a]=e[a].value;return e}function Ka(e,t,a){var n=-1;t=_t(t.length?t:[r],Da(Ia()));var s=Fa(e,function(e){var a=_t(t,function(t){return t(e)});return{criteria:a,index:++n,value:e}});return Ha(s,function(e,t){return Sa(e,t,a)})}function qa(e,t){var a=[];return dn(e,function(e,n,r){t(e,n,r)&&a.push(e)}),a}function za(e,t,a){(void 0!==a&&!ut(e[t],a)||void 0===a&&!(t in e))&&oa(e,t,a)}function Wa(e,t,a,n,r,s,i){var o=e[a],p=t[a],c=i.get(p);if(c)return za(e,a,c),void 0;var u=s?s(o,p,a+"",e,t,i):void 0,d=void 0===u;if(d){var f=Q(p),g=!f&&Xa(p),m=!f&&!g&&it(p);u=p,f||g||m?Q(o)?u=o:l(o)?u=b(o):g?(d=!1,u=O(p,!0)):m?(d=!1,u=w(p,!0)):u=[]:y(p)||un(p)?(u=o,un(o)?u=ct(o):(!W(o)||n&&J(o))&&(u=T(p))):d=!1}d&&(i.set(p,u),r(u,p,n,s,i),i["delete"](p)),za(e,a,u)}function Ga(e,t,a,n,r){e!==t&&Na(t,function(s,i){if(W(s))r||(r=new Qa.Stack),Wa(e,t,i,a,Ga,n,r);else{var o=n?n(e[i],s,i+"",e,t,r):void 0;void 0===o&&(o=s),za(e,i,o)}},L)}function Ja(e){return i(function(t,a){var n=-1,r=a.length,i=r>1?a[r-1]:void 0,o=r>2?a[2]:void 0;for(i=e.length>3&&"function"==typeof i?(r--,i):void 0,o&&s(a[0],a[1],o)&&(i=3>r?void 0:i,r=1),t=Object(t);r>++n;){var p=a[n];p&&e(t,p,n,i)}return t})}if(!window._){var Qa={MAX_INTEGER:1.7976931348623157e308,MAX_SAFE_INTEGER:9007199254740991,INFINITY:1/0,reIsDeepProp:/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp:/^\w*$/,reLeadingDot:/^\./,rePropName:/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar:/\\(\\)?/g,reIsUint:/^(?:0|[1-9]\d*)$/,reFlags:/\w*$/,spreadableSymbol:window.Symbol?Symbol.isConcatSpreadable:void 0,symToStringTag:window.Symbol?Symbol.toStringTag:void 0,nativeIsBuffer:window.Buffer?Buffer.isBuffer:void 0,Uint8Array:window.Uint8Array,Map:window.Map?window.Map:void 0,Set:window.Set?window.Set:void 0,nativeCreate:window.Object?Object.create?Object.create:void 0:void 0,nativeGetSymbols:Object.getOwnPropertySymbols,arrayProto:Array.prototype,splice:Array.prototype.splice,funcProto:Function.prototype,objectProto:Object.prototype,objectCreate:Object.create,symbolProto:window.Symbol?Symbol.prototype:void 0,symbolValueOf:window.Symbol&&Symbol.prototype?Symbol.prototype.valueOf:void 0,symbolToString:window.Symbol&&Symbol.prototype?Symbol.prototype.toString:void 0,HASH_UNDEFINED:"__lodash_hash_undefined__",COMPARE_PARTIAL_FLAG:1,COMPARE_UNORDERED_FLAG:2,LARGE_ARRAY_SIZE:200,HOT_COUNT:800,HOT_SPAN:16,CLONE_DEEP_FLAG:1,CLONE_FLAT_FLAG:2,CLONE_SYMBOLS_FLAG:4,argsTag:"[object Arguments]",arrayTag:"[object Array]",asyncTag:"[object AsyncFunction]",boolTag:"[object Boolean]",dateTag:"[object Date]",domExcTag:"[object DOMException]",errorTag:"[object Error]",funcTag:"[object Function]",genTag:"[object GeneratorFunction]",mapTag:"[object Map]",numberTag:"[object Number]",nullTag:"[object Null]",objectTag:"[object Object]",promiseTag:"[object Promise]",proxyTag:"[object Proxy]",regexpTag:"[object RegExp]",setTag:"[object Set]",stringTag:"[object String]",symbolTag:"[object Symbol]",undefinedTag:"[object Undefined]",weakMapTag:"[object WeakMap]",weakSetTag:"[object WeakSet]",arrayBufferTag:"[object ArrayBuffer]",dataViewTag:"[object DataView]",float32Tag:"[object Float32Array]",float64Tag:"[object Float64Array]",int8Tag:"[object Int8Array]",int16Tag:"[object Int16Array]",int32Tag:"[object Int32Array]",uint8Tag:"[object Uint8Array]",uint8ClampedTag:"[object Uint8ClampedArray]",uint16Tag:"[object Uint16Array]",uint32Tag:"[object Uint32Array]",setToArray:function(e){var t=-1,a=Array(e.size);return e.forEach(function(e){a[++t]=e}),a},apply:function(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)},overArg:function(e,t){return function(a){return e(t(a))}},stubFalse:function(){return!1},stubArray:function(){return[]},constant:function(e){return function(){return e}},defineProperty:function(){try{var e=Object.defineProperty;return e({},"",{}),e}catch(t){}}(),baseCreate:function(){function e(){}return function(t){var a=typeof t;if(null==t||"object"!=a&&"function"!=a)return{};if(Object.create)return Object.create(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),isKeyable:function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},getMapData:function(e,t){var a=e.__data__;return Qa.isKeyable(t)?a["string"==typeof t?"string":"hash"]:a.map},typedArrayTags:{},cloneableTags:{}},Xa=Qa.nativeIsBuffer||Qa.stubFalse,Ya=Qa.objectProto.toString,Za=Qa.objectProto.propertyIsEnumerable,en=Qa.objectProto.hasOwnProperty,tn=Qa.nativeIsBuffer?Buffer.allocUnsafe:void 0,an=Qa.funcProto.toString,nn=Qa.funcProto.toString.call(Object);Qa.typedArrayTags[Qa.float32Tag]=Qa.typedArrayTags[Qa.float64Tag]=Qa.typedArrayTags[Qa.int8Tag]=Qa.typedArrayTags[Qa.int16Tag]=Qa.typedArrayTags[Qa.int32Tag]=Qa.typedArrayTags[Qa.uint8Tag]=Qa.typedArrayTags[Qa.uint8ClampedTag]=Qa.typedArrayTags[Qa.uint16Tag]=Qa.typedArrayTags[Qa.uint32Tag]=!0,Qa.typedArrayTags[Qa.argsTag]=Qa.typedArrayTags[Qa.arrayTag]=Qa.typedArrayTags[Qa.arrayBufferTag]=Qa.typedArrayTags[Qa.boolTag]=Qa.typedArrayTags[Qa.dataViewTag]=Qa.typedArrayTags[Qa.dateTag]=Qa.typedArrayTags[Qa.errorTag]=Qa.typedArrayTags[Qa.funcTag]=Qa.typedArrayTags[Qa.mapTag]=Qa.typedArrayTags[Qa.numberTag]=Qa.typedArrayTags[Qa.objectTag]=Qa.typedArrayTags[Qa.regexpTag]=Qa.typedArrayTags[Qa.setTag]=Qa.typedArrayTags[Qa.stringTag]=Qa.typedArrayTags[Qa.weakMapTag]=!1,Qa.cloneableTags[Qa.argsTag]=Qa.cloneableTags[Qa.arrayTag]=Qa.cloneableTags[Qa.arrayBufferTag]=Qa.cloneableTags[Qa.dataViewTag]=Qa.cloneableTags[Qa.boolTag]=Qa.cloneableTags[Qa.dateTag]=Qa.cloneableTags[Qa.float32Tag]=Qa.cloneableTags[Qa.float64Tag]=Qa.cloneableTags[Qa.int8Tag]=Qa.cloneableTags[Qa.int16Tag]=Qa.cloneableTags[Qa.int32Tag]=Qa.cloneableTags[Qa.mapTag]=Qa.cloneableTags[Qa.numberTag]=Qa.cloneableTags[Qa.objectTag]=Qa.cloneableTags[Qa.regexpTag]=Qa.cloneableTags[Qa.setTag]=Qa.cloneableTags[Qa.stringTag]=Qa.cloneableTags[Qa.symbolTag]=Qa.cloneableTags[Qa.uint8Tag]=Qa.cloneableTags[Qa.uint8ClampedTag]=Qa.cloneableTags[Qa.uint16Tag]=Qa.cloneableTags[Qa.uint32Tag]=!0,Qa.cloneableTags[Qa.errorTag]=Qa.cloneableTags[Qa.funcTag]=Qa.cloneableTags[Qa.weakMapTag]=!1,Qa.baseSetToString=Qa.defineProperty?function(e,t){return Qa.defineProperty(e,"toString",{configurable:!0,enumerable:!1,value:Qa.constant(t),writable:!0})}:function(e){return e},Qa.shortOut=function(e){var t=0,a=0;return function(){var n=Date.now(),r=Qa.HOT_SPAN-(n-a);if(a=n,r>0){if(++t>=Qa.HOT_COUNT)return arguments[0]}else t=0;return e.apply(void 0,arguments)}},Qa.overRest=function(e,t,a){return t=Math.max(void 0===t?e.length-1:t,0),function(){for(var n=arguments,r=-1,s=Math.max(n.length-t,0),i=Array(s);s>++r;)i[r]=n[t+r];r=-1;for(var o=Array(t+1);t>++r;)o[r]=n[r];return o[t]=a(i),Qa.apply(e,this,o)}},Qa.Hash=function(e){var t=-1,a=null==e?0:e.length;for(this.clear();a>++t;){var n=e[t];this.set(n[0],n[1])}},Qa.Hash.prototype.clear=function(){this.__data__=Qa.nativeCreate?Qa.nativeCreate(null):{},this.size=0},Qa.Hash.prototype["delete"]=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Qa.Hash.prototype.get=function(e){var t=this.__data__;if(Qa.nativeCreate){var a=t[e];return a===Qa.HASH_UNDEFINED?void 0:a}return en.call(t,e)?t[e]:void 0},Qa.Hash.prototype.has=function(e){var t=this.__data__;return Qa.nativeCreate?void 0!==t[e]:en.call(t,e)},Qa.Hash.prototype.set=function(e,t){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=Qa.nativeCreate&&void 0===t?Qa.HASH_UNDEFINED:t,this},Qa.ListCache=function(e){var t=-1,a=null==e?0:e.length;for(this.clear();a>++t;){var n=e[t];this.set(n[0],n[1])}},Qa.ListCache.prototype.clear=function(){this.__data__=[],this.size=0},Qa.ListCache.prototype["delete"]=function(e){var t=this.__data__,a=dt(t,e);if(0>a)return!1;var n=t.length-1;return a==n?t.pop():Qa.splice.call(t,a,1),--this.size,!0},Qa.ListCache.prototype.get=function(e){var t=this.__data__,a=dt(t,e);return 0>a?void 0:t[a][1]},Qa.ListCache.prototype.has=function(e){return dt(this.__data__,e)>-1},Qa.ListCache.prototype.set=function(e,t){var a=this.__data__,n=dt(a,e);return 0>n?(++this.size,a.push([e,t])):a[n][1]=t,this},Qa.Stack=function(e){var t=this.__data__=new Qa.ListCache(e);this.size=t.size},Qa.Stack.prototype.clear=function(){this.__data__=new Qa.ListCache,this.size=0},Qa.Stack.prototype["delete"]=function(e){var t=this.__data__,a=t["delete"](e);return this.size=t.size,a},Qa.Stack.prototype.get=function(e){return this.__data__.get(e)},Qa.Stack.prototype.has=function(e){return this.__data__.has(e)},Qa.Stack.prototype.set=function(e,t){var a=this.__data__;if(a instanceof Qa.ListCache){var n=a.__data__;if(!Qa.Map||Qa.LARGE_ARRAY_SIZE-1>n.length)return n.push([e,t]),this.size=++a.size,this;a=this.__data__=new Qa.MapCache(n)}return a.set(e,t),this.size=a.size,this},Qa.MapCache=function(e){var t=-1,a=null==e?0:e.length;for(this.clear();a>++t;){var n=e[t];this.set(n[0],n[1])}},Qa.MapCache.prototype.clear=function(){this.size=0,this.__data__={hash:new Qa.Hash,map:new(Qa.Map||Qa.ListCache),string:new Qa.Hash}},Qa.MapCache.prototype["delete"]=function(e){var t=Qa.getMapData(this,e)["delete"](e);return this.size-=t?1:0,t},Qa.MapCache.prototype.get=function(e){return Qa.getMapData(this,e).get(e)},Qa.MapCache.prototype.has=function(e){return Qa.getMapData(this,e).has(e)},Qa.MapCache.prototype.set=function(e,t){var a=Qa.getMapData(this,e),n=a.size;return a.set(e,t),this.size+=a.size==n?0:1,this},Qa.SetCache=function(e){var t=-1,a=null==e?0:e.length;for(this.__data__=new Qa.MapCache;a>++t;)this.add(e[t])},Qa.SetCache.prototype.add=Qa.SetCache.prototype.push=function(e){return this.__data__.set(e,Qa.HASH_UNDEFINED),this},Qa.SetCache.prototype.has=function(e){return this.__data__.has(e)},Qa.createSet=Qa.Set&&1/Qa.setToArray(new Qa.Set([,0]))[1]==Qa.INFINITY?function(e){return new Qa.Set(e)}:function(){},Qa.getSymbols=Qa.nativeGetSymbols?function(e){return null==e?[]:(e=Object(e),ma(Qa.nativeGetSymbols(e),function(t){return Za.call(e,t)}))}:Qa.stubArray,Qa.setToString=Qa.shortOut(Qa.baseSetToString);var rn=Qa.overArg(Object.keys,Object),sn=Qa.overArg(Object.getPrototypeOf,Object),on=o(function(e,t){S(t,L(t),e)}),pn=i(function(e){return p(c(e,1,l,!0))}),ln=Qa.nativeGetSymbols?function(e){for(var t=[];e;)ca(t,Qa.getSymbols(e)),e=sn(e);return t}:Qa.stubArray,cn=v(function(e,t){var a={};if(null==e)return a;var n=!1;t=_t(t,function(t){return t=h(t,e),n||(n=t.length>1),t}),S(e,g(e),a),n&&(a=q(a,CLONE_DEEP_FLAG|CLONE_FLAT_FLAG|CLONE_SYMBOLS_FLAG,_));for(var r=t.length;r--;)m(a,t[r]);return a}),un=Aa(function(){return arguments}())?Aa:function(e){return G(e)&&en.call(e,"callee")&&!Za.call(e,"callee")},dn=La(Ma),fn={at:void 0,each:Mt,every:Lt,extend:on,filter:Bt,find:It,findIndex:$t,get:Et,getAllKeys:V,has:kt,hasIn:xt,indexOf:jt,isArray:Q,isArrayLike:tt,isArrayLikeObject:l,isBoolean:X,isEmpty:at,isFunction:J,isIndex:et,isKey:nt,isLength:Z,isNumber:Y,isObject:W,isObjectLike:G,isPlainObject:y,isPrototype:rt,isString:z,isSymbol:st,isTypedArray:it,keys:M,keysIn:L,last:bt,map:Vt,max:n,merge:void 0,omit:cn,pick:void 0,property:Pt,pull:void 0,pullAt:void 0,pullAll:Nt,range:Ot,remove:Dt,some:Ut,sortBy:void 0,union:pn,uniq:Ft,zipObject:Rt};fn.at=v(la),fn.pull=i(Nt),fn.pullAt=v(function(e,t){var a=null==e?0:e.length,n=la(e,t);return Pa(e,_t(t,function(e){return et(e,a)?+e:e}).sort(ba)),n}),fn.sortBy=i(function(e,t){if(null==e)return[];var a=t.length;return a>1&&s(e,t[0],t[1])?t=[]:a>2&&s(t[0],t[1],t[2])&&(t=[t[0]]),Ka(e,c(t,1),[])}),fn.merge=Ja(function(e,t,a){Ga(e,t,a)}),fn.pick=v(function(e,t){return null==e?{}:qt(e,t)}),fn.forEach=fn.each,window._||(window._=fn)}}(),function(){function _initWindowOnHashChange(){"onhashchange"in window&&(isSpaHashRouteOn=!0,window.onhashchange=function(){var e=window.location.hash;e?spa.route(e):spa.routesOptions.defaultPageRoute&&spa.route(spa.routesOptions.defaultPageRoute)})}function _stopWindowOnHashChange(){window.onhashchange=void 0}function getMatchStr(e){switch(e){case"{":return"}";case"[":return"]";case"<":return">";default:return e}}function of(e){return Object.prototype.toString.call(e).replace(/\[object /,"").replace(/\]/,"").toLowerCase()}function is(e,t){return(""+t).toLowerCase().indexOf(of(e))>=0}function _isObjHasKeys(e,t,a){function n(e,t){for(var n,r=t.split(","),s="",i=0,o=!0,p=0;r.length>p;p++)s=r[p].trim(),s&&(i++,n=a&&(s.indexOf(".")>0||s.indexOf("[")>0)?spa.hasKey(e,s):e.hasOwnProperty(s),o=o&&n);return i&&o}function r(e,t){for(var n,r=t.split(","),s="",i=0,o=!1,p=0;r.length>p&&(s=r[p].trim(),s&&(i++,n=a&&(s.indexOf(".")>0||s.indexOf("[")>0)?spa.hasKey(e,s):e.hasOwnProperty(s),o=o||n),!o);p++);return i&&o}var s=!1;if(is(e,"object")&&t)switch(t=""+t,!0){case t.indexOf("&")>0:s=n(e,t.replace(/\&/g,","));break;case t.indexOf("|")>0:s=r(e,t.replace(/\|/g,","));break;default:s=n(e,t)}return s}function adjustComponentOptions(e,t){var a="_rtt_"+e,n="";if(t&&_.isObject(t)&&spa.hasPrimaryKeys(t,"template|templateStr|templateString|templateUrl")){if(t.hasOwnProperty("template")){var r=t.template.trim(),s=r.beginsWithStr("#")&&!r.containsStr(" ");s||(t.templateStr=t.template)}spa.hasPrimaryKeys(t,"templateStr|templateString")?(n=t.templateStr||t.templateString||"",spa.updateTemplateScript(a,n),t.template="#"+a):spa.hasPrimaryKeys(t,"templateUrl")&&(t.template=t.templateUrl)}return t&&_.isObject(t)&&!spa.hasPrimaryKeys(t,"data|dataUrl")&&spa.hasPrimaryKeys(spa.api.urls,"$"+e)&&(t.dataUrl="@$"+e),t}function _$renderCountUpdate(e){app[e]&&(app[e].__renderCount__=spa.toInt(spa.$renderCount(e))+1)}function __renderView(e,t){var a,n=spa.setElIdIfNot(e);return a=t&&!$.isEmptyObject(t)?spa.render("#"+n,t):spa.render("#"+n)}function init_i18n_Lang(){function e(e,t){e&&($("html").attr("lang",e.replace("_","-")),spa.i18n.setLanguage(e,_.merge({path:"app/language/",ext:".txt",cache:!0,async:!0},spa.findSafe(window,"app.conf.lang",{}),spa.findSafe(window,"app.lang",{}),t||{})))
}$(document).on("click","[data-i18n-lang]",function(){var t=$(this).data(),a=(t.i18nLang||"").replace("-","_"),n=($("body").attr("i18n-lang-key-prefix")||"lang.name.")+a;e(a,{callback:function(){$(".lang-text").attr("data-i18n",n).data("i18n",n),$(".lang-icon").removeClass(Array.prototype.join.call($("[data-i18n-lang]").map(function(e,t){return $(t).data("i18nLang")})," ")).addClass(a),spa.i18n.apply(".lang-text")}})});var t=$("body").attr("i18n-lang");t&&(e(t),setTimeout(function(){spa.i18n.displayLang()},500))}function _ajaxSetReqHeaders(e,t){var a=spa.findSafe(window,"app.api.reqHeaders");if(is(a,"function")&&(a=a(e,t)),is(a,"object"))_.forEach(Object.keys(a),function(t){e.setRequestHeader(t,a[t])});else if(is(a,"string")){var n=spa.findSafe(window,"app.api.liveApiPrefix","");n&&t.url.beginsWithStr(n)?(t.data=t.data||"",t.data+=(spa.isBlank(t.data)?"":"&")+a):e.setRequestHeader("reqHeadersInLiveUrl",a)}}function _ajaxPrefilter(e,t,a){e.url.beginsWithStr(spa.api.urlKeyIndicator)&&(e.url=spa.api.url(e.url.trimLeftStr(spa.api.urlKeyIndicator),e.data));var n=e.url,r=spa.findSafe(window,"app.api.reqHeaders");r&&(e.beforeSend=function(t){_ajaxSetReqHeaders(t,e)}),"script"==e.dataType||e.hasOwnProperty("error")||(e.error=spa.api.onReqError);var s=spa.findSafe(window,"app.api.liveApiPrefix","");if(spa.api.mock||n.beginsWithStr("!"))if(n.beginsWithStr("~"))e.url=(spa.api.baseUrl||"")+n.trimLeftStr("~")+(spa.api.liveUrlSuffix||""),spa.api.baseUrl&&(e.crossDomain=!0);else{var i=("/"+e.type.toUpperCase()).replace("/GET","");e.type="GET",n=n.trimLeftStr("!"),s&&n.beginsWithStr(s)&&(n.containsStr("\\?")||(n=n.trimRightStr("/")+"?"),e.url=n.replace(/[\{\}]/g,"").replace(RegExp(s),"api_/").replace(/\?/,i+"/data.json"),(app.debug||spa.debug)&&console.warn(">>>>>>Intercepting Live API URL: ["+n+"] ==> ["+e.url+"]"))}else(app.debug||spa.debug)&&console.log("actualUrl:"+n+",baseUrl:"+spa.api.baseUrl+",liveApiPrefix:"+s),s&&n.beginsWithStr(s)&&(e.url=(spa.api.baseUrl||"")+n+(spa.api.liveUrlSuffix||""),spa.api.baseUrl&&(e.crossDomain=!0));e.url=e.url.replace(/{([^}])*}/g,""),spa.ajaxPreProcess&&spa.ajaxPreProcess(e,t,a),(app.debug||spa.debug)&&console.log("ajax Options",e)}var win=this,spa=function(e){return e instanceof spa?e:this instanceof spa?void 0:new spa(e)};win.isSpaHashRouteOn=!1,win.spa=spa,spa.VERSION="2.34.0";var _$=document.querySelector.bind(document),_$$=document.querySelectorAll.bind(document);win._$||(win._$=_$),win._$$||(win._$$=_$$);var isById=document.getElementById,isByName=document.all;spa.isIE=isByName?!0:!1,spa.isNonIE=isById&&!isByName?!0:!1,spa.noop=function(){},spa.debug=!1,spa["debugger"]={on:function(){spa.debug=!0},off:function(){spa.debug=!1},toggle:function(){spa.debug=!spa.debug}},spa.cOut=function(e,t){spa.debug&&console[e]&&console[e](1===t.length?t[0]:t)},spa.console={clear:function(){console.clear()},assert:function(){spa.cOut("assert",arguments)},count:function(){spa.cOut("count",arguments)},debug:function(){spa.cOut("debug",arguments)},dir:function(){spa.cOut("dir",arguments)},dirxml:function(){spa.cOut("dirxml",arguments)},error:function(){spa.cOut("error",arguments)},exception:function(){spa.cOut("exception",arguments)},group:function(){spa.cOut("group",arguments)},groupCollapsed:function(){spa.cOut("groupCollapsed",arguments)},groupEnd:function(){spa.cOut("groupEnd",arguments)},info:function(){spa.cOut("info",arguments)},log:function(){spa.cOut("log",arguments)},markTimeline:function(){spa.cOut("markTimeline",arguments)},profile:function(){spa.cOut("profile",arguments)},profileEnd:function(){spa.cOut("profileEnd",arguments)},table:function(){spa.cOut("table",arguments)},time:function(){spa.cOut("time",arguments)},timeEnd:function(){spa.cOut("timeEnd",arguments)},timeStamp:function(){spa.cOut("timeStamp",arguments)},trace:function(){spa.cOut("trace",arguments)},warn:function(){spa.cOut("warn",arguments)}},spa.onUrlHashChange,Date.prototype.yyyymmdd=function(e){var t=this.getMonth()+1,a=this.getDate();return[this.getFullYear(),(t>9?"":"0")+t,(a>9?"":"0")+a].join(e||"")},Date.prototype.hhmmss=function(e){var t=this.getHours(),a=this.getMinutes(),n=this.getSeconds();return[(t>9?"":"0")+t,(a>9?"":"0")+a,(n>9?"":"0")+n].join(e||"")},String.prototype.trimLeftStr=function(e){return(""+this).replace(RegExp("^["+(e||"\\s")+"]+","g"),"")},String.prototype.trimRightStr=function(e){return(""+this).replace(RegExp("["+(e||"\\s")+"]+$","g"),"")},String.prototype.trimStr=function(e){return(""+this).trimLeftStr(e).trimRightStr(e)},String.prototype.getLeftStr=function(e){return"string"==typeof e&&(e=(""+this).indexOf(e)),e?(""+this).substr(0,e):""},String.prototype.getRightStr=function(e){var t=1;return"string"==typeof e&&(t=e.length,e=(""+this).indexOf(e)),0>e?"":(""+this).substr(e+t)},String.prototype.isBlankStr=function(){return""==(""+this).trimStr()},String.prototype.ifBlankStr=function(e,t){return e=e===void 0?"":e,t=t===void 0?(""+this).trimStr():t,(""+this).isBlankStr()?e:t},String.prototype.isNumberStr=function(){return 0==(""+this).replace(/[0-9.]/g,"").trimStr().length},String.prototype.normalizeStr=function(){return(""+this).trimStr().replace(/\s+/g," ")},String.prototype.beginsWithStr=function(e,t){t=t?"i":"";var a=RegExp("^"+e,t);return(""+this).normalizeStr().match(a)?!0:!1},String.prototype.beginsWithStrIgnoreCase=function(e){var t=RegExp("^"+e,"i");return(""+this).normalizeStr().match(t)?!0:!1},String.prototype.endsWithStr=function(e,t){t=t?"i":"";var a=RegExp(e+"$",t);return(""+this).normalizeStr().match(a)?!0:!1},String.prototype.endsWithStrIgnoreCase=function(e){var t=RegExp(e+"$","i");return(""+this).normalizeStr().match(t)?!0:!1},String.prototype.containsStr=function(e,t){t=t?"gi":"g";var a=RegExp(""+e,t);return a.test(""+this)},String.prototype.containsStrIgnoreCase=function(e){var t=RegExp(""+e,"gi");return t.test(""+this)},String.prototype.equals=function(e){return""+this==e},String.prototype.equalsIgnoreCase=function(e){return(""+this).toLowerCase()+""==(e+"").toLowerCase()},String.prototype.toProperCase=function(e){return(e===void 0||e?(""+this).normalizeStr():""+this).toLowerCase().replace(/^(.)|\s(.)/g,function(e){return e.toUpperCase()})},String.prototype.capitalize=function(){return(""+this).charAt(0).toUpperCase()+(""+this).slice(1)},String.prototype.unCapitalize=function(){return(""+this).charAt(0).toLowerCase()+(""+this).slice(1)},String.prototype.splitToArray=String.prototype.toArray=function(e){return spa.isBlank(""+this)?[]:(""+this).split(e)},String.prototype.extractStrBetweenIn=function(e,t){return e||(e=(""+this).match(/[^a-z0-9\:\.\/\\]/i),e=e?e[0]:""),t=t||getMatchStr(e),(""+this).match(RegExp("\\"+e+"([^\\"+e+"\\"+t+"].*?)\\"+t,"g"))||[]},String.prototype.extractStrBetweenEx=function(e,t){e||(e=(""+this).match(/[^a-z0-9\:\.\/\\]/i),e=e?e[0]:""),t=t||getMatchStr(e);var a="\\"+e+"\\"+t,n=RegExp("["+a+"]","g");return((""+this).match(RegExp("\\"+e+"([^"+a+"].*?)\\"+t,"g"))||[]).map(function(e){return e.replace(n,"")})},spa.strToNative=function(e){function t(){var e=s.replace(/[0-9]/g,"");return s.length?e.length?"-"==e||"+"==e||"."==e:!0:!1}function a(){return"true"==s||"false"==s}function n(){return"["==s[0]&&"]"==s[s.length-1]}function r(){return"{"==s[0]&&"}"==s[s.length-1]}var s=e.trim();switch(!0){case t():return 1*s;case a():return"true"==s;case r():return s.toJSON();case n():return("{xArr:"+s+"}").toJSON().xArr;default:return e}},String.prototype.toNative=function(){return spa.strToNative(""+this)},spa.extractStrBetweenIn=function(e,t,a){return(e||"").extractStrBetweenInc(t,a)},spa.extractStrBetweenEx=function(e,t,a){return(e||"").extractStrBetweenExc(t,a)},spa.strToArray=function(e){return"string"==typeof e&&(e=[e]),e},spa.toJSON=function(str,key4PrimaryDataTypes){var thisStr;if(_.isString(str)){if(thisStr=str.trimStr(),!(thisStr.containsStr("{")||thisStr.containsStr(":")||thisStr.containsStr("\\[")||thisStr.containsStr("'")||thisStr.containsStr('"'))){if(thisStr.containsStr(",")||thisStr.containsStr(";"))return thisStr.replace(/ /g,"").replace(/;/g,",").split(",");if(!key4PrimaryDataTypes)return thisStr;thisStr="{"+key4PrimaryDataTypes+":"+thisStr+"}"}thisStr.containsStr(":")&&!thisStr.containsStr(",")&&thisStr.containsStr(";")&&(thisStr=thisStr.replace(/\;/g,",")),thisStr.beginsWithStr("{")||thisStr.beginsWithStr("\\[")?thisStr.beginsWithStr("{")&&!thisStr.containsStr(":")&&thisStr.containsStr("=")&&(thisStr=""+thisStr.replace(/=/g,":")+""):thisStr=thisStr.containsStr(":")?"{"+thisStr+"}":thisStr.containsStr("=")?"{"+thisStr.replace(/=/g,":")+"}":"["+thisStr+"]",!thisStr.beginsWithStr("{")&&key4PrimaryDataTypes&&(thisStr="{"+key4PrimaryDataTypes+":"+thisStr+"}")}return!_.isString(str)&&_.isObject(str)?str:spa.isBlank(str)?null:eval("("+thisStr+")")},String.prototype.toJSON=function(){return spa.toJSON(""+this)},String.prototype.toBoolean=function(){var e=!0;switch((""+this).trimStr().toLowerCase()){case"":case"0":case"-0":case"nan":case"null":case"false":case"undefined":e=!1}return e&&(e=!(""+this).trimStr().beginsWithStr("-")),e},Boolean.prototype.toValue=function(e,t){return e===void 0&&(e=!0),t===void 0&&(t=!1),(""+this).valueOf()?e:t},Boolean.prototype.toHtml=function(e,t){return $((""+this).valueOf()?e:t).html()},String.prototype.padStr=function(e,t,a){e=e||"",t=t||1,a=a||2;for(var n="",r=0;t>r;r++)n+=e;return(-1===a||2===a?n:"")+(""+this)+(1===a||2===a?n:"")},spa.lastSplitResult=[],spa.getOnSplit=spa.pickOnSplit=function(e,t,a){return spa.lastSplitResult=e.split(t),spa.getOnLastSplit(a)},spa.getOnLastSplit=spa.pickOnLastSplit=function(e){return 0>e?_.last(spa.lastSplitResult):spa.lastSplitResult[e]},spa.isBlank=spa.isEmpty=function(e){var t=!0;if(void 0!==e&&null!==e)switch(!0){case _.isString(e):t=0==e.trimStr().length;break;case _.isFunction(e):t=!1;break;case _.isArray(e):case _.isObject(e):t=_.isEmpty(e);break;default:t=0==(""+e).trimStr().length}return t},spa.isNumber=function(e){return 0==(""+e).replace(/[0-9.]/g,"").trimStr().length},spa.toBoolean=function(e){var t=!0;switch((""+e).trimStr().toLowerCase()){case"":case"0":case"-0":case"nan":case"null":case"false":case"undefined":t=!1}return t},spa.toInt=function(e){return e=(""+e).replace(/[^+-0123456789.]/g,""),e=spa.isBlank(e)?"0":e.indexOf(".")>=0?e.substring(0,e.indexOf(".")):e,parseInt(1*e,10)},spa.toFloat=function(e){return e=(""+e).replace(/[^+-0123456789.]/g,""),e=spa.isBlank(e)?"0":e,parseFloat(1*e)},spa.toString=function(e){var t=""+e;return _.isObject(e)&&(t=JSON.stringify(e)),t},spa.toStr=function(e){var t=""+e;return _.isObject(e)&&(t=JSON.stringify(e)),t},spa.dotToX=function(e,t){return e.replace(/\./g,t)},spa.dotToCamelCase=function(e){var t=e.replace(/\./g," ").toProperCase().replace(/ /g,"");return t[0].toLowerCase()+t.substring(1)},spa.dotToTitleCase=function(e){return e.replace(/\./g," ").toProperCase().replace(/ /g,"")},spa.toDottedPath=function(e){return(e||"").replace(/]/g,"").replace(/(\[)|(\\)|(\/)/g,".").replace(/(\.+)/g,".").trimStr("\\.")},spa.ifBlank=spa.ifEmpty=spa.ifNull=function(e,t,a){return t=(""+(t||"")).trimStr(),a=a===void 0?(""+e).trimStr():a,spa.isBlank(e)?t:a},spa.now=function(){return""+(new Date).getTime()},spa.year=function(e){return e=e||0,(new Date).getFullYear()+spa.toInt(e)},spa.range=function(e){var t=e.toUpperCase().split(".."),a=""+t[0],n=""+t[1],r="1";n.indexOf(":")>0&&(n=""+t[1].split(":")[0],r=""+t[1].split(":")[1]),a.indexOf("Y")>=0&&(a=spa.year(a.split(/[^0-9+-]/)[1])),n.indexOf("Y")>=0&&(n=spa.year(n.split(/[^0-9+-]/)[1]));var s=spa.toInt(a),i=spa.toInt(n),o=spa.toInt(r);return a>n?_.range(i,s+1,o).reverse():_.range(s,i+1,o)},spa.checkAndPreventKey=function(e,t){t||(t="");var a=t.indexOf("+shift")>=0,n=""+e.keyCode,r=t.padStr(",").indexOf(n.padStr(","))>=0&&(a?e.shiftKey?!0:!1:e.shiftKey?!1:!0);return r&&e.preventDefault(),r},spa._trackAndControlKey=function(e){var t=e.currentTarget,a=$(t),n=(""+a.data("disableKeys")).toLowerCase();spa.checkAndPreventKey(e,n);var r=!spa.isBlank((""+a.data("focusNext")).replace(/undefined/,"").toLowerCase()),s=!spa.isBlank((""+a.data("focusBack")).replace(/undefined/,"").toLowerCase());r&&spa.checkAndPreventKey(e,"9")&&$(a.data("focusNext")).get(0).focus(),s&&spa.checkAndPreventKey(e,"9,+shift")&&$(a.data("focusBack")).get(0).focus()},spa.initKeyTracking=function(){var e=arguments.length?arguments[0]:"[data-disable-keys],[data-focus-next],[data-focus-back]";$(e).each(function(e,t){$(t).keydown(spa._trackAndControlKey)})},spa.getDocObj=function(e){var t="object"==typeof e?e:(e.beginsWithStr("#")?"":"#")+e;return $(t).get(0)},spa.getDocObjs=function(e){var t=(e.beginsWithStr("#")?"":"#")+e;return $(t).get()},spa.setFocus=function(e,t){var a=spa.getDocObj(e);a&&(a.focus(),t&&a.select())},spa.isElementExist=function(e){return!$.isEmptyObject($(e).get())},spa.swapClass=spa.swapObjClass=function(e,t,a){$(e).removeClass(t),$(e).addClass(a)},spa.docObjValue=function(e,t){var a=spa.getDocObj(e),n="";return a&&(n=a.value,2===arguments.length&&(a.value=t)),n},spa.optionSelectedIndex=function(e,t){var a=-1,n=spa.getDocObj(e);return n&&(a=n.selectedIndex,2===arguments.length&&(n.selectedIndex=t)),a},spa.optionIndexOfValue=function(e,t){var a=-1,n=spa.getDocObj(e);if(n)for(var r=0;n.length>r;r++)if((""+t).equalsIgnoreCase(n.options[r].value)){a=r;break}return a},spa.optionIndexOfText=function(e,t){var a=-1,n=spa.getDocObj(e);if(n)for(var r=0;n.length>r;r++)if(t.equalsIgnoreCase(n.options[r].text)){a=r;break}return a},spa.optionIndexOfValueBeginsWith=function(e,t){var a=-1,n=spa.getDocObj(e);if(n)for(var r=0;n.length>r;r++)if(n.options[r].value.beginsWithStrIgnoreCase(t)){a=r;break}return a},spa.optionsSelectedValues=function(e,t){return e=(e.beginsWithStr("#")?"":"#")+e,t=t||",",$.map($(e+" option:selected"),function(e){return e.value}).join(t)},spa.optionsSelectedTexts=function(e,t){return e=(e.beginsWithStr("#")?"":"#")+e,t=t||",",$.map($(e+" option:selected"),function(e){return e.text}).join(t)},spa.optionValueOfIndex=function(e,t){var a="",n=spa.getDocObj(e);return n&&t>=0&&n.length>t&&(a=n.options[t].value),a},spa.optionTextOfIndex=function(e,t){var a="",n=spa.getDocObj(e);return n&&t>=0&&n.length>t&&(a=n.options[t].text),a},spa.selectOptionForValue=function(e,t){var a=-1,n=spa.getDocObj(e);return n&&(a=spa.optionIndexOfValue(e,t),n.selectedIndex=a),a},spa.selectOptionForValueBeginsWith=function(e,t){var a=-1,n=spa.getDocObj(e);return n&&(a=spa.optionIndexOfValueBeginsWith(e,t),n.selectedIndex=a),a},spa.selectOptionsForValues=function(e,t,a){a=a||",",t=(a+t+a).toLowerCase();var n,r=spa.getDocObj(e);if(r)for(var s=0;r.length>s;s++)n=(a+r.options[s].value+a).toLowerCase(),r.options[s].selected=t.indexOf(n)>=0},spa.selectOptionForText=function(e,t){var a=-1,n=spa.getDocObj(e);return n&&(a=spa.optionIndexOfText(e,t),n.selectedIndex=a),a},spa.selectOptionsAll=function(e){var t=spa.getDocObj(e);if(t)for(var a=0;t.length>a;a++)t.options[a].selected=!0},spa.selectOptionsNone=function(e){var t=spa.getDocObj(e);if(t)for(var a=0;t.length>a;a++)t.options[a].selected=!1},spa.optionsReduceToLength=function(e,t){t=t||0;var a=spa.getDocObj(e);a&&(spa.selectOptionsNone(e),a.length=t)},spa.optionsRemoveAll=function(e){spa.optionsReduceToLength(e,0)},spa.optionRemoveForIndex=function(e,t){e=(e.beginsWithStr("#")?"":"#")+e;var a=spa.getDocObj(e);a&&((""+t).equalsIgnoreCase("first")&&(t=0),(""+t).equalsIgnoreCase("last")&&(t=a.length-1),a.remove(t))},spa.optionRemoveForValue=function(e,t){spa.optionRemoveForIndex(e,spa.optionIndexOfValue(e,t))},spa.optionRemoveForText=function(e,t){spa.optionRemoveForIndex(e,spa.optionIndexOfText(e,t))},spa.optionRemoveForValueBeginsWith=function(e,t){spa.optionRemoveForIndex(e,spa.optionIndexOfValueBeginsWith(e,t))},spa.optionAppend=function(e,t,a,n){var r=-1,s=spa.getDocObj(e);if(s)if(n===void 0){var i=s.length;s.length=i+1,s.options[i].value=t,s.options[i].text=a,r=i}else $(s).find("option").eq(n).before('<option value="'+t+'">'+a+"</option>"),r=n;return r},spa.optionsLoad=function(e,t,a,n){var r=["","key","value"];if(a=a||0,n=n||0,_.isString(t)&&t.indexOf("..")>0&&(t=spa.range(t)),a>=0&&spa.optionsReduceToLength(e,a),_.isArray(t))_.each(t,function(t){spa.optionAppend(e,t,t)});else if(n>0){var s=[];for(var i in t)s.push({key:i,value:t[i]});var o=_.sortBy(s,r[n]);_.each(o,function(t){spa.optionAppend(e,t.key,t.value)})}else _.each(t,function(t,a){spa.optionAppend(e,a,t)})},spa.checkedState=function(e,t){var a=!1,n=spa.getDocObj(e);return n&&(a=n.checked,2===arguments.length&&(n.checked=t)),a},spa.isChecked=function(e,t){return $(e).find("input[name="+t+"]:checked").length>0},spa.radioSelectedValue=function(e,t){var a=$(e).find("input[name="+t+"]:checked").val();return a?a:""},spa.radioClearSelection=function(e,t){$(e).find("input[name="+t+"]:checked").attr("checked",!1)},spa.radioSelectForValue=function(e,t,a){$(e).find("input[name="+t+"]:radio").each(function(e){e.checked=e.value.equalsIgnoreCase(a)})},spa.checkboxCheckedValues=function(e,t,a){return a=a||",",$(e).find("input[name="+t+"]:checked").map(function(){return this.value}).get().join(a)},spa.sleep=function(e){var t=new Date;for(t.setTime(t.getTime()+1e3*e);t.getTime()>(new Date).getTime(););},spa.filterJSON=function(e,t){return $(e).filter(function(e,a){for(var n in t)if(!(""+a[n]).match(t[n]))return null;return a})},spa.randomPassword=function(e,t){for(var a=t||"9a8b77C8D9E8dkfhseidF7G6H5QJ3c6d5e4f32L3M4N5P6Qg2h3i4j5kV6W5X4Y3Z26m7n8p9q8r7s6t5u4v3w2x3y4z5A6BK7R8S9T8U7",n="",r=0;(e||8)>r;r++){var s=Math.floor(Math.random()*a.length);n+=a.charAt(s)}return n},spa.rand=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},spa.htmlEncode=function(e){return $("<div/>").text(e).html()},spa.htmlDecode=function(e){return $("<div/>").html(e).text()},spa.appendToObj=function(e,t,a){_.has(e,t)?(_.isArray(e[t])||(e[t]=[e[t]]),e[t].push(a)):e[t]=a},spa.parseKeyStr=function(e,t){return(t?e.toLowerCase():e).replace(/[^_0-9A-Za-z\[\]\?\*-]/g,"")};var arrayIndexPointsToMap={};spa.setObjProperty=function(e,t,a,n){t=""+t,n=n||!1;var r,s,i,o,p=e,l=t.indexOf(".")>=0||t==t.toUpperCase()?t.split("."):t.split(/(?=[A-Z])/),c=$.trim(t.replace(/[0-9A-Za-z\[\]\?\*\_]/g,""));c&&""!=c&&(l=t.split(c[0]));for(var u="";l.length>1;)r=spa.parseKeyStr(l.shift(),n),""!=$.trim(r)&&(u+=r.replace(/[\?\[\]\*\_]/g,""),r.indexOf("[")>0&&r.indexOf("]")==r.length-1?(s=r.substring(0,r.length-1).replace(/\[/g,".").split("."),i=s[0],o=s[1],p[i]===void 0&&(p[i]=[]),o.replace(/[0-9]/g,"")&&(o=o.replace(/[^0-9]/g,""),arrayIndexPointsToMap.hasOwnProperty(u)?o=arrayIndexPointsToMap[u]:p[i][o]===void 0&&(arrayIndexPointsToMap[u]=p[i].length,o=p[i].length)),p[i][o]===void 0&&(p[i][o]={}),p=p[i][o]):(p[r]===void 0&&(p[r]={}),p=p[r]));return r=spa.parseKeyStr(l.shift(),n),spa.appendToObj(p,r,a),e},spa.setSimpleObjProperty=function(e,t,a){t=""+t;for(var n,r=e,s=t.split(".");s.length>1;)n=spa.parseKeyStr(s.shift(),!1),""!=$.trim(n)&&(r[n]===void 0&&(r[n]={}),r=r[n]);return n=spa.parseKeyStr(s.shift(),!1),r[n]=a,e},spa.objProp=spa.objProperty=spa.objectProp=spa.objectProperty=function(){var e=arguments[0],t=arguments[1],a=arguments[2];return 3==arguments.length?spa.setSimpleObjProperty(e,t,a):2==arguments.length?spa.findSafe(e,t):e},spa.getElValue=function(e,t){e=$(e).get(0);var a,n;switch(e.tagName.toUpperCase()){case"INPUT":switch(e.type.toLowerCase()){case"checkbox":n=$(e).data("unchecked"),a=e.checked?e.value:n===void 0?"":n;break;case"radio":a=e.checked?e.value:"";break;default:a=$(e).val()}break;case"SELECT":a=$.map($(e).find("option:selected"),function(e){return e.value}).join(",");break;case"TEXTAREA":a=$(e).val();break;default:a=t?$(e).text():$(e).html()}return a},spa.serialize=function(e,t,a){_.isBoolean(e)&&(a=e,e=""),_.isBoolean(t)&&(a=t,t=""),e=e||"body";var n,r,s,i,o={},p=t?'[data-serialize-context*="'+t+'"]':"";return $(e).find("[data-serialize]"+p+",input[name]"+p+",select[name]"+p+",textarea[name]"+p+"").each(function(e,t){s=$(t).data(),n=t.name||s.serialize,i=s.serializeType?s.serializeType.equalsIgnoreCase("text"):a,r=spa.getElValue(t,i),o.hasOwnProperty(n)?spa.isBlank(r)||(spa.isBlank(o[n])?o[n]=r:_.isArray(o[n])?o[n].push(r):o[n]=[o[n],r]):o[n]=r}),o},spa.serializeToQueryString=function(e,t){return spa.toQueryString(spa.serialize(e,t))},spa.serializeDisabled=function(e){var t="";return $(e).find("[disabled][name]").each(function(){t+=(t?"&":"")+$(this).attr("name")+"="+spa.getElValue(this)}),t},spa.serializeForms=function(e,t){var a,n,r=$(e).serialize();return $(e).find("input[data-unchecked]:checkbox:enabled:not(:checked)[name]").each(function(){n=$(this).data("unchecked"),r+=(r?"&":"")+$(this).attr("name")+"="+(n===void 0?"":n)}),t&&(a=spa.serializeDisabled(e),r+=(r&&a?"&":"")+a),r},spa.queryStringToJson=spa.queryStringToObject=function(e){var t={},a=e||location.search,n=(""+a).indexOf("?"),r=(""+a).indexOf("&");return a&&a.length>0&&n>=0&&(0==n||r>n)&&(a=a.substring(n+1)),_.each(a.split("&"),function(e){e=e.split("="),e[0]&&spa.appendToObj(t,e[0],decodeURIComponent(e[1]||""))}),t},spa.toQueryString=spa.ObjectToQueryString=spa.objectToQueryString=spa.JsonToQueryString=spa.jsonToQueryString=function(e){return _.isObject(e)?Object.keys(e).reduce(function(t,a,n){var r,s;return r=0===n?"":"&",a=encodeURIComponent(a),s=_.isArray(e[a])?e[a].map(function(e){return encodeURIComponent(e)}).join(","):encodeURIComponent(e[a]),[t,r,a,"=",s].join("")},""):""},$.fn.serializeUncheckedCheckboxes=function(e){var t,a,n,r,s="object"==typeof e,i=s?e:{},o=s&&!e?"":e;return $(this).find("input[data-unchecked]:checkbox:enabled:not(:checked)[name]").each(function(e,p){t=$(p),n=t.attr("name"),a=t.data("unchecked"),r=a===void 0?"":a,s?spa.appendToObj(i,n,r):o+=(o?"&":"")+n+"="+r}),s?i:o},spa.serializeUncheckedCheckboxes=function(e,t){return $(e).serializeUncheckedCheckboxes(t)},$.fn.serializeFormToJSON=$.fn.serializeFormToObject=function(e,t,a){var n,r,s=this.serializeArray(),i=$(this).data(),o="object"==typeof e?e:{},p="boolean"==typeof e?e:t||!1,l=i.serializeIgnorePrefix,c=i.hasOwnProperty("typeNative");return arrayIndexPointsToMap={},a&&(l=a),$.each(s,function(){n=l?this.name.replace(l,""):this.name,o=spa.setObjProperty(o,n,c?this.value.toNative():this.value,p)}),$(this).find("input[data-unchecked]:checkbox:enabled:not(:checked)[name]").each(function(){n=$(this).attr("name"),n&&(r=$(this).data("unchecked"),l&&(n=n.replace(l,"")),r=""+(r===void 0?"":r),o=spa.setObjProperty(o,n,c?r.toNative():r,p))}),o},spa.serializeFormToJSON=spa.serializeFormToObject=function(e,t,a,n){return $(e).serializeFormToJSON(t,a,n)},$.fn.serializeFormToSimpleJSON=$.fn.serializeFormToSimpleObject=function(e,t){var a,n,r,s,i=this.serializeArray(),o="object"==typeof e?e:{},p="boolean"==typeof e?e:t||!1;return $.each(i,function(){spa.appendToObj(o,this.name,this.value)}),p&&$(this).find("[disabled][name]").each(function(){spa.appendToObj(o,this.name,spa.getElValue(this))}),$(this).find("input[data-unchecked]:checkbox:enabled:not(:checked)[name]").each(function(){r=$(this).attr("name"),s=$(this).data("unchecked"),s=""+(s===void 0?"":s),spa.appendToObj(o,r,s)}),$(this).find("[data-to-json-group][name]").each(function(){a=this.name,n=$(this).data("toJsonGroup"),n&&(o[n]||(o[n]={}),spa.appendToObj(o[n],a,spa.getElValue(this)))}),o},spa.serializeFormToSimpleJSON=spa.serializeFormToSimpleObject=function(e,t,a){return $(e).serializeFormToSimpleJSON(t,a)},spa.find=spa.locate=function(obj,path){var tObj=obj,retValue;return eval("tObj."+path)!==void 0&&(retValue=eval("tObj."+path)),retValue},spa.findSafe=spa.findInObj=spa.findInObject=spa.locateSafe=spa.valueOfPath=function(e,t,a){for(var n=0,r=spa.toDottedPath(t).split("."),s=r.length;s>n;n++){if(!e||e===void 0)return a;e=e[r[n]]}return e===void 0?a:e},spa.has=spa.hasKey=function(obj,path){var tObj=obj,retValue=!1;try{retValue=eval("tObj."+path)!==void 0}catch(e){}return retValue},spa.of=of,spa.is=is,spa.hasPrimaryKeys=function _spa_hasPrimaryKeys(e,t){return _isObjHasKeys(e,t)},spa.hasKeys=function _spa_hasKeys(e,t){return _isObjHasKeys(e,t,!0)},spa.hasIgnoreCase=spa.hasKeyIgnoreCase=function(e,t){var a="",n=e||{},r=""+spa.toDottedPath(t),s=spa.keysDottedAll(n);return s&&!_.isEmpty(s)&&_.some(s,function(e){var t=e.equalsIgnoreCase(r);return t||(t=e.beginsWithStrIgnoreCase(r+"."),t&&(e=e.slice(0,e.lastIndexOf(".")))),t&&(a=e),t}),a},spa.findIgnoreCase=function(e,t,a){var n=a,r=spa.hasIgnoreCase(e,t);return r&&(n=spa.findSafe(e,r,a)),n},spa.keysDottedAll=function(e){var t=spa.keysDotted(e);return t&&!_.isEmpty(t)&&(t=spa.toDottedPath(t.join(",")).split(",")),t},spa.keysDotted=function(e){e=e||{};var t,a,n,r=[];return function(e,s){if(s=s||"","object"!=typeof e)return!0;for(var i in e)n=s.substring(1),t=spa.isNumber(i)?"[":".",a=n&&"["==t?"]":"",arguments.callee(e[i],s+t+i+a)&&r.push(n+(n?t:"")+i+a);return!1}(e),r},spa.keysCamelCase=function(e){return _.map(spa.keysDotted(e),function(e){var t=e.replace(/\./g," ").toProperCase().replace(/ /g,"");return t[0].toLowerCase()+t.substring(1)})},spa.keysTitleCase=function(e){return _.map(spa.keysDotted(e),function(e){return e.replace(/\./g," ").toProperCase().replace(/ /g,"")})},spa.keys_=function(e){return _.map(spa.keysDotted(e),function(e){return e.replace(/\./g,"_")})},Object.defineProperties(Array.prototype,{__toObject:{value:function(e){var t,a={};return this.forEach(function(n,r){is(n,"object")&&(t=e?is(n,"object")?spa.findSafe(n,e):r:r,a[t]=n)}),a},enumerable:!1,configurable:!1}}),Object.defineProperties(Object.prototype,{__keys:{value:function _obj_keys(e){return e?spa.keysDotted(this):Object.keys(this)},enumerable:!1,configurable:!1},__keysAll:{value:function _obj_keysAll(){return spa.keysDotted(this)},enumerable:!1,configurable:!1},__hasKey:{value:function _obj_hasKey(e){return spa.hasKey(this,e)},enumerable:!1,configurable:!1},__hasKeys:{value:function _obj_hasKeys(e){return _isObjHasKeys(this,e,!0)},enumerable:!1,configurable:!1},__hasPrimaryKeys:{value:function _obj_hasPrimaryKeys(e){return _isObjHasKeys(this,e)},enumerable:!1,configurable:!1},__valueOf:{value:function _obj_getValueOf(e,t){return spa.findSafe(this,e,t)},enumerable:!1,configurable:!1},__clone:{value:function _obj_clone(){return Array.prototype.unshift.call(arguments,{},this),_.merge.apply(void 0,arguments)},enumerable:!1,configurable:!1},__merge:{value:function _obj_merge(){return Array.prototype.unshift.call(arguments,this),_.merge.apply(void 0,arguments)},enumerable:!1,configurable:!1},__stringify:{value:function(){return JSON.stringify(this)},enumerable:!1,configurable:!1},__toQueryString:{value:function(){return spa.toQueryString(this)},enumerable:!1,configurable:!1}}),$.cachedScript=function(e,t){return t=$.extend(t||{},{dataType:"script",cache:!0,url:e}),$.ajax(t)},$.cachedStyle=function(e,t,a){return a=$.extend(a||{},{dataType:"text",cache:!0,url:t,success:function(t){$("head").append("<style id='"+e+"' type='text/css'>"+t+"</style>")}}),$.ajax(a)},spa.addScriptTag=function(e,t){if(e=e.replace(/#/,""),spa.isElementExist("#spaScriptsCotainer")||$("body").append("<div id='spaScriptsCotainer' style='display:none' rel='Dynamic Scripts Container'></div>"),spa.isElementExist("#"+e));else{var a=t?"src='"+t+"'":"";$("#spaScriptsCotainer").append("<script id='"+e+"' type='text/javascript' "+a+"></script>")}},spa.addStyle=function(e,t){e=e.replace(/#/,""),spa.isElementExist("#spaStylesCotainer")||$("body").append("<div id='spaStylesCotainer' style='display:none' rel='Dynamic Styles Container'></div>"),spa.isElementExist("#"+e)||$("#spaStylesCotainer").append("<link id='"+e+"' rel='stylesheet' type='text/css' href='"+t+"'/>")},spa.loadScript=function(e,t,a,n){return e=e.replace(/#/,""),a=a||!1,n=n||[],spa.isBlank(t)||(a?spa.addScriptTag(e,t):n.push($.cachedScript(t).done(function(){}))),n},spa.getComponentsFullPath=function(e){return e=spa.strToArray(spa.toJSON(e)),_.map(e,function(e){return spa.defaults.components.rootPath+(spa.defaults.components.inFolder?e:"")+"/"+e+".js"})},spa.loadComponents=function(e,t,a){var n=_.filter(spa.strToArray(spa.toJSON(e)),function(e){return!spa.components.hasOwnProperty(e)});spa.loadScripts(spa.getComponentsFullPath(n),t,a)},spa.loadScripts=function(e,t,a){if(e=spa.strToArray(spa.toJSON(e)),!spa.isBlank(e)){var n=[];_.each(e,function(e){n.push($.cachedScript(e).done(function(){}).fail(function(){}))}),$.when.apply($,n).then(function(){spa.renderUtils.runCallbackFn(t)}).fail(function(){spa.renderUtils.runCallbackFn(a)})}},spa.loadScriptsSync=function(e,t,a){if(e=spa.strToArray(spa.toJSON(e)),spa.isBlank(e))spa.renderUtils.runCallbackFn(t);else{var n=e.shift();$.cachedScript(n).done(function(){spa.loadScriptsSync(e,t)}).fail(function(){spa.renderUtils.runCallbackFn(a)})}},spa.loadStyle=function(e,t,a,n){return e=e.replace(/#/,""),a=a||!1,n=n||[],spa.isBlank(t)||(a?spa.addStyle(e,t):n.push($.cachedStyle(e,t).done(function(){}))),n},spa.addTemplateScript=function(e,t,a){e=e.replace(/#/,""),a=a||"x-template",spa.isElementExist("#spaViewTemplateCotainer")||$("body").append("<div id='spaViewTemplateCotainer' style='display:none' rel='Template Container'></div>"),t=t.replace(/<( )*script/gi,"<_SCRIPTTAGINTEMPLATE_").replace(/<( )*(\/)( )*script/gi,"</_SCRIPTTAGINTEMPLATE_").replace(/<( )*link/gi,"<_LINKTAGINTEMPLATE_").replace(/<( )*(\/)( )*link/gi,"</_LINKTAGINTEMPLATE_"),$("#spaViewTemplateCotainer").append("<script id='"+e+"' type='text/"+a+"'>"+t+"</script>")},spa.updateTemplateScript=function(e,t,a){e=e.replace(/#/,"");var n=$("#spaViewTemplateCotainer").find("#"+e);n.length&&n.remove(),spa.addTemplateScript(e,t,a)},spa.loadTemplate=function(e,t,a,n,r,s){if(e=e.replace(/#/g,""),t=t.ifBlankStr("inline").trimStr(),a=a||"x-template",n=n||"#DummyInlineTemplateContainer",r=r||[],spa.isElementExist("#"+e)){var i=$("#"+e);if(s)i.remove(),r=spa.loadTemplate(e,t,a,n,r,s);else if(spa.isBlank(i.html())){var o=""+i.attr("path");spa.isBlank(o)||(a=(i.attr("type")||"").ifBlankStr(a).toLowerCase().replace(/text\//gi,""),i.remove(),r=spa.loadTemplate(e,o,a,n,r,s))}}else if(t&&"undefined"==t)spa.addTemplateScript(e,"",a);else if(t.equalsIgnoreCase("inline")||t.beginsWithStr("#")){var p=t.equalsIgnoreCase("inline")?n:t,l=$(p),c=l.html();spa.isBlank(c)||(spa.addTemplateScript(e,c,a),t.equalsIgnoreCase("inline")&&l.html(""))}else if(t.equalsIgnoreCase("none"));else if(!t.equalsIgnoreCase("script")){var u;u=s?$.ajax({url:t,cache:!1,dataType:"html",success:function(t){spa.addTemplateScript(e,t,a)},error:function(){}}):$.get(t,function(t){spa.addTemplateScript(e,t,a)},"html"),r.push(u)}return r},spa.urlParams=function(e){e=e||window.location.search||"",e=e.beginsWithStr("\\?")||7>e.indexOf("//")?e.substr(e.indexOf("?")+1):e;var t={};return e.replace(/([^&=]+)=?([^&]*)(?:&+|$)/g,function(e,a,n){(t[a]=t[a]||[]).push(decodeURIComponent(n))}),_.each(t,function(e,a){t[a]=_.isArray(e)&&1==e.length?e[0]:e}),t},spa.urlParam=function(e,t){return spa.urlParams(t)[e]},spa.getLocHash=function(){return window.location.hash||""},spa.urlHash=function(e,t){var a=(spa.getLocHash()||"#").substring(1);if(e){t=t||"/",a=a.beginsWithStr(t)?a.substring(a.indexOf(t)+t.length):a;var n=a.length?a.split(t):[];_.isNumber(e)?a=n&&n.length>e?n[e]:"":_.isArray(e)?a=0===e.length?n:_.zipObject(e,n):_.isString(e)&&"?"==e&&(a=a.containsStr("\\?")?spa.getOnSplit(a,"?",1):"")}return a},spa.hashParam=function(e){var t=""+spa.urlHash("?");return void 0===e||spa.isBlank(t)||(t=spa.urlParam(""+e,t)),t},spa.routeMatch=function(e,t){var a=RegExp(":[a-zA-Z0-9\\_\\-]+","g"),n=RegExp(e.replace(a,"([\\w\\+\\-\\|\\.\\?]+)")),r=e.match(a),s=t.match(n),i=s&&!_.isEmpty(s)?s.shift():"",o=r&&!_.isEmpty(r)?r.join(",").replace(/:/g,"").split(","):[],s=s&&!_.isEmpty(s)?s.join(",").replace(/\?/g,"").split(","):[],p=void 0;return i&&(p={hkeys:r,params:_.zipObject(o,s)}),p},spa.i18n={},spa.i18n.loaded=!1,spa.i18n.settings={name:"Language",path:"language/",ext:".txt",encoding:"UTF-8",cache:!0,mode:"map",callback:null},spa.i18n.setLanguage=function(e,t){$.i18n&&($.i18n.map={},e=e||$.i18n.browserLang().replace(/-/g,"_"),t=$.extend(spa.i18n.settings,t),$.i18n.properties({name:t.name,language:e,path:t.path,ext:t.ext,encoding:t.encoding,cache:t.cache,async:t.async,mode:t.mode,callback:function(){spa.isElementExist("#i18nSpaRunTime")||$("body").append('<div id="i18nSpaRunTime" style="display:none"></div>'),$.i18n.loaded=$.i18n.loaded===void 0?!$.isEmptyObject($.i18n.map):$.i18n.loaded,spa.i18n.loaded=spa.i18n.loaded||$.i18n.loaded,e.length>1&&!$.i18n.loaded&&spa.i18n.setLanguage("_",t),spa.i18n.apply(),t.callback&&t.callback($.i18n.loaded)
}}))},spa.i18n.value=function(i18nKey){if(i18nKey=(""+i18nKey).replace(/i18n:/i,"").trim(),i18nKey.beginsWithStrIgnoreCase("@")){i18nKey=i18nKey.substr(1).trim();try{i18nKey=eval("("+i18nKey+")")}catch(e){}}var retValue=i18nKey;try{retValue=!spa.i18n.loaded&&window.Liferay?Liferay.Language.get(i18nKey):$.i18n.prop(i18nKey)}catch(e){}return retValue},spa.i18n.text=function(e,t){var a=spa.i18n.value(e);if(t){var n="";_.each(_.keys(t),function(e){n=""+t[e],n&&n.beginsWithStrIgnoreCase("i18n:")&&(n=spa.i18n.value(n.replace(/i18n:/gi,""))),a=a.replace(RegExp("{"+e+"}","gi"),n)})}return(""+a).trimLeftStr("[").trimRightStr("\\]")},spa.i18n.apply=spa.i18n.render=function(e,t){if(spa.i18n.loaded||window.Liferay){e=e||"body",t=t||"";var a=e.beginsWithStr("<");a&&($("#i18nSpaRunTime").html(e),e="#i18nSpaRunTime");var n=$(e).find(t+"[data-i18n]");n.length||(n=$(e).filter(t+"[data-i18n]")),n.each(function(e,t){var a=$(t),n=a.data("i18n")||"";n&&!n.containsStr(":")&&(n="html:'"+n+"'");var r=spa.toJSON(n||"{}"),s=r.i18ndata;s&&delete r.i18ndata,r&&!$.isEmptyObject(r)&&_.each(_.keys(r),function(e){var t=r[e],n=spa.i18n.text(t,s);_.each(e.split("_"),function(e){switch(e.toLowerCase()){case"html":a.html(n);break;case"text":a.text(n);break;default:a.attr(e,n)}})})})}return a?$("#i18nSpaRunTime").html():void 0},$.fn.extend({i18n:function(e){return this.each(function(){e&&$(this).attr("data-i18n",e).data("i18n",e),spa.i18n.apply(this)}),this}}),spa.dataBind=spa.bindData=function(e,t,a){e=e||"body",a=a||"";var n=$(e).find(a+"[data-bind]");n.length||(n=$(e).filter(a+"[data-bind]"));var r,s,i,o,p,l,c,u,d;_.each(n,function(e){r=$(e),s=r.data("bind")||"",s&&!s.containsStr(":")&&(s="html:'"+s+"'"),i=spa.toJSON(s||"{}"),d=spa.renderUtils.getFn(r.data("bindCallback")||""),i&&!$.isEmptyObject(i)&&_.each(_.keys(i),function(a){o=(i[a]+"|").split("|"),p=o[0].trimStr(),l=spa.renderUtils.getFn(o[1].trimStr()),c=spa.findSafe(t,p),l&&(c=l(c,e)),_.each(a.split("_"),function(e){switch(e.toLowerCase()){case"html":r.html(c);break;case"text":r.text(c);break;default:r.attr(e,c),e.beginsWithStr("data-")&&(u=spa.dotToCamelCase(e.getRightStr("-").replace(/-/g,".")),u&&r.data(u,c))}}),d&&d(e)})})},spa.togglePassword=function(e){if(!$(e).next(".icon.eye").length){var t=$('<i class="icon eye"></i>');t.on("click",function(){var e=$(this),t=e.prev(".toggle-password"),a="text"==t.attr("type")?"password":"text";t.attr("type",a).toggleClass("text").focus()}),$(t).insertAfter(e)}},spa.initTogglePassword=function(e){$(e||"body").find(".toggle-password").each(function(e,t){spa.togglePassword(t)})},spa.isElValueChanged=function(t){var a,n,r=$(t);if(r.length)if(n=r[0],"checkbox"==n.type)a=n.checked!=n.defaultChecked;else if("radio"==n.type)$(n).closest("form").find(':radio[name="'+n.name+'"]').each(function(e,t){t.checked==t.defaultChecked&&$(t).removeClass("changed"),a=a||t.checked!=t.defaultChecked});else if("INPUT,TEXTAREA".indexOf(n.tagName)>=0)a=n.value!=n.defaultValue,triggerFormChange="change"!=e.type;else if("SELECT"==n.tagName){var s,i,o,p=0;for(s=0,i=n.options.length;i>s;s++)o=n.options[s],a=a||o.selected!=o.defaultSelected,o.defaultSelected&&(p=s);a&&!n.multiple&&(a=p!=n.selectedIndex)}return a},spa.resetElDefaultValue=function(e){var t,a=$(e);if(a.length)if(t=a[0],"~checkbox,radio".indexOf(t.type)>0)t.defaultChecked=t.checked;else if("~INPUT,TEXTAREA".indexOf(t.tagName)>0)t.defaultValue=t.value;else if("SELECT"==t.tagName){var n,r,s;for(n=0,r=t.options.length;r>n;n++)s=t.options[n],s.defaultSelected=s.selected}},spa.trackFormElChange=function _trackFormElChange(e,t){function a(e){var t=e.find(".tracking-change.changed").length;e.attr("data-changed",t).data("changed",t).find(".ctrl-on-change").prop("disabled",!t).addClass(t?"":"disabled").removeClass(t?"disabled":"")}function n(e){if("change"==e.type||e.key&&(1==e.key.length||"~BackspaceDelete".indexOf(e.key)>0)){var t,n,r=!1,s=$(this).closest("form"),i=s.find(".tracking-change.changed").length;if("checkbox"==this.type)r=this.checked!=this.defaultChecked;else if("radio"==this.type)s.find(':radio[name="'+this.name+'"]').each(function(e,t){t.checked==t.defaultChecked&&$(t).removeClass("changed"),r=r||t.checked!=t.defaultChecked});else if("INPUT,TEXTAREA".indexOf(this.tagName)>=0)r=this.value!=this.defaultValue,n="change"!=e.type;else if("SELECT"==this.tagName){var o,p,l,c=0;for(o=0,p=this.options.length;p>o;o++)l=this.options[o],r=r||l.selected!=l.defaultSelected,l.defaultSelected&&(c=o);r&&!this.multiple&&(r=c!=this.selectedIndex)}$(this)[r?"addClass":"removeClass"]("changed"),a(s),i!=t&&n&&s.trigger("change")}}function r(e){var t="change",r=$(e);if("~checkbox,radio".indexOf(e.type)>0)e.defaultChecked=e.checked;else if("~INPUT,TEXTAREA".indexOf(e.tagName)>0)e.defaultValue=e.value,t="keyup change";else{if("SELECT"!=e.tagName)return!1;var s,i,o;for(s=0,i=e.options.length;i>s;s++)o=e.options[s],o.defaultSelected=o.selected}return r.removeClass("track-change changed"),a(r.closest("form")),0>e.className.indexOf("tracking-change")&&r.addClass("tracking-change").on(t,n),!0}var s=$(t||"body").find(e);s.each(function(e,t){"FORM"==t.tagName?spa.trackFormElChange($(t).find(".track-change").length?".track-change":"input,textarea,select",t):r(t)})},spa.initTrackFormElChanges=function(e){$(e||"body").find("form.track-changes").each(function(e,t){spa.trackFormElChange(t)})},spa.getModifiedElement=function(e){var t,a=void 0,n=$(e||"form:not([data-ignore-change]) :input:not(:disabled,:button,[data-ignore-change])");return _.every(n,function(e){return t||(e.tagName.match(/^(select|textarea)$/i)&&e.value!=e.defaultValue?t=!0:e.tagName.match(/^input$/i)&&(e.type.match(/^(checkbox|radio)$/i)&&e.checked!=e.defaultChecked?t=!0:e.type.match(/^(text|password|hidden|color|email|month|number|tel|time|url|range|date|datetime|datetime-local)$/i)&&e.value!=e.defaultValue&&(t=!0)),t&&(a=e)),!t}),a},spa.getModifiedElements=function(e){var t,a=[],n=$(e||"form:not([data-ignore-change]) :input:not(:disabled,:button,[data-ignore-change])");return n.each(function(e,n){t=!1,n.tagName.match(/^(select|textarea)$/i)&&n.value!=n.defaultValue?t=!0:n.tagName.match(/^input$/i)&&(n.type.match(/^(checkbox|radio)$/i)&&n.checked!=n.defaultChecked?t=!0:n.type.match(/^(text|password|hidden|color|email|month|number|tel|time|url|range|date|datetime|datetime-local)$/i)&&n.value!=n.defaultValue&&(t=!0)),t&&a.push(n)}),a},spa.initTrackElValueChanges=spa.resetElementsDefaultValue=function(e){$(e||"form :input:not(:disabled)").each(function(e,t){t.defaultValue=t.value,t.tagName.match(/^input$/i)&&t.type.match(/^(checkbox|radio)$/i)&&t.checked!=t.defaultChecked&&(t.defaultChecked=t.checked)})},spa.trash={container:[],push:function(e){this.container.push(e)},empty:function(){this.container=[]},pick:function(e){return e?this.container[e]:this.container}},spa.fillData=function(e,t,a){function n(){var a=s.keyFormat;a=null!=a.match(/^[a-z]/)?"aBc":a,a=null!=a.match(/^[A-Z]/)?"AbC":a;var n=spa.keysDotted(e);_.each(n,function(n){var r=""+(n.replace(/[\[\]]/g,"_")||""),i=n.replace(/\[[0-9]+\]/g,""),o=/\[[0-9]+\]/.test(n);switch(a){case"_":r=spa.dotToX(r,"_"),i=spa.dotToX(i,"_");break;case"AbC":r=spa.dotToTitleCase(r),i=spa.dotToTitleCase(i);break;default:r=spa.dotToCamelCase(r),i=spa.dotToCamelCase(i)}var p={patternKey:r+(o?" || "+i:""),formatterKey:i,isArrayChild:o};spa.trash.push(p),spa.trash.empty();var l=s.selectPattern.replace(/\?/g,r);(s.keysMap[r]||s.keysMap[i])&&(s.keysMap[r]=s.keysMap[r]||{},s.keysMap[i]=s.keysMap[i]||{},s.keysMap[r].pattern=s.keysMap[r].pattern||s.keysMap[i].pattern,s.keysMap[r].pattern&&(l=s.keysMap[r].pattern.replace(/\?/g,r)),s.keysMap[i].formatter&&(s.formatterOnKeys=s.formatterOnKeys||{},s.formatterOnKeys[i]=s.keysMap[i].formatter));var c=$(t).find(l).length,u=null;c>0&&(u=spa.find(e,n),!s.formatterOnKeys&&s.formatterCommon&&(u=s.formatterCommon(u,n,e)),s.formatterOnKeys&&(s.formatterOnKeys[i]?u=s.formatterOnKeys[i](u,n,e):s.formatterCommon&&(u=s.formatterCommon(u,n,e)))),$(t).find(l).each(function(e,t){switch(t.tagName.toUpperCase()){case"INPUT":switch(t.type.toLowerCase()){case"text":case"password":case"hidden":case"color":case"date":case"datetime":case"datetime-local":case"email":case"month":case"number":case"search":case"tel":case"time":case"url":case"range":case"button":case"submit":case"reset":$(t).val(u),!s.resetElDefaultInContext&&s.resetElDefault&&(t.defaultValue=t.value);break;case"checkbox":case"radio":t.checked=t.value.equalsIgnoreCase(u),!s.resetElDefaultInContext&&s.resetElDefault&&(t.defaultChecked=t.checked)}break;case"SELECT":spa.selectOptionForValue(t,u),!s.resetElDefaultInContext&&s.resetElDefault&&(t.defaultValue=t.value);break;case"TEXTAREA":$(t).val(u),!s.resetElDefaultInContext&&s.resetElDefault&&(t.defaultValue=t.value);break;default:$(t).html(u)}})}),s.resetElDefaultInContext&&spa.resetElementsDefaultValue(t+" :input")}var r="object"==typeof e;t&&"object"==typeof t&&(a=t,t=null),t=t||"body";var s={dataParams:{},method:"GET",async:!0,dataCache:!1,keyFormat:"aBc",selectPattern:"[name='?']",formatterCommon:null,formatterOnKeys:null,resetElDefault:!0,resetElDefaultInContext:!0,keysMap:{}};$.extend(s,a),r||$.ajax({url:e,method:(""+(s.method||"GET")).toUpperCase(),data:s.dataParams,cache:s.dataCache,async:s.async,dataType:"text",success:function(t){e=spa.toJSON(""+t),r="object"==typeof e,n()},error:function(e,t,a){spa.api.onReqError(e,t,a)}})},spa.toRenderDataStructure=function(e,t,a){var n={},r={},s={},i={},o=function(e,t){return t&&Object.keys(t).length&&_.each(Object.keys(t),function(a){e=e.replace(RegExp("{"+a+"}","gi"),t[a])}),e};switch(t&&(i=_.isString(t)?spa.queryStringToJson(t):_.isObject(t)?t:{}),!0){case _.isString(e):e.containsStr("\\|")&&(n.dataModel=spa.getOnSplit(e,"|",0),e=spa.getOnLastSplit(1)),n.dataUrl=o(e,a),_.isEmpty(i)||(n.dataParams=i);break;case _.isArray(e):r={urls:[]},s={},_.each(e,function(e){s={url:o(e,a),params:i},e.containsStr("\\|")&&(s.target=spa.getOnSplit(e,"|",0),s.url=o(spa.getOnLastSplit(1),a)),r.urls.push(s)});break;case _.isObject(e):r={urls:[]},s={},_.each(_.keys(e),function(t){s={name:t,url:o(e[t],a),params:i},e[t].containsStr("\\|")&&(s.target=spa.getOnSplit(e[t],"|",0),s.url=o(spa.getOnLastSplit(1),a)),r.urls.push(s)})}return _.isEmpty(r.urls)||(n.dataCollection=r),n},spa.compiledTemplates={},spa.viewModels={},spa.renderHistory={},spa.renderHistoryMax=0,spa.components={},spa.defaults={dataTemplateEngine:"handlebars",components:{rootPath:"app/components/",inFolder:!0,templateExt:".html",scriptExt:".js",callback:""},set:function(e,t){return"object"==typeof e?(e.hasOwnProperty("set")&&delete e.set,_.merge(this,e)):"string"==typeof e&&spa.setSimpleObjProperty(this,e,t),this}};var reservedCompNames="api,debug,lang";spa.component=spa.$=spa.registerComponent=function(e,t){return reservedCompNames.indexOf(e)>=0?(console.error("Invalid component name "+e+". Reserved component names: api,debug,lang"),void 0):e.replace(/[a-z0-9]/gi,"")?(console.error("Invalid component name "+e+". Component name has invalid character."),void 0):(t=t||{},is(e,"object")&&(t=_.merge({},e),e=t.name||t.componentName||""+spa.now()),is(e,"string")&&e&&(e=e.trim(),e&&(t.componentName=e,t.hasOwnProperty("renderCallback")||(t.renderCallback="app."+e+".renderCallback"),t.hasOwnProperty("require")&&spa.loadComponents(t.require,function(){},function(){}),t=adjustComponentOptions(e,t),spa.components[e]=t,spa.extendComponent(e))),void 0)},spa.$$=spa.registerComponents=function(){if(arguments.length){var e=arguments;1==arguments.length&&(e=_.isArray(arguments[0])?arguments[0]:_.isString(arguments[0])?arguments[0].split(","):arguments[0]),spa.is(e,"object")?_.each(Object.keys(e),function(t){spa.registerComponent(t,e[t])}):e&&e.length&&_.each(e,function(e){spa.registerComponent(e.trim())})}},spa.extendComponent=spa.$extend=spa.module=function(e,t){if(is(e,"object")&&(t=_.merge({},e),e=t.name||t.componentName||""+spa.now()),is(e,"string")&&e&&(e=e.trim())){if(reservedCompNames.indexOf(e)>=0)return console.error("Invalid component name "+e+". Reserved component names: "+reservedCompNames.join()),void 0;window.app=window.app||{},window.app[e]=window.app[e]||{},t&&_.isFunction(t)&&(t=t.call(spa.components[e]||{})),t=spa.is(t,"object")?t:{},spa.components[e]||(spa.components[e]={componentName:e,renderCallback:"app."+e+".renderCallback"}),spa.components[e]&&(t.__prop__&&_.merge(spa.components[e],$.extend({},t.__prop__)),t.__prop__=spa.components[e]),$.extend(window.app[e],t),window["$$"+e]=window.app[e]}},spa.extendComponents=spa.$$extend=function(){if(arguments.length){var e=arguments;1==arguments.length&&(e=_.isArray(arguments[0])?arguments[0]:_.isString(arguments[0])?arguments[0].split(","):arguments[0]),spa.is(e,"object")?_.each(Object.keys(e),function(t){spa.extendComponent(t,e[t])}):e&&e.length&&_.each(e,function(e){spa.extendComponent(e.trim())})}},spa.$renderCount=function(e){return spa.findSafe(window,"app."+e+".__renderCount__",0)},spa.refreshComponent=spa.$refresh=function(e,t){e&&(t=t||{},spa.is(t,"object")&&(t.hasOwnProperty("renderCallback")||(t.renderCallback=t.refreshCallback||"app."+e+".refreshCallback"),t.isRefreshCall=!0,spa.$render(e,t)))},spa.renderComponent=spa.$render=function(e,t){if(e){if(!(t&&is(t,"object")&&t.isRefreshCall)&&spa.$renderCount(e)&&spa.findSafe(window,"app."+e+".refreshCallback",""))return spa.refreshComponent(e,t),void 0;is(e,"object")&&(t=_.merge({},e),e=t.name||t.componentName||""+spa.now(),t.componentName=e);var a="_rtt_"+e,n="";t=adjustComponentOptions(e,t);var r=spa.defaults.components.rootPath+(spa.defaults.components.inFolder?e+"/":"")+e,s=r+spa.defaults.components.templateExt,i=spa.defaults.components.scriptExt,o=t&&_.isObject(t)&&t.hasOwnProperty("script")?t.script:i?r+i:"",p=function(){spa.components[e].hasOwnProperty("template")||(spa.components[e].hasOwnProperty("templateStr")||spa.components[e].hasOwnProperty("templateString")?(n=spa.components[e].templateStr||spa.components[e].templateString||"",spa.updateTemplateScript(a,n),spa.components[e].template="#"+a):spa.components[e].template=spa.hasPrimaryKeys(spa.components[e],"templateUrl")?spa.components[e].templateUrl:s);var i=t&&t.saveOptions?spa.components[e]:$.extend({},spa.components[e]);t&&(t.hasOwnProperty("mountComponent")||delete i.mountComponent,$.extend(i,t)),i.hasOwnProperty("style")&&spa.is(i.style,"string")&&(i.dataStyles={},i.dataStyles[e+"Style"]="."==i.style||"$"==i.style?r+".css":i.style,delete i.style),spa.render(i)},l=function(){spa.components.hasOwnProperty(e)||(t.hasOwnProperty("componentName")||(t.componentName=e),spa.components[e]=t),p()};spa.components.hasOwnProperty(e)?p():o?$.cachedScript(o,{success:l}).done(spa.noop).fail(function(){l()}):l()}},spa.renderComponents=spa.$$render=function(){if(arguments.length){var e=arguments;1==arguments.length&&(e=_.isArray(arguments[0])?arguments[0]:_.isString(arguments[0])?arguments[0].split(","):arguments[0]),spa.is(e,"object")?_.each(Object.keys(e),function(t){spa.renderComponent(t,e[t])}):e&&e.length&&_.each(e,function(e){spa.renderComponent(e.trim())})}},spa.refreshComponents=spa.$$refresh=function(){if(arguments.length){var e=arguments;1==arguments.length&&(e=_.isArray(arguments[0])?arguments[0]:_.isString(arguments[0])?arguments[0].split(","):arguments[0]),spa.is(e,"object")?_.each(Object.keys(e),function(t){spa.refreshComponent(t,e[t])}):e&&e.length&&_.each(e,function(e){spa.refreshComponent(e.trim())})}},spa.renderComponentsInHtml=function(e,t,a){e=e||"body";var n=$(e).find("[data-spa-component"+(t?"="+t:"")+"]"),r={},s=!a;n.length&&n.each(function(t,a){var n,i,o,p=$(a),l=p.data();if(n=l.spaComponent,a.id||(o="spaCompContainer_"+n+"_"+($("body").find("[rel=spaComponentContainer_"+n+"]").length+1),a.id=o,a.setAttribute("rel","spaComponentContainer_"+n)),i=_.merge({target:"#"+a.id},l,spa.toJSON(l.spaComponentOptions||"{}")),s){if(!r.hasOwnProperty(n)){var c=$(e).find("[data-spa-component="+n+"]");c.length>1&&(i.mountComponent={scope:e,name:n}),r[n]=spa.renderComponent(n,i)}}else spa.renderComponent(n,i)})},spa.renderUtils={array2ObjWithKeyPrefix:function(e,t,a){var n={};return _.each(e,function(e){e=(""+e).trimStr(),e&&(n[t+(e.equals(".")?a:e).replace(/[^a-z0-9]/gi,"_")]=""+e)}),n},getFn:function(e){var t,a=e;return e&&_.isString(e)&&(a=spa.findSafe(window,e)),a&&_.isFunction(a)?a:t},runCallbackFn:function(e,t,a){if(e){var n,r=e,s=a;_.isString(r)&&(s||(e.match("]$")?n=e.substring(0,e.lastIndexOf("[")):e.indexOf(".")>0&&(n=e.substring(0,e.lastIndexOf("."))),s=n?spa.findSafe(window,n):window),r=spa.findSafe(window,r)),r?_.isFunction(r)&&r.call(s,t):(""+e).beginsWithStr("spa")&&(""+e).endsWithStr("_renderCallback")}},registerComponentEvents:function(e){e&&app[e]&&app[e].hasOwnProperty("events")&&_.each(Object.keys(app[e].events),function(t){app[e].events[t].hasOwnProperty("target")&&!spa.isBlank(app[e].events[t].target)&&$("body").find(app[e].events[t].target).filter(":not([spa-events-"+t+'="'+e+'"])').attr("spa-events-"+t,e).each(function(a,n){_.each(Object.keys(app[e].events[t]),function(a){0==a.indexOf("on")&&_.each(a.split("_"),function(r){$(n).on(r.trimLeftStr("on").toLowerCase(),app[e].events[t][a])})})})})}},spa.render=function(viewContainerId,uOptions){if(arguments.length){if(1===arguments.length&&"object"==typeof viewContainerId)return uOptions=_.merge({},viewContainerId),uOptions.hasOwnProperty("target")?(viewContainerId=uOptions.target,delete uOptions.target):viewContainerId="dynRender_"+spa.now()+"_"+spa.rand(1e3,9999),spa.render(viewContainerId,uOptions),void 0;uOptions&&function transOptions(e){var t={template:"dataTemplate",templates:"dataTemplates",templateCache:"dataTemplatesCache",templatesCache:"dataTemplatesCache",html:"dataTemplate",htmls:"dataTemplates",htmlCache:"dataTemplatesCache",htmlsCache:"dataTemplatesCache",script:"dataScripts",scripts:"dataScripts",scriptCache:"dataScriptsCache",scriptsCache:"dataScriptsCache",style:"dataStyles",styles:"dataStyles",styleCache:"dataStylesCache",stylesCache:"dataStylesCache",renderType:"dataRenderType",dataRenderCallBack:"dataRenderCallback",renderCallback:"dataRenderCallback",renderCallBack:"dataRenderCallback",callback:"dataRenderCallback",callBack:"dataRenderCallback",dataRenderMode:"dataRenderMode",renderMode:"dataRenderMode",renderId:"dataRenderId"};_.each(t,function(t,a){e.hasOwnProperty(a)&&(e[t]=uOptions[a],delete e[a])})}(uOptions);var retValue={id:"",view:{},model:{},cron:"",elDataAttr:{},target:viewContainerId,iOptions:uOptions},spaAjaxRequestsQue=[],doDeepRender=!1,foundViewContainer=spa.isElementExist(viewContainerId);foundViewContainer&&(retValue.elDataAttr=$(viewContainerId).data());var noOfArgs=arguments.length,useOptions=noOfArgs>1,useParamData=useOptions&&uOptions.hasOwnProperty("data"),dataFound=!0,rCompName=uOptions&&uOptions.componentName?uOptions.componentName:"",spaRVOptions={data:{},dataUrl:"",dataUrlParams:{},dataUrlMethod:"GET",dataUrlErrorHandle:"",dataParams:{},dataExtra:{},data_:{},dataDefaults:{},dataModel:"",dataValidate:!1,dataProcess:"",dataCache:!1,dataCollection:{},dataTemplates:{},dataTemplate:"",dataTemplatesCache:!0,dataScripts:{},dataScriptsCache:!0,dataStyles:{},dataStylesCache:!0,dataRenderCallback:"",dataRenderMode:"",skipDataBind:!1,dataRenderId:""};if(foundViewContainer||(spa.isElementExist("#spaRunTimeHtmlContainer")||$("body").append("<div id='spaRunTimeHtmlContainer' style='display:none;'></div>"),$("#spaRunTimeHtmlContainer").append("<div id='"+viewContainerId.replace(/\#/gi,"")+"'></div>")),useOptions){var saveOptions=uOptions.hasOwnProperty("saveOptions")&&uOptions.saveOptions;for(var key in uOptions)spaRVOptions[key]=uOptions[key],saveOptions&&"data"!==key&&"saveOptions"!==key&&$(viewContainerId).data(""+(""+(_.at(""+key,4)||"")).toLowerCase()+key.slice(5),spa.toStr(uOptions[key]))}var $viewContainerId=$(viewContainerId),_renderOptionInAttr=function(e){return(""+$viewContainerId.data(e)).replace(/undefined/,"")},_renderOption=function(e,t){return spa.isBlank(spaRVOptions[e])?_renderOptionInAttr(t):spaRVOptions[e]},spaRenderId=_renderOption("dataRenderId","renderId");retValue.id=spaRenderId.ifBlankStr("spaRender"+spa.now()+spa.rand(1e3,9999));var targetRenderMode=_renderOption("dataRenderMode","renderMode"),spaTemplateType="x-spa-template",spaTemplateEngine=spa.defaults.dataTemplateEngine||"handlebars";if(!useOptions||!uOptions.hasOwnProperty("dataScriptsCache")){var scriptsCacheInTagData=_renderOptionInAttr("scriptsCache");spa.isBlank(scriptsCacheInTagData)||(spaRVOptions.dataScriptsCache=scriptsCacheInTagData.toBoolean())}var vScriptsList=_renderOptionInAttr("scripts");vScriptsList&&spa.isBlank((vScriptsList||"").replace(/[^:'\"]/g,""))&&(vScriptsList="'"+vScriptsList.split(",").join("','")+"'");var vScripts=spa.toJSON(vScriptsList||"{}");if(!_.isObject(spaRVOptions.dataScripts)&&_.isString(spaRVOptions.dataScripts)&&(vScriptsList=(spaRVOptions.dataScripts||"").trimStr(),spa.isBlank((vScriptsList||"").replace(/[^:'\"]/g,""))&&(vScriptsList="'"+vScriptsList.split(",").join("','")+"'"),spaRVOptions.dataScripts=spa.toJSON(vScriptsList)),$.isEmptyObject(spaRVOptions.dataScripts)||(vScripts=spaRVOptions.dataScripts),_.isArray(vScripts)&&_.remove(vScripts,function(e){return!e}),vScripts&&!$.isEmptyObject(vScripts)){if(_.isArray(vScripts)){var newScriptsObj=spa.renderUtils.array2ObjWithKeyPrefix(vScripts,"__scripts_",viewContainerId);vScripts=_.isEmpty(newScriptsObj)?{}:newScriptsObj}var vScriptsNames=_.keys(vScripts);_.each(vScriptsNames,function(e){spaAjaxRequestsQue=spa.loadScript(e,vScripts[e],spaRVOptions.dataScriptsCache,spaAjaxRequestsQue)})}$.when.apply($,spaAjaxRequestsQue).then(function(){}).fail(function(){});var dataModelName=_renderOption("dataModel","model"),dataModelUrl=_renderOption("dataUrl","url"),viewDataModelName,isLocalDataModel=useParamData||dataModelUrl.beginsWithStrIgnoreCase("local:"),defaultDataModelName=dataModelUrl.beginsWithStrIgnoreCase("local:")?dataModelUrl.replace(/local:/gi,""):"data";dataModelName=dataModelName.ifBlankStr(defaultDataModelName),viewDataModelName=dataModelName.replace(/\./g,"_");var spaTemplateModelData={};if(useParamData)spaTemplateModelData[viewDataModelName]=spaRVOptions.data;else{if(!useOptions||!uOptions.hasOwnProperty("dataCache")){var dataCacheInTagData=_renderOptionInAttr("cache");spa.isBlank(dataCacheInTagData)||(spaRVOptions.dataCache=dataCacheInTagData.toBoolean())}if(spa.isBlank(dataModelUrl)){spaTemplateModelData[viewDataModelName]={};var dataModelCollection=_renderOptionInAttr("collection");dataModelCollection&&(dataModelCollection=spa.toJSON(dataModelCollection)),spa.isBlank(spaRVOptions.dataCollection)||(dataModelCollection=spaRVOptions.dataCollection),_.isArray(dataModelCollection)&&(dataModelCollection={urls:dataModelCollection});var dataModelUrls=dataModelCollection.urls;if(spa.isBlank(dataModelUrls))spaTemplateModelData[viewDataModelName]=_.merge({},spaRVOptions);else if(_.isArray(dataModelUrls)){var dataIndexApi=0,defaultAutoDataNamePrefix=dataModelCollection.nameprefix||"data";_.each(dataModelUrls,function(dataApi){var defaultApiDataModelName=defaultAutoDataNamePrefix+dataIndexApi,apiDataModelName=_.has(dataApi,"name")?(""+dataApi.name).replace(/[^a-zA-Z0-9]/gi,""):_.has(dataApi,"target")?""+dataApi.target:defaultApiDataModelName,apiDataUrl=_.has(dataApi,"url")?dataApi.url:_.has(dataApi,"path")?dataApi.path:"";apiDataModelName.containsStr(".")&&(apiDataModelName=_.last(apiDataModelName.split("."),1)),apiDataModelName=apiDataModelName.ifBlankStr(defaultApiDataModelName),apiDataUrl&&(_.has(dataApi,"urlParams")&&(apiDataUrl=spa.api.url(apiDataUrl,dataApi.urlParams)),spaAjaxRequestsQue.push($.ajax({url:apiDataUrl,method:(""+(dataApi.method||"GET")).toUpperCase(),data:_.has(dataApi,"params")?dataApi.params:_.has(dataApi,"data")?dataApi.data:{},cache:_.has(dataApi,"cache")?dataApi.cache:spaRVOptions.dataCache,dataType:"text",success:function(result){var targetApiData,targetDataModelName=_.has(dataApi,"target")?""+dataApi.target:"",oResult=spa.toJSON(""+result,"data");if(targetDataModelName.indexOf(".")>0)targetApiData=spa.hasKey(oResult,targetDataModelName)?spa.find(oResult,targetDataModelName):oResult;else try{targetApiData=oResult.hasOwnProperty(targetDataModelName)?oResult[targetDataModelName]:oResult}catch(e){}spaTemplateModelData[viewDataModelName][apiDataModelName]?(spaTemplateModelData[viewDataModelName][apiDataModelName]=[spaTemplateModelData[viewDataModelName][apiDataModelName]],spaTemplateModelData[viewDataModelName][apiDataModelName].push(targetApiData)):spaTemplateModelData[viewDataModelName][apiDataModelName]=targetApiData;var fnApiDataSuccess=dataApi.success||dataApi.onsuccess||dataApi.onSuccess;fnApiDataSuccess||(fnApiDataSuccess=dataModelCollection.success||dataModelCollection.onsuccess||dataModelCollection.onSuccess),fnApiDataSuccess&&(_.isFunction(fnApiDataSuccess)?fnApiDataSuccess(oResult,dataApi):_.isString(fnApiDataSuccess)&&eval("("+fnApiDataSuccess+"(oResult, dataApi))"))},error:function(jqXHR,textStatus,errorThrown){var fnOnApiDataUrlErrorHandle=dataApi.error||dataApi.onerror||dataApi.onError;fnOnApiDataUrlErrorHandle||(fnOnApiDataUrlErrorHandle=dataModelCollection.error||dataModelCollection.onerror||dataModelCollection.onError,fnOnApiDataUrlErrorHandle||spa.isBlank(spaRVOptions.dataUrlErrorHandle)||(fnOnApiDataUrlErrorHandle=spaRVOptions.dataUrlErrorHandle)),fnOnApiDataUrlErrorHandle?_.isFunction(fnOnApiDataUrlErrorHandle)?fnOnApiDataUrlErrorHandle(jqXHR,textStatus,errorThrown):_.isString(fnOnApiDataUrlErrorHandle)&&eval("("+fnOnApiDataUrlErrorHandle+"(jqXHR, textStatus, errorThrown))"):spa.api.onReqError(jqXHR,textStatus,errorThrown)}}))),dataIndexApi++})}else;}else if(dataModelUrl.beginsWithStrIgnoreCase("local:")){var localDataModelName=dataModelUrl.replace(/local:/gi,""),localDataModelObj={};if(eval("("+localDataModelName+")")!==void 0&&eval("(localDataModelObj="+localDataModelName+")"),!isLocalDataModel&&dataModelName.indexOf(".")>0)spaTemplateModelData[viewDataModelName]=spa.hasKey(localDataModelObj,dataModelName)?spa.find(localDataModelObj,dataModelName):localDataModelObj;else try{spaTemplateModelData[viewDataModelName]=localDataModelObj.hasOwnProperty(dataModelName)?localDataModelObj[dataModelName]:localDataModelObj}catch(e){}}else spa.isBlank(spaRVOptions.dataUrlParams)||(dataModelUrl=spa.api.url(dataModelUrl,spaRVOptions.dataUrlParams)),spaAjaxRequestsQue.push($.ajax({url:dataModelUrl,method:(""+(_renderOption("dataUrlMethod","urlMethod")||"GET")).toUpperCase(),data:spaRVOptions.dataParams,cache:spaRVOptions.dataCache,dataType:"text",success:function(e){var t=spa.toJSON(""+e,"data"),a=_renderOption("dataValidate","validate");if(dataModelName.indexOf(".")>0)spaTemplateModelData[viewDataModelName]=spa.hasKey(t,dataModelName)?spa.find(t,dataModelName):t;else try{"data"!=dataModelName||t.hasOwnProperty(dataModelName)||(dataModelName="Data",viewDataModelName="Data"),spaTemplateModelData[viewDataModelName]=!a&&t.hasOwnProperty(dataModelName)?t[dataModelName]:t}catch(n){}},error:function(jqXHR,textStatus,errorThrown){var fnOnDataUrlErrorHandle=_renderOption("dataUrlErrorHandle","urlErrorHandle");spa.isBlank(fnOnDataUrlErrorHandle)?spa.api.onReqError(jqXHR,textStatus,errorThrown):eval("("+fnOnDataUrlErrorHandle+"(jqXHR, textStatus, errorThrown))")}}))}if(dataFound){var vTemplate2RenderInTag=_renderOptionInAttr("template")||_renderOptionInAttr("html"),vTemplatesList=_renderOptionInAttr("templates")||_renderOptionInAttr("htmls");vTemplatesList&&spa.isBlank((vTemplatesList||"").replace(/[^:'\"]/g,""))&&(vTemplatesList="'"+vTemplatesList.split(",").join("','")+"'");var vTemplates=spa.toJSON(vTemplatesList||"{}");if(!_.isObject(spaRVOptions.dataTemplates)&&_.isString(spaRVOptions.dataTemplates)&&(vTemplatesList=(spaRVOptions.dataTemplates||"").trimStr(),spa.isBlank((vTemplatesList||"").replace(/[^:'\"]/g,""))&&(vTemplatesList="'"+vTemplatesList.split(",").join("','")+"'"),spaRVOptions.dataTemplates=spa.toJSON(vTemplatesList)),$.isEmptyObject(spaRVOptions.dataTemplates)||(vTemplates=spaRVOptions.dataTemplates,vTemplatesList=""+JSON.stringify(vTemplates)),(_.isEmpty(spa.toJSON((vTemplatesList||"").trimStr()))||_.isArray(vTemplates)&&1==vTemplates.length&&spa.isBlank(vTemplates[0]))&&(vTemplates={},vTemplatesList=""),_.isArray(vTemplates)&&!_.isEmpty(vTemplates)){var newTemplatesObj=spa.renderUtils.array2ObjWithKeyPrefix(vTemplates,"__tmpl_",viewContainerId);_.isEmpty(newTemplatesObj)?(vTemplates={},vTemplatesList=""):(vTemplates=newTemplatesObj,vTemplatesList=""+JSON.stringify(vTemplates))}if(!vTemplates||$.isEmptyObject(vTemplates)){vTemplates={};var _dataTemplate=spaRVOptions.dataTemplate,_tmplKey="",_tmplLoc="";spa.isBlank(_dataTemplate)&&(spa.isBlank(vTemplate2RenderInTag)||(_dataTemplate=vTemplate2RenderInTag)),_dataTemplate=(_dataTemplate||"").trimStr(),spa.isBlank(_dataTemplate)||_dataTemplate.equalsIgnoreCase("inline")||_dataTemplate.equals(".")?_tmplKey="_tmplInline_"+viewContainerId.trimStr("#"):_dataTemplate.beginsWithStr("#")?_tmplKey=_dataTemplate.trimStr("#"):(_tmplKey="__tmpl_"+(""+_dataTemplate).replace(/[^a-z0-9]/gi,"_"),_tmplLoc=_dataTemplate),vTemplates[_tmplKey]=_tmplLoc.replace(/['\"]/g,"")}if(vTemplates&&!$.isEmptyObject(vTemplates)){var vTemplateNames=_.keys(vTemplates);if(!useOptions||!uOptions.hasOwnProperty("dataTemplatesCache")){var templatesCacheInTagData=_renderOptionInAttr("templatesCache")||_renderOptionInAttr("templateCache")||_renderOptionInAttr("htmlsCache")||_renderOptionInAttr("htmlCache");spa.isBlank(templatesCacheInTagData)||(spaRVOptions.dataTemplatesCache=templatesCacheInTagData.toBoolean())}_.each(vTemplateNames,function(e){spaAjaxRequestsQue=spa.loadTemplate(e,vTemplates[e],spaTemplateType,viewContainerId,spaAjaxRequestsQue,!spaRVOptions.dataTemplatesCache)});var vTemplate2RenderID="#"+vTemplateNames[0].trimStr("#");if(!useOptions||!uOptions.hasOwnProperty("dataStylesCache")){var stylesCacheInTagData=_renderOptionInAttr("stylesCache");spa.isBlank(stylesCacheInTagData)||(spaRVOptions.dataStylesCache=stylesCacheInTagData.toBoolean())}var vStylesList=_renderOptionInAttr("styles");vStylesList&&spa.isBlank((vStylesList||"").replace(/[^:'\"]/g,""))&&(vStylesList="'"+vStylesList.split(",").join("','")+"'");var vStyles=spa.toJSON(vStylesList||"{}");if($.isEmptyObject(spaRVOptions.dataStyles)||(vStyles=spaRVOptions.dataStyles),_.isArray(vStyles)&&_.remove(vStyles,function(e){return!e}),vStyles&&!$.isEmptyObject(vStyles)){if(_.isArray(vStyles)){var newStylesObj=spa.renderUtils.array2ObjWithKeyPrefix(vStyles,"__styles_",viewContainerId);vStyles=_.isEmpty(newStylesObj)?{}:newStylesObj}var vStylesNames=_.keys(vStyles);_.each(vStylesNames,function(e){spaAjaxRequestsQue=spa.loadStyle(e,vStyles[e],spaRVOptions.dataStylesCache,spaAjaxRequestsQue)})}$.when.apply($,spaAjaxRequestsQue).then(function(){spa.isBlank(targetRenderMode)&&$(viewContainerId).html("");try{var e=!_renderOption("dataValidate","validate");if(!e){var t=_renderOption("dataValidate","validate");t&&_.isString(t)&&(t=spa.findSafe(window,t)),e=t&&_.isFunction(t)?t.call(spaTemplateModelData[viewDataModelName],spaTemplateModelData[viewDataModelName]):spa.api.isCallSuccess(spaTemplateModelData[viewDataModelName])}if(e){var a=_renderOption("dataProcess","process");if(a&&_.isString(a)&&(a=spa.findSafe(window,a)),retValue.modelOriginal=$.extend({},spaTemplateModelData[viewDataModelName]),retValue.model=spaTemplateModelData[viewDataModelName],a&&_.isFunction(a)&&(retValue.model=a.call($.extend({},app[rCompName]||{}),spaTemplateModelData[viewDataModelName],spaRVOptions),_.isObject(retValue.model)||(retValue.model=retValue.modelOriginal)),rCompName){if(is(app,"object")&&app.hasOwnProperty(rCompName)){var n=_.merge({},is(retValue.model,"object")?retValue.model:{_noname:retValue.model});app[rCompName].$data=n.hasOwnProperty("spaComponent")?{}:_.merge({},spaRVOptions.dataDefaults,spaRVOptions.data_,spaRVOptions.dataExtra,spaRVOptions.dataParams,n),app[rCompName].__global__=window||{}
}retValue.model._this=_.merge({},spa.findSafe(window,"app."+rCompName,{})),retValue.model._this_=_.merge({},spa.components[rCompName]||{},uOptions)}retValue.model._global_=window||{};var r,s=retValue.model,i=($(vTemplate2RenderID).html()||"").replace(/_SCRIPTTAGINTEMPLATE_/g,"script").replace(/_LINKTAGINTEMPLATE_/g,"link"),o=i.match(/({\s*\@\$(.*?)\s*})/g);!spaRVOptions.skipDataBind&&o&&_.forEach(o,function(e){i=i.replace(RegExp(e.replace(/\$/,"\\$"),"g"),e.replace(/{\s*\$this|{\s*\@\$/g,"_global_.app.").replace(/}/,".").replace(/\s/g,"").replace(/\.\./,"."+(rCompName||"")+"."))});var p=i.match(/({\s*\$(.*?)\s*})/g);if(!spaRVOptions.skipDataBind&&p&&_.forEach(p,function(e){i=i.replace(RegExp(e.replace(/\$/,"\\$"),"g"),e.replace(/{\s*\$this|{\s*\$/g,"app.").replace(/}/,".").replace(/\s/g,"").replace(/\.\./,"."+(rCompName||"")+"."))}),r=i,!spa.isBlank(s)&&"undefined"!=typeof Handlebars&&Handlebars&&!spaRVOptions.skipDataBind){var l=spa.compiledTemplates[vTemplate2RenderID]||Handlebars.compile(i),c=is(s,"object")?_.merge({},retValue,spaRVOptions.dataDefaults,spaRVOptions.data_,spaRVOptions.dataExtra,spaRVOptions.dataParams,s):s;spa.compiledTemplates.hasOwnProperty(vTemplate2RenderID)||(spa.compiledTemplates[vTemplate2RenderID]=l),r=l(c)}doDeepRender=!1,retValue.view=r.replace(/\_\{/g,"{{").replace(/\}\_/g,"}}");var u=_renderOption("dataRenderType","renderType");switch(u){case"value":$(viewContainerId).val(retValue.view);break;case"text":$(viewContainerId).text(retValue.view);break;default:if(doDeepRender=!0,spa.isBlank(targetRenderMode))$(viewContainerId).html(retValue.view);else switch(!0){case targetRenderMode.equalsIgnoreCase("append"):$(viewContainerId).append(retValue.view);break;case targetRenderMode.equalsIgnoreCase("prepend"):$(viewContainerId).prepend(retValue.view);break;default:$(viewContainerId).html(retValue.view)}}_$renderCountUpdate(rCompName);var d=_.keys(spa.renderHistory),f=d.length;if(f>spa.renderHistoryMax&&$.each(d.splice(0,f-spa.renderHistoryMax),function(e,t){delete spa.renderHistory[t]}),retValue.cron=""+spa.now(),spa.renderHistoryMax>0&&(spa.renderHistory[retValue.id]=retValue),doDeepRender){if(spa.reflowFoundation(viewContainerId),spa.initKeyTracking(),spa.i18n.apply(viewContainerId),spa.hasOwnProperty("initDataValidation")){var g,m;$(viewContainerId).find("[data-validate-form],[data-validate-scope]").each(function(e,t){g=$(t),m=g.data(),g.attr("onsubmit")||g.attr("onsubmit","return false;"),g.attr("data-validate-common")||g.attr("data-validate-common","{onFocus:{fn:_clearSpaValidateMsg}}"),spa.initDataValidation("#"+((m.validateForm||m.validateScope||"").replace(/#/g,"")||t.id))})}spa.initRoutes(viewContainerId)}spa.initTogglePassword(viewContainerId),spa.initTrackFormElChanges(viewContainerId),spa.renderUtils.registerComponentEvents(rCompName);var h=rCompName?_.merge({},app[rCompName]||{},{__prop__:_.merge({},uOptions||{})}):{};h.__prop__&&h.__prop__.data&&(delete h.__prop__.data._global_,delete h.__prop__.data._this_,delete h.__prop__.data._this),retValue.model&&(delete retValue.model._global_,delete retValue.model._this_,delete retValue.model._this),spa.renderUtils.runCallbackFn(spa.defaults.components.callback,retValue,h);var v=_renderOptionInAttr("renderCallback");spaRVOptions.dataRenderCallback&&(v=spaRVOptions.dataRenderCallback);var y=_.isString(v)&&v.equalsIgnoreCase("off");y||(isSpaHashRouteOn&&spa.routes&&spa.routes.hasOwnProperty("_renderCallback")&&_.isFunction(spa.routes._renderCallback)&&spa.routes._renderCallback.call(h,retValue),spa.renderUtils.runCallbackFn(v,retValue)),doDeepRender&&($(viewContainerId).find("[rel='spaRender'],[data-render],[data-sparender],[data-spa-render]").spaRender(),spaRVOptions.hasOwnProperty("mountComponent")&&($(viewContainerId).removeAttr("data-spa-component"),spa.renderComponentsInHtml(spaRVOptions.mountComponent.scope,spaRVOptions.mountComponent.name,!0)),spa.renderComponentsInHtml(viewContainerId))}else spa.api.onResError(spaTemplateModelData[viewDataModelName],"Invalid-Data",void 0)}catch(b){}}).fail(function(){}).done(spa.runOnceOnRender)}}return retValue}},spa.hasAutoRoutes=function(e,t){var a="[data-sparoute-default]"+(e?"[href"+(t?t:"")+"='"+e+"']":"");return $(a).length>0},spa.routeCurLocHashAttemptDelaySec=3,spa.routeCurLocHashAttempt=0,spa.routeCurLocHash=function(){var e=(spa.getLocHash()||"").ifBlankStr(spa.routesOptions.defaultPageRoute);isSpaHashRouteOn&&e&&!spa.hasAutoRoutes(e)&&(spa.route(e)||5>spa.routeCurLocHashAttempt&&(spa.routeCurLocHashAttempt++,setTimeout(spa.routeCurLocHash,1e3*spa.routeCurLocHashAttemptDelaySec)))},spa.finallyOnRender=[],spa.runOnceOnRenderFunctions=[spa.routeCurLocHash],spa.runOnceOnRender=function(){(spa.runOnceOnRenderFunctions&&!_.isEmpty(spa.runOnceOnRenderFunctions)||spa.finallyOnRender&&!_.isEmpty(spa.finallyOnRender))&&(spa.runOnceOnRenderFunctions||(spa.runOnceOnRenderFunctions=[]),_.isArray(spa.runOnceOnRenderFunctions)||(spa.runOnceOnRenderFunctions=[spa.runOnceOnRenderFunctions]),_.isArray(spa.runOnceOnRenderFunctions)&&(spa.finallyOnRender&&(_.isArray(spa.finallyOnRender)||(spa.finallyOnRender=[spa.finallyOnRender]),spa.runOnceOnRenderFunctions=spa.runOnceOnRenderFunctions.concat(spa.finallyOnRender)),_.each(spa.runOnceOnRenderFunctions,function(e){_.isFunction(e)&&e()})),spa.finallyOnRender=spa.runOnceOnRenderFunctions=void 0)},spa.setElIdIfNot=function(e){var t=$(e);return spa.isBlank(t.attr("id"))&&t.attr("id","_el_"+spa.now()+"_"+spa.rand(1e3,9999)),t.attr("id")},spa.Foundation={autoReflow:!1},spa.reflowFoundation=function(e){"Foundation"in window&&spa.Foundation.autoReflow&&$(e||document).foundation("reflow")},$.expr[":"].regex=function(e,t,a){var n=a[3].split(","),r=/^(data|css):/,s={method:n[0].match(r)?n[0].split(":")[0]:"attr",property:n.shift().replace(r,"")},i="ig",o=RegExp(n.join("").replace(/^\s+|\s+$/g,""),i);return o.test($(e)[s.method](s.property))},$.fn.extend({spaRender:function(e){this.each(function(){__renderView(this,e)})}}),$.extend({spaRender:function(e,t){$(e).spaRender(t)}}),spa.initDataValidation=function(){},spa.doDataValidation=function(){},spa.properties={version:spa.VERSION},spa.routes={},spa.routesOptions={useHashRoute:!0,usePatterns:!0,defaultPageRoute:"",beforeRoute:"",defaultTemplateExt:".html",defaultScriptExt:".js",loadDefaultScript:!0,defaultRouteTargetContainerIdPrefix:"routeContainer_",defaultRouteTemplateContainerIdPrefix:"template_"},spa.routePatterns={routes:[],register:void 0,deregister:void 0},spa.routePatterns.register=function(e,t){if(e&&!_.isEmpty(e)){var a=function(e,t){_.has(e,"pattern")&&(e.pattern=e.pattern.replace(/\?/g,"\\?"),_.has(e,"name")||(e.name=e.pattern.replace(/[^a-z0-9_]/gi,"")),_.has(e,"routeoptions")||(e.routeoptions={}),_.find(spa.routePatterns.routes,{pattern:e.pattern})||(_.find(spa.routePatterns.routes,{name:e.name})?t&&spa.routePatterns.routes.push(e):spa.routePatterns.routes.push(e)))};_.isArray(e)?_.each(e,function(e){a(e,t)}):_.isObject(e)&&a(e,t)}},spa.routePatterns.deregister=function(e){if(e&&!_.isEmpty(e)){var t=function(e){if(e){var t=_.findIndex(spa.routePatterns.routes,function(t){return t.name==e||t.pattern==e});t>=0&&_.pullAt(spa.routePatterns.routes,t)}};_.isArray(e)?_.each(e,function(e){t(e)}):_.isString(e)&&t(e)}},spa.routeName=function(e){var t=e||spa.urlHash();return t.containsStr("\\?")&&(t=t.split("?")[0]),t.trimLeftStr("#").replace(/[^a-z0-9]/gi,"_")},spa.routeContainerId=function(e){var t=spa.routesOptions.defaultRouteTargetContainerIdPrefix.trimLeftStr("#");return t+spa.routeName(e)},spa.routeTemplateId=function(e){var t=spa.routesOptions.defaultRouteTemplateContainerIdPrefix.trimLeftStr("#");return t+spa.routeName(e)},spa.routeRender=function(e,t){var a=e?$(e):void 0,n=a?""+a.data("sparoute")||"":"";(n.trimStr().equalsIgnoreCase("false")||n.trimStr().equalsIgnoreCase("no")||n.trimStr().equalsIgnoreCase("off"))&&(n="quit:true");var r=n?spa.toJSON(n):{};if(_.merge(r,t),!r.hasOwnProperty("quit")||!r.quit){var s="#RouteNotDefinedInHREF";a?s=a.attr("href"):t.urlhash&&(s=t.urlhash.url),s=s.trimLeftStr("#");var i="";if(s.containsStr("\\?")){var o=s.split("?");s=o[0],i=o[1]}var p=r.name||spa.routeName(s);if(s+=s.endsWithStr("/")?"index":"",spa.routes[p])spa.routes[p](a,i,r);else{var l=r.hasOwnProperty("ext")||r.hasOwnProperty("tmplext")||r.hasOwnProperty("tmplExt"),c=""+(r.target||"").trimStr(),u=l?r.ext||r.tmplext||r.tmplExt:spa.routesOptions.defaultTemplateExt||"",d=(s+u+"?"+i).trimRightStr("\\?"),f=s+(spa.routesOptions.defaultScriptExt||".js"),g="spa.routes."+p+"_before",m="spa.routes."+p+"_renderCallback",h=spa.findIgnoreCase(r,"usetargetoptions"),v={dataRenderCallback:m,rElRouteOptions:r,rElDataAttr:a?a.data():{}};r.hasOwnProperty("template")&&!r.hasOwnProperty("templates")&&(r.templates=r.template,delete r.template),c.equalsIgnoreCase(".")?c="#"+spa.setElIdIfNot(a):spa.isBlank(c)&&(c="#"+spa.routeContainerId(p));var y=spa.isElementExist(c);r.hasOwnProperty("dataCache")&&(v.dataCache=r.dataCache),(r.hasOwnProperty("templatesCache")||r.hasOwnProperty("templateCache")||r.hasOwnProperty("htmlsCache")||r.hasOwnProperty("htmlCache"))&&(v.dataTemplatesCache=r.templatesCache||r.templateCache||r.htmlsCache||r.htmlCache),(r.hasOwnProperty("scriptsCache")||r.hasOwnProperty("scriptCache"))&&(v.dataScriptsCache=r.scriptsCache||r.scriptCache),v.dataTemplates={};var b="__spaRouteTemplate_"+p;if(!r.hasOwnProperty("templates")||r.templates){var S=r.templates,O=spa.routeTemplateId(p),T="#"+O,C="__tmpl_"+O;switch(!0){case _.isString(S):var w=b,k=S.trimStr();k.equalsIgnoreCase(".")?k=d:k.equalsIgnoreCase("#")&&(w=C,k=T),v.dataTemplates[w]=k.ifBlankStr("none");break;case _.isArray(S):_.indexOf(S,".")>=0&&(v.dataTemplates[b+"_dot"]=d,_.pull(S,".")),_.indexOf(S,"#")>=0&&(v.dataTemplates[C]=T,_.pull(S,"#")),_.each(S,function(e,t){v.dataTemplates[b+"_"+(t+1)]=e.ifBlankStr("none")});break;default:v.dataTemplates[b]=d}}else v.dataTemplates[b]="none";var A=!r.hasOwnProperty("scripts")||r.scripts;if(A){v.dataScripts={};var x="__spaRouteScript_"+p;switch(!0){case _.isString(r.scripts):v.dataScripts[x]=r.scripts.equalsIgnoreCase(".")?f:r.scripts;break;case _.isArray(r.scripts):_.indexOf(r.scripts,".")>=0&&(v.dataScripts[x]=f,_.pull(r.scripts,".")),_.each(r.scripts,function(e,t){v.dataScripts[x+"_"+(t+1)]=e});break;default:spa.routesOptions.loadDefaultScript&&(v.dataScripts[x]=f)}}if(r.dataUrl||r.dataurl){var R=r.dataurl||r.dataUrl,j=spa.toRenderDataStructure(R,i,spa.findSafe(t,"urlhash.urlParams.params",{}));_.isEmpty(j)||_.merge(v,j)}var E=r.hasOwnProperty("after")||r.hasOwnProperty("callback")||r.hasOwnProperty("callBack");if((E||r.after||r.callback||r.callBack)&&(v.dataRenderCallback=r.after||r.callback||r.callBack||""),r.hasOwnProperty("scripts")&&spa.isBlank(r.scripts)&&(E?_.isString(v.dataRenderCallback)&&v.dataRenderCallback.equalsIgnoreCase(".")&&(v.dataRenderCallback=m):v.dataRenderCallback=""),h&&y){var I=$(c);I.data("url")&&delete v.dataUrl,(I.data("template")||I.data("templates"))&&delete v.dataTemplates,I.data("scripts")&&delete v.dataScripts,I.data("renderCallback")&&delete v.dataRenderCallback}var P={},D=r.before||r.beforeroute||r.beforeRoute||spa.routesOptions.beforeRoute;D&&(!_.isFunction(D)&&_.isString(D)&&(D.equals(g)&&(g=void 0),D=spa.findSafe(window,D)),_.isFunction(D)&&(P=D.call(void 0,{el:a,target:c,renderOptions:v,routeOptions:r}),_.isObject(P)&&_.merge(v,P))),g&&(D=spa.findSafe(window,g),D&&_.isFunction(D)&&(P=D.call(void 0,{el:a,target:c,renderOptions:v,routeOptions:r}),_.isObject(P)&&_.merge(v,P))),v.hasOwnProperty("render")&&!v.render||r.hasOwnProperty("render")&&!r.render||spa.render(c,v)}return!0}},spa.route=function(e,t){if(_.isString(e)&&spa.isBlank((""+e).trimStr("#")))return!1;var a=!_.isString(e);if(t=t||{},!a){var n=$("[data-sparoute][href='"+e+"']");if(a=!_.isEmpty(n))e=n.get(0);else if(spa.routesOptions.usePatterns){var r,s=_.findIndex(spa.routePatterns.routes,function(t){var a=!1,n=spa.routeMatch(t.pattern,e);return n&&(a=!0,r=_.merge({},t.routeoptions||{}),r.urlhash={pattern:t.pattern.replace(/\\\?/g,"?"),url:e,urlParams:n}),a});0>s||spa.routeRender(void 0,r)}}if(!a){if(!t.forceroute&&!t.forceRoute)return!1;a=!0,e=$("<a href='"+e+"'></a>").get(0)}return a?spa.routeRender(e,t):void 0},spa.initRoutes=function(e,t){"object"==typeof e&&(t=e,e=t.context||t.scope||""),(!t||(_.merge(spa.routesOptions,t),!isSpaHashRouteOn&&spa.routesOptions.useHashRoute&&_initWindowOnHashChange(),isSpaHashRouteOn&&!spa.routesOptions.useHashRoute&&_stopWindowOnHashChange(),t.hasOwnProperty("context")||t.hasOwnProperty("scope")))&&$(e||"body").find("[data-sparoute]").each(function(e,t){spa.isBlank((($(t).attr("href")||"")+"#").split("#")[1])||($(t).off("click"),$(t).on("click",function(){if(isSpaHashRouteOn){var e="#"+(($(t).attr("href")||"")+"#").split("#")[1].trimStr("#"),a=spa.getLocHash();e.equals(a)&&spa.route(this)}else spa.route(this)}),t.hasAttribute("data-sparoute-default")&&spa.route(t))})},spa.api={baseUrl:"",liveUrlSuffix:"",urls:{},mock:!1,forceParamValuesInMockUrls:!1,urlKeyIndicator:"@",url:function(e,t){e=(e||"").trimLeftStr(spa.api.urlKeyIndicator),t=t||{};var a,n,r=spa.api.urls[e]||e,s=r.beginsWithStr("!")||spa.api.mock,i=r.beginsWithStr("!!")||r.beginsWithStr("~")||spa.api.forceParamValuesInMockUrls,o=_.uniq(r.extractStrBetweenIn("{","}"));return spa.isBlank(o)||_.each(o,function(e){a=e.replace(/[{}<>]/g,""),a&&t.hasOwnProperty(a)&&(n=s&&!i?e.containsStr(">")?t[a]:"_"+a:t[a],r=r.replace(RegExp(e,"g"),n))}),r},isCallSuccess:function(){return!0},onReqError:function(){},onResError:function(){},_call:function(e){var t=spa.is(e,"object")&&e.hasOwnProperty("dataType")?e.dataType:"text",a=spa.is(e,"object")&&e.hasOwnProperty("error")?e.error:spa.api.onReqError;return e=$.extend(e,{dataType:t,error:a,success:function(t,a,n){t=_.isString(t)?spa.toJSON(t):t,spa.api.isCallSuccess(t)?e._success(t,a,n):spa.api.onResError(t,a,n)}}),e.url.beginsWithStr(spa.api.urlKeyIndicator)&&(e.url=spa.api.url(e.url.trimLeftStr(spa.api.urlKeyIndicator),e.data)),$.ajax(e)},_params2AxOptions:function(){var e,t,a,n={method:"GET",url:"",data:{},_success:function(){},async:!0};return _.each(arguments,function(r){switch(!0){case _.isString(r):e="url",n.url&&(t=!0,e="data");break;case spa.is(r,"function"):e="_success";break;case _.isBoolean(r):e="async";break;case _.isObject(r):t||r.__hasPrimaryKeys("ajaxOptions|dataUrlParams")?(e="axOptions",a=r.hasOwnProperty("ajaxOptions")?r.ajaxOptions:r):(e="data",t=!0);break;default:e="unknown"}"axOptions"!=e&&(n[e]=r)}),a&&(a.dataUrlParams&&((""+n.url).beginsWithStr(spa.api.urlKeyIndicator)&&(n.url=spa.api.url(n.url.trimLeftStr(spa.api.urlKeyIndicator),a.dataUrlParams)),delete a.dataUrlParams),_.merge(n,a)),n},get:function(){return spa.api._call(spa.api._params2AxOptions.apply(void 0,arguments))},post:function(){return spa.api._call($.extend(spa.api._params2AxOptions.apply(void 0,arguments),{method:"POST"}))},put:function(){return spa.api._call($.extend(spa.api._params2AxOptions.apply(void 0,arguments),{method:"PUT"}))},del:function(){return spa.api._call($.extend(spa.api._params2AxOptions.apply(void 0,arguments),{method:"DELETE"}))}},spa.i18n.displayLang=function(){var e=$("html").attr("lang");if(e){var t=e.replace("-","_"),a=$('[data-i18n-lang="'+t+'"]'),n=($("body").attr("i18n-lang-key-prefix")||"lang.name.")+t;$(".lang-text").attr("data-i18n",n).data("i18n",n),a.length&&$(".lang-icon").removeClass(Array.prototype.join.call($("[data-i18n-lang]").map(function(e,t){return $(t).data("i18nLang")})," ")),$(".lang-icon").addClass(t),spa.i18n.apply(".lang-text")}},spa.ajaxPreProcess,spa.onReady,$(document).ready(function(){spa.debug=spa.urlParam("spa.debug")||spa.hashParam("spa.debug")||spa.debug,$.ajaxPrefilter(_ajaxPrefilter),spa.reflowFoundation();var e=$("body").data("sparouteInit");e&&spa.initRoutes(spa.toJSON(e)),spa.initRoutes("body"),"onhashchange"in window&&spa.isBlank(e)&&window.addEventListener("hashchange",function(){spa.onUrlHashChange&&spa.onUrlHashChange(spa.urlHash([]))}),spa.initKeyTracking(),init_i18n_Lang();var t=$("[rel='spaRender'],[data-render],[data-sparender],[data-spa-render]"),a=t.length;a?t.spaRender():($("body").append("<div id='initSpaRender0' data-template-engine='none' data-render-type='text' data-render-callback='off' style='display:none'>&nbsp;</div>"),$("#initSpaRender0").spaRender()),spa.renderComponentsInHtml(),spa.onReady&&spa.onReady()})}(this),spa.console.info("spa loaded.");