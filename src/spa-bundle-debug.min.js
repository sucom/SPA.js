/*@license SPA.js (Handlebars Helpers) [MIT]*/
!function(){var b=Array.prototype;function of(e){return Object.prototype.toString.call(e).replace(/\[object /,"").replace(/\]/,"").toLowerCase()}function is(e,t){return 0<=(""+t).toLowerCase().indexOf(of(e))}function hasPrimaryKeys(e,t){function checkForAll(e,t){for(var r=t.split(","),n="",a=0,o=!0,i=0;i<r.length;i++)(n=r[i].trim())&&(a++,o=o&&e.hasOwnProperty(n));return a&&o}var r=!1;if(is(e,"object")&&t)switch(!0){case 0<(t=""+t).indexOf("&"):r=checkForAll(e,t.replace(/\&/g,","));break;case 0<t.indexOf("|"):r=function checkForAny(e,t){for(var r=t.split(","),n="",a=0,o=!1,i=0;i<r.length&&((n=r[i].trim())&&(a++,o=o||e.hasOwnProperty(n)),!o);i++);return a&&o}(e,t.replace(/\|/g,","));break;default:r=checkForAll(e,t)}return r}function isHbOptions(e,t){return!!(is(e,"object")&&hasPrimaryKeys(e,"name,hash,data")&&hasPrimaryKeys(e.data,"root"))&&(!t||e.name==t)}function isBlockCall(e){return isHbOptions(e)&&hasPrimaryKeys(e,"fn,inverse")}function hasHash(e){return isHbOptions(e)&&Object.keys(e.hash).length}function getHash(e,t){var r=hasHash(e)?e.hash:{};return t?(Object.keys(r).forEach(function(e){t[e]=is(r[e],"string")?r[e].trim():r[e]}),t):r}function getHashRaw(e,t){var r=hasHash(e)?e.hash:{};return t?(Object.keys(r).forEach(function(e){t[e]=r[e]}),t):r}function _hbjshelper_(){if(arguments.length<2)throw console.error("missing argument(s)"),new Error("missing argument(s)");for(var i,e,t,s=b.splice.call(arguments,arguments.length-1,1)[0],l=s.data.root||{},c=s.hasOwnProperty("fn")||s.hasOwnProperty("inverse"),r=":if"==s.name,n={"==":function(e,t){return e==t},"===":function(e,t){return e===t},"!=":function(e,t){return e!=t},"!==":function(e,t){return e!==t},"<":function(e,t){return e<t},">":function(e,t){return t<e},"<=":function(e,t){return e<=t},">=":function(e,t){return t<=e},":typeof":function(e,t){return typeof e===t},":instanceof":function(e,t){return of(e).toLowerCase()===(""+t).trim().toLowerCase()},":is":function(e,t){return of(e).toLowerCase()===(""+t).trim().toLowerCase()},"=ic":function(e,t){return(""+e).toLowerCase()==(""+t).toLowerCase()},"!=ic":function(e,t){return(""+e).toLowerCase()!=(""+t).toLowerCase()},"+":function(e,t){return e+t},"-":function(e,t){return e-t},"*":function(e,t){return e*t},"/":function(e,t){return e/t}},a=Object.keys(n),o=b.slice.call(arguments),f=0;f<o.length;f++)if("string"===of(o[f])&&(t=o[f],i=0<=a.indexOf(t)?f:0)){e=o[f];break}if(r&&(!c||!is(o[0],"function")&&!i))throw new Error("[Template Syntax Error] :if must have 'CONDITION' and BLOCK. use {{#:if ... 'CONDITION' ... }} ... {{else}} ... {{/:if}}");if(i){var u=o.slice(0,i),p=o.slice(i+1),h=process.apply(void 0,u),d=process.apply(void 0,p),g=n[e](h,d);if(c){var _,y=h,m=d;return hasHash(s)&&(_=getHashRaw(s))&&((_.hasOwnProperty("thenWith")||_.hasOwnProperty("with")||_.hasOwnProperty("thenContext")||_.hasOwnProperty("context")||_.hasOwnProperty("thenData")||_.hasOwnProperty("data"))&&(y=_.thenWith||_.with||_.thenContext||_.context||_.thenData||_.data),(_.hasOwnProperty("elseWith")||_.hasOwnProperty("with")||_.hasOwnProperty("elseContext")||_.hasOwnProperty("context")||_.hasOwnProperty("elseData")||_.hasOwnProperty("data"))&&(m=_.elseWith||_.with||_.elseContext||_.context||_.elseData||_.data)),g?s.fn(y):s.inverse(m)}return g}return process.apply(void 0,arguments);function process(){var n,a,o=b.slice.call(arguments);function appendToRetValue(t){if(void 0===n)n=t;else{var e=of(t);switch(of(n)){case"array":switch(e){case"array":n=n.concat(t);break;default:n.push(t)}break;case"object":switch(e){case"array":for(var r=0;r<t.length;r++)n[r]=t[r];break;case"object":Object.keys(t).forEach(function(e){n[e]=t[e]});break;default:n["_"+(Object.keys(n).length+1)]=t}break;default:switch(e){case"object":t=JSON.stringify(t);break;case"array":t=t.join()}n+=" "+t}}}if(o.forEach(function(e,t){if(!a)switch(of(e)){case"function":var r=o.slice(t+1);r.push(l);var n=e.apply(void 0,r);c?i?appendToRetValue(n):"boolean"===of(n)?appendToRetValue(n?s.fn(n):s.inverse(n)):appendToRetValue(s.fn(n)):appendToRetValue(n),a=!0;break;case"array":c?i?appendToRetValue(e):e.length?e.forEach(function(e){appendToRetValue(s.fn(e))}):appendToRetValue(s.inverse(l)):appendToRetValue(e);break;case"object":c?i?appendToRetValue(e):Object.keys(e).length?appendToRetValue(s.fn(e)):appendToRetValue(s.inverse(l)):appendToRetValue(e);break;default:appendToRetValue(c?i?e:e?s.fn(l):s.inverse(l):e)}}),c)return n;switch(of(n)){case"object":return JSON.stringify(n);case"array":return n.join();default:return n}}}function _of(e){return of(e)}function _is(e,t){var r=arguments[arguments.length-1],n=isHbOptions(t)?"undefined":t;return isBlockCall(r)?is(e,n)?r.fn(e):r.inverse(e):is(e,n)}function _toLowerCase(e){return(""+(e||"")).toLowerCase()}function _toUpperCase(e){return(""+(e||"")).toUpperCase()}function _toTitleCase(e){return(""+(e||"")).toLowerCase().replace(/^(.)|\s(.)/g,function(e){return e.toUpperCase()})}function _unCapitalize(e){return(""+e).charAt(0).toLowerCase()+(""+e).slice(1)}function _normalizeStr(e){return _trimStr(e).replace(/\s+/g," ")}function _toInt(e){return e=(e=(""+e).replace(/[^+-0123456789.]/g,"")).trim().length?0<=e.indexOf(".")?e.substring(0,e.indexOf(".")):e:"0",parseInt(1*e,10)}function _toFloat(e){return e=(e=(""+e).replace(/[^+-0123456789.]/g,"")).trim().length?e:"0",parseFloat(1*e)}function _toString(e){switch(of(e)){case"object":return JSON.stringify(e);case"array":return e.join();default:return""+e}}function _toBool(e){switch(of(e)){case"function":return!0;case"object":return 0<Object.keys(e).length;case"array":return 0<e.length;default:var t=!0;switch((""+e).trim().toLowerCase()){case"":case"0":case"-0":case"nan":case"null":case"false":case"undefined":t=!1}return t}}function _trimStr(e,t){return e=_toString(e),is(t,"string")?_trimLeftStr(_trimRightStr(e,t),t):e.trim()}function _trimLeftStr(e,t){return e=_toString(e),is(t,"string")||(t=""),e.replace(new RegExp("^["+(t||"\\s")+"]+","g"),"")}function _trimRightStr(e,t){return e=_toString(e),is(t,"string")||(t=""),e.replace(new RegExp("["+(t||"\\s")+"]+$","g"),"")}function _getLeftStr(e,t){return e=_toString(e),is(t,"string|number")||(t=0),"string"==typeof t&&(t=e.indexOf(t)),(t=_toInt(t))?e.substr(0,t):""}function _getRightStr(e,t){e=_toString(e),is(t,"string|number")||(t=0);var r=1;return"string"==typeof t&&(r=t.length,t=e.indexOf(t)),(t=_toInt(t))<0?"":e.substr(t+r)}function _isUndefined(e){var t=arguments[arguments.length-1];return isBlockCall(t)?void 0===e?t.fn(e):t.inverse(e):void 0===e}function _isEmpty(e){var t;if(_isUndefined(e)||null===e)t=!0;else switch(of(e)){case"undefined":case"null":t=!0;break;case"function":t=!1;break;case"object":t=0==Object.keys(e).length;break;case"array":t=0==e.length;break;case"boolean":t=e;break;case"number":t=0==e;break;case"string":t=0==e.trim().length;break;default:t=!1}var r=arguments[arguments.length-1];return isBlockCall(r)?t?r.fn(e):r.inverse(e):!!t}function _splitString(e,t){var r=[];return _isEmpty(e)||(r=t?e.split(t):0<e.indexOf(",")?e.split(","):0<e.indexOf("|")?e.split("|"):0<e.indexOf(" ")?e.split(" "):0<e.indexOf("-")?e.split("-"):[e]),r}function getFunction(e){var t;return is(e,"string")&&(e=e.trim())&&(is(t=valueOfKeyPath(window,e),"function")||(t=void 0)),t}function _each(r,e){var n,t,a,o,i=arguments[arguments.length-1],s="",l={sortOn:"",sortBy:"",splitBy:",",alias:"",fnFilter:"",fnEmpty:"",fnEnd:"",fnError:""},c=!1,f=0;if(hasHash(i)&&(l=getHash(i,l),n=getFunction(l.fnFilter),t=getFunction(l.fnEmpty),a=getFunction(l.fnEnd),o=getFunction(l.fnError)),isBlockCall(i)){switch(_of(r)){case"string":r=_splitString(r,l.splitBy);case"array":if(l.sortOn||l.sortBy){var u="sortOn:"+l.sortOn.trim()+";sortBy:"+(l.sortBy||"asc").trim();r=_sort(r,u)}case"object":if(_isEmpty(r))s+=i.inverse(r);else{var p,h=is(e,"string")&&e.trim()?_splitString(e):l.alias?_splitString(l.alias):["",""],d=(h[0]||"").trim(),g=(h[1]||"").trim(),_=g||"index";c=!0,Object.keys(r).forEach(function(e,t){l.key=e,p=d?{}:r[e],d&&(d&&(p[d]=r[e]),g&&(p[g]=e)),n?(l[_+"Src"]=t,n.call(void 0,p)&&(l[_]=f++,s+=i.fn(p,{data:l}))):(l[_]=f++,s+=i.fn(p,{data:l}))})}break;default:o&&o.call(void 0,r),s+=i.inverse(r)}return c&&(f?a&&a.call(void 0,r):(t&&t.call(void 0,r),s+=i.inverse(r))),s}return r}function _disabledIf(){return _hbjshelper_.apply(void 0,arguments)?"disabled":""}function _disabledIfNot(){return _hbjshelper_.apply(void 0,arguments)?"":"disabled"}function isNumeric(e){if(is(e,"number"))return!0;if(is(e,"string")){var t=e.replace(/[0-9]/g,"").trim();return 0<e.length&&(""==t||1<e.length&&"."==t)}return!1}function valueOfKeyPath(e,t,r){return spa.findInObject(e,t,r)}function _sort(e,t){var r,n,a=arguments[arguments.length-1],o=[],i={sortOn:"",sortBy:"asc",splitBy:","};function strCompare(e,t){return e<t?-1:t<e?1:0}if(hasHash(a)?i=getHash(a,i):is(t,"string")&&_splitString(t,";").forEach(function(e){var t=e.split(":");i[t[0].trim()]=is(t[1],"undefined")?"":t[1].trim()}),r="asc"==i.sortBy.toLowerCase(),n=i.sortOn||"",is(e,"string")&&0<e.length&&(e=_splitString(e,i.splitBy)),is(e,"array")&&0<e.length){if(1==e.length)o=e;else switch(of(e[0])){case"number":o=e.sort(function(e,t){return e-t});break;case"string":o=isNumeric(e[0])?e.sort(function(e,t){return 1*e-1*t}):e.sort();break;case"boolean":o=e.sort(function(e,t){return strCompare(e,t)});break;case"object":if(n)switch(of(valueOfKeyPath(e[0],n))){case"number":o=e.sort(function(e,t){return valueOfKeyPath(e,n)-valueOfKeyPath(t,n)});break;case"string":o=isNumeric(valueOfKeyPath(e[0],n))?e.sort(function(e,t){return 1*valueOfKeyPath(e,n)-1*valueOfKeyPath(t,n)}):e.sort(function(e,t){return strCompare(valueOfKeyPath(e,n),valueOfKeyPath(t,n))});break;case"boolean":o=e.sort(function(e,t){return strCompare(valueOfKeyPath(e,n),valueOfKeyPath(t,n))});break;default:o=e}else o=e;break;default:o=e}r||(o=o.reverse())}return isBlockCall(a)?o.length?a.fn(o):a.inverse(e):o}function _join(){var t,e=b.pop.call(arguments);function append(e){if(!is(e,"undefined|null"))switch(of(t)){case"undefined":case"null":t=e;break;case"array":switch(of(e)){case"array":t=t.concat(e);break;default:t.push(e)}break;case"object":switch(of(e)){case"object":t=function merge(){var r={},e=0,t=arguments.length;function _merge(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&("[object Object]"===Object.prototype.toString.call(e[t])?r[t]=merge(r[t],e[t]):r[t]=e[t])}for(;e<t;e++)_merge(arguments[e]);return r}(t,e);break;default:t.hasOwnProperty("__joined__")?t.__joined__.push(e):t.__joined__=[e]}break;default:switch(of(e)){case"array":e.length&&(t+=e.join());break;case"object":Object.keys(e).length&&(t+=JSON.stringify(e));break;default:t+=""+e}}}return b.forEach.call(arguments,function(e){append(e)}),isBlockCall(e)?e.fn(t):t}function _console(){var e=_unCapitalize(b.pop.call(arguments).name.replace(/:console/g,""));"time"==e&&arguments.length&&console.log.apply(void 0,arguments),0==e.indexOf("mem")?console.log(console.memory):console[e].apply(void 0,arguments)}"undefined"!=typeof Handlebars&&Handlebars&&Handlebars.registerHelper({":":_hbjshelper_,":if":_hbjshelper_,":is":_is,":isEmpty":_isEmpty,":ofType":_of,":?":function _if(e,t,r){return _toBool(e)?t:r},":ifEmpty":function _ifEmpty(e,t,r){return _isEmpty(e)?t:is(r,"object")&&":ifEmpty"==r.name?e:r},":ifNotEmpty":function _ifNotEmpty(e,t,r){return _isEmpty(e)?is(r,"object")&&":ifNotEmpty"==r.name?e:r:t},":of":function _getByIndexOrKey(e,t){var r=arguments[arguments.length-1],n=_is(e,"array|object")?valueOfKeyPath(e,t):e;return isBlockCall(r)?void 0!==n?r.fn(n):r.inverse(n):n},":each":_each,":forEach":_each,":split":function _split(e,t){var r=arguments[arguments.length-1],n=_splitString(e,_is(t,"string")?t:void 0);return isBlockCall(r)?_isEmpty(n)?r.inverse(e):r.fn(n):n},":sort":_sort,":join":_join,":merge":_join,":joinWithStr":function _joinWith(){var e=b.pop.call(arguments),t=b.shift.call(arguments),r=b.join.call(arguments,t);return isBlockCall(e)?e.fn(r):r},":fn":function _fnCall(){var e,t,r,n=b.pop.call(arguments),a=b.shift.call(arguments),o=getFunction(a);return o&&(a.match("]$")?e=a.substring(0,a.lastIndexOf("[")):0<a.indexOf(".")&&(e=a.substring(0,a.lastIndexOf("."))),t=e?valueOfKeyPath(window,e):window,r=o.apply(t,arguments)),isBlockCall(n)?is(r,"undefined")||is(r,"boolean|number|string")&&!r||is(r,"array|object")&&spa.isBlank(r)?n.inverse(r):n.fn(r):r},":jsonify":function _jsonify(){var e=b.pop.call(arguments),t=b.shift.call(arguments),n={},d=b.splice.call(arguments,0);return is(t,"string")&&_splitString(t,";").forEach(function(e){var t=_getLeftStr(e,":").trim(),r=_getRightStr(e,":").trim();t&&(r=function strToNative(e){e=e.trim();if(!e.length)return e;var t=e[0],r=e;switch(!0){case"true"==e:r=!0;break;case"false"==e:r=!1;break;case isNumeric(e):r=1*e;break;case"["==t:e=e.substring(1,e.lastIndexOf("]"))+",";case 0<e.indexOf(",")&&e.indexOf("{")<0:var n=[];e.split(",").forEach(function(e){""!=(e=e.trim())&&n.push(strToNative(e))}),r=n;break;case"{"==t:e=e.substring(1,e.lastIndexOf("}"));var a,o,i={};e.split(",").forEach(function(e){e=e.trim(),a=_getLeftStr(e,":").trim(),o=_getRightStr(e,":").trim(),a&&(i[a]=strToNative(o))}),r=i;break;case"@"==t&&"["!=e[1]:var s=e.substring(1,e.indexOf("."));if(isNumeric(s)){r=d[s];var l=0<e.indexOf(".")?e.substr(e.indexOf(".")+1):"";l&&is(r,"array|object")&&(r=valueOfKeyPath(r,l))}}if(is(r,"string")&&0<=r.indexOf("@[")){var c,f,u,p,h=r.match(/(@\[\s*(.*?)\s*])/g);h&&h.forEach(function(e){c=e.replace(/@\[/,"").replace(/]/,""),f=c.substring(0,c.indexOf(".")),u="",isNumeric(f)&&(u=d[f],(p=0<c.indexOf(".")?c.substr(c.indexOf(".")+1):"")&&is(u,"array|object")&&(u=valueOfKeyPath(u,p))),r=r.replace(new RegExp(e.replace(/\[/,"\\["),"g"),u)})}return r}(r),n[t]=r)}),isBlockCall(e)?e.fn(n):n},":jsonParse":function _jsonParse(){var t=b.pop.call(arguments),e=Array_.shift.call(arguments),r={};if(is(e,"string"))try{r=JSON.parse(e)}catch(e){if(isBlockCall(t))return t.inverse(e)}return isBlockCall(t)?t.fn(r):r},":consoleClear":_console,":consoleLog":_console,":consoleWarn":_console,":consoleInfo":_console,":consoleError":_console,":consoleGroup":_console,":consoleGroupEnd":_console,":consoleGroupCollapsed":_console,":consoleMem":_console,":consoleMemory":_console,":consoleProfile":_console,":consoleProfileEnd":_console,":consoleTable":_console,":consoleTime":_console,":consoleTimeEnd":_console,":options":function _selectOptions(t,e){var r,n,a,o,i,s,l,c,f,u,p,h=arguments[arguments.length-1],d="",g=-1,_={value:"",text:"",value_text:"",splitBy:",",vtSplit:"",sortOn:"",sortBy:"",fnFilter:"",fnEmpty:"",fnEnd:"",selIndex:"",selValue:"",selText:""},y=[],m=[],b=[],v="",O=[];function addToList(e,t){O.push({value:e,text:t})}function option(e,t){return g++,'<option value="'+e+'" '+(function isSelected(e,t){return r&&0<=y.indexOf(""+g)||n&&0<=m.indexOf(""+e)||a&&0<=b.indexOf(""+t)}(e,t)?"selected":"")+">"+t+"</option>"}switch(is(e,"string")&&_splitString(e,";").forEach(function(e){var t=e.split(":");_[t[0].trim()]=is(t[1],"undefined")?"":t[1].trim()}),hasHash(h)&&(_=getHash(h,_)),y=_.selIndex?_splitString(_.selIndex):[],m=_.selValue?_splitString(_.selValue):[],b=_.selText?_splitString(_.selText):[],r=y.length,n=m.length,a=b.length,v=_.value||_.value_text,f=_.text||_.value_text,u=(_.vtSplit||"").replace(/colon/gi,":"),p="index"==v.toLowerCase(),o=_.sortOn.trim(),(i=_.sortBy.trim())&&!o&&(o="text"),o&&!i&&(_.sortBy="asc"),s=getFunction(_.fnFilter),l=getFunction(_.fnEmpty),c=getFunction(_.fnEnd),is(t,"string")&&(t=_splitString(t,_.splitBy)),_of(t)){case"object":Object.keys(t).forEach(function(e){addToList(e,t[e])});break;case"array":t.forEach(function(t,e){switch(of(t)){case"object":var r=Object.keys(t);v&&f?addToList(t[v],t[f]):1==r.length&&r.forEach(function(e){addToList(e,t[e])});break;case"string":if(p){addToList(e,t);break}t=u?t.split(u):[t];case"array":v&&f?addToList(t[v],t[f]):1==t.length?addToList(t[0],t[0]):1<t.length&&addToList(t[0],t[1]);break;default:addToList(p?e:t,t)}})}if(s&&O.length){var w=[];O.forEach(function(e,t){e.index=t;var r=s.call(void 0,e);r&&w.push(is(r,"object")?r:e)}),O=w}if(O.length){if(o||i)O=_sort(O,"sortOn:"+o+";sortBy:"+i);O.forEach(function(e){d+=option(e.value,e.text)}),c&&c.call(void 0,O,t)}else l&&l.call(void 0,O,t);return isBlockCall(h)?d?h.fn(new Handlebars.SafeString(d)):h.inverse(this):new Handlebars.SafeString(d)},":checkedIf":function _checkedIf(){return _hbjshelper_.apply(void 0,arguments)?"checked":""},":checkedIfNot":function _checkedIfNot(){return _hbjshelper_.apply(void 0,arguments)?"":"checked"},":enabledIf":_disabledIfNot,":enabledIfNot":_disabledIf,":disabledIf":_disabledIf,":disabledIfNot":_disabledIfNot,":selectedIf":function _selectedIf(){return _hbjshelper_.apply(void 0,arguments)?"selected":""},":selectedIfNot":function _selectedIfNot(){return _hbjshelper_.apply(void 0,arguments)?"":selected},":lower":_toLowerCase,":lowerCase":_toLowerCase,":toLowerCase":_toLowerCase,":lowerCaseOf":_toLowerCase,":upper":_toUpperCase,":upperCase":_toUpperCase,":toUpperCase":_toUpperCase,":upperCaseOf":_toUpperCase,":title":_toTitleCase,":titleCase":_toTitleCase,":toTitleCase":_toTitleCase,":titleCaseOf":_toTitleCase,":capitalize":function _capitalize(e){return(""+e).charAt(0).toUpperCase()+(""+e).slice(1)},":unCapitalize":_unCapitalize,":normalize":_normalizeStr,":normalizeStr":_normalizeStr,":int":_toInt,":toInt":_toInt,":intOf":_toInt,":float":_toFloat,":toFloat":_toFloat,":floatOf":_toFloat,":toStr":_toString,":toString":_toString,":toBool":_toBool,":toBoolean":_toBool,":trim":_trimStr,":trimStr":_trimStr,":trimLeft":_trimLeftStr,":trimLeftStr":_trimLeftStr,":trimRight":_trimRightStr,":trimRightStr":_trimRightStr,":replace":function _replaceStr(e){var t=arguments[arguments.length-1],r={searchStr:"",replaceStr:"",rxPattern:"",rxOption:""};return hasHash(t)&&(r=getHashRaw(t,r)),r.rxPattern?(""+e).replace(new RegExp(r.rxPattern,r.rxOption),r.replaceStr):(""+e).replace(r.searchStr,r.replaceStr)},":getLeftStr":_getLeftStr,":getRightStr":_getRightStr,":dateNowMs":function _nowMs(){return""+(new Date).getTime()},":dateNow":function _now(e){var t=new Date;if(!is(e,"string"))return""+t;var r=e,n=["January","February","March","April","May","June","July","August","September","October","November","December"],a=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],s=["Su","Mo","Tu","We","Th","Fr","Sa"];function _prefix0(e){return(9<e?"":"0")+e}var l={YYYY:t.getFullYear(),YY:t.getFullYear(),Y:t.getFullYear(),Mmmm:n[t.getMonth()],MMMM:n[t.getMonth()].toUpperCase(),Mmm:a[t.getMonth()],MMM:a[t.getMonth()].toUpperCase(),"0M":_prefix0(t.getMonth()+1),MM:t.getMonth()+1,Dddd:o[t.getDay()],DDDD:o[t.getDay()].toUpperCase(),Ddd:i[t.getDay()],DDD:i[t.getDay()].toUpperCase(),Dd:s[t.getDay()],DD:s[t.getDay()].toUpperCase(),"0d":_prefix0(t.getDate()),dd:t.getDate(),"0h":_prefix0(t.getHours()),hh:t.getHours(),"0m":_prefix0(t.getMinutes()),mm:t.getMinutes(),"0s":_prefix0(t.getSeconds()),ss:t.getSeconds(),ms:t.getMilliseconds()};return Object.keys(l).forEach(function(e){r=r.replace(e,l[e])}),r},":moment":function _moment(e,t,r){return"undefined"==typeof moment?(console.warn("Missing moment.js"),e):is(r,"string")?moment(e,t).format(r):isHbOptions(r)?moment(e).format(t):isHbOptions(t)?moment().format(e):isHbOptions(e)?moment():void 0},":rand":function _rand(e,t){return is(e,"number")||(e=1),is(t,"number")||(t=e+999),Math.floor(Math.random()*(t-e+1))+e},":randPwd":function _randPwd(e,t){is(e,"number")||(e=8),is(t,"string")||(t=""),e=e||8;for(var r=t||"9a8b77C8D9E8F7G6H5I4J3c6d5e4f32L3M4N5P6Qg2h3i4j5kV6W5X4Y3Z26m7n8p9q8r7s6t5u4v3w2x3y4z5A6BK7R8S9T8U7",n="",a=0;a<e;a++){var o=Math.floor(Math.random()*r.length);n+=r.charAt(o)}return n},":ifDefined":function _isDefined(e){var t=arguments[arguments.length-1];return isBlockCall(t)?void 0!==e?t.fn(e):t.inverse(e):void 0!==e},":ifUndefined":_isUndefined,":bytesToSize":function _bytesToSize(e){if(0==e)return"0";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return parseFloat(e/Math.pow(1024,t)).toFixed(2)+" "+["Bytes","KB","MB","GB","TB","PB"][t]}})}();


/*@license SPA.js (Form Validation Extension) [MIT]*/
function _clearSpaValidateMsg(a){return spa._validate._showValidateMsg(a),!0}spa._validateDefaults={required:"Required",digits:"Digits",numbers:"Numbers",integer:"Integer",alphabet:"Alpha",alphanumeric:"AlphaNumeric",pattern:"PatternMatch",range:"ValueRange",fixedlength:"Lengths",minlength:"LengthMin",maxlength:"LengthMax",email:"Email",url:"Url",date:"Date",cardno:"CardNo",ipv4:"IPv4",ipv6:"IPv6",ipaddress:"IP",subnetmask:"Subnet",phoneUS:"PhoneUS",wordsize:"WordSize",compare:"Compare",promise:"Promise",xss:"CheckXSS",noop:"Noop"},spa._validate={defaults:{offline:!0},_isOnOfflineValidation:!1,_validateAlertTemplate:'<div class="errortxt error-txt break-txt" data-i18n=""></div>',_offlineValidationRules:{},_fn:{Noop:function _fnNoop(){return!0},CheckXSS:function _fnCheckXSS(a){var e=spa.getElValue(a);return!(/<\s*\/?\s*(\bscript\b)/gi.test(e)||/<(.)+\s+on([a-z])+\s*=|javascript:/gi.test(e))},Promise:function _fnPromise(a){if(!spa._validate._isOnOfflineValidation){var e=$(a),t=e.data("validate")||"";/(promise)(\s)*:(\s)*(\'|\")/.test(t)&&spa._validate._addValidationClass(e,"validation-pending")}return!0},Required:function _fnRequired(a){var e=spa.getElValue(a);return!spa.isBlank(e)},Digits:function _fnValidDigits(a){var e=$(a).val();return 0===e.length||/^\d+$/.test(e)},Numbers:function _fnValidNumbers(a){var e=$(a).val();return 0===e.length||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},Integer:function _fnValidInteger(a){var e=$(a).val();return 0===e.length||/^-?\d+$/.test(e)},Alpha:function _fnValidAlpha(a){var e=$(a).val();return 0===e.length||!/[^a-z]/gi.test(e)},AlphaNumeric:function _fnValidAlphaNumeric(a){var e=$(a).val();return 0===e.length||!/[^a-z0-9]/gi.test(e)},PatternMatch:function _fnValidPatternMatch(a){var e=$(a).val(),t=0===e.length;t||(t=new RegExp($(a).data("validatePattern"),$(a).data("validatePatternOptions").replace(/!/g,"")).test(e),0<=$(a).data("validatePatternOptions").indexOf("!")&&(t=!t));return t},ValueRange:function _fnValidValueRange(a){var e=$(a).val(),t=0===e.length;if(!t&&(t=!1,/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e))){var n=spa.toFloat(e),i=(" "+($(a).data("validateRange")||"")+": ").split(":"),s=!spa.isBlank(i[0]),l=!spa.isBlank(i[1]),r=spa.toFloat(i[0]),o=spa.toFloat(i[1]);s&&l?t=r<=n&&n<=o:s?t=r<=n:l&&(t=n<=o)}return t},LengthMin:function _fnValidLengthMin(a){var e=$(a).val(),t=spa.toInt($(a).data("minlength")||$(a).attr("minlength"));return e.length>=t},LengthMax:function _fnValidLengthMax(a){var e=$(a).val(),t=spa.toInt($(a).data("maxlength"));return e.length<=t},Lengths:function _fnValidLengths(a){var e=$(a).val().length,t=spa.toInt($(a).data("minlength")||$(a).attr("minlength")),n=spa.toInt($(a).data("maxlength"));return t<=e&&e<=n},WordSize:function _fnValidWordSize(a){var e=(""+$(a).val()).replace(/[-\n]/g," ").split(" ").map(function(a){return a.length});return(spa.isBlank(e)?0:Math.max.apply(null,e))<=(spa.toInt($(a).data("validWordSize"))||20)},Email:function _fnValidEmail(a){var e=$(a).val(),t=0===e.length;return t=t||(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)||/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i.test(e))&&/[a-z0-9]/i.test(e[e.length-1])&&1==((e||"").match(/@/g)||[]).length},Url:function _fnValidUrl(a){var e=$(a).val(),t=0===e.length;return t=t||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},Date:function _isValidDate(a){var e=$(a).val(),t=0===e.length;if(!t){t=!1;var n,i,s,l,r=$(a).data("validateFormat")||"YMD",o="^\\d{1,2}[\\/\\-\\.]\\d{1,2}[\\/\\-\\.]\\d{4}$",d=e.replace(/[^a-z]/gi,"");d&&((l=["","JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"].indexOf(d.toUpperCase()))<=0&&(l=["","JANUARY","FEBRUARY","MARCH","APRIL","MAY","JUNE","JULY","AUGUST","SEPTEMBER","OCTOBER","NOVEMBER","DECEMBER"].indexOf(d.toUpperCase())),0<l&&(e=e.replace(new RegExp(d,"gi"),l)));var u=(e=e.replace(/[^0-9]/g," ").normalizeStr().replace(/ /g,"/")).split("/");switch(r.toUpperCase()){case"YMD":o="^\\d{4}[\\/\\-\\.]\\d{1,2}[\\/\\-\\.]\\d{1,2}$",n=u[0],i=u[1],s=u[2];break;case"MDY":i=u[0],s=u[1],n=u[2];break;case"DMY":s=u[0],i=u[1],n=u[2]}if(new RegExp(o,"").test(e)){s=parseInt(s,10),i=parseInt(i,10),n=parseInt(n,10);var p=new Date(n,i-1,s);t=p.getFullYear()===n&&p.getMonth()===i-1&&p.getDate()===s}}return t},CardNo:function _fnValidCardNo(a){var e=$(a).val(),t=0===e.length;if(!t){var n=!/[^0-9 \-]+/.test(e),i=e.replace(/[^0-9]/g,""),s=i.length;if(n&&s&&0<"0345".indexOf(i[0])&&(15==s||16==s)){for(var l=0,r=0,o=!1,d=e.replace(/\D/g,""),u=d.length-1;0<=u;u--){var p=d.charAt(u);r=parseInt(p,10),o&&9<(r*=2)&&(r-=9),l+=r,o=!o}t=l%10==0}}return t},IPv4:function _fnValidIpv4(a){var e=$(a).val(),t=0===e.length;return t=t||/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i.test(e)&&spa.every(e.split("."),function(a){return!(1<a.length)||!a.beginsWithStr("0")})},IPv6:function _fnValidIpv6(a){var e=$(a).val(),t=0===e.length;return t=t||/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i.test(e)},IP:function _fnValidIpAddress(a,e){var t=$(a).val(),n=0===t.length;if(!n){var i=t,s=spa.toInt($(a).data("validateIpaddressOctates")||4)-1;n=new RegExp("^(([01]?[0-9]?[0-9]|2([0-4][0-9]|5[0-5]))\\.){"+s+"}([01]?[0-9]?[0-9]|2([0-4][0-9]|5[0-5]))$","g").test(i)&&spa.every(i.split("."),function(a){return!(1<a.length)||!a.beginsWithStr("0")}),spa._validate._showValidateMsg(a,e,n);var l=$(a).data("validateIpaddressClass");if(n&&l){var r=i.split("."),o={A:{oct1:{B:0,E:127},oct2:{B:0,E:256},oct3:{B:0,E:256},oct4:{B:1,E:255}},B:{oct1:{B:127,E:192},oct2:{B:1,E:256},oct3:{B:0,E:256},oct4:{B:0,E:255}},C:{oct1:{B:191,E:224},oct2:{B:0,E:256},oct3:{B:1,E:256},oct4:{B:1,E:255}},D:{oct1:{B:223,E:240},oct2:{B:0,E:256},oct3:{B:0,E:256},oct4:{B:0,E:256}},E:{oct1:{B:239,E:255},oct2:{B:0,E:256},oct3:{B:0,E:256},oct4:{B:0,E:255}}};n=1*r[0]>o[l].oct1.B&&1*r[0]<o[l].oct1.E&&(1*r[1]>=o[l].oct2.B&&1*r[1]<o[l].oct2.E&&(1*r[2]>=o[l].oct3.B&&1*r[2]<o[l].oct3.E&&(1*r[3]>o[l].oct4.B&&1*r[3]<o[l].oct4.E))),spa._validate._showValidateMsg(a,e,n)}}return n},Subnet:function _fnValidSubnet(a){var e=$(a).val(),t=0===e.length;t=t||new RegExp("^((128|192|224|240|248|252|254)\\.0\\.0\\.0)|(255\\.(((0|128|192|224|240|248|252|254)\\.0\\.0)|(255\\.(((0|128|192|224|240|248|252|254)\\.0)|255\\.(0|128|192|224|240|248|252|254)))))$").test(e)&&spa.every(e.split("."),function(a){return!(1<a.length)||!a.beginsWithStr("0")});return t},PhoneUS:function _fnValidPhoneUS(a){var e=$(a).val(),t=0===e.length;return t=t||9<e.length&&e.match(/^(\+?1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/)},Compare:function _fnValidCompare(a){var e=0===$(a).val().length;if(!e){var t,n=$(a).data(),i=spa.toJSON(n.validateCompare||"{}");if(!spa.isBlank(i)&&i.target){t=$(i.target);var s=i.valid||"=",l=spa.getElValue(a),r=spa.getElValue(t);if(("number".equalsIgnoreCase(i.type)||0<=s.indexOf("<")||0<=s.indexOf(">"))&&(l=spa.toFloat(l),r=spa.toFloat(r)),!"date".equalsIgnoreCase(i.type))switch(s){case"!=":e=l!=r;break;case"!==":e=l!==r;break;case"===":e=l===r;break;case">":e=r<l;break;case"<":e=l<r;break;case">=":e=r<=l;break;case"<=":e=l<=r;break;default:e=l==r}}}return e}},_showValidateMsg:function __showValidateMsg(a,e,t,n,i){e=e||"";var s=$(a);if(s.length){2<arguments.length&&spa.isString(t)&&(n=t),2<arguments.length&&spa.isBoolean(t)&&t&&(e="");var l=!(n=n||spa._validate._validateAlertTemplate).beginsWithStrIgnoreCase("<"),r=s.parent(),o=s.data("errorClassTarget"),d=o?s.closest(o):r,u=s.data("errorPosition");a=s.get(0),spa._validate._isOnOfflineValidation||(d.removeClass("has-error-msg no-error-msg")[!1===t?"addClass":"removeClass"]("validation-error "+(e?"has-error-msg":"no-error-msg")),s[!1===t?"addClass":"removeClass"]("invalid-data"),i||spa.updateTrackFormCtrls(a.form));var p=l?$(n):s.next();!l&&u&&("first".equalsIgnoreCase(u)?p=r.children().first():"last".equalsIgnoreCase(u)&&(p=r.children().last()));var F,f="",c="",g="";if($(p).attr("class")===$(n).attr("class")||l){if(e.beginsWithStrIgnoreCase("i18n:")){spa.console.group("i18n-Msg"),spa.console.log("msg:",e),f=(e.getLeftStr("|")||e).replace(/i18n:/gi,""),g=e.getRightStr("|"),c="{html:'"+f+"'}",F=spa.toJSON(g),F=spa.isObject(F)?F:{},spa.console.log("i18nData@msg:",F);var v=s.dataJSON("i18nData");spa.isBlank(v)||(spa.console.log("i18nData@el",v),F=spa.merge(F,v),spa.console.log("i18nData:",F)),e=spa.i18n.text(f,F),spa.console.groupEnd("i18n-Msg")}spa._validate._isOnOfflineValidation||($(p).attr("data-i18n",c).data("i18n",c),$(p).attr("data-i18n-data",g).data("i18nData",g),$(p).html(e))}else spa.isBlank(e)||(u?"first".equalsIgnoreCase(u)?$(n).prependTo(r):"last".equalsIgnoreCase(u)?$(n).appendTo(r):$(n).insertAfter(s):$(n).insertAfter(s),spa._validate._showValidateMsg(a,e,t,n));return t}spa.console.warn("Validation config/setup is wrong for validation Msg:["+e+"] forEl:",a)},_getValidationClassTarget:function(a){var e=$(a),t=e.data("errorClassTarget");return t?e.closest(t):e.parent()},_addValidationClass:function(a,e){spa._validate._getValidationClassTarget(a).addClass(e)},_removeValidationClass:function(a,e){spa._validate._getValidationClassTarget(a).removeClass(e)},_deferValidate:function(){return!0},_registerPromise:function(a,e,t,n){var i=!spa.isBlank(a);if(i){var s=$(e),l=s.data("promises")||"";l.indexOf("["+a+"]")<0&&(spa.console.log("validating promise: "+a),l+="["+a+"]",s.attr("data-promises",l).data("promises",l),spa._validate._addValidationClass(s,"validation-pending"),spa.isFunction(t)&&t.call(s,s,n,a))}return i},expose:function(e){return e=e||{},spa.keys(spa._validateDefaults).forEach(function(a){e[a]=spa._validate._fn[spa._validateDefaults[a]]}),e}};var _check=spa._validate.expose();spa.initValidation=spa.initDataValidation=function(a){spa.console.log(">>>>> initDataValidation request for context:"+a);function _b(t){return t=t||{},spa.each(spa.keys(t),function(e){0==e.indexOf("on")&&0<e.indexOf("_")&&(spa.each(e.split("_"),function(a){a.indexOf("on")<0&&(a="on"+a),t[a]?spa.isArray(t[a])?t[a].push(t[e]):t[a]=[t[a],t[e]]:t[a]=[t[e]]}),delete t[e])}),t}a=a||"body";var e=$(a),t=e.data("validateElFilter")||"",r=_b(spa.toJSON(e.data("validateCommon")||"{}")),n=spa.merge({},r.onFocus),o=!!spa.toJSON(e.attr("data-validate-defaults")||{}).offline;spa.console.log("commonValidateRules");var d,u,p,F,f,i={fn:"_check.promise",offline:!1};spa.isBlank(n)?r.onFocus=i:(spa.isArray(n)||(n=[n]),n.push(i)),r.onFocus=n,spa.console.log(r);var c=(e.data("validateForm")||e.data("validateScope")||"").replace(/onRender/i,"").replace(/[^a-zA-Z0-9]/g,"");if(spa.isBlank(c)){var s=a.replace(/[^a-zA-Z0-9]/g,"");c=s}spa.console.log("offlineValidationKey: "+c);var g=!spa.isBlank(c);g&&(spa.console.log("resetting the rules for "+c),spa._validate._offlineValidationRules[c]={rules:{}}),spa.console.log(c,spa._validate._offlineValidationRules[c]),e.find(t+"[data-validate]").each(function(a,t){var i=$(t).prop("id");i||(i=(t.name||t.type).replace(/[^a-z]/gi,"")+a,$(t).attr("id",i));var s={},e=$(t).data("validate");if(e&&e.indexOf("{")<0){var n=($(t).data("validateEvents")||"onBlur").replace(/[^a-z]/gi," ").normalizeStr().replace(/ /g,"_"),l=",offline:"+($(t).data("validateOffline")||o||"false");e="{"+n+":["+("{fn:"+e.replace(/[,;]/," ").normalizeStr().replace(/ /g,l+"},{fn:")+l+"}")+"]}"}s=_b(spa.toJSON(e)),spa.console.log(e),spa.each(spa.keys(r),function(n){var a=r[n];spa.isArray(a)||(a=[a]),a.reverse(),spa.console.group("vRules #"+i),spa.each(a,function(a){if(d=!0,u="<",F=a.offline||!1,p=!1,a.el){var e=a.el.replace(/ /g,"").split(","),t=a.el.replace(/[< >!]/g,"").split(",").indexOf(i);(d=0<=t)&&(u=0<=e[t].indexOf(">")?">":"<",p=0<=e[t].indexOf("!"))}else a.ex&&(d=a.ex.replace(/[< >!]/g,"").split(",").indexOf(i)<0);d&&(f=spa.omit(a,["el","ex"]),spa.console.log(">>commonRule2El:",f,a),p&&(f.offline=!F),s[n]||(s[n]=[]),spa.console.group("-"+n),"<"===u?(spa.console.log(u+"all:",[f],s[n]),s[n]=spa.union([f],s[n])):(spa.console.log(u+"all:",s[n],[f]),s[n]=spa.union(s[n],[f])),spa.console.log("uniq:",s[n]),spa.console.groupEnd("-"+n))}),spa.console.group("-FinalRules"),spa.console.log(s),spa.console.groupEnd("-All"),spa.console.groupEnd("vRules #"+i)}),spa.each(spa.keys(s),function(a){var e=a.substring(2,3).toLowerCase()+a.substring(3);spa.console.log("settingup event on["+e+"]..."),spa.isArray(s[a])||(s[a]=[s[a]]),spa.console.log(s),g&&spa.each(s[a],function(a){spa.isArray(a)||(a=[a]),spa.each(a,function(a){if(a.hasOwnProperty("offline")||(a.offline=o),spa.console.log(a),a.offline&&!a.promise){var e={fn:a.fn,msg:a.msg};spa._validate._offlineValidationRules[c].rules[i]||(spa._validate._offlineValidationRules[c].rules[i]=[]),spa.indexOf(spa._validate._offlineValidationRules[c].rules[i],e)<0&&spa._validate._offlineValidationRules[c].rules[i].push(e)}})}),spa.console.log("registering an event: "+a),a.beginsWithStrIgnoreCase("on")&&!"test".equalsIgnoreCase(e)&&$(t).on(e,function(){var e,t,n,i=this;spa.every(s[a],function(a){return spa.isArray(a)?spa.every(a,function(a){return e=a.fn,spa.isString(e)&&(e=spa.findSafe(window,e)),spa.isFunction(e)||console.error("data-validate-function Not Found: "+a.fn),t=a.msg||$(i).data("validateMsg")||"",spa._validate._registerPromise(a.promise,i,e,t)&&(e=spa._validate._deferValidate),n=!!spa.isFunction(e)&&e.call(i,i,t),spa.isBoolean(n)&&spa._validate._showValidateMsg(i,t,n),n}):(e=a.fn,spa.isString(e)&&(e=spa.findSafe(window,e)),spa.isFunction(e)||console.error("data-validate-function Not Found: "+a.fn),t=a.msg||$(i).data("validateMsg")||"",spa._validate._registerPromise(a.promise,i,e,t)&&(e=spa._validate._deferValidate),n=!!spa.isFunction(e)&&e.call(i,i,t),spa.isBoolean(n)&&spa._validate._showValidateMsg(i,t,n),n)})})})})},spa.validateForm=spa.validate=spa.doDataValidation=function(a,e,r){var t;spa.isString(e)&&(t="#"+e.replace(/[ #]/g,"").replace(/,/g,",#")+",",e=r,r=arguments[3]);var n=a.replace(/[^a-zA-Z0-9]/g,""),i="#"+a.replace(/#/g,""),o=$(i),d=[];if(spa._validate._offlineValidationRules[n]){var u=spa._validate._offlineValidationRules[n].rules;if(spa.isEmptyObject(u)){var s=1,l="Offline rules not found in scope ["+a+"].";o.find(".validation-error,.validation-pending").length&&(s=3,l+=" Found .validation-error|.validation-pending"),d=[{errcode:s,errmsg:l}]}else{var p=spa.keys(u);t&&(p=p.map(function(a){return 0<=t.indexOf("#"+a+",")?a:""})),spa._validate._isOnOfflineValidation=!e,spa.every(p,function(a){return!a||(e=a,s=o.find("#"+e),l=s[0],spa.toBoolean(s.data("ignoreValidationIfInvisible"))&&!s.is(":visible")||spa.every(u[e],function(a){if(n=a.fn,spa.isString(n)&&(n=spa.findSafe(window,n)),spa.isFunction(n)||console.error("data-validate-function Not Found: "+a.fn),t=a.msg||s.data("validateMsg")||"",i=!!spa.isFunction(n)&&n.call(l,l,t),spa.isBoolean(i)&&spa._validate._showValidateMsg(s,t,i,"",!0),!i){var e={errcode:2,el:l,fn:a.fn,msg:t};d.push(e)}return i})||r);var e,t,n,i,s,l}),spa._validate._isOnOfflineValidation=!1}}else o.length?o.is("[data-validate-form]")&&(d=[{errcode:1,errmsg:"Form Not Initialized."}]):d=[{errcode:1,errmsg:"Form Not Found."}];return d},spa.removeValidationMsg=function(a){$(a).each(function(a,e){spa._validate._showValidateMsg(e,"",!0)})},spa.updateValidation=function(a,t,n,i){2==arguments.length&&(n=spa.isBlank(t)),$(a).each(function(a,e){spa._validate._showValidateMsg(e,t,n,i)})},spa.updateValidationPromise=function(t,a,n,i,s){var l,r;$(a).each(function(a,e){l=$(e),spa.each(t.split(","),function(a){r=(l.data("promises")||"").replace("["+a.trim()+"]",""),l.attr("data-promises",r).data("promises",r),spa.isBlank(r)&&spa._validate._removeValidationClass(l,"validation-pending")}),spa._validate._showValidateMsg(e,n,i,s)})};
