/** @license SPA.js Validation Extension | (c) Kumararaja | License (MIT) */
function _clearSpaValidateMsg(a){return spa._validate._showValidateMsg(a),!0}spa._validateDefaults={required:"Required",digits:"Digits",numbers:"Numbers",integer:"Integer",alphabet:"Alpha",alphanumeric:"AlphaNumeric",pattern:"PatternMatch",range:"ValueRange",fixedlength:"Lengths",minlength:"LengthMin",maxlength:"LengthMax",email:"Email",url:"Url",date:"Date",cardno:"CardNo",ipv4:"IPv4",ipv6:"IPv6",ipaddress:"IP",subnetmask:"Subnet",phoneUS:"PhoneUS",wordsize:"WordSize",compare:"Compare",promise:"Promise",xss:"CheckXSS",noop:"Noop"},spa._validate={defaults:{offline:!0},_isOnOfflineValidation:!1,_validateAlertTemplate:'<div class="errortxt error-txt break-txt" data-i18n=""></div>',_offlineValidationRules:{},_fn:{Noop:function(){return!0},CheckXSS:function(a){var e=spa.getElValue(a);return!(/<\s*\/?\s*(\bscript\b)/gi.test(e)||/<(.)+\s+on([a-z])+\s*=|javascript:/gi.test(e))},Promise:function(a){if(!spa._validate._isOnOfflineValidation){var e=$(a),t=e.data("validate")||"";/(promise)(\s)*:(\s)*(\'|\")/.test(t)&&spa._validate._addValidationClass(e,"validation-pending")}return!0},Required:function(a){var e=spa.getElValue(a);return!spa.isBlank(e)},Digits:function(a){var e=$(a).val(),t=0===e.length||/^\d+$/.test(e);return t},Numbers:function(a){var e=$(a).val(),t=0===e.length||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e);return t},Integer:function(a){var e=$(a).val(),t=0===e.length||/^-?\d+$/.test(e);return t},Alpha:function(a){var e=$(a).val(),t=0===e.length||!/[^a-z]/gi.test(e);return t},AlphaNumeric:function(a){var e=$(a).val(),t=0===e.length||!/[^a-z0-9]/gi.test(e);return t},PatternMatch:function(a){var e=$(a).val(),t=0===e.length;if(!t){var n=RegExp($(a).data("validatePattern"),$(a).data("validatePatternOptions").replace(/!/g,""));t=n.test(e),$(a).data("validatePatternOptions").indexOf("!")>=0&&(t=!t)}return t},ValueRange:function(a){var e=$(a).val(),t=0===e.length;if(!t&&(t=!1,/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e))){var n=spa.toFloat(e),i=(" "+($(a).data("validateRange")||"")+": ").split(":"),s=!spa.isBlank(i[0]),r=!spa.isBlank(i[1]),l=spa.toFloat(i[0]),o=spa.toFloat(i[1]);s&&r?t=n>=l&&o>=n:s?t=n>=l:r&&(t=o>=n)}return t},LengthMin:function(a){var e=$(a).val(),t=spa.toInt($(a).data("minlength")||$(a).attr("minlength")),n=e.length>=t;return n},LengthMax:function(a){var e=$(a).val(),t=spa.toInt($(a).data("maxlength")),n=t>=e.length;return n},Lengths:function(a){var e=$(a).val(),t=e.length,n=spa.toInt($(a).data("minlength")||$(a).attr("minlength")),i=spa.toInt($(a).data("maxlength")),s=t>=n&&i>=t;return s},WordSize:function(a){var e=$(a).val(),t=_.max(_.map((""+e).replace(/[-\n]/g," ").split(" "),function(a){return a.length})),n=spa.toInt($(a).data("validWordSize"))||20,i=n>=t;return i},Email:function(a){var e=$(a).val(),t=0===e.length;return t||(t=(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)||/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i.test(e))&&/[a-z0-9]/i.test(e[e.length-1])&&1==((e||"").match(/@/g)||[]).length),t},Url:function(a){var e=$(a).val(),t=0===e.length;return t||(t=/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)),t},Date:function(a){var e=$(a).val(),t=0===e.length;if(!t){t=!1;var n,i,s,r,l=["","JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],o=["","JANUARY","FEBRUARY","MARCH","APRIL","MAY","JUNE","JULY","AUGUST","SEPTEMBER","OCTOBER","NOVEMBER","DECEMBER"],d=$(a).data("validateFormat")||"YMD",u="^\\d{1,2}[\\/\\-\\.]\\d{1,2}[\\/\\-\\.]\\d{4}$",F=e.replace(/[^a-z]/gi,"");F&&(r=_.indexOf(l,F.toUpperCase()),0>=r&&(r=_.indexOf(o,F.toUpperCase())),r>0&&(e=e.replace(RegExp(F,"gi"),r))),e=e.replace(/[^0-9]/g," ").normalizeStr().replace(/ /g,"/");var f=e.split("/");switch(d.toUpperCase()){case"YMD":u="^\\d{4}[\\/\\-\\.]\\d{1,2}[\\/\\-\\.]\\d{1,2}$",n=f[0],i=f[1],s=f[2];break;case"MDY":i=f[0],s=f[1],n=f[2];break;case"DMY":s=f[0],i=f[1],n=f[2]}if(RegExp(u,"").test(e)){s=parseInt(s,10),i=parseInt(i,10),n=parseInt(n,10);var p=new Date(n,i-1,s);t=p.getFullYear()===n&&p.getMonth()===i-1&&p.getDate()===s}}return t},CardNo:function(a){var e=$(a).val(),t=0===e.length;if(!t){var n=!/[^0-9 \-]+/.test(e),i=e.replace(/[^0-9]/g,""),s=i.length;if(n&&s&&"0345".indexOf(i[0])>0&&(15==s||16==s)){for(var r=0,l=0,o=!1,d=e.replace(/\D/g,""),u=d.length-1;u>=0;u--){var F=d.charAt(u);l=parseInt(F,10),o&&(l*=2)>9&&(l-=9),r+=l,o=!o}t=0===r%10}}return t},IPv4:function(a){var e=$(a).val(),t=0===e.length;return t||(t=/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i.test(e)&&_.every(e.split("."),function(a){return a.length>1?!a.beginsWithStr("0"):!0})),t},IPv6:function(a){var e=$(a).val(),t=0===e.length;return t||(t=/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i.test(e)),t},IP:function(a,e){var t=$(a).val(),n=0===t.length;if(!n){var i=t,s=spa.toInt($(a).data("validateIpaddressOctates")||4)-1,r=RegExp("^(([01]?[0-9]?[0-9]|2([0-4][0-9]|5[0-5]))\\.){"+s+"}([01]?[0-9]?[0-9]|2([0-4][0-9]|5[0-5]))$","g");n=r.test(i)&&_.every(i.split("."),function(a){return a.length>1?!a.beginsWithStr("0"):!0}),spa._validate._showValidateMsg(a,e,n);var l=$(a).data("validateIpaddressClass");if(n&&l){var o=i.split("."),d={A:{oct1:{B:0,E:127},oct2:{B:0,E:256},oct3:{B:0,E:256},oct4:{B:1,E:255}},B:{oct1:{B:127,E:192},oct2:{B:1,E:256},oct3:{B:0,E:256},oct4:{B:0,E:255}},C:{oct1:{B:191,E:224},oct2:{B:0,E:256},oct3:{B:1,E:256},oct4:{B:1,E:255}},D:{oct1:{B:223,E:240},oct2:{B:0,E:256},oct3:{B:0,E:256},oct4:{B:0,E:256}},E:{oct1:{B:239,E:255},oct2:{B:0,E:256},oct3:{B:0,E:256},oct4:{B:0,E:255}}};n=1*o[0]>d[l].oct1.B&&d[l].oct1.E>1*o[0]?1*o[1]>=d[l].oct2.B&&d[l].oct2.E>1*o[1]?1*o[2]>=d[l].oct3.B&&d[l].oct3.E>1*o[2]?1*o[3]>d[l].oct4.B&&d[l].oct4.E>1*o[3]?!0:!1:!1:!1:!1,spa._validate._showValidateMsg(a,e,n)}}return n},Subnet:function(a){var e=$(a).val(),t=0===e.length;if(!t){var n=RegExp("^((128|192|224|240|248|252|254)\\.0\\.0\\.0)|(255\\.(((0|128|192|224|240|248|252|254)\\.0\\.0)|(255\\.(((0|128|192|224|240|248|252|254)\\.0)|255\\.(0|128|192|224|240|248|252|254)))))$");t=n.test(e)&&_.every(e.split("."),function(a){return a.length>1?!a.beginsWithStr("0"):!0})}return t},PhoneUS:function(a){var e=$(a).val(),t=0===e.length;return t||(t=e.length>9&&e.match(/^(\+?1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/)),t},Compare:function(a){var e=$(a).val(),t=0===e.length;if(!t){var n,i=$(a),s=i.data(),r=spa.toJSON(s.validateCompare||"{}");if(!spa.isBlank(r)&&r.target){n=$(r.target);var l=r.valid||"=",o=spa.getElValue(a),d=spa.getElValue(n);if(("number".equalsIgnoreCase(r.type)||l.indexOf("<")>=0||l.indexOf(">")>=0)&&(o=spa.toFloat(o),d=spa.toFloat(d)),"date".equalsIgnoreCase(r.type));else switch(l){case"!=":t=o!=d;break;case"!==":t=o!==d;break;case"===":t=o===d;break;case">":t=o>d;break;case"<":t=d>o;break;case">=":t=o>=d;break;case"<=":t=d>=o;break;default:t=o==d}}}return t}},_showValidateMsg:function(a,e,t,n,i){e=e||"",arguments.length>2&&_.isString(t)&&(n=t),arguments.length>2&&_.isBoolean(t)&&t&&(e=""),n=n||spa._validate._validateAlertTemplate;var s=!n.beginsWithStrIgnoreCase("<"),r=$(a),l=r.parent(),o=r.data("errorClassTarget"),d=o?r.closest(o):l,u=r.data("errorPosition");a=r.get(0),spa._validate._isOnOfflineValidation||(d.removeClass("has-error-msg no-error-msg")[t===!1?"addClass":"removeClass"]("validation-error "+(e?"has-error-msg":"no-error-msg")),r[t===!1?"addClass":"removeClass"]("invalid-data"),i||spa.updateTrackFormCtrls(a.form));var F=s?$(n):r.next();!s&&u&&("first".equalsIgnoreCase(u)?F=l.children().first():"last".equalsIgnoreCase(u)&&(F=l.children().last()));var f="",p="",c="";return $(F).attr("class")===$(n).attr("class")||s?(e.beginsWithStrIgnoreCase("i18n:")&&(f=(e.getLeftStr("|")||e).replace(/i18n:/gi,""),c=e.getRightStr("|"),p="{html:'"+f+"'}",e=spa.i18n.text(f,spa.toJSON(c))),spa._validate._isOnOfflineValidation||($(F).attr("data-i18n",p).data("i18n",p),$(F).attr("data-i18n-data",c).data("i18nData",c),$(F).html(e))):spa.isBlank(e)||(u?"first".equalsIgnoreCase(u)?$(n).prependTo(l):"last".equalsIgnoreCase(u)?$(n).appendTo(l):$(n).insertAfter(r):$(n).insertAfter(r),spa._validate._showValidateMsg(a,e,t,n)),t},_getValidationClassTarget:function(a){var e=$(a),t=e.data("errorClassTarget");return t?e.closest(t):e.parent()},_addValidationClass:function(a,e){spa._validate._getValidationClassTarget(a).addClass(e)},_removeValidationClass:function(a,e){spa._validate._getValidationClassTarget(a).removeClass(e)},_deferValidate:function(){return!0},_registerPromise:function(a,e,t,n){var i=!spa.isBlank(a);if(i){var s=$(e),r=s.data("promises")||"",l=0>r.indexOf("["+a+"]");l&&(spa.console.log("validating promise: "+a),r+="["+a+"]",s.attr("data-promises",r).data("promises",r),spa._validate._addValidationClass(s,"validation-pending"),spa.is(t,"function")&&t.call(s,s,n,a))}return i},expose:function(a){return a=a||{},Object.keys(spa._validateDefaults).forEach(function(e){a[e]=spa._validate._fn[spa._validateDefaults[e]]}),a}};var _check=spa._validate.expose();spa.initValidation=spa.initDataValidation=function(a){spa.console.log(">>>>> initDataValidation request for context:"+a);var e=function(a){return a=a||{},_.each(_.keys(a),function(e){0==e.indexOf("on")&&e.indexOf("_")>0&&(_.each(e.split("_"),function(t){0>t.indexOf("on")&&(t="on"+t),a[t]?_.isArray(a[t])?a[t].push(a[e]):a[t]=[a[t],a[e]]:a[t]=[a[e]]}),delete a[e])}),a};a=a||"body";var t=$(a),n=t.data("validateElFilter")||"",i=e(spa.toJSON(t.data("validateCommon")||"{}")),s=_.merge({},i.onFocus),r=spa.toJSON(t.attr("data-validate-defaults")||{}),l=!!r.offline;spa.console.log("commonValidateRules");var o={fn:"_check.promise",offline:!1};spa.isBlank(s)?i.onFocus=o:(spa.is(s,"array")||(s=[s]),s.push(o)),i.onFocus=s,spa.console.log(i);var d,u,F,f,p,c=(t.data("validateForm")||t.data("validateScope")||"").replace(/onRender/i,"").replace(/[^a-zA-Z0-9]/g,"");if(spa.isBlank(c)){var g=a.replace(/[^a-zA-Z0-9]/g,"");c=g}spa.console.log("offlineValidationKey: "+c);var v=!spa.isBlank(c);v&&(spa.console.log("resetting the rules for "+c),spa._validate._offlineValidationRules[c]={rules:{}}),spa.console.log(c,spa._validate._offlineValidationRules[c]),t.find(n+"[data-validate]").each(function(a,t){var n=$(t).prop("id");n||(n=(t.name||t.type).replace(/[^a-z]/gi,"")+a,$(t).attr("id",n));var s={},r=$(t).data("validate");if(r&&0>r.indexOf("{")){var o=($(t).data("validateEvents")||"onBlur").replace(/[^a-z]/gi," ").normalizeStr().replace(/ /g,"_"),g=",offline:"+($(t).data("validateOffline")||l||"false"),h="{fn:"+r.replace(/[,;]/," ").normalizeStr().replace(/ /g,g+"},{fn:")+g+"}";r="{"+o+":["+h+"]}"}s=e(spa.toJSON(r)),spa.console.log(r),_.each(_.keys(i),function(a){var e=i[a];_.isArray(e)||(e=[e]),e.reverse(),_.each(e,function(e){if(d=!0,u="<",f=e.offline||!1,F=!1,e.el){var t=e.el.replace(/ /g,"").split(","),i=e.el.replace(/[< >!]/g,"").split(","),r=_.indexOf(i,n);d=r>=0,d&&(u=t[r].indexOf(">")>=0?">":"<",F=t[r].indexOf("!")>=0)}else e.ex&&(d=0>_.indexOf(e.ex.replace(/[< >!]/g,"").split(","),n));d&&(p=_.omit(e,["el","ex"]),F&&(p=_.extend(p,{offline:!f})),s[a]||(s[a]=[]),s[a]="<"===u?_.union([p],s[a]):_.union(s[a],[p]))})}),_.each(_.keys(s),function(a){var e=a.substring(2,3).toLowerCase()+a.substring(3);spa.console.log("settingup event on["+e+"]..."),_.isArray(s[a])||(s[a]=[s[a]]),spa.console.log(s),v&&_.each(s[a],function(a){spa.is(a,"array")||(a=[a]),_.each(a,function(a){if(a.hasOwnProperty("offline")||(a.offline=l),spa.console.log(a),a.offline&&!a.promise){var e={fn:a.fn,msg:a.msg};spa._validate._offlineValidationRules[c].rules[n]||(spa._validate._offlineValidationRules[c].rules[n]=[]),0>_.indexOf(spa._validate._offlineValidationRules[c].rules[n],e)&&spa._validate._offlineValidationRules[c].rules[n].push(e)}})}),spa.console.log("registering an event: "+a),a.beginsWithStrIgnoreCase("on")&&!"test".equalsIgnoreCase(e)&&$(t).on(e,function(){var e,t,n,i=this;_.every(s[a],function(a){return _.isArray(a)?_.every(a,function(a){return e=a.fn,spa.is(e,"string")&&(e=spa.findSafe(window,e)),spa.is(e,"function")||console.error("data-validate-function Not Found: "+a.fn),t=a.msg||$(i).data("validateMsg")||"",spa._validate._registerPromise(a.promise,i,e,t)&&(e=spa._validate._deferValidate),n=spa.is(e,"function")?e.call(i,i,t):!1,spa.is(n,"boolean")&&spa._validate._showValidateMsg(i,t,n),n}):(e=a.fn,spa.is(e,"string")&&(e=spa.findSafe(window,e)),spa.is(e,"function")||console.error("data-validate-function Not Found: "+a.fn),t=a.msg||$(i).data("validateMsg")||"",spa._validate._registerPromise(a.promise,i,e,t)&&(e=spa._validate._deferValidate),n=spa.is(e,"function")?e.call(i,i,t):!1,spa.is(n,"boolean")&&spa._validate._showValidateMsg(i,t,n),n)})})})})},spa.validateForm=spa.validate=spa.doDataValidation=function(a,e,t){var n;spa.is(arguments[1],"string")&&(n="#"+arguments[1].replace(/[ #]/g,"").replace(/,/g,",#")+",",e=arguments[2],t=arguments[3]);var i=a.replace(/[^a-zA-Z0-9]/g,""),s="#"+a.replace(/#/g,""),r=$(s),l=[];if(spa._validate._offlineValidationRules[i]){var o=spa._validate._offlineValidationRules[i].rules,d=function(a){var e,t,n,i=r.find("#"+a),s=i[0],d=spa.toBoolean(i.data("ignoreValidationIfInvisible"))&&!i.is(":visible");return d||(d=_.every(o[a],function(a){if(t=a.fn,spa.is(t,"string")&&(t=spa.findSafe(window,t)),spa.is(t,"function")||console.error("data-validate-function Not Found: "+a.fn),e=a.msg||i.data("validateMsg")||"",n=spa.is(t,"function")?t.call(s,s,e):!1,spa.is(n,"boolean")&&spa._validate._showValidateMsg(i,e,n,"",!0),!n){var r={errcode:2,el:s,fn:a.fn,msg:e};l.push(r)}return n})),d};if($.isEmptyObject(o)){var u=1,F="Offline rules not found in scope ["+a+"].";r.find(".validation-error,.validation-pending").length&&(u=3,F+=" Found .validation-error|.validation-pending"),l=[{errcode:u,errmsg:F}]}else{var f=_.keys(o);n&&(f=_.map(f,function(a){return n.indexOf("#"+a+",")>=0?a:""})),spa._validate._isOnOfflineValidation=!e,_.every(f,function(a){return a?d(a)||t:!0}),spa._validate._isOnOfflineValidation=!1}}else r.length?r.is("[data-validate-form]")&&(l=[{errcode:1,errmsg:"Form Not Initialized."}]):l=[{errcode:1,errmsg:"Form Not Found."}];return l},spa.removeValidationMsg=function(a){$(a).each(function(a,e){spa._validate._showValidateMsg(e,"",!0)})},spa.updateValidation=function(a,e,t,n){2==arguments.length&&(t=spa.isBlank(e)),$(a).each(function(a,i){spa._validate._showValidateMsg(i,e,t,n)})},spa.updateValidationPromise=function(a,e,t,n,i){var s,r,l=$(e);l.each(function(e,l){s=$(l),_.each(a.split(","),function(a){r=(s.data("promises")||"").replace("["+a.trim()+"]",""),s.attr("data-promises",r).data("promises",r),spa.isBlank(r)&&spa._validate._removeValidationClass(s,"validation-pending")}),spa._validate._showValidateMsg(l,t,n,i)})};