/*@license SPA.js (Form Validation Extension) [MIT]*/
!function(){spa._validateDefaults={required:"Required",digits:"Digits",numbers:"Numbers",integer:"Integer",alphabet:"Alpha",alphanumeric:"AlphaNumeric",pattern:"PatternMatch",range:"ValueRange",fixedlength:"Lengths",minlength:"LengthMin",maxlength:"LengthMax",email:"Email",url:"Url",date:"Date",cardno:"CardNo",ipv4:"IPv4",ipv6:"IPv6",ipaddress:"IP",subnetmask:"Subnet",phoneUS:"PhoneUS",wordsize:"WordSize",compare:"Compare",promise:"Promise",xss:"CheckXSS",noop:"Noop"},spa._validate={defaults:{offline:!0},_isOnOfflineValidation:!1,_validateAlertTemplate:'<div class="errortxt error-txt break-txt" data-i18n=""></div>',_offlineValidationRules:{},_fn:{Noop:function(){return!0},CheckXSS:function(a){var e=spa.getElValue(a);return!(/<\s*\/?\s*(\bscript\b)/gi.test(e)||/<(.)+\s+on([a-z])+\s*=|javascript:/gi.test(e))},Promise:function(a){var e,t;return spa._validate._isOnOfflineValidation||(t=(e=$(a)).data("validate")||"",/(promise)(\s)*:(\s)*(\'|\")/.test(t)&&spa._validate._addValidationClass(e,"validation-pending")),!0},Required:function(a){var e=spa.getElValue(a);return!spa.isBlank(e)},Digits:function(a){var e=$(a).val();return 0===e.length||/^\d+$/.test(e)},Numbers:function(a){var e=$(a).val();return 0===e.length||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},Integer:function(a){var e=$(a).val();return 0===e.length||/^-?\d+$/.test(e)},Alpha:function(a){var e=$(a).val();return 0===e.length||!/[^a-z]/gi.test(e)},AlphaNumeric:function(a){var e=$(a).val();return 0===e.length||!/[^a-z0-9]/gi.test(e)},PatternMatch:function(a){var e=$(a).val(),t=0===e.length;return t||(t=new RegExp($(a).data("validatePattern"),$(a).data("validatePatternOptions").replace(/!/g,"")).test(e),0<=$(a).data("validatePatternOptions").indexOf("!")&&(t=!t)),t},ValueRange:function(a){var e,t,n,s,i,l,r=$(a).val(),o=0===r.length;return o||(o=!1,/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(r)&&(e=spa.toFloat(r),t=(" "+($(a).data("validateRange")||"")+": ").split(":"),n=!spa.isBlank(t[0]),s=!spa.isBlank(t[1]),i=spa.toFloat(t[0]),l=spa.toFloat(t[1]),n&&s?o=i<=e&&e<=l:n?o=i<=e:s&&(o=e<=l))),o},LengthMin:function(a){var e=$(a).val(),t=spa.toInt($(a).data("minlength")||$(a).data("minLength")||$(a).attr("minlength"));return e.length>=t},LengthMax:function(a){var e=$(a).val(),t=spa.toInt($(a).data("maxlength")||$(a).data("maxLength"));return e.length<=t},Lengths:function(a){var e,t,n=$(a).val().length;return a.hasAttribute("data-fixed-length")||a.hasAttribute("data-fixedlength")?n==+(a.getAttribute("data-fixed-length")||a.getAttribute("data-fixedlength")):(e=spa.toInt($(a).data("minlength")||$(a).data("minLength")||$(a).attr("minlength")),t=spa.toInt($(a).data("maxlength")||$(a).data("maxLength")),e<=n&&n<=t)},WordSize:function(a){var e=(""+$(a).val()).replace(/[-\n]/g," ").split(" ").map(function(a){return a.length});return(spa.isBlank(e)?0:Math.max.apply(null,e))<=(spa.toInt($(a).data("validWordSize"))||20)},Email:function(a){var e=$(a).val();return 0===e.length||(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)||/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i.test(e))&&/[a-z0-9]/i.test(e[e.length-1])&&1==((e||"").match(/@/g)||[]).length},Url:function(a){var e=$(a).val();return 0===e.length||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},Date:function(a){var e=$(a).val();if(!(u=0===e.length)){u=!1;var t,n,s,i,l=$(a).data("validateFormat")||"YMD",r="^\\d{1,2}[\\/\\-\\.]\\d{1,2}[\\/\\-\\.]\\d{4}$",o=e.replace(/[^a-z]/gi,"");o&&((i=["","JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"].indexOf(o.toUpperCase()))<=0&&(i=["","JANUARY","FEBRUARY","MARCH","APRIL","MAY","JUNE","JULY","AUGUST","SEPTEMBER","OCTOBER","NOVEMBER","DECEMBER"].indexOf(o.toUpperCase())),0<i&&(e=e.replace(new RegExp(o,"gi"),i)));var d,u,p=(e=e.replace(/[^0-9]/g," ").normalizeStr().replace(/ /g,"/")).split("/");switch(l.toUpperCase()){case"YMD":r="^\\d{4}[\\/\\-\\.]\\d{1,2}[\\/\\-\\.]\\d{1,2}$",t=p[0],n=p[1],s=p[2];break;case"MDY":n=p[0],s=p[1],t=p[2];break;case"DMY":s=p[0],n=p[1],t=p[2]}new RegExp(r,"").test(e)&&(s=parseInt(s,10),n=parseInt(n,10),t=parseInt(t,10),u=(d=new Date(t,n-1,s)).getFullYear()===t&&d.getMonth()===n-1&&d.getDate()===s)}return u},CardNo:function(a){var e=$(a).val(),t=0===e.length;if(!t){var n=!/[^0-9 \-]+/.test(e),s=e.replace(/[^0-9]/g,""),i=s.length;if(n&&i&&0<"0345".indexOf(s[0])&&(15==i||16==i)){for(var l=0,r=0,o=!1,d=e.replace(/\D/g,""),u=d.length-1;0<=u;u--){var p=d.charAt(u),r=parseInt(p,10);o&&9<(r*=2)&&(r-=9),l+=r,o=!o}t=l%10==0}}return t},IPv4:function(a){var e=$(a).val();return 0===e.length||/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i.test(e)&&spa.every(e.split("."),function(a){return!(1<a.length)||!a.beginsWithStr("0")})},IPv6:function(a){var e=$(a).val();return 0===e.length||/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i.test(e)},IP:function(a,e){var t,n,s,i,l,r=$(a).val(),o=0===r.length;return o||(t=r,n=spa.toInt($(a).data("validateIpaddressOctates")||4)-1,o=new RegExp("^(([01]?[0-9]?[0-9]|2([0-4][0-9]|5[0-5]))\\.){"+n+"}([01]?[0-9]?[0-9]|2([0-4][0-9]|5[0-5]))$","g").test(t)&&spa.every(t.split("."),function(a){return!(1<a.length)||!a.beginsWithStr("0")}),spa._validate._showValidateMsg(a,e,o),s=$(a).data("validateIpaddressClass"),o&&s&&(l={A:{oct1:{B:0,E:127},oct2:{B:0,E:256},oct3:{B:0,E:256},oct4:{B:1,E:255}},B:{oct1:{B:127,E:192},oct2:{B:1,E:256},oct3:{B:0,E:256},oct4:{B:0,E:255}},C:{oct1:{B:191,E:224},oct2:{B:0,E:256},oct3:{B:1,E:256},oct4:{B:1,E:255}},D:{oct1:{B:223,E:240},oct2:{B:0,E:256},oct3:{B:0,E:256},oct4:{B:0,E:256}},E:{oct1:{B:239,E:255},oct2:{B:0,E:256},oct3:{B:0,E:256},oct4:{B:0,E:255}}},o=+(i=t.split("."))[0]>l[s].oct1.B&&+i[0]<l[s].oct1.E&&(+i[1]>=l[s].oct2.B&&+i[1]<l[s].oct2.E&&(+i[2]>=l[s].oct3.B&&+i[2]<l[s].oct3.E&&(+i[3]>l[s].oct4.B&&+i[3]<l[s].oct4.E))),spa._validate._showValidateMsg(a,e,o))),o},Subnet:function(a){var e=$(a).val(),t=0===e.length;return t=t||new RegExp("^((128|192|224|240|248|252|254)\\.0\\.0\\.0)|(255\\.(((0|128|192|224|240|248|252|254)\\.0\\.0)|(255\\.(((0|128|192|224|240|248|252|254)\\.0)|255\\.(0|128|192|224|240|248|252|254)))))$").test(e)&&spa.every(e.split("."),function(a){return!(1<a.length)||!a.beginsWithStr("0")})},PhoneUS:function(a){var e=$(a).val();return 0===e.length||9<e.length&&e.match(/^(\+?1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/)},Compare:function(a){var e=0===$(a).val().length;if(!e){var t,n=$(a).data(),s=spa.toJSON(n.validateCompare||"{}");if(!spa.isBlank(s)&&s.target){t=$(s.target);var i=s.valid||"=",l=spa.getElValue(a),r=spa.getElValue(t);if(("number".equalsIgnoreCase(s.type)||0<=i.indexOf("<")||0<=i.indexOf(">"))&&(l=spa.toFloat(l),r=spa.toFloat(r)),!"date".equalsIgnoreCase(s.type))switch(i){case"!=":e=l!=r;break;case"!==":e=l!==r;break;case"===":e=l===r;break;case">":e=r<l;break;case"<":e=l<r;break;case">=":e=r<=l;break;case"<=":e=l<=r;break;default:e=l==r}}}return e}},_showValidateMsg:function(a,e,t,n,s){e=e||"";var i=$(a);if(i.length){2<arguments.length&&spa.isString(t)&&(n=t),2<arguments.length&&spa.isBoolean(t)&&t&&(e="");var l=!(n=n||spa._validate._validateAlertTemplate).beginsWithStrIgnoreCase("<"),r=i.parent(),o=i.data("errorClassTarget"),d=o?i.closest(o):r,u=i.data("errorPosition");a=i.get(0),spa._validate._isOnOfflineValidation||(d.removeClass("has-error-msg no-error-msg")[!1===t?"addClass":"removeClass"]("validation-error "+(e?"has-error-msg":"no-error-msg")),i[!1===t?"addClass":"removeClass"]("invalid-data"),s||spa.updateTrackFormCtrls(a.form));var p=l?$(n):i.next();!l&&u&&("first".equalsIgnoreCase(u)?p=r.children().first():"last".equalsIgnoreCase(u)&&(p=r.children().last()));var F,f,c="",g="",v="";return $(p).attr("class")===$(n).attr("class")||l?(e.beginsWithStrIgnoreCase("i18n:")&&(spa.console.group("i18n-Msg"),spa.console.log("msg:",e),c=(e.getLeftStr("|")||e).replace(/i18n:/gi,""),v=e.getRightStr("|"),g="{html:'"+c+"'}",F=spa.toJSON(v),F=spa.isObject(F)?F:{},spa.console.log("i18nData@msg:",F),f=i.dataJSON("i18nData"),spa.isBlank(f)||(spa.console.log("i18nData@el",f),F=spa.merge(F,f),spa.console.log("i18nData:",F)),e=spa.i18n.text(c,F),spa.console.groupEnd("i18n-Msg")),spa._validate._isOnOfflineValidation||($(p).attr("data-i18n",g).data("i18n",g),$(p).attr("data-i18n-data",v).data("i18nData",v),$(p).html(e))):spa.isBlank(e)||(u?"first".equalsIgnoreCase(u)?$(n).prependTo(r):"last".equalsIgnoreCase(u)?$(n).appendTo(r):$(n).insertAfter(i):$(n).insertAfter(i),spa._validate._showValidateMsg(a,e,t,n)),t}spa.console.warn("Validation config/setup is wrong for validation Msg:["+e+"] forEl:",a)},_getValidationClassTarget:function(a){var e=$(a),t=e.data("errorClassTarget");return t?e.closest(t):e.parent()},_addValidationClass:function(a,e){spa._validate._getValidationClassTarget(a).addClass(e)},_removeValidationClass:function(a,e){spa._validate._getValidationClassTarget(a).removeClass(e)},_deferValidate:function(){return!0},_registerPromise:function(a,e,t,n){var s,i,l=!spa.isBlank(a);return!l||(i=(s=$(e)).data("promises")||"").indexOf("["+a+"]")<0&&(spa.console.log("validating promise: "+a),i+="["+a+"]",s.attr("data-promises",i).data("promises",i),spa._validate._addValidationClass(s,"validation-pending"),spa.isFunction(t)&&t.call(s,s,n,a)),l},expose:function(e){return e=e||{},spa.keys(spa._validateDefaults).forEach(function(a){e[a]=spa._validate._fn[spa._validateDefaults[a]]}),e}},spa.initValidation=spa.initDataValidation=function(a){spa.console.log(">>>>> initDataValidation request for context:"+a);function v(t){return t=t||{},spa.each(spa.keys(t),function(e){0==e.indexOf("on")&&0<e.indexOf("_")&&(spa.each(e.split("_"),function(a){a.indexOf("on")<0&&(a="on"+a),t[a]?spa.isArray(t[a])?t[a].push(t[e]):t[a]=[t[a],t[e]]:t[a]=[t[e]]}),delete t[e])}),t}a=a||"body";var e=$(a),t=e.data("validateElFilter")||"",h=v(spa.toJSON(e.data("validateCommon")||"{}")),n=spa.merge({},h.onFocus),_=!!spa.toJSON(e.attr("data-validate-defaults")||{}).offline;spa.console.log("commonValidateRules");var m,D,A,E,x,s={fn:"_check.promise",offline:!1};spa.isBlank(n)?h.onFocus=s:(spa.isArray(n)||(n=[n]),n.push(s)),h.onFocus=n,spa.console.log(h);var C=(e.data("validateForm")||e.data("validateScope")||"").replace(/onRender/i,"").replace(/[^a-zA-Z0-9]/g,"");spa.isBlank(C)&&(C=a.replace(/[^a-zA-Z0-9]/g,"")),spa.console.log("offlineValidationKey: "+C);var b=!spa.isBlank(C);b&&(spa.console.log("resetting the rules for "+C),spa._validate._offlineValidationRules[C]={rules:{}}),spa.console.log(C,spa._validate._offlineValidationRules[C]),e.find(t+"[data-validate]").each(function(a,t){var s=$(t).prop("id");s||(s=(t.name||t.type).replace(/[^a-z]/gi,"")+a,$(t).attr("id",s));var e,n,i={},l=$(t).data("validate");l&&l.indexOf("{")<0&&(e=($(t).data("validateEvents")||"onBlur").replace(/[^a-z]/gi," ").normalizeStr().replace(/ /g,"_"),n=",offline:"+($(t).data("validateOffline")||_||"false"),l="{"+e+":["+("{fn:"+l.replace(/[,;]/," ").normalizeStr().replace(/ /g,n+"},{fn:")+n+"}")+"]}"),i=v(spa.toJSON(l));var r,o,d={},u="",p="",F=t.attributes;if(F&&F.length){for(var f=F.length;0<=f;f--)if((u=F[f]?F[f].name:"")&&/^data-validate-on/i.test(u)&&(p="."+(o=u.replace(/data-validate-/i,""),/^on/i.test(o)&&(o=(o=o.toLowerCase()).substring(0,2)+o[2].toUpperCase()+o.substring(3)),o),r=spa.toJSON(t.getAttribute(u)),!spa.isBlank(r)))if(Array.isArray(r))for(var c=0,g=r.length;c<g;c++)spa.setObjProperty(d,p,r[c]);else spa.setObjProperty(d,p,r);spa.isBlank(d)||(d=v(d),Object.keys(d).forEach(function(a){spa.setObjProperty(i,"."+a,d[a])}))}spa.console.log(l),spa.each(spa.keys(h),function(n){var a=h[n];spa.isArray(a)||(a=[a]),a.reverse(),spa.console.group("vRules #"+s),spa.each(a,function(a){var e,t;m=!0,D="<",E=a.offline||!1,A=!1,a.el?(e=a.el.replace(/ /g,"").split(","),t=a.el.replace(/[< >!]/g,"").split(",").indexOf(s),(m=0<=t)&&(D=0<=e[t].indexOf(">")?">":"<",A=0<=e[t].indexOf("!"))):a.ex&&(m=a.ex.replace(/[< >!]/g,"").split(",").indexOf(s)<0),m&&(x=spa.omit(a,["el","ex"]),spa.console.log(">>commonRule2El:",x,a),A&&(x.offline=!E),i[n]||(i[n]=[]),spa.console.group("-"+n),"<"===D?(spa.console.log(D+"all:",[x],i[n]),i[n]=spa.union([x],i[n])):(spa.console.log(D+"all:",i[n],[x]),i[n]=spa.union(i[n],[x])),spa.console.log("uniq:",i[n]),spa.console.groupEnd("-"+n))}),spa.console.group("-FinalRules"),spa.console.log(i),spa.console.groupEnd("-All"),spa.console.groupEnd("vRules #"+s)}),spa.each(spa.keys(i),function(a){var e=a.substring(2,3).toLowerCase()+a.substring(3);spa.console.log("settingup event on["+e+"]..."),spa.isArray(i[a])||(i[a]=[i[a]]),spa.console.log(i),b&&spa.each(i[a],function(a){spa.isArray(a)||(a=[a]),spa.each(a,function(a){var e;a.hasOwnProperty("offline")||(a.offline=_),spa.console.log(a),a.offline&&!a.promise&&(e={fn:a.fn,msg:a.msg},spa._validate._offlineValidationRules[C].rules[s]||(spa._validate._offlineValidationRules[C].rules[s]=[]),spa.indexOf(spa._validate._offlineValidationRules[C].rules[s],e)<0&&spa._validate._offlineValidationRules[C].rules[s].push(e))})}),spa.console.log("registering an event: "+a),a.beginsWithStrIgnoreCase("on")&&!"test".equalsIgnoreCase(e)&&$(t).on(e,function(){var e,t,n,s=this;spa.every(i[a],function(a){return spa.isArray(a)?spa.every(a,function(a){return e=a.fn,spa.isString(e)&&(e=spa.findSafe(window,e)),spa.isFunction(e)||console.error("data-validate-function Not Found: "+a.fn),t=a.msg||$(s).data("validateMsg")||"",spa._validate._registerPromise(a.promise,s,e,t)&&(e=spa._validate._deferValidate),n=!!spa.isFunction(e)&&e.call(s,s,t),spa.isBoolean(n)&&spa._validate._showValidateMsg(s,t,n),n}):(e=a.fn,spa.isString(e)&&(e=spa.findSafe(window,e)),spa.isFunction(e)||console.error("data-validate-function Not Found: "+a.fn),t=a.msg||$(s).data("validateMsg")||"",spa._validate._registerPromise(a.promise,s,e,t)&&(e=spa._validate._deferValidate),n=!!spa.isFunction(e)&&e.call(s,s,t),spa.isBoolean(n)&&spa._validate._showValidateMsg(s,t,n),n)})})})})},spa.validateForm=spa.validate=spa.doDataValidation=function(a,e,r){var t;spa.isString(e)&&(t="#"+e.replace(/[ #]/g,"").replace(/,/g,",#")+",",e=r,r=arguments[3]);var o,n,s,i,l=a.replace(/[^a-zA-Z0-9]/g,""),d="#"+a.replace(/#/g,""),u=$(d),p=[];return spa._validate._offlineValidationRules[l]?(o=spa._validate._offlineValidationRules[l].rules,spa.isEmptyObject(o)?(n=1,s="Offline rules not found in scope ["+a+"].",u.find(".validation-error,.validation-pending").length&&(n=3,s+=" Found .validation-error|.validation-pending"),p=[{errcode:n,errmsg:s}]):(i=spa.keys(o),t&&(i=i.map(function(a){return 0<=t.indexOf("#"+a+",")?a:""})),spa._validate._isOnOfflineValidation=!e,spa.every(i,function(a){return!a||(e=a,i=u.find("#"+e),l=i[0],spa.toBoolean(i.data("ignoreValidationIfInvisible"))&&!i.is(":visible")||spa.every(o[e],function(a){var e;return n=a.fn,spa.isString(n)&&(n=spa.findSafe(window,n)),spa.isFunction(n)||console.error("data-validate-function Not Found: "+a.fn),t=a.msg||i.data("validateMsg")||"",s=!!spa.isFunction(n)&&n.call(l,l,t),spa.isBoolean(s)&&spa._validate._showValidateMsg(i,t,s,"",!0),s||(e={errcode:2,el:l,fn:a.fn,msg:t},p.push(e)),s})||r);var e,t,n,s,i,l}),spa._validate._isOnOfflineValidation=!1)):u.length?u.is("[data-validate-form]")&&(p=[{errcode:1,errmsg:"Form Not Initialized."}]):p=[{errcode:1,errmsg:"Form Not Found."}],p},spa.removeValidationMsg=function(a){$(a).each(function(a,e){spa._validate._showValidateMsg(e,"",!0)})},spa.updateValidation=function(a,t,n,s){2==arguments.length&&(n=spa.isBlank(t)),$(a).each(function(a,e){spa._validate._showValidateMsg(e,t,n,s)})},spa.updateValidationPromise=function(t,a,n,s,i){var l,r;$(a).each(function(a,e){l=$(e),spa.each(t.split(","),function(a){r=(l.data("promises")||"").replace("["+a.trim()+"]",""),l.attr("data-promises",r).data("promises",r),spa.isBlank(r)&&spa._validate._removeValidationClass(l,"validation-pending")}),spa._validate._showValidateMsg(e,n,s,i)})},this._clearSpaValidateMsg=function(a){return spa._validate._showValidateMsg(a),!0},this._check=spa._validate.expose()}();