/*@license SPA.js (Form Validation Extension) [MIT]*/
!function(){spa._validateDefaults={required:"Required",digits:"Digits",numbers:"Numbers",integer:"Integer",alphabet:"Alpha",alphanumeric:"AlphaNumeric",pattern:"PatternMatch",range:"ValueRange",fixedlength:"Lengths",minlength:"LengthMin",maxlength:"LengthMax",email:"Email",url:"Url",date:"Date",cardno:"CardNo",ipv4:"IPv4",ipv6:"IPv6",ipaddress:"IP",subnetmask:"Subnet",phoneUS:"PhoneUS",wordsize:"WordSize",compare:"Compare",promise:"Promise",xss:"CheckXSS",noop:"Noop"},spa._validate={defaults:{offline:!0},_isOnOfflineValidation:!1,_validateAlertTemplate:'<div class="errortxt error-txt break-txt" data-i18n=""></div>',_offlineValidationRules:{},_fn:{Noop:function(){return!0},CheckXSS:function(a){var e=spa.getElValue(a);return!(/<\s*\/?\s*(\bscript\b)/gi.test(e)||/<(.)+\s+on([a-z])+\s*=|javascript:/gi.test(e))},Promise:function(a){var e,t;return spa._validate._isOnOfflineValidation||(t=(e=$(a)).data("validate")||"",/(promise)(\s)*:(\s)*(\'|\")/.test(t)&&spa._validate._addValidationClass(e,"validation-pending")),!0},Required:function(a){var e=spa.getElValue(a);return!spa.isBlank(e)},Digits:function(a){var e=$(a).val();return 0===e.length||/^\d+$/.test(e)},Numbers:function(a){var e=$(a).val();return 0===e.length||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},Integer:function(a){var e=$(a).val();return 0===e.length||/^-?\d+$/.test(e)},Alpha:function(a){var e=$(a).val();return 0===e.length||!/[^a-z]/gi.test(e)},AlphaNumeric:function(a){var e=$(a).val();return 0===e.length||!/[^a-z0-9]/gi.test(e)},PatternMatch:function(a){var e=$(a).val(),t=0===e.length;return t||(t=new RegExp($(a).data("validatePattern"),$(a).data("validatePatternOptions").replace(/!/g,"")).test(e),0<=$(a).data("validatePatternOptions").indexOf("!")&&(t=!t)),t},ValueRange:function(a){var e,t,n,i,s,l,o=$(a).val(),r=0===o.length;return r||(r=!1,/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(o)&&(e=spa.toFloat(o),t=(" "+($(a).data("validateRange")||"")+": ").split(":"),n=!spa.isBlank(t[0]),i=!spa.isBlank(t[1]),s=spa.toFloat(t[0]),l=spa.toFloat(t[1]),n&&i?r=s<=e&&e<=l:n?r=s<=e:i&&(r=e<=l))),r},LengthMin:function(a){var e=$(a).val(),t=spa.toInt($(a).data("minlength")||$(a).data("minLength")||$(a).attr("minlength"));return e.length>=t},LengthMax:function(a){var e=$(a).val(),t=spa.toInt($(a).data("maxlength")||$(a).data("maxLength"));return e.length<=t},Lengths:function(a){var e,t,n=$(a).val().length;return a.hasAttribute("data-fixed-length")||a.hasAttribute("data-fixedlength")?n==+(a.getAttribute("data-fixed-length")||a.getAttribute("data-fixedlength")):(e=spa.toInt($(a).data("minlength")||$(a).data("minLength")||$(a).attr("minlength")),t=spa.toInt($(a).data("maxlength")||$(a).data("maxLength")),e<=n&&n<=t)},WordSize:function(a){var e=(""+$(a).val()).replace(/[-\n]/g," ").split(" ").map(function(a){return a.length});return(spa.isBlank(e)?0:Math.max.apply(null,e))<=(spa.toInt($(a).data("validWordSize"))||20)},Email:function(a){var e=$(a).val();return 0===e.length||(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)||/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i.test(e))&&/[a-z0-9]/i.test(e[e.length-1])&&1==((e||"").match(/@/g)||[]).length},Url:function(a){var e=$(a).val();return 0===e.length||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},Date:function(a){var e=$(a).val();if(!(u=0===e.length)){u=!1;var t,n,i,s,l=$(a).data("validateFormat")||"YMD",o="^\\d{1,2}[\\/\\-\\.]\\d{1,2}[\\/\\-\\.]\\d{4}$",r=e.replace(/[^a-z]/gi,"");r&&((s=["","JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"].indexOf(r.toUpperCase()))<=0&&(s=["","JANUARY","FEBRUARY","MARCH","APRIL","MAY","JUNE","JULY","AUGUST","SEPTEMBER","OCTOBER","NOVEMBER","DECEMBER"].indexOf(r.toUpperCase())),0<s&&(e=e.replace(new RegExp(r,"gi"),s)));var d,u,p=(e=e.replace(/[^0-9]/g," ").normalizeStr().replace(/ /g,"/")).split("/");switch(l.toUpperCase()){case"YMD":o="^\\d{4}[\\/\\-\\.]\\d{1,2}[\\/\\-\\.]\\d{1,2}$",t=p[0],n=p[1],i=p[2];break;case"MDY":n=p[0],i=p[1],t=p[2];break;case"DMY":i=p[0],n=p[1],t=p[2]}new RegExp(o,"").test(e)&&(i=parseInt(i,10),n=parseInt(n,10),t=parseInt(t,10),u=(d=new Date(t,n-1,i)).getFullYear()===t&&d.getMonth()===n-1&&d.getDate()===i)}return u},CardNo:function(a){var e=$(a).val(),t=0===e.length;if(!t){var n=!/[^0-9 \-]+/.test(e),i=e.replace(/[^0-9]/g,""),s=i.length;if(n&&s&&0<"0345".indexOf(i[0])&&(15==s||16==s)){for(var l=0,o=0,r=!1,d=e.replace(/\D/g,""),u=d.length-1;0<=u;u--){var p=d.charAt(u),o=parseInt(p,10);r&&9<(o*=2)&&(o-=9),l+=o,r=!r}t=l%10==0}}return t},IPv4:function(a){var e=$(a).val();return 0===e.length||/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i.test(e)&&spa.every(e.split("."),function(a){return!(1<a.length)||!a.beginsWithStr("0")})},IPv6:function(a){var e=$(a).val();return 0===e.length||/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i.test(e)},IP:function(a,e){var t,n,i,s,l,o=$(a).val(),r=0===o.length;return r||(t=o,n=spa.toInt($(a).data("validateIpaddressOctates")||4)-1,r=new RegExp("^(([01]?[0-9]?[0-9]|2([0-4][0-9]|5[0-5]))\\.){"+n+"}([01]?[0-9]?[0-9]|2([0-4][0-9]|5[0-5]))$","g").test(t)&&spa.every(t.split("."),function(a){return!(1<a.length)||!a.beginsWithStr("0")}),spa._validate._showValidateMsg(a,e,r),i=$(a).data("validateIpaddressClass"),r&&i&&(l={A:{oct1:{B:0,E:127},oct2:{B:0,E:256},oct3:{B:0,E:256},oct4:{B:1,E:255}},B:{oct1:{B:127,E:192},oct2:{B:1,E:256},oct3:{B:0,E:256},oct4:{B:0,E:255}},C:{oct1:{B:191,E:224},oct2:{B:0,E:256},oct3:{B:1,E:256},oct4:{B:1,E:255}},D:{oct1:{B:223,E:240},oct2:{B:0,E:256},oct3:{B:0,E:256},oct4:{B:0,E:256}},E:{oct1:{B:239,E:255},oct2:{B:0,E:256},oct3:{B:0,E:256},oct4:{B:0,E:255}}},r=+(s=t.split("."))[0]>l[i].oct1.B&&+s[0]<l[i].oct1.E&&(+s[1]>=l[i].oct2.B&&+s[1]<l[i].oct2.E&&(+s[2]>=l[i].oct3.B&&+s[2]<l[i].oct3.E&&(+s[3]>l[i].oct4.B&&+s[3]<l[i].oct4.E))),spa._validate._showValidateMsg(a,e,r))),r},Subnet:function(a){var e=$(a).val(),t=0===e.length;return t=t||new RegExp("^((128|192|224|240|248|252|254)\\.0\\.0\\.0)|(255\\.(((0|128|192|224|240|248|252|254)\\.0\\.0)|(255\\.(((0|128|192|224|240|248|252|254)\\.0)|255\\.(0|128|192|224|240|248|252|254)))))$").test(e)&&spa.every(e.split("."),function(a){return!(1<a.length)||!a.beginsWithStr("0")})},PhoneUS:function(a){var e=$(a).val();return 0===e.length||9<e.length&&e.match(/^(\+?1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/)},Compare:function(a){var e=0===$(a).val().length;if(!e){var t,n=$(a).data(),i=spa.toJSON(n.validateCompare||"{}");if(!spa.isBlank(i)&&i.target){t=$(i.target);var s=i.valid||"=",l=spa.getElValue(a),o=spa.getElValue(t);if(("number".equalsIgnoreCase(i.type)||0<=s.indexOf("<")||0<=s.indexOf(">"))&&(l=spa.toFloat(l),o=spa.toFloat(o)),!"date".equalsIgnoreCase(i.type))switch(s){case"!=":e=l!=o;break;case"!==":e=l!==o;break;case"===":e=l===o;break;case">":e=o<l;break;case"<":e=l<o;break;case">=":e=o<=l;break;case"<=":e=l<=o;break;default:e=l==o}}}return e}},_showValidateMsg:function(a,e,t,n,i){e=e||"";var s=$(a);if(s.length){2<arguments.length&&spa.isString(t)&&(n=t),2<arguments.length&&spa.isBoolean(t)&&t&&(e="");var l=!(n=n||spa._validate._validateAlertTemplate).beginsWithStrIgnoreCase("<"),o=s.parent(),r=s.data("errorClassTarget"),d=r?s.closest(r):o,u=s.data("errorPosition");a=s.get(0),spa._validate._isOnOfflineValidation||(d.removeClass("has-error-msg no-error-msg")[!1===t?"addClass":"removeClass"]("validation-error "+(e?"has-error-msg":"no-error-msg")),s[!1===t?"addClass":"removeClass"]("invalid-data"),i||spa.updateTrackFormCtrls(a.form));var p=l?$(n):s.next();!l&&u&&("first".equalsIgnoreCase(u)?p=o.children().first():"last".equalsIgnoreCase(u)&&(p=o.children().last()));var F,f,c,g="",v="";return $(p).attr("class")===$(n).attr("class")||l?(e.beginsWithStrIgnoreCase("i18n:")&&(spa.console.group("i18n-Msg"),spa.console.log("msg:",e),F=(e.getLeftStr("|")||e).replace(/i18n:/gi,""),v=e.getRightStr("|"),g="{html:'"+F+"'}",f=spa.toJSON(v),f=spa.isObject(f)?f:{},spa.console.log("i18nData@msg:",f),c=s.dataJSON("i18nData"),spa.isBlank(c)||(spa.console.log("i18nData@el",c),f=spa.merge(f,c),spa.console.log("i18nData:",f)),e=spa.i18n.text(F,f),spa.console.groupEnd("i18n-Msg")),spa._validate._isOnOfflineValidation||($(p).attr("data-i18n",g).data("i18n",g),$(p).attr("data-i18n-data",v).data("i18nData",v),$(p).html(e))):spa.isBlank(e)||(u?"first".equalsIgnoreCase(u)?$(n).prependTo(o):"last".equalsIgnoreCase(u)?$(n).appendTo(o):$(n).insertAfter(s):$(n).insertAfter(s),spa._validate._showValidateMsg(a,e,t,n)),t}spa.console.warn("Validation config/setup is wrong for validation Msg:["+e+"] forEl:",a)},_getValidationClassTarget:function(a){var e=$(a),t=e.data("errorClassTarget");return t?e.closest(t):e.parent()},_addValidationClass:function(a,e){spa._validate._getValidationClassTarget(a).addClass(e)},_removeValidationClass:function(a,e){spa._validate._getValidationClassTarget(a).removeClass(e)},_deferValidate:function(){return!0},_registerPromise:function(a,e,t,n){var i,s,l=!spa.isBlank(a);return!l||(s=(i=$(e)).data("promises")||"").indexOf("["+a+"]")<0&&(spa.console.log("validating promise: "+a),s+="["+a+"]",i.attr("data-promises",s).data("promises",s),spa._validate._addValidationClass(i,"validation-pending"),spa.isFunction(t)&&t.call(i,i,n,a)),l},expose:function(e){return e=e||{},spa.keys(spa._validateDefaults).forEach(function(a){e[a]=spa._validate._fn[spa._validateDefaults[a]]}),e}},spa.initValidation=spa.initDataValidation=function(a){spa.console.log(">>>>> initDataValidation request for context:"+a);function v(t){return t=t||{},spa.each(spa.keys(t),function(e){0==e.indexOf("on")&&0<e.indexOf("_")&&(spa.each(e.split("_"),function(a){a.indexOf("on")<0&&(a="on"+a),t[a]?spa.isArray(t[a])?t[a].push(t[e]):t[a]=[t[a],t[e]]:t[a]=[t[e]]}),delete t[e])}),t}a=a||"body";var e=$(a),t=e.data("validateElFilter")||"",h=v(spa.toJSON(e.data("validateCommon")||"{}")),n=spa.merge({},h.onFocus),m=!!spa.toJSON(e.attr("data-validate-defaults")||{}).offline;spa.console.log("commonValidateRules");var _,D,A,E,x,i={fn:"_check.promise",offline:!1};spa.isBlank(n)?h.onFocus=i:(spa.isArray(n)||(n=[n]),n.push(i)),h.onFocus=n,spa.console.log(h);var C=(e.data("validateForm")||e.data("validateScope")||"").replace(/onRender/i,"").replace(/[^a-zA-Z0-9]/g,"");spa.isBlank(C)&&(C=a.replace(/[^a-zA-Z0-9]/g,"")),spa.console.log("offlineValidationKey: "+C);var b=!spa.isBlank(C);b&&(spa.console.log("resetting the rules for "+C),spa._validate._offlineValidationRules[C]={rules:{}}),spa.console.log(C,spa._validate._offlineValidationRules[C]),e.find(t+"[data-validate]").each(function(a,e){var i=$(e).prop("id");i||(i=(e.name||e.type).replace(/[^a-z]/gi,"")+a,$(e).attr("id",i));var t,n,r={},s=$(e).data("validate");s&&s.indexOf("{")<0&&(t=($(e).data("validateEvents")||"onBlur").replace(/[^a-z]/gi," ").normalizeStr().replace(/ /g,"_"),n=",offline:"+($(e).data("validateOffline")||m||"false"),s="{"+t+":["+("{fn:"+s.replace(/[,;]/," ").normalizeStr().replace(/ /g,n+"},{fn:")+n+"}")+"]}"),r=v(spa.toJSON(s));var l,o,d,u={},p="",F=e.attributes;if(F&&F.length){for(var f=F.length;0<=f;f--)if((p=F[f]?F[f].name:"")&&/^data-validate-on/i.test(p)&&(l="."+(d=p.replace(/data-validate-/i,""),/^on/i.test(d)&&(d=(d=d.toLowerCase()).substring(0,2)+d[2].toUpperCase()+d.substring(3)),d),o=spa.toJSON(e.getAttribute(p)),!spa.isBlank(o)))if(Array.isArray(o))for(var c=0,g=o.length;c<g;c++)spa.setObjProperty(u,l,o[c]);else spa.setObjProperty(u,l,o);spa.isBlank(u)||(u=v(u),Object.keys(u).forEach(function(a){spa.setObjProperty(r,"."+a,u[a])}))}spa.console.log(s),spa.each(spa.keys(h),function(n){var a=h[n];spa.isArray(a)||(a=[a]),a.reverse(),spa.console.group("vRules #"+i),spa.each(a,function(a){var e,t;_=!0,D="<",E=a.offline||!1,A=!1,a.el?(e=a.el.replace(/ /g,"").split(","),t=a.el.replace(/[< >!]/g,"").split(",").indexOf(i),(_=0<=t)&&(D=0<=e[t].indexOf(">")?">":"<",A=0<=e[t].indexOf("!"))):a.ex&&(_=a.ex.replace(/[< >!]/g,"").split(",").indexOf(i)<0),_&&(x=spa.omit(a,["el","ex"]),spa.console.log(">>commonRule2El:",x,a),A&&(x.offline=!E),r[n]||(r[n]=[]),spa.console.group("-"+n),"<"===D?(spa.console.log(D+"all:",[x],r[n]),r[n]=spa.union([x],r[n])):(spa.console.log(D+"all:",r[n],[x]),r[n]=spa.union(r[n],[x])),spa.console.log("uniq:",r[n]),spa.console.groupEnd("-"+n))}),spa.console.group("-FinalRules"),spa.console.log(r),spa.console.groupEnd("-All"),spa.console.groupEnd("vRules #"+i)}),spa.each(spa.keys(r),function(o){var a=o.substring(2,3).toLowerCase()+o.substring(3);spa.console.log("settingup event on["+a+"]..."),spa.isArray(r[o])||(r[o]=[r[o]]),spa.console.log(r),b&&spa.each(r[o],function(a){spa.isArray(a)||(a=[a]),spa.each(a,function(a){var e;a.hasOwnProperty("offline")||(a.offline=m),spa.console.log(a),a.offline&&!a.promise&&(e={fn:a.fn,msg:a.msg},spa._validate._offlineValidationRules[C].rules[i]||(spa._validate._offlineValidationRules[C].rules[i]=[]),spa.indexOf(spa._validate._offlineValidationRules[C].rules[i],e)<0&&spa._validate._offlineValidationRules[C].rules[i].push(e))})}),spa.console.log("registering an event: "+o),o.beginsWithStrIgnoreCase("on")&&!"test".equalsIgnoreCase(a)&&$(e).on(a,function(){var e,t,n,i=this,a=$(i),s=i&&i.hasAttribute("data-validate-pause")&&spa.toBoolean(i.getAttribute("data-validate-pause")+""||"true"),l=i&&i.hasAttribute("data-ignore-validation-if-invisible")&&spa.toBoolean(i.getAttribute("data-ignore-validation-if-invisible")+""||"true");s||l&&!a.is(":visible")||spa.every(r[o],function(a){return spa.isArray(a)?spa.every(a,function(a){return e=a.fn,spa.isString(e)&&(e=spa.findSafe(window,e)),spa.isFunction(e)||console.error("data-validate-function Not Found: "+a.fn),t=a.msg||$(i).data("validateMsg")||"",spa._validate._registerPromise(a.promise,i,e,t)&&(e=spa._validate._deferValidate),n=!!spa.isFunction(e)&&e.call(i,i,t),spa.isBoolean(n)&&spa._validate._showValidateMsg(i,t,n),n}):(e=a.fn,spa.isString(e)&&(e=spa.findSafe(window,e)),spa.isFunction(e)||console.error("data-validate-function Not Found: "+a.fn),t=a.msg||$(i).data("validateMsg")||"",spa._validate._registerPromise(a.promise,i,e,t)&&(e=spa._validate._deferValidate),n=!!spa.isFunction(e)&&e.call(i,i,t),spa.isBoolean(n)&&spa._validate._showValidateMsg(i,t,n),n)})})})})},spa.validateForm=spa.validate=spa.doDataValidation=function(a,e,o){var t;spa.isString(arguments[1])&&(t="#"+arguments[1].replace(/[ #]/g,"").replace(/,/g,",#")+",",e=arguments[2],o=arguments[3]);var r,n,i,s,l=a.replace(/[^a-zA-Z0-9]/g,""),d="#"+a.replace(/#/g,""),u=$(d),p=[];return spa._validate._offlineValidationRules[l]?(r=spa._validate._offlineValidationRules[l].rules,spa.isEmptyObject(r)?(n=1,i="Offline rules not found in scope ["+a+"].",u.find(".validation-error,.validation-pending").length&&(n=3,i+=" Found .validation-error|.validation-pending"),p=[{errcode:n,errmsg:i}]):(s=spa.keys(r),t&&(s=s.map(function(a){return 0<=t.indexOf("#"+a+",")?a:""})),spa._validate._isOnOfflineValidation=!e,spa.every(s,function(a){return!a||(e=a,s=u.find("#"+e),(l=s[0])&&l.hasAttribute("data-validate-pause")&&spa.toBoolean(l.getAttribute("data-validate-pause")+""||"true")||spa.toBoolean(s.data("ignoreValidationIfInvisible"))&&!s.is(":visible")||spa.every(r[e],function(a){var e;return n=a.fn,spa.isString(n)&&(n=spa.findSafe(window,n)),spa.isFunction(n)||console.error("data-validate-function Not Found: "+a.fn),t=a.msg||s.data("validateMsg")||"",i=!!spa.isFunction(n)&&n.call(l,l,t),spa.isBoolean(i)&&spa._validate._showValidateMsg(s,t,i,"",!0),i||(e={errcode:2,el:l,fn:a.fn,msg:t},p.push(e)),i})||o);var e,t,n,i,s,l}),spa._validate._isOnOfflineValidation=!1)):u.length?u.is("[data-validate-form]")&&(p=[{errcode:1,errmsg:"Form Not Initialized."}]):p=[{errcode:1,errmsg:"Form Not Found."}],p},spa.pauseValidation=function(a,e){var t=void 0===e||e;$(a).each(function(a,e){t?e.setAttribute("data-validate-pause",t):e.removeAttribute("data-validate-pause")})},spa.clearValidation=spa.removeValidationMsg=function(a){a&&$(a).each(function(a,e){spa._validate._showValidateMsg(e,"",!0)})},spa.updateValidation=function(a,t,n,i){2==arguments.length&&(n=spa.isBlank(t)),$(a).each(function(a,e){spa._validate._showValidateMsg(e,t,n,i)})},spa.updateValidationPromise=function(t,a,n,i,s){var l,o;$(a).each(function(a,e){l=$(e),spa.each(t.split(","),function(a){o=(l.data("promises")||"").replace("["+a.trim()+"]",""),l.attr("data-promises",o).data("promises",o),spa.isBlank(o)&&spa._validate._removeValidationClass(l,"validation-pending")}),spa._validate._showValidateMsg(e,n,i,s)})},this._clearSpaValidateMsg=function(a){return spa._validate._showValidateMsg(a),!0},this._check=spa._validate.expose()}();