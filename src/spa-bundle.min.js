/*@license SPA.js (bundle-v2.86.0) [MIT|https://github.com/sucom/SPA.js/blob/master/LICENSE]*//*build-v20200802.130858*/; 
/*@license SPA.js (core) [MIT]*/
!function(){var T,h=this,E=document,ae=function(){};(h.spa=h.xsr=h.__=h._$=ae).VERSION="2.86.0";var o=Object.prototype,ne=Array.prototype,e=String.prototype,t=Date.prototype,a=o.toString.call(window.app).slice(8,-1).toLowerCase();window.app&&/^html(.*)element$/i.test(a)&&(window.app={api:{}}),window.app=window.app||{api:{}},window.app.api=window.app.api||{};var re,n=function(){try{var e=navigator.userAgent,t=e.indexOf("MSIE ");if(0<t)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(0<e.indexOf("Trident/")){var a=e.indexOf("rv:");return parseInt(e.substring(a+3,e.indexOf(".",a)),10)}}catch(e){}return 0}(),m=document.documentMode||n,g=!m;function P(){}function ie(e,t,a){if(R(e))return 3==arguments.length?(e.setAttribute(t,a),e):e.getAttribute(t)}ae.isIE=m,ae.isNonIE=g,ae.noop=P,function(){for(var e,t=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],a=t.length,n=window.console=window.console||{};a--;)n[e=t[a]]||(n[e]=function(){});"none"in window||(window.none=""),"noop"in window||(window.noop=function(){})}(),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});var r="hasOwnProperty,prototype,__proto__,isPrototypeOf".split(",");function i(e,t){return o.hasOwnProperty.call(e,t)}function s(e){return ne.slice.call(e)}function l(e,t){ae.debug&&console[e]&&console[e].apply(null,t)}ae.debug=!1,ae.debugger={on:function(){ae.debug=!0},off:function(){ae.debug=!1},toggle:function(){ae.debug=!ae.debug}};var c,oe={clear:function(){console.clear()},assert:function(){l("assert",s(arguments))},count:function(){l("count",s(arguments))},debug:function(){l("debug",s(arguments))},dir:function(){l("dir",s(arguments))},dirxml:function(){l("dirxml",s(arguments))},error:function(){l("error",s(arguments))},exception:function(){l("exception",s(arguments))},group:function(){l("group",s(arguments))},groupCollapsed:function(){l("groupCollapsed",s(arguments))},groupEnd:function(){l("groupEnd",s(arguments))},info:function(){l("info",s(arguments))},log:function(){l("log",s(arguments))},markTimeline:function(){l("markTimeline",s(arguments))},profile:function(){l("profile",s(arguments))},profileEnd:function(){l("profileEnd",s(arguments))},table:function(){l("table",s(arguments))},time:function(){l("time",s(arguments))},timeEnd:function(){l("timeEnd",s(arguments))},timeStamp:function(){l("timeStamp",s(arguments))},trace:function(){l("trace",s(arguments))},warn:function(){l("warn",s(arguments))}};function d(e){var t=document.createElement("div");return t.textContent=e,t.innerHTML}function p(e){return(""+e).replace(/<\s*\/+\s*(\bscript\b)/gi,"&lt;/script&gt;</pre").replace(/<\s*(\bscript\b)/gi,"<pre>&lt;script")}function u(e){return p(e).replace(/\s+on([a-z])\s*=/gi," on=").replace(/javascript:/gi,"js:")}function f(e){switch(e){case"{":return"}";case"[":return"]";case"<":return">";default:return e}}function A(e){var t,a=e.trim();switch(!0){case t=a.replace(/[0-9]/g,""),!(!a.length||t.length&&"-"!=t&&"+"!=t&&"."!=t):return+a;case"true"==a||"false"==a:return"true"==a;case"{"==a[0]&&"}"==a[a.length-1]:return a.toJSON();case"["==a[0]&&"]"==a[a.length-1]:return("{xArr:"+a+"}").toJSON().xArr;default:return e}}function se(e){if(!ae.jsonDataSanityCheck)return 1;var t=e.indexOf("(");if(!(0<=t&&e.indexOf(")",t)>t))return 1;console.warn("Insecured String with braces():",e)}function le(t,e){var a;if(he(t)){if(!se(a=t.trimStr().trimStr(",").trimStr(";")))return t;if(a.match(/^\</))return t;if(!(a.containsStr("{")||a.containsStr(":")||a.containsStr("\\[")||a.containsStr("'")||a.containsStr('"'))){if(a.containsStr(",")||a.containsStr(";"))return a.replace(/ /g,"").replace(/;/g,",").split(",");if(!e)return A(a);a="{"+e+":"+a+"}"}a.containsStr(":")&&!a.containsStr(",")&&a.containsStr(";")&&(a=a.replace(/\;/g,",")),a.beginsWithStr("{")||a.beginsWithStr("\\[")?a.beginsWithStr("{")&&!a.containsStr(":")&&a.containsStr("=")&&(a=""+a.replace(/=/g,":")):a=a.containsStr(":")?"{"+a+"}":a.containsStr("=")?"{"+a.replace(/=/g,":")+"}":"["+a+"]",!a.beginsWithStr("{")&&e&&(a="{"+e+":"+a+"}")}var n={};try{n=he(t)||"object"!=typeof t?ve(t)?null:Function('"use strict";return ('+a+")")():t}catch(e){console.error('Error JSON Parse: Invalid String >> "'+t+'"\n>> '+e.stack.substring(0,e.stack.indexOf("\n")))}return n}function ce(e){return o.toString.call(e).slice(8,-1).toLowerCase()}function de(e,t){return"*"==(""+t)[0]?0<=ce(e).indexOf((""+t).toLowerCase().substring(1)):0<=(""+t).toLowerCase().indexOf(of(e))}function pe(e){return de(e,"array")}function x(e){return de(e,"boolean")}function ue(e){return de(e,"function")}function fe(e){return de(e,"object")}function v(e){return"object"==typeof e||"function"==typeof e}function he(e){return de(e,"string")}function y(e){return de(e,"number")}function b(e){return(""+e).isNumberStr()}function me(e){return de(e,"undefined")}function C(e){return!de(e,"undefined")}function R(e){return de(e,"*element")}function L(e){return fe(e)&&!!e.jquery}function S(e){return!!pe(e)||!!e&&("object"==typeof e&&(1===e.nodeType?!!e.length:0===e.length||0<e.length&&(0 in e&&e.length-1 in e)))}function ge(e){var t;for(t in e)return!1;return!0}function ve(e){var t=!0;if(null!=e)switch(!0){case he(e):t=0==e.trimStr().length;break;case ue(e):t=!1;break;case pe(e):case fe(e):t=ge(e);break;default:t=0==(""+e).trimStr().length}return t}function w(e){return!ge($(e).get())}function O(e){var t=""+e;return fe(e)&&(t=JSON.stringify(e)),t}function ye(){return""+(new Date).getTime()}function k(e){return e=e||0,(new Date).getFullYear()+ae.toInt(e)}function U(e,t,a){var n=[],r=arguments.length;if(r){1===r?(t=e,a=(e=0)<=t?1:-1):2===r&&(a=e<=t?1:-1);for(var i=Math.max(Math.ceil((t-e)/(a||1)),0);i--;)n.push(e),e+=a}return n}function I(e){e&&clearTimeout(e)}function j(){var e=arguments.length&&arguments[0]?arguments[0]:"[data-disable-keys],[data-focus-next],[data-focus-back]",t=$(2==arguments.length&&arguments[1]?arguments[1]:"body").find(e);oe.info("Finding Key-Tracking for element(s): "+e),t.each(function(e,t){$(t).keydown(ae._trackAndControlKey),oe.info("SPA is tracking keys on element:"),oe.info(t)})}function N(e,t,a,n){t=(t||"value").toLowerCase(),n=n||",",pe(a)&&(n="~~",a=a.join(n)),a=(n+a+n).toLowerCase();var r,i=ae.getDocObj(e);if(i)for(var o,s=0;s<i.length;s++)r=(n+i.options[s][t]+n).toLowerCase(),o=0<=a.indexOf(r),(i.options[s].selected=o)?ie(i.options[s],"selected",""):i.options[s].removeAttribute("selected")}function D(e,t){return Math.floor(Math.random()*(t-e+1))+e}ae.console=oe,ae.ajaxPreProcess,ae.onInit,ae.onInitComplete,ae.onReady,ae.onUrlChange,ae.onUrlHashChange,ae.onReload,t&&(t.yyyymmdd=function(e){var t=this.getMonth()+1,a=this.getDate();return[this.getFullYear(),(9<t?"":"0")+t,(9<a?"":"0")+a].join(e||"")},t.hhmmss=function(e){var t=this.getHours(),a=this.getMinutes(),n=this.getSeconds();return[(9<t?"":"0")+t,(9<a?"":"0")+a,(9<n?"":"0")+n].join(e||"")}),e&&(e.trimLeftStr=function(e){return(""+this).replace(new RegExp("^["+(e||"\\s")+"]+","g"),"")},e.trimRightStr=function(e){return(""+this).replace(new RegExp("["+(e||"\\s")+"]+$","g"),"")},e.trimStr=function(e){return(""+this).trimLeftStr(e).trimRightStr(e)},e.getLeftStr=function(e){return"string"==typeof e&&(e=(""+this).indexOf(e)),e?(""+this).substring(0,e):""},e.getRightStr=function(e){var t=1;return"string"==typeof e&&(t=e.length,e=(""+this).indexOf(e)),e<0?"":(""+this).substring(e+t)},e.isBlankStr=function(){return""==(""+this).trimStr()},e.ifBlankStr=function(e,t){return e=void 0===e?"":e,t=void 0===t?(""+this).trimStr():t,(""+this).isBlankStr()?e:t},e.isNumberStr=function(){var e=(""+this).trim(),t=e.replace(/[0-9]/g,"").replace(".","").trimStr(),a=e[0];return e&&(0==t.length||1==t.length&&("+"==a||"-"==a))},e.normalizeStr=function(){return(""+this).trimStr().replace(/\s+/g," ")},e.beginsWithStr=function(e,t){t=t?"i":"";var a=new RegExp("^"+e,t);return!!(""+this).normalizeStr().match(a)},e.beginsWithStrIgnoreCase=function(e){var t=new RegExp("^"+e,"i");return!!(""+this).normalizeStr().match(t)},e.endsWithStr=function(e,t){t=t?"i":"";var a=new RegExp(e+"$",t);return!!(""+this).normalizeStr().match(a)},e.endsWithStrIgnoreCase=function(e){var t=new RegExp(e+"$","i");return!!(""+this).normalizeStr().match(t)},e.containsStr=function(e,t){return t=t?"gi":"g",new RegExp(""+e,t).test(""+this)},e.containsStrIgnoreCase=function(e){return new RegExp(""+e,"gi").test(""+this)},e.equals=function(e){return""+this==e},e.equalsIgnoreCase=function(e){return String((""+this).toLowerCase())==String(e).toLowerCase()},e.toProperCase=function(e){return(void 0===e||e?(""+this).normalizeStr():""+this).toLowerCase().replace(/^(.)|\s(.)/g,function(e){return e.toUpperCase()})},e.toTitleCase=function(e){return(void 0===e||e?(""+this).normalizeStr():""+this).toLowerCase().replace(/^(.)|\s(.)/g,function(e){return e.toUpperCase()})},e.capitalize=function(){return(""+this).charAt(0).toUpperCase()+(""+this).slice(1)},e.unCapitalize=function(){return(""+this).charAt(0).toLowerCase()+(""+this).slice(1)},e.sanitizeHTML=function(){return d(""+this)},ae.sanitizeHTML=d,e.sanitizeScript=function(){return p(""+this)},ae.sanitizeScript=p,e.sanitizeXSS=function(){return u(""+this)},ae.sanitizeXSS=u,e.splitToArray=e.toArray=function(e){return ve(""+this)?[]:(""+this).split(e)},e.extractStrBetweenIn=function(e,t,a){e=e||((e=(""+this).match(/[^a-z0-9\:\.\/\\]/i))?e[0]:""),t=t||f(e);var n=(""+this).match(RegExp("\\"+e+"([^\\"+e+"\\"+t+"].*?)\\"+t,"g"))||[];return a&&!ve(n)&&(n=n.__unique()),n},e.extractStrBetweenEx=function(e,t,a){var n="\\"+(e=e||((e=(""+this).match(/[^a-z0-9\:\.\/\\]/i))?e[0]:""))+"\\"+(t=t||f(e)),r=new RegExp("["+n+"]","g"),i=((""+this).match(new RegExp("\\"+e+"([^"+n+"].*?)\\"+t,"g"))||[]).map(function(e){return e.replace(r,"")});return a&&!ve(i)&&(i=i.__unique()),i},e.toNative=function(){return A(""+this)},e.toBoolean=function(){var e=!0;switch((""+this).trimStr().toLowerCase()){case"":case"0":case"-0":case"nan":case"null":case"false":case"undefined":e=!1}return e=e&&!(""+this).trimStr().beginsWithStr("-")},e.padStr=function(e,t,a){e=e||"",t=t||1,a=a||2;for(var n="",r=0;r<t;r++)n+=e;return(-1===a||2===a?n:"")+""+this+(1===a||2===a?n:"")},e.toObj=e.toObject=e.toJSON=function(){return le(""+this)},e.bindData=e.bindWith=function(e){return function(t,a,n,r){t=""+t,n=n||"{",r=r||"}";var e=ae.extractStrBetweenEx(t,n,r,!0);t&&!ve(e)&&fe(a)&&xe(e,function(e){t=t.replace(new RegExp(n+"\\s*("+e.trim()+")\\s*"+r,"g"),be(a,e,""))});return t}(""+this,e)}),ae.strToNative=A,ae.extractStrBetweenIn=function(e,t,a,n){return(e||"").extractStrBetweenIn(t,a,n)},ae.extractStrBetweenEx=function(e,t,a,n){return(e||"").extractStrBetweenEx(t,a,n)},ae.strToArray=function(e){return"string"==typeof e&&(e=[e]),e},ae.jsonDataSanityCheck,ae.toJSON=ae.toObj=le,ae.lastSplitResult=[],ae.getOnSplit=ae.pickOnSplit=function(e,t,a){return ae.lastSplitResult=e.split(t),ae.getOnLastSplit(a)},ae.getOnLastSplit=ae.pickOnLastSplit=function(e){return e<0?_e(ae.lastSplitResult):ae.lastSplitResult[e]},ae.of=of=ce,ae.is=is=de,ae.isArray=pe,ae.isArrayLike=S,ae.isBoolean=x,ae.isFunction=ue,ae.isObject=fe,ae.isObjectLike=v,ae.isString=he,ae.isNumber=y,ae.isDef=C,ae.isDefined=C,ae.isUndefined=me,ae.isEmptyObject=ge,ae.isElement=R,ae.is$El=L,ae.isElementExist=w,ae.isBlank=ae.isEmpty=_isEmpty=ve,ae.toBoolean=function(e){var t=!0;switch((""+e).trimStr().toLowerCase()){case"":case"0":case"-0":case"nan":case"null":case"false":case"undefined":t=!1}return t},ae.toInt=function(e){return e=ve(e=(""+e).replace(/[^+-0123456789.]/g,""))?"0":0<=e.indexOf(".")?e.substring(0,e.indexOf(".")):e,parseInt(+e,10)},ae.toFloat=function(e){return e=ve(e=(""+e).replace(/[^+-0123456789.]/g,""))?"0":e,parseFloat(+e)},ae.toStr=O,ae.toString=function(e){return oe.warn("xsr.toString is deprecated. use xsr.toStr instead."),O(e)},ae.dotToX=function(e,t){return e.replace(/\./g,t)},ae.dotToCamelCase=function(e){var t=e.replace(/\./g," ").toProperCase().replace(/ /g,"");return t[0].toLowerCase()+t.substring(1)},ae.dotToTitleCase=function(e){return e.replace(/\./g," ").toProperCase().replace(/ /g,"")},ae.toDottedPath=function(e){return(e||"").trim().replace(/]/g,"").replace(/(\[)|(\\)|(\/)/g,".").replace(/(\.+)/g,".").trimStr("\\.")},ae.ifBlank=ae.ifEmpty=ae.ifNull=function(e,t,a){return t=(""+(t||"")).trimStr(),a=void 0===a?(""+e).trimStr():a,ve(e)?t:a},ae.now=ye,ae.year=k,ae.sizeOf=function(e,t){var a,n=0;function r(e){if(null!=e)switch(typeof e){case"number":n+=8;break;case"string":n+=2*e.length;break;case"boolean":n+=4;break;case"object":var t=o.toString.call(e).slice(8,-1);if("Object"===t||"Array"===t)for(var a in e)e.hasOwnProperty(a)&&(n+=2*a.length,r(e[a]));else n+=2*e.toString().length}return n}return me(t)||t?(a=r(e))<1024?a+" B":a<1048576?(a/1024).toFixed(3)+" KB":a<1073741824?(a/1048576).toFixed(3)+" MB":(a/1073741824).toFixed(3)+" GB":r(e)},ae.range=function(){var e=arguments.length;if(!e||1===e&&"0"===(""+arguments[0]).trim())return[];var t="string"!=typeof arguments[0]&&e?1===e?"0.."+arguments[0]+":1":2===e?arguments[0]+".."+arguments[1]+":1":arguments[0]+".."+arguments[1]+":"+arguments[2]:arguments[0];(t=(t=t.toUpperCase()).replace(/Y([0-9])/g,"Y+$1")).indexOf("..")<0&&(t=(-1<t.indexOf("Y")?"Y..":"0..")+t),-1<t.indexOf("Y")&&t.indexOf("..Y")<0&&(t=t.replace(/\.\.([0-9])/g,"..+$1").replace(/\.\./g,"..Y"));var a=t.split(".."),n=""+a[0],r=""+a[1],i="1";0<r.indexOf(":")&&(r=""+a[1].split(":")[0],i=""+a[1].split(":")[1]),0<=n.indexOf("Y")&&(n=k(n.split(/[^0-9+-]/)[1])),0<=r.indexOf("Y")&&(r=k(r.split(/[^0-9+-]/)[1]));var o=ae.toInt(n),s=ae.toInt(r),l=ae.toInt(i);return r<n?U(s,o+1,l).reverse():U(o,s+1,l)},ae.checkAndPreventKey=function(e,t){var a=0<=(t=t||"").indexOf("+shift"),n=""+e.keyCode,r=0<=t.padStr(",").indexOf(n.padStr(","))&&(a?!!e.shiftKey:!e.shiftKey);return r&&(e.preventDefault(),oe.info("Key ["+n+(a?"+Shift":"")+"] has been disabled in this element.")),r},ae._trackAndControlKey=function(e){var t=e.currentTarget,a=$(t),n=(""+a.data("disableKeys")).toLowerCase();ae.checkAndPreventKey(e,n);var r=!ve((""+a.data("focusNext")).replace(/undefined/,"").toLowerCase()),i=!ve((""+a.data("focusBack")).replace(/undefined/,"").toLowerCase());r&&ae.checkAndPreventKey(e,"9")&&$(a.data("focusNext")).get(0).focus(),i&&ae.checkAndPreventKey(e,"9,+shift")&&$(a.data("focusBack")).get(0).focus()},ae.initKeyTracking=j,ae.getDocObj=function(e){var t="object"==typeof e?e:(e.beginsWithStr("#")?"":"#")+e;return R(t)?t:$(t).get(0)},ae.getDocObjs=function(e){var t=(e.beginsWithStr("#")?"":"#")+e;return $(t).get()},ae.hasCssRule=function(e){var t=!1;if(e){e=e.split(",");for(var a=0;a<document.styleSheets.length;a++){var n=document.styleSheets[a].rules||document.styleSheets[a].cssRules;if(t)break;for(var r in n)if(t=t||"string"==typeof n[r].selectorText&&0<=e.indexOf(n[r].selectorText))break}}return t},ae.getCssRule=function(e){var t,a;if(e)for(var n=0;n<document.styleSheets.length;n++){var r=document.styleSheets[n].rules||document.styleSheets[n].cssRules;if(t)break;for(var i in r)if(t=t||"string"==typeof r[i].selectorText&&e==r[i].selectorText){a=r[i];break}}return a},ae.setFocus=function(e,t){var a=ae.getDocObj(e);a&&(a.focus(),t&&a.select())},ae.swapClass=function(e,t,a){$(e).removeClass(t),$(e).addClass(a)},ae.docObjValue=function(e,t){var a=ae.getDocObj(e),n="";return a&&(n=a.value,2===arguments.length&&(a.value=t)),n},ae.optionSelectedIndex=function(e,t){var a=-1,n=ae.getDocObj(e);return n&&(a=n.selectedIndex,2===arguments.length&&(n.selectedIndex=t)),a},ae.optionIndexOfValue=function(e,t,a){var n=-1,r=ae.getDocObj(e);if(r)for(var i=0;i<r.length;i++)if((""+t).equalsIgnoreCase(r.options[i].value)){n=i;break}return n},ae.optionIndexOfText=function(e,t){var a=-1,n=ae.getDocObj(e);if(n)for(var r=0;r<n.length;r++)if(t.equalsIgnoreCase(n.options[r].text)){a=r;break}return a},ae.optionIndexOfValueBeginsWith=function(e,t){var a=-1,n=ae.getDocObj(e);if(n)for(var r=0;r<n.length;r++)if(n.options[r].value.beginsWithStrIgnoreCase(t)){a=r;break}return a},ae.optionsSelectedValues=function(e,t){return e=(e.beginsWithStr("#")?"":"#")+e,t=t||",",we($(e+" option:selected"),function(e){return e.value}).join(t)},ae.optionsSelectedTexts=function(e,t){return e=(e.beginsWithStr("#")?"":"#")+e,t=t||",",we($(e+" option:selected"),function(e){return e.text}).join(t)},ae.optionValueOfIndex=function(e,t){var a="",n=ae.getDocObj(e);return n&&0<=t&&t<n.length&&(a=n.options[t].value),a},ae.optionTextOfIndex=function(e,t){var a="",n=ae.getDocObj(e);return n&&0<=t&&t<n.length&&(a=n.options[t].text),a},ae.selectOptionsForValues=function(e,t,a){N(e,"value",t,a)},ae.selectOptionsForTexts=function(e,t,a){N(e,"text",t,a)},ae.selectOptionsAll=function(e){var t=ae.getDocObj(e);if(t)for(var a=0;a<t.length;a++)t.options[a].selected=!0,ie(t.options[a],"selected","")},ae.selectOptionsNone=function(e){var t=ae.getDocObj(e);if(t)for(var a=0;a<t.length;a++)t.options[a].selected=!1,t.options[a].removeAttribute("selected")},ae.selectOptionForValue=function(e,t){var a=-1,n=ae.getDocObj(e);return n&&(a=ae.optionIndexOfValue(e,t),n.selectedIndex=a,ie(n.options[a],"selected","")),a},ae.selectOptionForValueBeginsWith=function(e,t){var a=-1,n=ae.getDocObj(e);return n&&(a=ae.optionIndexOfValueBeginsWith(e,t),n.selectedIndex=a,ie(n.options[a],"selected","")),a},ae.selectOptionForText=function(e,t){var a=-1,n=ae.getDocObj(e);return n&&(a=ae.optionIndexOfText(e,t),n.selectedIndex=a,ie(n.options[a],"selected","")),a},ae.optionsReduceToLength=function(e,t){t=t||0;var a=ae.getDocObj(e);a&&(ae.selectOptionsNone(e),a.length=t)},ae.optionsRemoveAll=function(e){ae.optionsReduceToLength(e,0)},ae.optionRemoveForIndex=function(e,t){e=(e.beginsWithStr("#")?"":"#")+e;var a=ae.getDocObj(e);a&&((""+t).equalsIgnoreCase("first")&&(t=0),(""+t).equalsIgnoreCase("last")&&(t=a.length-1),a.remove(t))},ae.optionRemoveForValue=function(e,t){ae.optionRemoveForIndex(e,ae.optionIndexOfValue(e,t))},ae.optionRemoveForText=function(e,t){ae.optionRemoveForIndex(e,ae.optionIndexOfText(e,t))},ae.optionRemoveForValueBeginsWith=function(e,t){ae.optionRemoveForIndex(e,ae.optionIndexOfValueBeginsWith(e,t))},ae.optionAppend=function(e,t,a,n){var r,i=-1,o=ae.getDocObj(e);return o&&(i=void 0===n?(r=o.length,o.length=r+1,o.options[r].value=t,o.options[r].text=a,r):($(o).find("option").eq(n).before('<option value="'+t+'">'+a+"</option>"),n)),i},ae.optionsLoad=function(a,e,t,n){if(t=t||0,n=n||0,he(e)&&(0<e.indexOf("..")?e=ae.range(e):0<e.indexOf(",")&&(e=e.split(",").map(function(e){return e.trim()}))),0<=t&&ae.optionsReduceToLength(a,t),pe(e))xe(e,function(e){ae.optionAppend(a,e,e)});else if(0<n){var r=[];for(var i in e)r.push({key:i,value:e[i]});xe(J(r,["","key","value"][n]),function(e){ae.optionAppend(a,e.key,e.value)})}else xe(e,function(e,t){ae.optionAppend(a,t,e)})},ae.optionsList=function(t,e,a,n,r){var i=ae.getDocObj(t);me(a)&&(a=ie(i,"data-options-from")),me(n)&&(n=ie(i,"data-sort-on")),me(r)&&(r=ie(i,"data-sort-by"));var o,s,l,c=(ie(i,"data-value-key")||"value").toLowerCase(),d=(ie(i,"data-text-key")||"text").toLowerCase(),p=["",c,d];a=+(a||0),n=+((n||0)+"").replace(new RegExp(c,"i"),"1").replace(new RegExp(d,"i"),"2"),r=((r||"")+"").trim().toLowerCase(),0<=a&&ae.optionsReduceToLength(t,a),he(e)&&(e=0<e.indexOf("..")?ae.range(e):i.hasAttribute("data-split-by")?e.split(ie(i,"data-split-by")).map(function(e){return e.trim()}):[e]),fe(e)&&(o=[],xe(e,function(e,t){var a={};a[c]=t,a[d]=e,o.push(a)}),e=o),pe(e)&&((n||r)&&(fe(e[0])?(e=J(e,p[n]),"d"==r[0]&&(e=e.reverse())):"a"==r[0]?e=e.sort():"d"==r[0]&&(e=e.sort().reverse())),xe(e,function(e){fe(e)?(s=e[c],l=e[d]):s=l=e,ae.optionAppend(t,s,l)}))},ae.checkedState=function(e,t){var a=!1,n=ae.getDocObj(e);return n&&(a=n.checked,2===arguments.length&&(n.checked=t)),a},ae.isChecked=function(e,t){return 0<$(e).find("input[name="+t+"]:checked").length},ae.radioSelectedValue=function(e,t){var a=$(e).find("input[name="+t+"]:checked").val();return a||""},ae.radioClearSelection=function(e,t){$(e).find("input[name="+t+"]:checked").attr("checked",!1)},ae.radioSelectForValue=function(e,t,a){$(e).find("input[name="+t+"]:radio").each(function(e){e.checked=e.value.equalsIgnoreCase(a)})},ae.checkboxCheckedValues=function(e,t,a){return a=a||",",$(e).find("input[name="+t+"]:checked").map(function(){return this.value}).get().join(a)},ae.sleep=function(e){var t=new Date;for(t.setTime(t.getTime()+1e3*e);(new Date).getTime()<t.getTime(););},ae.filterJSON=function(e,t){console.warn("xsr.filterJSON has been removed. please use alternate filter.")},ae.randomPassword=function(e,t){for(var a=t||"9a8b77C8D9E8dkfhseidF7G6H5QJ3c6d5e4f32L3M4N5P6Qg2h3i4j5kV6W5X4Y3Z26m7n8p9q8r7s6t5u4v3w2x3y4z5A6BK7R8S9T8U7",n="",r=0;r<(e||8);r++){var i=Math.floor(Math.random()*a.length);n+=a.charAt(i)}return n},ae.rand=D,ae.appendToObj=function(e,t,a){Ce(e,t)?(pe(e[t])||(e[t]=[e[t]]),e[t].push(a)):e[t]=a},ae.parseKeyStr=function(e,t){return(t?e.toLowerCase():e).replace(/[^_0-9A-Za-z\$\[\]\?\*\-]/g,"")};var F={};function z(e){var t,a,n,r;return he(e)&&(a=(t=e.trim().split(" "))[0],/app\.(.+)\./.test(a)?(n=a.split(".")[1],t[0]=t[0].replace("app."+n+".",'[data-rendered-component="'+a.split(".")[1]+'"] '),e=t.join(" ")):a.beginsWithStr("\\$")&&(0<(n=a.substring(1)).indexOf(":")?(r=ae.toInt(n.getRightStr(":").trim()),n=n.getLeftStr(":"),t[0]='[data-rendered-component="'+n+'"]:eq('+r+")"):t[0]='[data-rendered-component="'+n+'"]',e=t.join(" "))),e}function M(e,t,a){var n=$(this),r=n[0];if(!r)return console.warn("Form not found! (_serializeFormToObject)"),{};var i,o,s=n.serializeToArray(),l=n.data(),c="object"==typeof e?e:{},d="boolean"==typeof e?e:t||!1,p=l.serializeIgnorePrefix,u=l.hasOwnProperty("typeNative");return F={},a&&(p=a),xe(s,function(){i=p?this.name.replace(p,""):this.name,c=ae.setObjProperty(c,i,u?this.value.toNative():this.value,d)}),n.find("input[data-unchecked]:checkbox:enabled:not(:checked)[name]").each(function(){(i=$(this).attr("name"))&&(o=$(this).data("unchecked"),p&&(i=i.replace(p,"")),o=""+(void 0===o?"":o),c=ae.setObjProperty(c,i,u?o.toNative():o,d))}),(r.hasAttribute("data-disabled")&&ve(ie(r,"data-disabled"))||A(l.disabled||"false"))&&n.find("[disabled][name]").each(function(){(i=$(this).attr("name"))&&(o=ae.getElValue(this),p&&(i=i.replace(p,"")),o=""+(void 0===o?"":o),c=ae.setObjProperty(c,i,u?o.toNative():o,d))}),c}function B(e,t){var a=$(this),n=a[0];if(!n)return console.warn("Form not found! (serializeFormToSimpleObject)"),{};var r,i,o,s,l=a.data(),c=this.serializeToArray(),d="object"==typeof e?e:{},p="boolean"==typeof e?e:de(t,"boolean")?t:n.hasAttribute("data-disabled")&&ve(ie(n,"data-disabled"))||A(l.disabled||"false");return xe(c,function(){ae.appendToObj(d,this.name,this.value)}),p&&$(this).find("[disabled][name]").each(function(){ae.appendToObj(d,this.name,ae.getElValue(this))}),$(this).find("input[data-unchecked]:checkbox:enabled:not(:checked)[name]").each(function(){o=$(this).attr("name"),s=""+(void 0===(s=$(this).data("unchecked"))?"":s),ae.appendToObj(d,o,s)}),$(this).find("[data-to-json-group][name]").each(function(){r=this.name,(i=$(this).data("toJsonGroup"))&&(d[i]||(d[i]={}),ae.appendToObj(d[i],r,ae.getElValue(this)))}),d}function be(e,t,a){if(v(e)&&t){var n=we(t.split("|"),function(e){return e.trim()});t=n.shift();var r=n.join("|");if(0<=t.indexOf("*"))l=function(e,t){var a;if(v(e))if(e.hasOwnProperty(t))a=e[t];else for(var n=Se(e),r=0;me(a)&&r<n.length;)a=arguments.callee(e[n[r++]],t);return a}(e,t.replace(/\*/g,""));else for(var i=0,o=ae.toDottedPath(t).split("."),s=o.length,l=e;i<s;i++)if(pe(l))l=l[ae.toInt(o[i])];else{if(!v(l)){l=void 0;break}l=l[o[i].trim()]}return me(l)?r?be(e,r,a):ue(a)?a.call(e,e,t):a:l}return 3==arguments.length?ue(a)?a.call(e,e,t):a:e}function Ce(e,t){if(arguments.length<2)return!1;if("object"!=typeof e||"string"!=typeof t||/[\.\[\]\/\|\&\,]/g.test(t)){var a=e,n=!1;try{n=!!se(t)&&void 0!==be(a,t)}catch(e){console.warn("Key["+t+"] error in object.\n"+e.stack)}return n}return e.hasOwnProperty(t.trim())}function V(e,t,l){function a(e,t){for(var a,n=t.split(","),r="",i=0,o=!0,s=0;s<n.length;s++)(r=n[s].trim())&&(i++,a=l&&(0<r.indexOf(".")||0<r.indexOf("["))?ae.hasKey(e,r):e.hasOwnProperty(r),o=o&&a);return i&&o}var n=!1;if(fe(e)&&t)switch(!0){case 0<(t=""+t).indexOf("&"):n=a(e,t.replace(/\&/g,","));break;case 0<t.indexOf("|"):n=function(e,t){for(var a,n=t.split(","),r="",i=0,o=!1,s=0;s<n.length&&((r=n[s].trim())&&(i++,a=l&&(0<r.indexOf(".")||0<r.indexOf("["))?ae.hasKey(e,r):e.hasOwnProperty(r),o=o||a),!o);s++);return i&&o}(e,t.replace(/\|/g,","));break;default:n=a(e,t)}return n}function Se(e){var t=[];try{t=Object.keys(e)}catch(e){}return t}function H(e){var n,r,i,o=[];return function(e,t){if(t=t||"","object"!=typeof e)return;for(var a in e)i=t.substring(1),n=b(a)?"[":".",r=i&&"["==n?"]":"",arguments.callee(e[a],t+n+a+r)&&o.push(i+(i?n:"")+a+r)}(e=e||{}),o}function xe(t,a){if(S(t))for(var e=0;e<t.length;e++)a.call(t[e],t[e],e,t);else Se(t).forEach(function(e){a.call(t[e],t[e],e,t)})}function we(t,a){var n=[];if(S(t))for(var e=0;e<t.length;e++)n.push(a.call(t[e],t[e],e,t));else Se(t).forEach(function(e){n.push(a.call(t[e],t[e],e,t))});return n}function K(e,t){var a=!0;if(S(e))for(var n=0,r=e.length;a&&n<r;n++)a=!!t.call(e[n],e[n],n,e);else for(var i,o=Se(e),n=0,r=o.length;a&&n<r;n++)i=o[n],a=!!t.call(e[i],e[i],i,e);return a}function q(e,t){var a=!1;if(S(e))for(var n=0,r=e.length;n<r&&!(a=!!t.call(e[n],e[n],n,e));n++);else for(var i,o=Se(e),n=0,r=o.length;n<r&&(i=o[n],!(a=!!t.call(e[i],e[i],i,e)));n++);return a}function W(t,a){var n=[];if(S(t))for(var e=0;e<t.length;e++)a.call(t[e],t[e],e,t)&&n.push(t[e]);else Se(t).forEach(function(e){a.call(t[e],t[e],e,t)&&n.push(t[e])});return n}function Oe(t,a){var n=[];if(S(t))for(var e=0;e<t.length;e++)a.call(t[e],t[e],e,t)&&n.push(t.splice(e--,1)[0]);else Se(t).forEach(function(e){a.call(t[e],t[e],e,t)&&(n.push(t[e]),delete t[e])});return n}function J(e,s){return S(e)&&s?e.sort(function(e,t){var a=b(e[s])?+e[s]:e[s],n=b(t[s])?+t[s]:t[s],r=typeof a,i=typeof n,o=0;return"string"==r&&"string"==i?((a=a.toUpperCase())<(n=n.toUpperCase())&&(o=-1),n<a&&(o=1)):"number"==r&&"number"==i&&(o=a-n),o}):e}function X(e,t){var a={};if(S(e)&&S(t))for(var n=0;n<e.length;n++)a[e[n]]=t[n];return a}function G(e){if(ae.strZip)return ae.strZip(e);for(var t,a={},n=(e+"").split(""),r=[],i=n[0],o=256,s=1;s<n.length;s++)null!=a[i+(t=n[s])]?i+=t:(r.push(1<i.length?a[i]:i.charCodeAt(0)),a[i+t]=o,o++,i=t);r.push(1<i.length?a[i]:i.charCodeAt(0));for(s=0;s<r.length;s++)r[s]=String.fromCharCode(r[s]);return r.join("")}function Z(e){return G(function e(t,a){var n,r,i=a=a||"",o=typeof t;if("object"==o)for(var s=Object.keys(t).sort(),l=0;l<s.length;l++)i+=e(t[s[l]],s[l]);else"function"==o?(r=t.name)&&r!==a?i+="F"+r:(n=t.toString(),i+=(r=/function(.*?)\(/.exec(n)[1].trim())?"F"+r:n):i+=t;return i}(e).replace(/\s/g,"_").replace(/\"/g,"d").replace(/\'/g,"s").replace(/\\/g,"b").replace(/\//g,"f").replace(/function/g,"Fn"))}function Y(e){return"object"==typeof e&&(e==__proto__||i(e,"isPrototypeOf")||e.isPrototypeOf(new Object)||e.isPrototypeOf(new Array)||e.isPrototypeOf(new Function)||e.isPrototypeOf(new String)||e.isPrototypeOf(new Number)||e.isPrototypeOf(new Boolean)||e.isPrototypeOf(new Date)||e.isPrototypeOf(new RegExp))}function Q(e,t){return a=t,!(-1<r.indexOf(a)||"constructor"===t&&ue(e[t]));var a}function ke(){var e=(arguments.length?arguments[0]:{})||{};if(Y(e))return e;if(arguments.length)for(var t,a=0;a<arguments.length;a++)if(fe(t=arguments[a]))for(var n in t)Q(e,n)&&i(t,n)&&(e[n]=t[n]);else pe(t)&&(e=ee.call(null,e,t));return e}function $e(){var e=(arguments.length?arguments[0]:{})||{};if(Y(e))return e;if(arguments.length)for(var t,a=0;a<arguments.length;a++)if(fe(t=arguments[a]))for(var n in t)Q(e,n)&&i(t,n)&&(fe(t[n])?e[n]=$e(e[n],t[n]):pe(t[n])?e[n]=ee(e[n],t[n]):e[n]=t[n]);else pe(t)&&(e=ee.call(null,e,t));return e}function ee(){var e=(arguments.length?arguments[0]:[])||[];if(arguments.length)for(var t,a=0;a<arguments.length;a++)if(pe(t=arguments[a]))for(var n=0;n<t.length;n++)if(me(e[n]))e[n]=t[n];else switch(ce(t[n])){case"object":e[n]=$e(e[n],t[n]);break;case"array":e[n]=ee(e[n],t[n]);break;case"undefined":break;default:e[n]=t[n]}return e}function _e(e,t){var a;return S(e)&&0<e.length&&(a="number"==typeof t&&1<t?e.slice(-1*t):e[e.length-1]),a}function Te(e,t){if(t){var a=pe(e)?[]:!!fe(e)&&{};return a&&ke(a,e)||e}return JSON.parse(JSON.stringify(e))}function Ee(e,t){var a,n,r,i,o=e;return t=(t||"").replace(/[^a-z0-9]/gi,"/"),0<=".{$".indexOf(e[0])&&(r="$"==(n=(a=e.split("/"))[0].replace(/[\{\}]/g,""))||"."==n?t:n.replace(/[\{\$\}]/,""),i=ae.defaults.components.inFolder?r+"/":"",a[0]=(ae.defaults.components.rootPath+i).trimRightStr("/"),o=a.join("/")),o}ae.setObjProperty=function(e,t,a,n){n=n||!1;var r,i,o,s,l=e,c=0<=(t=""+t).indexOf(".")||t==t.toUpperCase()?t.split("."):t.split(/(?=[A-Z])/),d=t.replace(/[0-9A-Za-z\[\]\?\*\_]/g,"").trim();d&&""!=d&&(c=t.split(d[0]));for(var p="";1<c.length;)ve(r=ae.parseKeyStr(c.shift(),n))||(p+=r.replace(/[\?\[\]\*\_]/g,""),l=0<r.indexOf("[")&&r.indexOf("]")==r.length-1?(o=(i=r.substring(0,r.length-1).replace(/\[/g,".").split("."))[0],s=i[1],void 0===l[o]&&(l[o]=[]),s.replace(/[0-9]/g,"")&&(s=s.replace(/[^0-9]/g,""),F.hasOwnProperty(p)?s=F[p]:void 0===l[o][s]&&(F[p]=l[o].length,s=l[o].length)),void 0===l[o][s]&&(l[o][s]={}),l[o][s]):(void 0===l[r]&&(l[r]={}),l[r]));return r=ae.parseKeyStr(c.shift(),n),ae.appendToObj(l,r,a),e},ae.setSimpleObjProperty=function(e,t,a){for(var n,r=e,i=(t=""+t).split(".");1<i.length;)ve(n=ae.parseKeyStr(i.shift(),!1))||(void 0===r[n]&&(r[n]={}),r=r[n]);return r[n=ae.parseKeyStr(i.shift(),!1)]=a,e},ae.objProp=ae.objProperty=ae.objectProp=ae.objectProperty=function(){var e=arguments[0],t=arguments[1],a=arguments[2];return 3==arguments.length?ae.setSimpleObjProperty(e,t,a):2==arguments.length?be(e,t):e},ae.extract=function(){var e=ne.slice.call(arguments);try{fe(e[0])||e.unshift({}),he(e[1])&&(e[1]=e[1].split(","))}catch(e){console.error("Invalid arguments",e)}if(fe(e[0])&&pe(e[1])){var a,n,r,i,o,s,l=e[0],t=e[1],c=e.slice(2);return c.unshift(window),xe(t,function(e){if(e=(e||"").trim(),!(o=!(e&&"@0"!=e))&&(/^\@([0-9])+/.test(e)&&((i=n=(e.getRightStr(".")||"").trim())?e=i+":"+e:($e(l,c[ae.toInt(e)]),o=!0)),!o)){if(a=e.split(":"),n=(a[0]||"").trim(),r=ae.toInt((a[1]||"").split(".")[0]),i=((a[1]||"").getRightStr(".")||"").trim(),n=n||i,s=i?be(c[r],i):r?c[r]:{},n.endsWithStr("\\+")){n=n.trimRightStr("+");var t=be(l,n);switch(ce(t)){case"object":fe(s)&&(s=$e({},t,s));break;case"array":s=pe(s)?t.concat(s):t.push(s)}}ae.setSimpleObjProperty(l,n,s)}}),l}console.error("Invalid arguments.")},ae.setElValue=function(e,t){var a=$(z(e));switch((e=a.get(0)).tagName.toUpperCase()){case"INPUT":switch(e.type.toLowerCase()){case"text":case"password":case"hidden":case"color":case"date":case"datetime":case"datetime-local":case"email":case"month":case"number":case"search":case"tel":case"time":case"url":case"range":case"button":case"submit":case"reset":a.val(t),a.isEnabled()&&a.trigger("keyup");break;case"checkbox":case"radio":e.checked=e.value.equalsIgnoreCase(t),e.checked&&a.isEnabled()&&a.trigger("click")}break;case"SELECT":ae.selectOptionForValue(e,t),a.isEnabled()&&a.trigger("change");break;case"TEXTAREA":a.val(t),a.isEnabled()&&a.trigger("keyup");break;default:a.html(ae.sanitizeXSS(t)),a.val(t),a.isEnabled()&&a.trigger("keyup")}},ae.getElValue=function(e,t){if(e=$(z(e)).get(0)){var a,n,r,i;switch(e.tagName.toUpperCase()){case"INPUT":switch(e.type.toLowerCase()){case"checkbox":n=$(e).data("unchecked"),r="true"==e.value||"false"!=e.value&&e.value,a=e.checked?r:void 0===n?"":n;break;case"radio":a=e.checked?e.value:"";break;default:a=$(e).val()}break;case"SELECT":a=we($(e).find("option:selected"),function(e){return e.value}).join(",");break;case"TEXTAREA":a=$(e).val();break;default:a=t?$(e).text():$(e).html()}return ve(a)&&e.hasAttribute("data-default")&&("@"===(i=ie(e,"data-default")||"")[0]?ue(i=be(h,i.replace(/^[@\s]+/,""),""))&&me(i=i.call(e,e))&&(i=""):"@"===i[1]&&(i=i.trim()),a=i),a}},ae.serialize=function(e,t,a){x(e)&&(a=e,e=""),x(t)&&(a=t,t=""),e=e||"body";var n,r,i,o,s={},l=t?'[data-serialize-context*="'+t+'"]':"";return $(e).find("[data-serialize]"+l+",input[name]"+l+",select[name]"+l+",textarea[name]"+l).each(function(e,t){i=$(t).data(),n=t.name||i.serialize,o=i.serializeType?i.serializeType.equalsIgnoreCase("text"):a,r=ae.getElValue(t,o),s.hasOwnProperty(n)?ve(r)||(ve(s[n])?s[n]=r:pe(s[n])?s[n].push(r):s[n]=[s[n],r]):s[n]=r}),s},ae.serializeToQueryString=function(e,t){return ae.toQueryString(ae.serialize(e,t))},ae.serializeDisabled=function(e){var t="";return $(e).find("[disabled][name]").each(function(){t+=(t?"&":"")+$(this).attr("name")+"="+ae.getElValue(this)}),t},ae.serializeForms=function(e,t){var a,n,r=$(e).serialize();return $(e).find("input[data-unchecked]:checkbox:enabled:not(:checked)[name]").each(function(){n=$(this).data("unchecked"),r+=(r?"&":"")+$(this).attr("name")+"="+(void 0===n?"":n)}),t&&(a=ae.serializeDisabled(e),r+=(r&&a?"&":"")+a),r},ae.queryStringToJson=ae.queryStringToObject=function(e){var t={},a=e||location.search,n=(""+a).indexOf("?"),r=(""+a).indexOf("&");return a&&0<a.length&&0<=n&&(0==n||n<r)&&(a=a.substring(n+1)),xe(a.split("&"),function(e){(e=e.split("="))[0]&&ae.appendToObj(t,e[0],decodeURIComponent(e[1]||""))}),t},ae.toQueryString=ae.ObjectToQueryString=ae.objectToQueryString=ae.JsonToQueryString=ae.jsonToQueryString=function(n){return fe(n)?Se(n).reduce(function(e,t,a){return[e,0===a?"":"&",t=encodeURIComponent(t),"=",pe(n[t])?we(n[t],function(e){return encodeURIComponent(e)}).join(","):encodeURIComponent(n[t])].join("")},""):""},ae.serializeUncheckedCheckboxes=function(e,t){return $(e).serializeUncheckedCheckboxes(t)},ae.serializeFormToJSON=ae.serializeFormToObject=function(e,t,a,n){return $(e).serializeFormToJSON(t,a,n)},ae.serializeFormToSimpleJSON=ae.serializeFormToSimpleObject=function(e,t,a){return $(e).serializeFormToSimpleJSON(t,a)},ae.findSafe=ae.findInObj=ae.findInObject=ae.findIn=ae.find=be,ae.keys=Se,ae.has=ae.hasKey=Ce,ae.hasKeys=function(e,t){return V(e,t,!0)},ae.hasPrimaryKeys=function(e,t){return V(e,t)},ae.keysDottedAll=function(e){var t=H(e);return t&&!_isEmpty(t)&&(t=ae.toDottedPath(t.join(",")).split(",")),t},ae.keysDotted=H,ae.keysCamelCase=function(e){return we(H(e),function(e){var t=e.replace(/\./g," ").toProperCase().replace(/ /g,"");return t[0].toLowerCase()+t.substring(1)})},ae.keysTitleCase=function(e){return we(H(e),function(e){return e.replace(/\./g," ").toProperCase().replace(/ /g,"")})},ae.keys_=function(e){return we(H(e),function(e){return e.replace(/\./g,"_")})},ae.strZip,ae.strUnzip,ae.map=we,ae.uniq=function(a){return W(a,function(e,t){return a.indexOf(e)==t})},ae.omit=function(t,a){var n={};return S(a)&&a.length?(fe(t)&&xe(Se(t),function(e){a.indexOf(e)<0&&(n[e]=t[e])}),n):t},ae.union=function(){for(var e,t={},a=0;a<arguments.length;a++)if(S(e=arguments[a]))for(var n=0;n<e.length;n++)t[Z(e[n])]=e[n];else t[Z(e)]=e;oe.log(">>union-collection[keys, obj, src]:",Se(t),t,arguments);var r,i=[];for(r in t)t.hasOwnProperty(r)&&i.push(t[r]);return t=null,i},ae.filter=W,ae.sortBy=J,ae.zipObj=X,ae.removeOn=Oe,ae.each=ae.forEach=xe,ae.every=ae.forEvery=K,ae.some=ae.forSome=q,ae.indexOf=function(e,t){var a=-1;if(S(e)&&e.length&&fe(t)){var n,r=Se(t);if(r.length)for(var i=0;i<e.length;i++){for(var o=0;o<r.length&&(n=t[r[o]]===e[i][r[o]]);o++);if(n){a=i;break}}}return a},ae.clone=Te,ae.extend=ke,ae.merge=$e,Object.defineProperties(ne,{__now:{value:function(){return JSON.parse(JSON.stringify(this))}},__clone:{value:function(){return Te(this,!0)}},__toObject:{value:function(a){var n={};return this.forEach(function(e,t){a?n[e]=t:n[t]=e}),n}},__unique:{value:function(){return this.filter(function(e,t,a){return a.indexOf(e)===t})}},__rotate:{value:function(e){if(0<(e=e||1))for(;e--;)this.push(this.shift());else if(e<0)for(;e++;)this.unshift(this.pop());return this}},__has:{value:function(e,t){var a;function n(e){return 0<=t.indexOf(e)}if(t=(t||"").trim()){t.indexOf("i")&&he(e)&&(e=e.toLowerCase());for(var r=0;r<this.length;r++){var i=this[r];switch(t.indexOf("i")&&he(i)&&(i=i.toLowerCase()),!0){case n("b"):case n("^"):a=n("~")?e.beginsWithStr(i):i.beginsWithStr(e);break;case n("e"):case n("$"):a=n("~")?e.endsWithStr(i):i.endsWithStr(e);break;case n("c"):case n("*"):a=n("~")?0<=e.indexOf(i):0<=i.indexOf(e);break;case n("<"):a=i<e;break;case n("<="):a=i<=e;break;case n(">"):a=e<i;break;case n(">="):a=e<=i;break;default:a=i==e}if(a)break}}else a=0<=this.indexOf(e);return a}},__last:{value:function(e){return _e(this,e)}}}),Object.defineProperties(o,{__now:{value:function(){return JSON.parse(JSON.stringify(this))}},__clone:{value:function(){return Te(this,!0)}},__keys:{value:function(e){return e?H(this):Object.keys(this)}},__keysAll:{value:function(){return H(this)}},__hasKey:{value:function(e){return ae.hasKey(this,e)}},__hasKeys:{value:function(e){return V(this,e,!0)}},__hasPrimaryKeys:{value:function(e){return V(this,e)}},__valueOf:{value:function(e,t){return be(this,e,t)}},__merge:{value:function(){return ne.unshift.call(arguments,this),$e.apply(void 0,arguments)}},__stringify:{value:function(){return JSON.stringify(this)}},__toQueryString:{value:function(){return ae.toQueryString(this)}},__extract:{value:function(){return ne.unshift.call(arguments,this),ae.extract.apply(this,arguments)}}});var te=["target","template","templateCache","templateScript","templateUrl","templateUrlMethod","templateUrlParams","templateUrlPayload","templateUrlHeaders","onTemplateUrlError","style","styleCache","styles","stylesCache","scripts","scriptsCache","require","dataPreRequest","data","skipDataBind","dataCollection","dataUrl","dataUrlMethod","dataUrlParams","dataUrlHeaders","defaultPayload","stringifyPayload","dataParams","dataType","dataModel","dataCache","dataUrlCache","dataDefaults","onDataUrlError","onError","dataValidate","dataProcess","dataPreProcessAsync","renderMode","onRender","onRefresh","onRemove","renderCallback","refreshCallback","events"],Pe=te.map(function(e){return"try{(typeof _"+e+'!="undefined")&&(__def$props__.'+e+"=_"+e+")}catch(e){}"}).join(";")+";var _spa$prop={};try{ extend(_spa$prop, props || {}); }catch(e){ try{ extend(_spa$prop, prop || {}); }catch(e){ try{ extend(_spa$prop, $props || {}); }catch(e){ try{ extend(_spa$prop, __spa$publicProp__ || {}); }catch(e){}; }; }; };",Ae=(m?"var":"const")+" render=spa.$render, refresh=spa.$refresh, merge=spa.merge, extend=spa.extend,export$Props=function(o){spa.extend(__spa$publicProp__,o||{});}, export$Prop=function(k,v){export$Props({k:v});},exportProps=export$Props, extendProps=export$Props, exportProp=export$Prop, extendProp=export$Prop;";function Re(e,t){var a,n,r,i,o,s,l,c,d,p,u,f;e.trim()&&(o=i=r=n=a="",s=/spa\.\$extend\s*\(/g.test(e),(l=(ae.defaults.components.functional||/^\s*\/\/\s*@(spaComponent|spa\$)\s*/.test(e))&&!s)&&(c=e.substring(0,e.indexOf("\n")).trim(),/^\s*\/\/\s*@(spaComponent|spa\$):\s*/.test(c)?r=c.substring(c.indexOf(":")+1).trim():(r=t.substring(0,t.indexOf(".js")).replace(new RegExp(".*"+ae.defaults.components.rootPath+"(.*)"),"$1"),ae.defaults.components.inFolder&&(r=r.substring(0,r.lastIndexOf("/")))),r&&(i=r.replace(/\//g,"_"),o=r&&" __spa$"+i,f=[],te.forEach(function(e){h.hasOwnProperty("_"+e)&&f.push("_"+e)}),h.hasOwnProperty("prop")&&f.push("prop"),h.hasOwnProperty("props")&&f.push("props"),h.hasOwnProperty("$props")&&f.push("$props"),f.length&&console.warn("Found reserved spaComponent properties[ "+f.join(", ")+" ] in global scope."),a='var _spa$="'+r+'", __spa$publicProp__={};'+(m?"var":"const")+" __def$props__={};"+Ae+"\n/*--- ---*/\n\n",n="\n\n/*--- ---*/\nif(!spa.is$Loaded(_spa$)){"+Pe+"spa.$(_spa$, extend(__def$props__, _spa$prop));}")),d="",((p=g&&(l||/import (.*) from /g.test(e)))||/async |await /g.test(e))&&(d=m?"":"async ",ae.componentsAsync[i]=1),ie(u=document.createElement("script"),"id","js-"+i+ye()),ae.defaults.csp.nonce&&ie(u,"nonce",ae.defaults.csp.nonce),p?(ie(u,"type","module"),u.text=a+e+n):u.text="("+d+"function"+o+"(){\n"+a+e+n+"\n})();",document.head.appendChild(u).parentNode.removeChild(u))}function Le(e,t){return oe.log("Ajax for script:",e,"options:",t),!(e=Ee(e,t?t.spaComponent:"")).endsWithStrIgnoreCase(".js")&&e.indexOf("?")<0&&(e+=ae.defaults.components.scriptExt),(t=t||{}).hasOwnProperty("cache")||(t.cache=!0),t.hasOwnProperty("dataType")||(t.dataType="javascript"),t=ke(t,{url:e}),oe.info("Loading Script('"+e+"') ..."),Ua(t)}ae.is$Loaded=function(e){return!!ae.components[e.replace(/\//g,"_")]},ae.componentsAsync={},ae.addScriptTag=function(e,t){var a,n;e=e.replace(/#/,""),oe.group("spaAddScriptTag"),w("#spaScriptsContainer")||(oe.info("#spaScriptsContainer NOT Found! Creating one..."),$("body").append("<div id='spaScriptsContainer' style='display:none' rel='Dynamic Scripts Container'></div>")),w("#"+e)?oe.info("script ["+e+"] already found in local."):(oe.info("script ["+e+"] NOT found. Added script tag with src ["+t+"]"),a=t?' src="'+t+'"':"",n=ae.defaults.csp.nonce?' nonce="'+ae.defaults.csp.nonce+'"':"",$("#spaScriptsContainer").append('<script id="'+e+'" type="text/javascript"'+a+n+"><\/script>")),oe.groupEnd("spaAddScriptTag")},ae.addStyle=function(e,t){e=e.replace(/#/,""),oe.group("spaAddStyle"),w("#spaStylesContainer")||(oe.info("#spaStylesContainer NOT Found! Creating one..."),$("body").append("<div id='spaStylesContainer' style='display:none' rel='Dynamic Styles Container'></div>")),w("#"+e)?oe.info("style ["+e+"] already found in local."):(oe.info("style ["+e+"] NOT found. Added link tag with href ["+t+"]"),$("#spaStylesContainer").append("<link id='"+e+"' rel='stylesheet' type='text/css' href='"+t+"'/>")),oe.groupEnd("spaAddStyle")},ae.loadScript=function(a,n,e,t,r){return a=a.replace(/#/,""),e=e||!1,t=t||[],oe.group("spaScriptsLoad"),ve(n)?oe.error("script path ["+n+"] for ["+a+"] NOT defined."):e?ae.addScriptTag(a,n):t.push(Le(n,r).done(function(e,t){oe.info("Loaded script ["+a+"] from ["+n+"]. STATUS: "+t)})),oe.groupEnd("spaScriptsLoad"),t},ae.getComponentsFullPath=function(e){return we(e=ae.strToArray(le(e)),function(e){return ae.defaults.components.rootPath+(ae.defaults.components.inFolder||/[^a-z0-9]/gi.test(e)?e:"")+"/"+function(e){if(/[^a-z0-9]/gi.test(e)){var t=e.split(/[^a-z0-9]/gi);return t[t.length-1]}return e}(e)+ae.defaults.components.scriptExt})},ae.loadComponents=function(e,t,a){var n=W(ae.strToArray(le(e)),function(e){return!ae.components.hasOwnProperty(e.replace(/[^a-z0-9]/gi,"_"))}),r=ae.getComponentsFullPath(n);ae.loadScripts(r,t,a)},ae.loadScripts=function(e,t,a){var n;ve(e=ae.strToArray(le(e)))||(n=[],xe(e,function(a){n.push(Le(a,{dataType:"spacomponent"}).done(function(e,t){oe.info("Loaded script from ["+a+"]. STATUS: "+t)}).fail(function(){oe.info("Failed Loading script from ["+a+"].")}))}),Aa.apply($,n).then(function(){ae.renderUtils.runCallbackFn(t)}).fail(function(){ae.renderUtils.runCallbackFn(a)}))},ae.loadScriptsSync=function(e,t,a){var n,r;ve(e=ae.strToArray(le(e)))?ae.renderUtils.runCallbackFn(t):(n=!0,(r=e.shift())?(/^~/.test(r)&&(n=!1,r=r.substring(1)),oe.info("Load script from   ["+r+"], cache:",n),Le(r,{cache:n}).done(function(){oe.info("Loaded script from ["+r+"]"),ae.loadScriptsSync(e,t,a)}).fail(function(){console.error("Failed Loading script from ["+r+"].",arguments),ae.renderUtils.runCallbackFn(a)})):ae.loadScriptsSync(e,t,a))},ae.loadStyle=function(a,n,e,t){var r,i,o,s,l;return a=a.replace(/#/,""),e=!!e,t=t||[],oe.group("spaStylesLoad"),ve(n)?oe.error("style path ["+n+"] for ["+a+"] NOT defined."):(r=!e,e&&($("#"+a,"head").length?oe.info("Style('"+n+"') already loaded."):r=!0),r&&t.push((i=a,o=n,s={cache:ae.defaults.components.offline},l=$("#"+i,"head"),(s=s||{}).hasOwnProperty("cache")||(s.cache=!0),l.length||(s.cache=ae.defaults.components.offline),s=ke(s,{dataType:"text",url:o,success:function(e){l.remove();var t=ae.defaults.csp.nonce?' nonce="'+ae.defaults.csp.nonce+'"':"";$("head").append('<style id="'+i+'" type="text/css"'+t+">"+e+"</style>")}}),oe.info("Loading style('"+o+"') ... "),Ua(s).done(function(e,t){oe.info("Loaded style ["+a+"] from ["+n+"]. STATUS: "+t)})))),oe.groupEnd("spaStylesLoad"),t},ae.addTemplateScript=function(e,t,a){e=e.replace(/#/,""),a=a||"x-template",w("#spaViewTemplateContainer")||(oe.info("#spaViewTemplateContainer NOT Found! Creating one..."),$("body").append("<div id='spaViewTemplateContainer' style='display:none' rel='Template Container'></div>")),oe.info("Adding <script id='"+e+"' type='text/"+a+"'>");var n="_BlockedScript_";t=t.replace(/<(\s)*script/gi,"<"+n+' src-ref="'+e+'"').replace(/<(\s)*(\/)(\s)*script/gi,"</"+n).replace(/<(\s)*link/gi,"<_LINKTAGINTEMPLATE_").replace(/<(\s)*(\/)(\s)*link/gi,"</_LINKTAGINTEMPLATE_");var r=ae.defaults.csp.nonce?' nonce="'+ae.defaults.csp.nonce+'"':"";$("#spaViewTemplateContainer").append('<script id="'+e+'" type="text/'+a+'"'+r+">"+t+"<\/script>")},ae.updateTemplateScript=function(e,t,a){e=e.replace(/#/,"");var n=$("#spaViewTemplateContainer").find("#"+e);n.length&&n.remove(),ae.addTemplateScript(e,t,a)},ae.loadTemplate=function(n,r,i,e,t,a,o){var s,l,c,d,p,u,f;return n=n.replace(/#/g,""),r="."===(r=r.ifBlankStr("inline").trimStr())||"#"===r?"inline":r,i=i||"x-template",e=e||"#DummyInlineTemplateContainer",t=t||[],o=o||{},oe.group("spaTemplateAjaxQue"),w("#"+n)?(s=$("#"+n),a?(oe.info("Reload Template["+n+"] of ["+i+"]"),s.remove(),t=ae.loadTemplate(n,r,i,e,t,a,o)):ve(s.html())?(oe.warn("Template["+n+"] of ["+i+"] script found EMPTY!"),ve(l=""+s.attr("path"))||(i=(s.attr("type")||"").ifBlankStr(i).toLowerCase().replace(/text\//gi,""),oe.info("prepare/remove to re-load Template["+n+"]  of ["+i+"] from external path: ["+l+"]"),s.remove(),t=ae.loadTemplate(n,l,i,e,t,a,o))):oe.info("Template["+n+"]  of ["+i+"] already found in local.")):(oe.info("Template["+n+"] of ["+i+"] NOT found. Source ["+r+"]"),r&&"undefined"==r?(ae.addTemplateScript(n,"",i),oe.info("Loaded Empty Template["+n+"] of ["+i+"]")):r.equalsIgnoreCase("inline")||r.beginsWithStr("#")?(c=r.equalsIgnoreCase("inline")?e:r,ve(p=(d=$(c)).html())?oe.error("Template["+n+"] of ["+i+"] NOT defined inline in ["+c+"]."):(ae.addTemplateScript(n,p,i),r.equalsIgnoreCase("inline")&&d.html(""))):r.equalsIgnoreCase("none")?oe.info("Template["+n+"] of ["+i+"] defined as NONE. Ignoring template."):r.equalsIgnoreCase("script")?oe.error("Template["+n+"] of ["+i+"] NOT defined in <script>."):(u=String(o.method||"get").toLowerCase(),o.params&&(r=ae.api.url(r,o.params)),oe.info(">>>>>>>>>> Making New Template Request"),f=Ua({url:r,method:u,headers:o.headers,data:o.payload,cache:ae.defaults.components.offline,dataType:"html",onTmplError:o.onError,success:function(e){ae.addTemplateScript(n,e,i),oe.info("Loaded Template["+n+"] of ["+i+"] from ["+r+"]")},error:function(e,t,a){this.onTmplError&&ue(this.onTmplError)&&this.onTmplError.call(this,e,t,a),oe.error("Failed Loading Template["+n+"] of ["+i+"] from ["+r+"]. ["+t+":"+a+"]")}}),t.push(f))),oe.groupEnd("spaTemplateAjaxQue"),t},ae.urlParams=function(e){e=(e=e||window.location.search||"").beginsWithStr("\\?")||e.indexOf("//")<7?e.substring(e.indexOf("?")+1):e;var n={};return e.replace(/([^&=]+)=?([^&]*)(?:&+|$)/g,function(e,t,a){(n[t]=n[t]||[]).push(decodeURIComponent(a))}),xe(n,function(e,t){n[t]=pe(e)&&1==e.length?e[0]:e}),n},ae.urlParam=function(e,t){return ae.urlParams(t)[e]};var Ue="";function Ie(e,t){return(e||"").trimRightStr("/")+"/"+(t||"").trimLeftStr("/")}ae.getLocHash=function(e){var t=(Ue||window.location.hash).replace("#","");return t||me(e)||"#"==e||(t=window.location.pathname.replace(/(\/)*(index|default)\.([a-z])*/i,"").replace(e.replace(/\s*/g,"").trimRightStr("/"),"")),t},ae.urlHash=function(e,t){var a,n=ae.getLocHash(t);return(e||y(e))&&(a=(n=n.beginsWithStr("/")?n.substring(n.indexOf("/")+"/".length):n).length?n.split("/"):[],y(e)?n=e<0?a[a.length-1]:a&&a.length>e?a[e]:"":pe(e)?n=0===e.length?a:X(e,a):he(e)&&"?"==e&&(n=n.containsStr("\\?")?ae.getOnSplit(n,"?",1):"")),n},ae.urlHashFull=function(e){return Ie(e=e||"#",ae.urlHash("",e))},ae.hashParam=function(e){var t=""+ae.urlHash("?");return void 0===e||ve(t)||(t=ae.urlParam(""+e,t)),t};var je,Ne={},De={},Fe=0;function ze(e){return De.hasOwnProperty(e.replace(/[^a-z]/gi,""))}function Me(){return document.querySelector("html").getAttribute("lang")}function Be(e){var t=navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage||Me()||"en";return e?(t||"").substring(0,2).toLowerCase():t}function Ve(e){e=ke({reset:!0,language:"",url:"",method:"GET",path:"language/",prefix:"Language_",ext:".txt",cache:!0,async:!0,callback:null},e);var t,a=((!(t=e.language)||t.length<2)&&(t=Be()),3<(t=t.toLowerCase().replace(/-/,"_")).length&&(t=t.substring(0,3)+t.substring(3).toUpperCase()),t),n=e.path+e.prefix,r=e.ext||".properties",i="";5<=a.length?i=a.substring(0,5):2<=a.length&&(i=a.substring(0,2));var o=ke({},e.urlParams||{},{lang:i.replace(/_/g,"-")}),s=n+(n.indexOf("{")<0?i:"")+r;!function(e,t){oe.info("Attempt to get language properties from:",e,t);var a={url:e,method:(t.method||"GET").toUpperCase(),async:t.async,cache:t.cache,dataType:"text",success:function(e){Fe=0,e?(t.reset&&(oe.info("Resetting previous language dictionary."),Ne={}),function(t){var e,n,r,i,o,s=[];if(t&&/^\s*{/.test(t)){try{e=JSON.parse(t),oe.log("Lang Properties Object:",e)}catch(e){console.warn("Error Parsing Language Properties JSON.",e,"\n"+t)}e&&function(e,t){if(t=t||"","object"!=typeof e)return;for(var a in e)i=t.substring(1),n=b(a)?"[":".",r=i&&"["==n?"]":"",arguments.callee(e[a],t+n+a+r)||"object"==typeof e[a]||(o=i+(i?n:"")+a+r,s.push(o+"="+e[a]))}(e)}else s=(""+t).split(/\n/);oe.log("Lang Properties Array:",s);for(var a=/(\\u.{4})/gi,l=0;l<s.length;l++)if(s[l]=s[l].replace(/^\s\s*/,"").replace(/\s\s*$/,""),0<s[l].length&&"#"!=s[l].match("^#")){var c=s[l].split("=");if(0<c.length){for(var d=decodeURI(c[0]).replace(/^\s\s*/,"").replace(/\s\s*$/,""),p=1==c.length?"":c[1];"\\"==p.match(/\\$/);)p=p.substring(0,p.length-1),p+=s[++l].replace(/\s\s*$/,"");for(var u=2;u<c.length;u++)p+="="+c[u];var f=(p=p.replace(/^\s\s*/,"").replace(/\s\s*$/,"")).match(a);if(f)for(var h=0;h<f.length;h++)p=p.replace(f[h],function(e){var t=[],a=parseInt(e.substring(2),16);0<=a&&a<Math.pow(2,16)&&t.push(a);for(var n="",r=0;r<t.length;++r)n+=String.fromCharCode(t[r]);return n}(f[h]));Ne[d]=p}}je=!0}(e),t.callback&&t.callback()):console.warn("Received empty language properties.")},error:function(){Fe++,De[t.language.replace(/[^a-z]/gi,"")]=e,console.warn("Failed to get language properties from: "+e),t.callback&&t.callback()}},n=t.data||t.payload;ve(n)||(a.data=n);t.headers&&(a.data=t.headers);Ua(a)}(ae.api.url(e.url||s,o),e)}function He(e,t){var a,n,r=ae.i18n.value(e);t&&de(t,"object|array")&&(n=a="",xe(Se(t),function(e){a=""+t[e],n=a.trim(),a&&(n.beginsWithStrIgnoreCase("i18n:")||n.beginsWithStrIgnoreCase("@"))&&(a=ae.i18n.value(n)),r=r.replace(new RegExp("{\\s*("+e.trim()+")\\s*}","g"),a)}));var i,o=[e];return function e(t){var a=ae.extractStrBetweenEx(t,"{","}",!0);return ve(a)?t:(xe(a,function(e){(i=i||0<=o.indexOf(e))||(o.push(e),t=t.replace(new RegExp("{\\s*("+e.trim()+")\\s*}","g"),ae.i18n.value(e)))}),i?(console.error("i18nKey circular issue found:",o.join(" > ")),t):e(t))}(r)}function Ke(e,t,a){var n,r;fe(e)&&(e=(t=e).lang||""),e&&"*"!=e||(e=Me()||Be(1)),e&&(ae.i18n.onLangChange&&(e=he(r=ue(n=ae.i18n.onLangChange)?n.call(void 0,e,a):e)?r:e),$("html").attr("lang",e.replace("_","-")),ae.i18n.setLanguage(e,$e({},ae.defaults.lang,be(window,"app.conf.lang",{}),be(window,"app.lang",{}),t||{})))}function qe(e,t){var a,n=e;if(pe(e))n=e.sort(),t&&(n=n.reverse());else if(he(e)){switch(!0){case 0<=e.indexOf(","):a=",";break;case 0<=e.indexOf(" "):a=" "}a&&(n=e.split(a).sort().join(a),t&&(n=n.reverse()))}return n}function We(e){return(""+e).toLowerCase()}function Je(e){return(""+e).toUpperCase()}function Xe(e){return(""+e).toTitleCase()}function Ge(e){return qe(e,!0)}function Ze(e){var t="html";switch(e.tagName.toUpperCase()){case"INPUT":switch(e.type.toLowerCase()){case"checkbox":case"radio":t="check";break;default:t="value"}break;case"TEXTAREA":t="value";break;case"SELECT":t="options"}return t}function Ye(e){return e.replace(/(\/)*&gt;/g,">").replace(/ _XHBTINSPA_--(>|&gt;)/gi,"").replace(/(>|&gt;)(<|&lt;)!--_XHBTINSPA_/gi,"").replace(/<IMG-X-TMP /gi,"<img ").replace(/<IFRAME-X-TMP /gi,"<iframe ").replace(/<\/IFRAME-X-TMP/gi,"</iframe")}ae.i18n=He,ae.i18n.loaded=!1,ae.i18n.settings={reset:!0,url:"",method:"GET",path:"language/",prefix:"Language_",ext:".txt"},ae.i18n.browserLang=Be,ae.i18n.setLanguage=function(t,a){t=(t||Be()).replace(/-/g,"_"),a=ke(ae.i18n.settings,a),Ve({language:t,reset:a.reset,url:a.url,method:a.method,urlParams:a.urlParams,headers:a.headers,data:a.data||a.payload,target:a.target||"",prefix:a.prefix,path:a.path,ext:a.ext,cache:a.cache,async:a.async,callback:function(){var e;w("#i18nSpaRunTime")||$("body").append('<div id="i18nSpaRunTime" style="display:none"></div>'),je=void 0===je?!ge(Ne):je,ae.i18n.loaded=ae.i18n.loaded||je,1<t.length&&!je&&(e=(2<t.length?t.substring(0,2):Be(1)).toLowerCase(),t!=e?ze(e)||(console.warn("Error Loading Language File ["+t+"]. Attempt to get default language ["+e+"]."),ae.i18n.setLanguage(e,a)):"en"!=t&&(ze("en")||(console.warn("Error Loading default language ["+t+"]. Attempt to get [en]."),ae.i18n.setLanguage("en",a)))),ae.i18n.apply(a.target),a.callback&&a.callback(je)}})},ae.i18n.setLang=function(e,t){fe(e)&&(e=(t=e).lang||""),Ke(e,t)},ae.i18n.updateLang=function(e,t){fe(e)&&(e=(t=e).lang||""),Ke(e,$e({reset:!1},t||{}))},ae.i18n.value=function(e){return ae.i18n.loaded||window.Liferay?((e=(""+e).replace(/i18n:/i,"").trim()).beginsWithStrIgnoreCase("@")&&(e=e.substring(1).trim(),e=be(window,e,e)),function(e){var t=e;try{t=(""+(!ae.i18n.loaded&&window.Liferay?Liferay.Language.get(e):function(e){var t,a=Ne[e];if(de(a,"null|undefined"))return e;if("string"==typeof a){for(r=0;-1!=(r=a.indexOf("\\",r));)a="t"==a.charAt(r+1)?a.substring(0,r)+"\t"+a.substring(2+r++):"r"==a.charAt(r+1)?a.substring(0,r)+"\r"+a.substring(2+r++):"n"==a.charAt(r+1)?a.substring(0,r)+"\n"+a.substring(2+r++):"f"==a.charAt(r+1)?a.substring(0,r)+"\f"+a.substring(2+r++):"\\"==a.charAt(r+1)?a.substring(0,r)+"\\"+a.substring(2+r++):a.substring(0,r)+a.substring(r+1);for(r=0;r<a.length;)if("'"==a.charAt(r))if(r==a.length-1)a=a.substring(0,r);else if("'"==a.charAt(r+1))a=a.substring(0,r)+a.substring(++r);else{for(t=r+2;-1!=(t=a.indexOf("'",t));){if(t==a.length-1||"'"!=a.charAt(t+1)){a=a.substring(0,r)+a.substring(r+1,t)+a.substring(t+1),r=t-1;break}a=a.substring(0,t)+a.substring(++t)}-1==t&&(a=a.substring(0,r)+a.substring(r+1))}else r++}if(0==a.length)return"";if(1==a.length&&"string"==typeof a[0])return a[0];for(var n="",r=0;r<a.length;r++)"string"==typeof a[r]?n+=a[r]:n+="{"+a[r]+"}";return n}(e))).trim()}catch(e){console.warn("i18n lookup error:",e)}return t}(e)):(oe.info("jQ-xsr.i18n module not found. Skipping i18n value lookup."),e)},ae.i18n.text=He,ae.i18n.update=function(e,t,a){t=t||"";var n,r,i,o=$(e),s=o.attr("data-i18n")||"",l="",l=ve(s)||0==t.indexOf(":")||0==t.indexOf("=")||s.indexOf(":")<=0&&t.indexOf(":")<=0?t.trimLeftStr(":").trimLeftStr("="):(n=0<s.indexOf(":")?le(s||{}):{html:s.trimLeftStr(":").replace(/'/g,"")},r=0<t.indexOf(":")?le(t||{}):{html:t.trimLeftStr(":").replace(/'/g,"")},xe(Se(n),function(t){xe(t.split("_"),function(e){e&&(n[e]=n[t])})}),xe(Se(r),function(t){xe(t.split("_"),function(e){e&&(r[e]=r[t])})}),xe(Se(i=$e({},n,r)),function(e){e.indexOf("_")<=0&&(l+=e+":'"+i[e]+"',")}),l.trimRightStr(","));return o.attr("data-i18n",l).data("i18n",l),(a||me(a))&&ae.i18n.apply(e),o},ae.i18n.apply=ae.i18n.render=function(e,t){t=t||"";var a=(e=e||"html").beginsWithStr("<");a&&($("#i18nSpaRunTime").html(e),e="#i18nSpaRunTime");var n='[data-i18n]:not([data-i18n=""])',r=$(e).find(t+n);return r.length||(r=$(e).filter(t+n)),!r.length||ae.i18n.loaded||Fe?(r.each(function(e,t){var n=$(t),a=n.data("i18n")||"";a&&!a.containsStr(":")&&(a="html:'"+a+"'");var r=le(a||"{}"),i=r.data||r.i18ndata;i?(delete r.data,delete r.i18ndata):i=le(n.data("i18nData")||"{}"),r&&!ge(r)&&xe(Se(r),function(e){var t=r[e],a=ae.i18n.text(t,i);xe(e.split("_"),function(e){switch(e.toLowerCase()){case"html":n.html(ae.sanitizeXSS(a));break;case"text":n.text(a);break;default:n.attr(e,a)}})})}),a?$("#i18nSpaRunTime").html():void 0):(oe.info("Language is not initialized! Attempt to initialize."),void Ke(Me()||Be(1)))},ae.pipes={trimLeft:function(e){return(""+e).trimLeftStr()},trimRight:function(e){return(""+e).trimRightStr()},normalize:function(e){return(""+e).normalizeStr()},lower:We,lowerCase:We,toLower:We,upper:Je,upperCase:Je,toUpper:Je,title:Xe,titleCase:Xe,toTitleCase:Xe,capitalize:function(e){return(""+e).capitalize()},unCapitalize:function(e){return(""+e).unCapitalize()},not:function(e){return!e},sort:qe,sortAsc:qe,sortDesc:Ge,asc:qe,desc:Ge,reverse:function(e){var t,a=e;if(pe(e))a=e.reverse();else if(he(e)){switch(!0){case 0<=e.indexOf(","):t=",";break;case 0<=e.indexOf(" "):t=" "}t&&(a=e.split(t).reverse().join(t))}return a}},ae.bindElement=function(e){ae.bindElements(e,".")},ae.bindElements=function(e,t){var a=$(e||"body");(a=(t=t||"")&&"."==t?a.filter("[bind-element]:not([attached])"):a.find("[bind-element]:not([attached])"+t)).each(function(e,t){var i=le(t.getAttribute("bind-element"))||{};for(var o in ve(i)||ie(t,"attached",""),i)t.addEventListener(o.toLowerCase(),function(){var e,t,a,n,r;e=this,a=i[t=o],(r=ae.getElValue(e))&&"undefined"!=r&&"null"!=r&&((n={__:{on:t,el:e}}).__[ie(e,"name")||ie(e,"id")||"_"]=r,ae.bindData(a,n))})})},ae.dataBind=ae.bindData=function(e,t,a,n){1==arguments.length&&(he(e)&&"#"==e[0]||R(e)||L(e))&&(t={_:0}),a=a||"";var r,i,o,s=he(e=e||"body")&&/\s*</.test(e);if(o=s?(r="blocked-script-in-template",i=e.replace(/<\s*script/gi,"<"+r).replace(/<\s*(\/)\s*script/gi,"</"+r).replace(/<\s*textarea/gi,"<spa-vdom-textarea").replace(/<\s*(\/)\s*textarea/gi,"</spa-vdom-textarea"),$('<div style="display:none">'+i+"</div>")):$(e),ve(t))return o;var l="";"$"==a[0]&&(l=a.substring(1).trim(),a="");var m,c,g,d,v,p,y,b,u,f,h,C,S,x,w=(l=l||o.attr("data-rendered-component"))||"_unknown_",O=$e({__computed__:{}},fe(t)?t:{__raw__:t}),k=o.find(a+"[data-bind]");function _(e,t){return"-"==(e=(e||"").trim())[0]?$(t).data(e.substring(1)):"#"==e[0]?ae.getElValue(e):"."==e||"this"==e?O.hasOwnProperty("__raw__")?O.__raw__:O:be(O,e,e)}function T(e,t){return["_runTimeTemplate",e,l,t.replace(/[^a-z0-9]/gi,"_"),ye()].join("_")}function E(e,t){return ae.compiledTemplates4DataBind.hasOwnProperty(w)||(ae.compiledTemplates4DataBind[w]={}),ae.compiledTemplates4DataBind[w][e]=Handlebars.compile(Ye(t))}function P(e,t,a,n){var r=t,i=(e=e.trim()).trim(),o=i.indexOf("("),s=[];if(0<o&&(i=i.substring(0,o)),"."==i[0]){if(i=i.substring(1),!ae.pipes.hasOwnProperty(i)){s=(s=e.substring(o+1,e.indexOf(")")).trim())?s.split(",").map(A):[];try{r=t[i].apply(t,s)}catch(e){console.warn("Error calling format function ."+i+"() on:",t,n,e)}return r}i="xsr.pipes."+i}return ae.renderUtils.runCallbackFn(i,["(...)",t,a,O,n],n)}return k.length||(k=o.filter(a+"[data-bind]")),k.length&&!s&&l&&(k=k.filter(function(){return $(this).closest("[data-rendered-component]").attr("data-rendered-component")==l})),xe(k,function(h){var e,t,a;m=$(h),h.hasAttribute("data-src")&&!h.hasAttribute("async-in-progress")?(t=!0,(e=le(ie(h,"data-src"))).hasOwnProperty("on")&&(t=O&&O.__,e.on&&t&&(O=O.__,t=0<=e.on.split(",").map(function(e){return e.trim()}).indexOf(O.on))),t&&(ie(h,"async-in-progress",""),h.id||ie(h,id,"el-"+ye()+D(1,9999)),a={url:ae.api.url(e.url,O),method:e.method||"GET",success:function(e){ae.bindData("#"+h.id,e)},error:function(){h.removeAttribute("async-in-progress"),e.onError?ae.renderUtils.runCallbackFn(e.onError,["(...)",h,this],h):console.warn("Failed to retrieve data.")}},e.payload&&(delete O.on,delete O.el,a.data="stringify"==e.payload?JSON.stringify(O):O),e.headers&&(a.headers=e.headers),oe.log("async data-bind:",h,a),Ua(a))):(h.removeAttribute("async-in-progress"),(c=m.data("bind")||"")&&!c.containsStr(":")&&(c=Ze(h)+":'"+c+"'"),g=le(c||"{}"),u=ae.renderUtils.getFn(m.attr("data-bind-callback")||""),g&&!ge(g)&&xe(Se(g),function(e){d=(g[e]+"|").split("|"),v=d.shift().trim(),f="!"==v[0],de(y=f?!_(v=v.substring(1).trim(),h):_(v,h),"undefined|null")&&(y="");for(var t=0;t<d.length;t++)(p=d[t].trim())&&(y="!"==p[0]?"!"==p?!y:!P(p=p.substring(1).trim(),y,v,h):P(p,y,v,h));xe(e.split("_"),function(e){var t,a="";if(e=e.trim(),!me(y))switch(e.toLowerCase()){case"html":m.html(ae.sanitizeXSS(y));break;case"text":m.text(y);break;case"value":ie(h,"value",y);break;case"options":var n=g.startAt||ie(h,"data-options-from")||0,r=g.sortOn||ie(h,"data-sort-on")||0,i=g.sortBy||ie(h,"data-sort-by")||"";g.valueKey&&ie(h,"data-value-key",g.valueKey),g.textKey&&ie(h,"data-text-key",g.textKey),ae.optionsList(h,y,n,r,i),delete g.options,delete g.sortOn,delete g.sortBy,delete g.startAt,delete g.valueKey,delete g.textKey;break;case"sorton":case"sortby":case"startat":case"valuekey":case"textkey":break;case"selectvalue":case"selectedvalue":g.hasOwnProperty("options")?console.warn("Incorrect Order. Move options: first, finally select...",h):/select/i.test(h.tagName)&&(h.hasAttribute("multiple")?(pe(y)||(t=ie(h,"data-split-by")||",",y=(""+y).split(t).map(function(e){return e.trim()})),N(h,"value",y)):ae.selectOptionForValue(h,y));break;case"selecttext":case"selectedtext":g.hasOwnProperty("options")?console.warn("Incorrect Order. Move options: first, finally select...",h):/select/i.test(h.tagName)&&(h.hasAttribute("multiple")?(pe(y)||(t=ie(h,"data-split-by")||",",y=(""+y).split(t).map(function(e){return e.trim()})),N(h,"text",y)):ae.selectOptionForText(h,y));break;case"selectindex":case"selectedindex":g.hasOwnProperty("options")?console.warn("Incorrect Order. Move options: first, finally select...",h):/select/i.test(h.tagName)&&(h.hasAttribute("multiple")?(pe(y)||(t=ie(h,"data-split-by")||",",y=(""+y).split(t).map(function(e){return e.trim()})),y.forEach(function(e){R(h.options[+e])&&(h.options[+e].selected=!0,ie(h.options[+e],"selected",""))})):R(h.options[+y])&&(h.options[+y].selected=!0,ie(h.options[+y],"selected","")));break;case"$":case"check":if(/checkbox|radio/i.test(h.type)){switch(ce(y)){case"boolean":h.checked=y;break;default:h.checked=h.value.equalsIgnoreCase(""+y)}h.checked?ie(h,"checked",""):h.removeAttribute("checked")}break;case"if":a=v.replace(/[^a-z0-9]/gi,"_"),O.__computed__[a]=y;var o,s,l=m.attr("data-bind-template");l?s=ae.compiledTemplates4DataBind[w][l]:(o="{{#if __computed__."+a+" }}"+m.html().trim()+"{{/if}}",s=E(l=T("if",v),o),m.attr("data-bind-template",l)),m.html(s(O));break;case"repeat":a=v.replace(/[^a-z0-9]/gi,"_"),O.__computed__[a]=y;var c,d,p,u=m.attr("data-bind-template");u?p=ae.compiledTemplates4DataBind[w][u]:(d="{{#each __computed__."+a+((c=(g.repeatAs||g.as||"").replace(/[,|:]/g," ").normalizeStr())?" as |"+c+"|":"")+" }}"+m.html().trim()+"{{/each}}",p=E(u=T("repeat",v),d),m.attr("data-bind-template",u)),m.html(p(O));break;case"as":case"repeatas":break;default:switch(!0){case/^\./.test(e):var f=e.replace(/[\.\,]/g," ").normalizeStr();m[y?"addClass":"removeClass"](f);break;default:m.attr(e,y),e.beginsWithStr("data-")&&(b=ae.dotToCamelCase(e.getRightStr("-").replace(/-/g,".")))&&m.data(b,y)}}}),u&&u.call(h,h)}))}),n||s||!o.is("[data-rendered-component]")||(ve(h=o.attr("data-rendered-component"))||(C="app."+h+".bindCallback",ae.renderUtils.runCallbackFn(C,O,app[h]))),s||(S=o.find("[data-rendered-component]").filter(function(){return this.hasAttribute("data-x-component-$data")||this.hasAttribute("data-x-$data")||this.hasAttribute("data-spa-component-$data")||this.hasAttribute("data-spa-$data")||this.hasAttribute("spa-$data")})).length&&S.each(function(){x=function(e,t,a){var n,r,i,o,s,l="app."+(t=t.replace(/[^a-z0-9]/gi,"_"))+".";fe(a)&&(ae.tempBind$data.hasOwnProperty(t)||(ae.tempBind$data[t]={}),ae.tempBind$data[t].$data=$e({},be(app,t+".$data",{}),a),l="xsr.tempBind$data."+t+".");n=$(e),r=n.data(),i=(n.attr("data-x-component")||n.attr("data-spa-component")||"").split("|"),(o=(i[1]||"").trim())&&(/\:\s*\$data/.test(o)&&(o=o.replace(/\:\s*\$data/g,":"+l+"$data")),o=le(o));var c=n.attr("data-x-component-options")||n.attr("data-x-$options")||n.attr("data-spa-component-options")||n.attr("data-spa-$options")||n.attr("spa-$options")||"{}";{var d;(s=$e({},o,r,le(c))).hasOwnProperty("data")&&he(s.data)&&(d=s.data.trim(),/^\$data/.test(d)&&(d=l+d),s.data=$e({},be(window,d,{})))}var p=(n.attr("data-x-component-$data")||n.attr("data-x-$data")||n.attr("data-spa-component-$data")||n.attr("data-spa-$data")||n.attr("spa-$data")||"").trim();p&&(/\:\s*\$data/.test(p)&&(p=p.replace(/\:\s*\$data/g,":"+l+"$data")),ve(s.data)?s.data=le(p):$e(s.data,le(p)));{var u;!ve(s.data)&&s.data.hasOwnProperty("$data")&&(u=$e({},s.data.$data),delete s.data.$data,$e(s.data,u))}return s.hasOwnProperty("data")?s.data:{}}(this,l,t),ae.bindData(this,x)}),O=null,s?o.html().replace(new RegExp(r,"g"),"script").replace(/spa-vdom-textarea/g,"textarea"):o},ae.bindTemplateData=function(e,t){var a=e;if(/^\s*#[a-z]+/i.test(e)&&(a=$(e).html()),ve(t))return a;if(/ data-bind\s*=/i.test(a)&&(a=ae.bindData(e,t)),/{{(.+)}}/.test(a))if("undefined"!=typeof Handlebars&&Handlebars)try{a=Handlebars.compile(a)(t)}catch(e){console.log("Error Handlebars compile/bind.",e)}else console.warn("Handlebars Template Library not found!");return a},ae.togglePassword=function(e){var t;$(e).next(".icon.eye").length||((t=$('<i class="icon eye"></i>')).on("click",function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();var t=$(this).prevAll(".toggle-password"),a="text"==t.attr("type")?"password":"text";t.attr("type",a).toggleClass("text")}),$(t).insertAfter(e))},ae.initTogglePassword=function(e){$(e||"body").find(".toggle-password").each(function(e,t){oe.info("Initializing toggle password",t),ae.togglePassword(t)})},ae.isElValueChanged=function(e){var a,t,n=$(e);if(n.length)if("checkbox"==(t=n[0]).type)a=t.checked!=t.defaultChecked;else if("radio"==t.type)$(t).closest("form").find(':radio[name="'+t.name+'"]').each(function(e,t){a=a||t.checked!=t.defaultChecked});else if(0<="INPUT,TEXTAREA".indexOf(t.tagName))a=t.value!=t.defaultValue;else if("SELECT"==t.tagName){for(var r,i=0,o=0,s=t.options.length;o<s;o++)r=t.options[o],a=a||r.selected!=r.defaultSelected,r.defaultSelected&&(i=o);a&&!t.multiple&&(a=i!=t.selectedIndex)}return a},ae.resetElDefaultValue=function(e){$(e).each(function(e,t){if(0<",checkbox,radio".indexOf(t.type))t.defaultChecked=t.checked;else if(0<",INPUT,TEXTAREA".indexOf(t.tagName))t.defaultValue=t.value;else if("SELECT"==t.tagName)for(var a,n=0,r=t.options.length;n<r;n++)(a=t.options[n]).defaultSelected=a.selected;$(t).trigger("change")})},ae.resetToDefaultValue=function(e){$(e).each(function(e,t){if(0<",checkbox,radio".indexOf(t.type))t.checked=t.defaultChecked;else if(0<",INPUT,TEXTAREA".indexOf(t.tagName))t.value=t.defaultValue;else if("SELECT"==t.tagName)for(var a,n=0,r=t.options.length;n<r;n++)(a=t.options[n]).selected=a.defaultSelected;$(t).trigger("change")})},ae.updateTrackFormCtrls=function(e){var t,a,n,r,i,o,s,l,c,d,p;e&&(a=(t=$(e)).find(".tracking-change.changed").length,r=!(ve(n=ae.validateForm("#"+t.attr("id")))||1==n[0].errcode)||t.find(".validation-error,.validation-pending").length,i=0<a&&!r,o=!r,s=t.find(".ctrl-on-change,.ctrl-on-validate"),t.attr("data-changed",a).data("changed",a),s.each(function(e,t){l=$(t),c=l.hasClass("ctrl-on-change")?i:o,ve(d=l.attr("onBeforeChange"))||(0<d.indexOf("(")&&(d=d.getLeftStr("(")),p=be(window,d.trim(),void 0),c=ue(p)?!!p.call(t,c):c),l.is(":disabled")==c&&(l.prop("disabled",!c).addClass(c?"":"disabled").removeClass(c?"disabled":""),l.trigger("change"))}))},ae.trackFormElChange=function(e,t){function o(e){if("change"==e.type||e.key&&(1==e.key.length||0<="BackspaceDelete".indexOf(e.key))){var t,a=!1,n=$(this).closest("form"),r=n.find(".tracking-change.changed").length;if("checkbox"==this.type)a=this.checked!=this.defaultChecked;else if("radio"==this.type)n.find(':radio[name="'+this.name+'"]').each(function(e,t){t.checked==t.defaultChecked&&$(t).removeClass("changed"),a=a||t.checked!=t.defaultChecked});else if(0<="INPUT,TEXTAREA".indexOf(this.tagName))a=this.value!=this.defaultValue,t="change"!=e.type;else if("SELECT"==this.tagName){for(var i,o=0,s=0,l=this.options.length;s<l;s++)i=this.options[s],a=a||i.selected!=i.defaultSelected,i.defaultSelected&&(o=s);a&&!this.multiple&&(a=o!=this.selectedIndex)}$(this)[a?"addClass":"removeClass"]("changed"),ae.updateTrackFormCtrls(n),null!=r&&t&&n.trigger("change")}}$(t||"body").find(e).each(function(e,t){"FORM"==t.tagName.toUpperCase()?ae.trackFormElChange($(t).find(".track-change").length?".track-change":"input,textarea,select",t):function(e){var t,a,n,r="change",i=$(e);if(0<",checkbox,radio".indexOf(e.type))e.defaultChecked=e.checked;else if(0<",INPUT,TEXTAREA".indexOf(e.tagName))e.defaultValue=e.value,r="keyup change";else{if("SELECT"!=e.tagName)return;for(t=0,a=e.options.length;t<a;t++)(n=e.options[t]).defaultSelected=n.selected}i.removeClass("track-change changed"),ae.updateTrackFormCtrls(i.closest("form")),e.className.indexOf("tracking-change")<0&&i.addClass("tracking-change").on(r,o)}(t)})},ae.initTrackFormElChanges=function(e){$(e||"body").find("form.track-changes,form:has(.ctrl-on-change,.track-change)").each(function(e,t){oe.info("Initializing Form Elements Track: Form ["+(t.id||t.name)+"]"),ae.trackFormElChange(t)})},ae.getModifiedElement=function(e){var t,a=void 0;return K($(e||"form:not([data-ignore-change]) :input:not(:disabled,:button,[data-ignore-change])"),function(e){return t||((e.tagName.match(/^(select|textarea)$/i)&&e.value!=e.defaultValue||e.tagName.match(/^input$/i)&&(e.type.match(/^(checkbox|radio)$/i)&&e.checked!=e.defaultChecked||e.type.match(/^(text|password|hidden|color|email|month|number|tel|time|url|range|date|datetime|datetime-local)$/i)&&e.value!=e.defaultValue))&&(t=!0),t&&(a=e)),!t}),a},ae.getModifiedElements=function(e){var a,n=[];return $(e||"form:not([data-ignore-change]) :input:not(:disabled,:button,[data-ignore-change])").each(function(e,t){a=!1,(t.tagName.match(/^(select|textarea)$/i)&&t.value!=t.defaultValue||t.tagName.match(/^input$/i)&&(t.type.match(/^(checkbox|radio)$/i)&&t.checked!=t.defaultChecked||t.type.match(/^(text|password|hidden|color|email|month|number|tel|time|url|range|date|datetime|datetime-local)$/i)&&t.value!=t.defaultValue))&&(a=!0),a&&n.push(t)}),n},ae.initTrackElValueChanges=ae.resetElementsDefaultValue=function(e){$(e||"form :input:not(:disabled)").each(function(e,t){t.defaultValue=t.value,t.tagName.match(/^input$/i)&&t.type.match(/^(checkbox|radio)$/i)&&t.checked!=t.defaultChecked&&(t.defaultChecked=t.checked)})},ae.trash={container:[],push:function(e){this.container.push(e)},empty:function(){this.container=[]},pick:function(e){return e?this.container[e]:this.container}},ae.fillData=function(c,d,e){var t="object"==typeof c;d&&"object"==typeof d&&(e=d,d=null),d=d||"body";var p={dataParams:{},method:"GET",async:!0,dataCache:!1,keyFormat:"aBc",selectPattern:"[name='?']",formatterCommon:null,formatterOnKeys:null,resetElDefault:!0,resetElDefaultInContext:!0,keysMap:{}};ke(p,e),t||Ua({url:c,method:(""+(p.method||"GET")).toUpperCase(),data:p.dataParams,cache:p.dataCache,async:p.async,dataType:"text",success:function(e){c=le(""+e),function(){var l=p.keyFormat;l=null!=(l=null!=l.match(/^[a-z]/)?"aBc":l).match(/^[A-Z]/)?"AbC":l;var e=H(c);oe.group("fillData"),oe.info(e),xe(e,function(e){oe.group(">>"+e);var t=""+(e.replace(/[\[\]]/g,"_")||""),a=e.replace(/\[[0-9]+\]/g,""),n=/\[[0-9]+\]/.test(e);switch(l){case"_":t=ae.dotToX(t,"_"),a=ae.dotToX(a,"_");break;case"AbC":t=ae.dotToTitleCase(t),a=ae.dotToTitleCase(a);break;default:t=ae.dotToCamelCase(t),a=ae.dotToCamelCase(a)}var r={patternKey:t+(n?" || "+a:""),formatterKey:a,isArrayChild:n};ae.trash.push(r),oe.info(r),ae.trash.empty();var i=p.selectPattern.replace(/\?/g,t);(p.keysMap[t]||p.keysMap[a])&&(p.keysMap[t]=p.keysMap[t]||{},p.keysMap[a]=p.keysMap[a]||{},p.keysMap[t].pattern=p.keysMap[t].pattern||p.keysMap[a].pattern,p.keysMap[t].pattern&&(i=p.keysMap[t].pattern.replace(/\?/g,t)),p.keysMap[a].formatter&&(p.formatterOnKeys=p.formatterOnKeys||{},p.formatterOnKeys[a]=p.keysMap[a].formatter));var o=$(d).find(i).length;oe.info(">> "+i+" found: "+o);var s=null;0<o&&(s=be(c,e),!p.formatterOnKeys&&p.formatterCommon&&(s=p.formatterCommon(s,e,c)),p.formatterOnKeys&&(p.formatterOnKeys[a]?s=p.formatterOnKeys[a](s,e,c):p.formatterCommon&&(s=p.formatterCommon(s,e,c))),oe.info({value:s})),$(d).find(i).each(function(e,t){switch(oe.info(t),t.tagName.toUpperCase()){case"INPUT":switch(t.type.toLowerCase()){case"text":case"password":case"hidden":case"color":case"date":case"datetime":case"datetime-local":case"email":case"month":case"number":case"search":case"tel":case"time":case"url":case"range":case"button":case"submit":case"reset":$(t).val(s),!p.resetElDefaultInContext&&p.resetElDefault&&(t.defaultValue=t.value);break;case"checkbox":case"radio":t.checked=t.value.equalsIgnoreCase(s),!p.resetElDefaultInContext&&p.resetElDefault&&(t.defaultChecked=t.checked)}break;case"SELECT":ae.selectOptionForValue(t,s),!p.resetElDefaultInContext&&p.resetElDefault&&(t.defaultValue=t.value);break;case"TEXTAREA":$(t).val(s),!p.resetElDefaultInContext&&p.resetElDefault&&(t.defaultValue=t.value);break;default:$(t).html(ae.sanitizeXSS(s))}}),oe.groupEnd(">>"+e)}),oe.groupEnd("fillData"),p.resetElDefaultInContext&&ae.resetElementsDefaultValue(d+" :input")}()},error:function(e,t,a){oe.error("Failed loading data from ["+c+"]. ["+t+":"+a+"]"),ue(app.api.onError)?app.api.onError.call(this,e,t,a):ae.api.onReqError.call(this,e,t,a)}})},ae.toRenderDataStructure=function(t,e,a){function n(t,a){return a&&Se(a).length&&xe(Se(a),function(e){t=t.replace(new RegExp("{"+e+"}","gi"),a[e])}),t}var r={},i={},o={},s={};switch(e&&(s=he(e)?ae.queryStringToJson(e):fe(e)?e:{}),!0){case he(t):t.containsStr("\\|")&&(r.dataModel=ae.getOnSplit(t,"|",0),t=ae.getOnLastSplit(1)),r.dataUrl=n(t,a),_isEmpty(s)||(r.dataParams=s);break;case pe(t):i={urls:[]},o={},xe(t,function(e){o={url:n(e,a),params:s},e.containsStr("\\|")&&(o.target=ae.getOnSplit(e,"|",0),o.url=n(ae.getOnLastSplit(1),a)),i.urls.push(o)});break;case fe(t):i={urls:[]},o={},xe(Se(t),function(e){o={name:e,url:n(t[e],a),params:s},t[e].containsStr("\\|")&&(o.target=ae.getOnSplit(t[e],"|",0),o.url=n(ae.getOnLastSplit(1),a)),i.urls.push(o)})}return _isEmpty(i.urls)||(r.dataCollection=i),r};var Qe={};function et(e,t){var a,n,r,i,o="_rtt_"+e;return t&&fe(t)&&ae.hasPrimaryKeys(t,"template|templateStr|templateString|templateUrl")&&(t.hasOwnProperty("template")&&((n=t.template.trim()).beginsWithStr("#")&&!n.containsStr(" ")||"inline"==n||"."==n?"inline"!=n&&"."!=n&&"#"!=n||(t.templateUrl="inline"):t.templateStr=t.template),ae.hasPrimaryKeys(t,"templateStr|templateString")?(a=t.templateStr||t.templateString||"",ae.updateTemplateScript(o,a),t.template="#"+o):ae.hasPrimaryKeys(t,"templateUrl")&&((i=(t.templateUrl||"").trim())&&/^(\.\/)/.test(i)&&(r=/[^a-z0-9]/gi.test(e),i=ae.defaults.components.rootPath+(ae.defaults.components.inFolder||r?e.replace(/[^a-z0-9]/gi,"/")+"/":"")+i.substring(2)),t.template=i)),t&&fe(t)&&!ae.hasPrimaryKeys(t,"data|dataUrl")&&ae.hasPrimaryKeys(ae.api.urls,"$"+e)&&(t.dataUrl="@$"+e),oe.log("$ Adj.Options>>>>",e,t?t.__now():t),t}function tt(e){"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?e():E.addEventListener("DOMContentLoaded",e)}function at(e){var t=this.__name__;return tt(function(){ae.refreshComponent(t,e)}),this}function nt(e){var t=this.__name__;return tt(function(){ae.renderComponent(t,e)}),this}function rt(e){var t=this.__name__;return tt(function(){ae.showComponent(t,e)}),this}function it(){var e=this.__name__;return tt(function(){ae.hideComponent(e)}),this}function ot(){var e=this.__name__;return tt(function(){ae.enableComponent(e)}),this}function st(){var e=this.__name__;return tt(function(){ae.disableComponent(e)}),this}function lt(){return ae.removeComponent(this.__name__)}function ct(){return ae.destroyComponent(this.__name__)}function dt(e){this.__name__=e}ae.env="",ae.compiledTemplates4DataBind={},ae.compiledTemplates={},ae.viewModels={},ae.renderHistory={},ae.renderHistoryMax=0,ae.components={},ae.tempBind$data={},ae.defaults={alias:"",components:{templateEngine:"handlebars",rootPath:"app/components/",inFolder:!0,templateExt:".html",scriptExt:".js",templateScript:!0,templateCache:!0,dataPreRequest:"",render:"",callback:"",extend$data:!0,offline:!1,functional:!0},routes:{base:"#",attr:{route:"data-spa-route",params:"data-spa-route-params",onNavAway:"onNavAway"},className:{hide:"HIDE-SPA-NAV",block:"BLOCK-SPA-NAV",allow:"ALLOW-SPA-NAV"},onClickAs:"click"},lang:{reset:!0,url:"",method:"GET",path:"app/language/",prefix:"Language_",ext:".txt",cache:!0,async:!0},validation:{xss:{on:"input_onBlur",fn:"_check.xss",msg:"i18n:invalid.input"}},csp:{nonce:""},set:function(e,t){return fe(e)?(e.hasOwnProperty("set")&&delete e.set,$e(this,e)):"string"==typeof e&&("components.extend$data"==e?ae.defaults.components.extend$data=t:ae.setSimpleObjProperty(this,e,t)),this}},dt.prototype={render:nt,refresh:at,show:rt,hide:it,enable:ot,disable:st,remove:lt,destroy:ct,render$:nt,refresh$:at,show$:rt,hide$:it,enable$:ot,disable$:st,remove$:lt,destroy$:ct};var pt="api,debug,lang";function ut(){var e,t=this.action;arguments.length&&(1==(e=arguments).length&&(pe(arguments[0])?e=arguments[0]:he(arguments[0])&&(e=arguments[0].split(","))),oe.log(e),e&&e.length&&xe(e,function(e){oe.info(t+" x-component:",e),spa[t](e.trim())}))}function ft(e,t){var a=e,n=t,r=ne.slice.call(arguments,2);return he(a)&&(0<a.indexOf("(")&&(a=a.getLeftStr("(")),a=be(window,a.trim(),void 0)),ue(a)&&1<arguments.length&&(a=a.apply(n,r)),a}function ht(){var t,a=this.action;arguments.length&&(1==(t=arguments).length&&(t=!pe(arguments[0])&&he(arguments[0])?arguments[0].split(","):arguments[0]),fe(t)?xe(Se(t),function(e){oe.info("Rendering x-component:["+e+"]"),spa[a](e,t[e])}):t&&t.length&&xe(t,function(e){oe.info("Rendering x-component:",e),spa[a](e.trim())}))}function mt(e){return e.split(",").map(function(e){return e.trim()+"[src]:not([data-spa-component]):not([data-x-component])"}).join(",")}function gt(e){return/^(\$)*(dyn)*SPA\$/i.test(e)}function vt(){var c,e=event,d=this,t=ie(d,"for")||"",a=t.indexOf(":"),n=t.indexOf("|"),r=((0<a&&(n<0||a<n)?"|":"")+t+"|").split("|").map(function(e){return e.trim()}),p=r.shift(),i=r[0].trim(),u={};console.log("forSpec",r),!i||fe(u=le(i))&&!ve(u)?(c=setTimeout(function(){var e,t,a,n,r,i,o="#"+ie(d,"id"),s=!0,l={};(p.length<2&&(!p||/[^a-z]/g.test(p))||gt(p))&&((p=ie(d,"spa-dyn-comp-name"))||(p="$dynSPA$"+ye()+D(0,999),ie(d,"spa-dyn-comp-name",p))),"FORM"===d.tagName.toUpperCase()?(s=ve(r=ae.validateForm(o,!0)))?(l=d.hasAttribute("data-nested")?ae.serializeFormToObject(o):ae.serializeFormToSimpleObject(o),t=d.hasAttribute("method")&&ie(d,"method")||"",a=d.hasAttribute("action")&&ie(d,"action")||"",n=d.hasAttribute("target")&&ie(d,"target")||"",t&&(u.dataUrlMethod=t),a&&(u.dataUrl=a),n&&!u.target&&(u.target=n)):oe.info("Form has validation error(s):",r):(!d.hasAttribute("data-validate")||(i=d.closest("form"))&&((s=ve(r=ae.validateForm("#"+i.id,o,!0)))||oe.info("Element has validation error(s):",r)),s&&(e=ae.getElValue(d),(s=d.hasAttribute("required")?!ve(e):s)&&d.hasAttribute("name")&&(l[ie(d,"name")]=e))),s&&(u.hasOwnProperty("dataXtra")||ve(l)||(u.dataXtra=l),u.hasOwnProperty("dataUrlParams")||ve(l)||(u.dataUrlParams=l),u.dataParams=u.hasOwnProperty("payload")&&!u.payload?{}:l,"stringify".equalsIgnoreCase(u.payload)&&(u.stringifyPayload=!0),ae.$render(p,u)),I(c)},u.delay?+u.delay:0),e&&"submit"==e.type&&e.preventDefault()):console.warn("Invalid Options in:",d)}function yt(e){var t,a,n=e.tagName.toUpperCase(),r="FORM"===n?"submit":"click",i=(ie(e,"for")||"").trim();i&&(/on(\s*):/i.test(i)&&(t=i.indexOf(":"),a=i.indexOf("|"),r=(le(((0<t&&(a<0||t<a)?"|":"")+i+"|").split("|").map(function(e){return e.trim()})[1]).on+"").toLowerCase()),"FORM"===n&&(e.hasAttribute("id")||ie(e,"id","spaForm-"+ye()+D(1,999))),ie(e,"render-on",r),e.removeEventListener(r,vt),e.addEventListener(r,vt))}function bt(e,t){var a;return m?(a=document.createEvent("Event")).initEvent(e,!0,!0):a=new Event(e,{bubbles:!0,cancelable:!0}),t&&(a.targetElement=t),a}function Ct(t,a){var e,n=(ae.defaults.routes.onClickAs||"click").toLowerCase(),r=$(t),i=(""+ie(t,a)||"").trim(),o="click"!==n;if(i&&"null"!=i&&"undefined"!=i&&!(r.hasClass("disabled")||r.is("[disabled]")||r.is(":disabled")))try{o?(e="on"+n,r.renameAttr(a,e),t.dispatchEvent(bt(n,t)),r.renameAttr(e,a)):i.split(";").forEach(function(e){e.trim()&&Function("event","("+e.trim()+")").call(t,bt(n,t))})}catch(e){console.error(e.stack.substring(0,e.stack.indexOf("\n"))+"! Failed to trigger ["+n+"(:->"+a+")] event on Element:\n",t)}}function St(e){var t=$(this);if(t.hasClass("disabled")||t.is("[disabled]")||t.is(":disabled"))return e.preventDefault(),e.stopPropagation(),void e.stopImmediatePropagation();Ct(this,"onclickthis")}function xt(e){var t=$(e||"body"),a=t.find("form:not([action]):not([method]):not([onsubmit])"),n=Yt?".no-spa-route":"",r=t.find('a[href*="//"]:not([target])'+n),i=t.find("a:not([href]):not(.no-link)"),o=t.find("[onclick]:not(:input):not(["+Gt+"]):not([onclickthis])");a.filter(function(){return!$(this).closest("pre").length}).attr("onsubmit","return false;").addClass("spa-form"),r.filter(function(){return!$(this).closest("pre").length}).attr("target","_blank").attr("rel","noopener noreferrer").addClass("spa-external-link"),i.filter(function(){return!$(this).closest("pre").length}).attr("href","javascript:;").addClass("spa-link"),o.filter(function(){return!$(this).closest("pre").length}).addClass("as-btn").renameAttr("onclick","onclickthis").on("click",St)}function wt(e){var t,a,n,r,i,o,s,l,c,d,p,u,f=$(e),h=be(spa,"_validate.defaults.offline",!0);1==f.length&&((i=f.attr("id")||"")||(i=f.attr("name")||"spaForm"+ye(),f.attr("id",i)),t=f.data(),a=f.has(".ctrl-on-change,.ctrl-on-validate").length,h&&((r=(f.attr("data-validate-defaults")||"").trim())?(r.indexOf("offline")<0&&(r.endsWithStr("}")?(n=r.lastIndexOf("}"),r=[r.slice(0,n),",offline:true",r.slice(n)].join("")):r+=",offline:true"),f.attr("data-validate-defaults",r)):f.attr("data-validate-defaults","{offline:true}")),f.is("[data-validate-form]")||f.attr("data-validate-form",""),f.attr("data-validation-initialized",""),f.attr("onsubmit")||f.attr("onsubmit","return false;"),f.on("change",function(){ae.updateTrackFormCtrls(this)}),f.find("textarea,input:not(:checkbox),input:not(:radio)").filter(":not([data-validate])").each(function(){ie(this,"data-validate","{onInput:{fn:_check.noop}}")}),o="",s=ae.defaults.validation.xss,l=(f.attr("data-validate-xss")||"").trim(),c=(s.msg||"").trim(),/msg\s*:/g.test(l)&&((c=le(l).msg)?l="on":c="Invalid input."),c&&!(l.equalsIgnoreCase("off")||l.equalsIgnoreCase("no")||l.equalsIgnoreCase("skip")||l.equalsIgnoreCase("false"))&&(o=4<l.length?","+l:",on"+s.on.capitalize()+":{fn:'"+s.fn+"',msg:'"+c+"'}"),d="onFocus:{fn:_clearSpaValidateMsg,offline:false}"+o,(p=(f.attr("data-validate-common")||"").trim())?p.indexOf("_clearSpaValidateMsg")<0&&(u="{"==p[0]?(p[0]=",","{"+d+p):"{"+d+","+p+"}",f.attr("data-validate-common",u)):f.attr("data-validate-common","{"+d+"}"),ae.initDataValidation("#"+((t.validateForm||t.validateScope||"").replace(/[#onRender]/gi,"")||i)),!f.hasClass("track-changes")&&a&&ae.trackFormElChange(e),"onRender".equalsIgnoreCase(t.validateForm)&&ae.validateForm("#"+i,!0,!0))}ae.component=ae.$=ae.registerComponent=function(e,t){var a=!!t,n=e;if(t=t||{},e)if(fe(e)&&(e=((t=$e({},e)).name||t.componentName||"spaComponent"+ye()).trim().trimLeftStr("/").trimLeftStr("_"),t.componentName=e,n=e),he(n)){if(e=e.trim().trimLeftStr("/").trimLeftStr("_"),0<=pt.indexOf(n=e))console.error('Invalid component name "'+n+'". Cannot create a component with these names: '+pt);else if(he(n)&&n&&(n=n.trim())){if(a){if(/[^a-z0-9\/]/gi.test(n)||!/^([a-z])/i.test(n))return void console.error('Invalid component name "'+n+'" to create. Component name must contain only Alphanumeric (a-z A-Z 0-9) and must begin with alphabet (a-z A-Z).');if(/[^a-z0-9]/gi.test(n)&&(n=n.replace(/[^a-z0-9]/gi,"_")),ae.components[n])return;t.componentName=n,t.hasOwnProperty("beforeRender")||(t.beforeRender="app."+n+".onRender"),t.hasOwnProperty("renderCallback")||(t.renderCallback="app."+n+".renderCallback"),t.hasOwnProperty("require")&&ae.loadComponents(t.require,function(){oe.log("Required components successfully loaded.")},function(){oe.log("Failed to load required components.")});var r=$e({},t=et(n,t));return xe(["target","template","templateCache","templateScript","templateUrl","templateUrlMethod","templateUrlParams","templateUrlPayload","templateUrlHeaders","onTemplateUrlError","style","styleCache","styles","stylesCache","scripts","scriptsCache","require","dataPreRequest","data","skipDataBind","dataCollection","dataUrl","dataUrlMethod","dataUrlParams","dataUrlHeaders","defaultPayload","stringifyPayload","dataParams","dataType","dataModel","dataCache","dataUrlCache","dataDefaults","data_","dataExtra","dataXtra","onDataUrlError","onError","dataValidate","dataProcess","dataPreProcessAsync","renderMode","lang","beforeRender","beforeRefresh","componentName"],function(e){delete t[e]}),he(t.renderCallback)&&delete t.renderCallback,xe(Se(t),function(e){delete r[e]}),r.renderCallback="app."+n+".renderCallback",r&&r.data&&fe(r.data)&&r.dataUrl&&(fe(r.dataDefaults)?r.dataDefaults=$e({},r.dataDefaults,r.data):r.dataDefaults=r.data,delete r.data),ae.components[n]=r,ae.extendComponent(e,t),window.app[n]||new dt(e)}var i,o,s=-1;return 0<n.indexOf(" ")&&(i=n.getRightStr(" ").trim(),n=n.getLeftStr(" ")),0<n.indexOf(":")&&(s=ae.toInt(n.getRightStr(":").trim()),n=n.getLeftStr(":")),n=n.replace(/[^a-z0-9]/gi,"_"),ae.components[n]||console.warn('Unknown SPA Component "'+(e.getLeftStr(" ")||e)+'"'),(o=$('[data-rendered-component="'+n+'"]')).length&&0<=s&&(o=$(o[s])),i&&o.length&&(o="<"==i[0]?(i=i.getRightStr(0).trim(),o.find("[data-rendered-component]").length?o.find(i).filter(function(){return $(this).closest("[data-rendered-component]").data("renderedComponent")==n}):o.find(i)):o.find(i)),o}}else console.error("Invalid ComponentName:",n);else console.error("Missing ComponentName to register.")},ae.$$=ae.registerComponents=function(){var t;arguments.length&&(1==(t=arguments).length&&(t=!pe(arguments[0])&&he(arguments[0])?arguments[0].split(","):arguments[0]),fe(t)?xe(Se(t),function(e){oe.info("Registering x-component:["+e+"]"),ae.registerComponent(e,t[e])}):t&&t.length&&xe(t,function(e){oe.info("Registering x-component:",e),ae.registerComponent(e.trim(),{})}))},ae.extendComponent=ae.$extend=ae.module=function(e,t){if(t=t||{},e)if(fe(e)&&(e=((t=$e({},e)).name||t.componentName||"spaComponent"+ye()).trim().trimLeftStr("/").trimLeftStr("_"),t.componentName=e),he(e)&&e){if(e=e.trim().trimLeftStr("/").trimLeftStr("_")){if(0<=pt.indexOf(e))return void console.error("Invalid component name "+e+". Cannot extend Reserved components: "+pt.join());if(/[^a-z0-9\/]/gi.test(e)||!/^([a-z])/i.test(e))return void console.error('Invalid component name "'+e+'" to extend. Component name must contain only Alphanumeric (a-z A-Z 0-9) and must begin with alphabet (a-z A-Z).');/[^a-z0-9]/gi.test(e)&&(e=e.replace(/[^a-z0-9]/gi,"_")),window.app=window.app||{},window.app[e]=window.app[e]||new dt(e),t&&ue(t)&&(t=t.call(ae.components[e]||{})),t=fe(t)?t:{},ae.components[e]||(ae.components[e]={componentName:e,beforeRender:"app."+e+".onRender",renderCallback:"app."+e+".renderCallback"}),ae.components[e]&&(t.__prop__&&$e(ae.components[e],ke({},t.__prop__)),t.__prop__=ae.components[e]),ke(window.app[e],t),window["$$"+e]=window.app[e]}}else console.error("Invalid ComponentName:",e);else console.error("Missing ComponentName to extend.")},ae.extendComponents=ae.$$extend=function(){var t;arguments.length&&(1==(t=arguments).length&&(t=!pe(arguments[0])&&he(arguments[0])?arguments[0].split(","):arguments[0]),fe(t)?xe(Se(t),function(e){oe.info("Extend x-component:["+e+"]"),ae.extendComponent(e,t[e])}):t&&t.length&&xe(t,function(e){oe.info("Extend x-component:",e),ae.extendComponent(e.trim())}))},ae.$bind=function(e,t){e=String(e).replace(/[^a-z0-9]/gi,"_"),ve(t)&&(t=be(app,e+".$data",{})),ae.$(e).spaBindData(t)},ae.$data=function(e,t,a){var n,r,i,o,s;return e=((e=String(e).replace(/[^a-z0-9]/gi,"_"))||"").trim(),a=a||"update",e&&(app.hasOwnProperty(e)?(o=be(app,e+".$data"),t&&(fe(s=ue(t)?t.call(app[e],app[e].$data):t)&&(["update","merge"].__has(a,"i")?$e(app[e].$data,s):["*","reset","replace","overwrite"].__has(a,"i")&&(app[e].$data=s)),app[e].is$DataUpdated=ae.components[e].is$DataUpdated=!0,o=app[e].$data,ae.$(e).is(":visible")?(r=(n=ae.components[e]).dataCache,i=(n.on$dataChange||"").trim().toLowerCase(),r&&i&&["render","refresh","bind"].__has(i)&&(oe.log(e+"$"+i+" on $data update ..."),spa["$"+i](e)),ae.renderUtils.runCallbackFn("app."+e+".$dataChangeCallback",app[e].$data,app[e])):console.log("Component is not visible! Skipped $on$dataChange."),ae.$dataNotify(e))):oe.warn("SPA Component[",e,"] is not loaded.")),o},ae.$dataWatch=function(e,t,a){if((e=String(e).replace(/[^a-z0-9]/gi,"_"))&&t&&ue(a))return Qe.hasOwnProperty(e)||(Qe[e]={}),Qe[e].hasOwnProperty(t)?void console.warn("$dataWatch [",t,"] already exists in spa$[",e,"]"):(Qe[e][t]=a,!0)},ae.$dataUnwatch=function(e,t){var a;return(e=String(e).replace(/[^a-z0-9]/gi,"_"))&&t&&Qe.hasOwnProperty(e)&&("*"==t&&(delete Qe[e],a=!0),Qe[e].hasOwnProperty(t)&&(delete Qe[e][t],a=!0)),a||console.warn("$dataWatch [",t,"] does not exist in spa$[",e,"]"),a},ae.$dataNotify=function(t,e){var a;(t=String(t).replace(/[^a-z0-9]/gi,"_"))&&Qe.hasOwnProperty(t)&&(a=Se(Qe[t]),e&&(a=e.split(",")),xe(a,function(e){e=(e||"").trim(),Qe[t].hasOwnProperty(e)&&Qe[t][e].call(void 0,app[t].$data,app[t],e)}))},ae.$renderCount=function(e){return be(window,"app."+String(e).replace(/[^a-z0-9]/gi,"_")+".__renderCount__",0)},ae.removeComponent=function(e,n){var t,a,r;function i(e){var t,a=ve(e=String(e).replace(/[^a-z0-9]/gi,"_").trim());return(a=a||(me(t=ae.renderUtils.runCallbackFn("app."+e+".onRemove",n||"_script_",app[e]))||x(t)&&t))||oe.warn("Remove $"+e+" request denied onRemove()"),a}return e=(e||"").replace(/[^a-z0-9]/gi,"_").trim(),n=n&&(e==n?"_self_":n),e&&((a=$('[data-rendered-component="'+e+'"]')).length?(0==(r=a.find("[data-rendered-component]").map(function(){return $(this).attr("data-rendered-component")})).length||K(r,i))&&i(e)&&(a.html("").text("").val("").data("renderedComponent","").removeAttr("data-rendered-component"),t=!0):t=!0),x(t)&&t},ae.destroyComponent=function(e){var t,a;return(e=(e||"").replace(/[^a-z0-9]/gi,"_").trim())&&ae.removeComponent(e)&&(delete app[e],ae.components[e]&&((a=be(ae.components[e],"template",""))&&!a.beginsWithStr("#")&&(a="#__tmpl_"+(""+a).replace(/[^a-z0-9]/gi,"_")),$("script"+a).remove(),delete ae.components[e],delete ae.compiledTemplates4DataBind[e],delete ae.compiledTemplates[e],delete Qe[e],t=!0)),t},ae.showComponent=function(e,t){var a,n=(e||"").replace(/[^a-z0-9]/gi,"_").trim();n&&((a=$('[data-rendered-component="'+n+'"]')).length?a.show():ae.$render(e,t))},ae.hideComponent=function(e){(e=(e||"").replace(/[^a-z0-9]/gi,"_").trim())&&$('[data-rendered-component="'+e+'"]').hide()},ae.disableComponent=function(e){(e=(e||"").replace(/[^a-z0-9]/gi,"_").trim())&&$('[data-rendered-component="'+e+'"]').css("pointer-events","none").addClass("disabled").attr("disabled","disabled")},ae.enableComponent=function(e){(e=(e||"").replace(/[^a-z0-9]/gi,"_").trim())&&$('[data-rendered-component="'+e+'"]').css("pointer-events","auto").removeClass("disabled").removeAttr("disabled")},ae.removeComponents=ae.$remove=ae.$$remove=function(){ut.apply({action:"removeComponent"},arguments)},ae.destroyComponents=ae.$destroy=ae.$$destroy=function(){ut.apply({action:"destroyComponent"},arguments)},ae.showComponents=ae.$show=ae.$$show=function(){ut.apply({action:"showComponent"},arguments)},ae.hideComponents=ae.$hide=ae.$$hide=function(){ut.apply({action:"hideComponent"},arguments)},ae.enableComponents=ae.$enable=ae.$$enable=function(){ut.apply({action:"enableComponent"},arguments)},ae.disableComponents=ae.$disable=ae.$$disable=function(){ut.apply({action:"disableComponent"},arguments)},ae.refreshComponent=ae.$refresh=function(e,t){e&&fe(t=t||{})&&(t.hasOwnProperty("beforeRender")||(t.beforeRender=t.beforeRefresh||"app."+e.replace(/[^a-z0-9]/gi,"_")+".onRefresh"),t.hasOwnProperty("renderCallback")||(t.renderCallback=t.refreshCallback||"app."+e.replace(/[^a-z0-9]/gi,"_")+".refreshCallback"),t.isRefreshCall=!0,oe.info("Calling refreshComponent: "+e+" with below options"),oe.info(t),ae.$render(e,t))},ae.renderComponent=ae.$render=function(e,n){if(T){if("complete"!==E.readyState&&("loading"===E.readyState||E.documentElement.doScroll))return oe.info("DOM NOT Ready. will render component ["+e+"] on DOM Ready."),void E.addEventListener("DOMContentLoaded",function(){ae.renderComponent(e,n)});if(n=n||{},e){var r=e;fe(e)&&(n=$e({},e),e=n.name||n.componentName||"spaComponent"+ye(),n.componentName=e,r=e);n._reqFrTag_;if(he(e))if("$"==(e=e.trim())[0]||"#"!=e[0]){if(!(n&&fe(n)&&n.isRefreshCall)&&ae.$renderCount(r)&&be(window,"app."+r+".refreshCallback",""))return oe.info("Component ["+e+"] has been rendered already. Refreshing instead of re-render."),void ae.refreshComponent(r,n);if(oe.info("Called renderComponent: "+e+" with options",n),/\/$|\/\/|\.|\?|\#/.test(r)&&"$"!=e[0]){var t,a,i,o,s,l,c,d,p,u=r;return r[0]===ae.api.urlKeyIndicator&&(t=r.trimLeftStr(ae.api.urlKeyIndicator),u=ae.api.urls[t]||""),n.componentUrl=u,oe.info("Called to render ServerComponent: ["+r+"] with options",n),t&&!u&&console.warn("ComponentURL undefined: app.api.urls."+t),void(u&&(a=n.targetEl,i=ft(le(n.urlHeaders),n),o=ft(le(n.urlParams),n),s=ft(le(n.urlPayload),n),l=(n.urlMethod||"GET").toLowerCase(),c="false"!==String(n.urlCache||"false").toLowerCase(),d=ae.api.url(u,o),p=ft(n.urlError),oe.log("Loading ServerComponent ..."),ae.api[l](d,s,function(e){$(a).html(e),ae.renderComponentsInHtml(a)},function(e,t,a){this.onError&&ue(this.onError)?this.onError.call(this,e,t,a):(console.warn("Unable to load ServerComponent."),console.error(String(t).toUpperCase()+":"+a,e))},{ajaxOptions:{dataType:"html",headers:i,cache:c,onError:p}})))}var f=!gt(e)&&/[^a-z0-9]/gi.test(e);f&&(r=e.replace(/[\s\$]/g,"").replace(/[^a-z0-9]/gi,"_").trimLeftStr("_"));var h,m="_rtt_"+r;n=et(r,n);var g,v=f?r.replace(/[^a-z0-9]/gi,"/"):r,y=r;f&&(y=(g=r.split("_"))[g.length-1]);function b(){var e;oe.info("_renderComp: "+r+" with below options"),oe.info(n),ae.components[r].hasOwnProperty("template")||(ae.components[r].hasOwnProperty("templateStr")||ae.components[r].hasOwnProperty("templateString")?(h=ae.components[r].templateStr||ae.components[r].templateString||"",ae.updateTemplateScript(m,h),ae.components[r].template="#"+m):ae.hasPrimaryKeys(ae.components[r],"templateUrl")?((e=(ae.components[r].templateUrl||"").trim())&&/^(\.\/)/.test(e)&&(e=C+e.substring(2)),ae.components[r].template=e):ae.components[r].template=x),oe.info("render-options: xsr.components["+r+"]"),oe.info(ae.components[r]);var t,a=n&&n.saveOptions?ae.components[r]:ke({},ae.components[r]);n&&(n.hasOwnProperty("mountComponent")||delete a.mountComponent,ke(a,n),oe.info("Extended> render-options: xsr.components["+r+"]"),oe.info(a)),a.hasOwnProperty("style")&&he(a.style)&&(a.dataStyles={},a.dataStyles[r+"Style"]="."==a.style||"$"==a.style?S+".css":/^(\.\/)/.test(a.style)?C+a.style.substring(2):a.style,delete a.style,oe.info("Using component style for ["+r+"]"),oe.info(a)),a&&fe(a)&&a.dataCache&&(ve(t=be(app,r+".$data",{}))?(a.dataCache=!1,oe.log("dataCache:false; Using/Ajaxing new data ...")):(a.data=t,a.dataProcess=!1,oe.log("dataCache:true; Using $data and ignored data + dataProcess ..."))),ae.render(a)}var C=ae.defaults.components.rootPath+(ae.defaults.components.inFolder||f?v+"/":""),S=C+y,x=S+ae.defaults.components.templateExt,w=ae.defaults.components.scriptExt,O=n&&fe(n)&&n.hasOwnProperty("script")?n.script:w?S+w:"",k=300,_=function(){var e;O?oe.info("Loaded component ["+r+"] source from ["+O+"]"):oe.info("Skipped Loading component ["+r+"] source from script file."),oe.info("In Source> xsr.components["+r+"]"),oe.info(ae.components[r]),ae.components.hasOwnProperty(r)||((e=ae.componentsAsync[r])?k--?(oe.info("Awaiting async component to load."),setTimeout(_,15)):console.error("Failed to load async component:",r):(oe.info("xsr.components["+r+"] NOT DEFINED in ["+(O||"xsr.components")+"]. Creating *NEW*"),ve(n)&&(n={}),n.hasOwnProperty("componentName")||(n.componentName=r),ae.components[r]=n,oe.info("NEW> xsr.components["+r+"]"),oe.info(ae.components[r]))),e||b()};ae.components.hasOwnProperty(r)?(oe.info("Re-rending xsr.components["+r+"]"),oe.info(ae.components[r]),b()):O&&!gt(e)?(oe.info("Attempt to load component ["+e+"]'s properties from ["+O+"]"),Le(O,{spaComponent:v,dataType:"spaComponent",success:_,cache:ae.defaults.components.offline}).done(P).fail(function(){oe.info("Attempt to Load component ["+e+"]'s properties from ["+O+"] has FAILED. Not to worry. Continuing to render with default properties."),_()})):_()}else $(e).spaRender(n);else console.error("Invalid ComponentName:",e)}else console.error("Missing ComponentName to render.")}else $(function(){ae.renderComponent(e,n)})},ae.renderComponents=ae.$$render=function(){ht.apply({action:"renderComponent"},arguments)},ae.refreshComponents=ae.$$refresh=function(){ht.apply({action:"refreshComponent"},arguments)},ae.renderComponentsInHtml=function(e,l,t){e=e||"body",renderOptions="object"==typeof l?l:"",l="string"==typeof l?l.trim():"";var a,n,r,i,c,d,p,u,f,h,m,o=$(e);t||(i=(i=e)||"body",$(i).find("[for]:not(label):not([render-on])").each(function(e,t){yt(t)}),$(i).find('form[action^="$"]:not([for]):not([render-on])').each(function(e,t){ie(t,"for",ie(t,"action").substring(1)),t.removeAttribute("action"),yt(t)}),a=mt("spa-template,x-template"),$(e).find(a).each(function(){ie(this,"data-x-component",ie(this,"src")),ie(this,"data-skip-data-bind","true"),ie(this,"data-template-script","true"),this.style.display="none"}),n=mt("spa-html,x-html"),$(e).find(n).each(function(){var e,t=ie(this,"src");"$"!==t[0]&&/[^a-z0-9]/gi.test(t)||ae.components[t.replace(/[^a-z0-9]/gi,"_")]||(e={templateScript:!0},!(this.hasAttribute("data")||this.hasAttribute("data-url"))?e.skipDataBind=!0:this.hasAttribute("data-url")||(e.data=this.hasAttribute("data")?le(ie(this,"data")):{}),ae.$(t,e)),ie(this,"data-x-component",t)}),r=mt("spa-component,x-component"),$(e).find(r).each(function(){ie(this,"data-x-component",ie(this,"src"))}),o=o.find("[data-x-component],[data-spa-component]").filter(":not([render-after])")),o.length&&o.each(function(e,t){c=$(t),m=c.data();var a,n,r,i,o,s={url:"dataUrl",urlParams:"dataUrlParams",urlMethod:"dataUrlMethod",urlError:"dataUrlErrorHandle",urlErrorHandle:"dataUrlErrorHandle",urlHeaders:"dataUrlHeaders",params:"dataParams",type:"dataType",model:"dataModel",cache:"dataCache",validate:"dataValidate",process:"dataProcess"};Object.keys(m).forEach(function(e){s.hasOwnProperty(e)&&(m[s[e]]=/params|headers/gi.test(e)?le(m[e]):m[e],delete m[e])}),d=(c.attr("data-x-component")||c.attr("data-spa-component")||"").split("|"),p=d[0].trim(),(u=(d[1]||"").trim())&&(/\:\s*\$data/.test(u)&&(u=u.replace(/\:\s*\$data/g,":app."+l+".$data")),u=le(u)),p&&(!ae.components[p]&&(t.hasAttribute("no-script")||t.hasAttribute("noscript")||t.hasAttribute("nojs")||t.hasAttribute("no-js"))&&ae.$(p,{}),t.id||("$"==(a=String(p).trim())[0]&&(a=a.replace(/[^a-z0-9]/gi,"_")),a=a.replace(/[^a-z0-9_]/gi,""),h="spaCompContainer_"+a+"_"+($("body").find("[rel=spaComponentContainer_"+a+"]").length+1),t.id=h,ie(t,"rel","spaComponentContainer_"+a)),n=c.attr("data-x-component-options")||c.attr("data-x-$options")||c.attr("data-spa-component-options")||c.attr("data-spa-$options")||c.attr("spa-$options")||"{}",f=$e({target:"#"+t.id,targetEl:t,spaComponent:p.trim(),_reqFrTag_:1},u,m,le(n),renderOptions),(t.hasAttribute("skipDataBind")||t.hasAttribute("skip-data-bind"))&&(f.skipDataBind=!0),f.hasOwnProperty("data")&&he(f.data)&&(r=f.data.trim(),/^\$data/.test(r)&&(r="app."+l+"."+r),f.data=$e({},be(window,r,{}))),(i=(c.attr("data-x-component-$data")||c.attr("data-x-$data")||c.attr("data-spa-component-$data")||c.attr("data-spa-$data")||c.attr("spa-$data")||"").trim())&&(/\:\s*\$data/.test(i)&&(i=i.replace(/\:\s*\$data/g,":app."+l+".$data")),ve(f.data)?f.data=le(i):$e(f.data,le(i))),!ve(f.data)&&f.data.hasOwnProperty("$data")&&(o=$e({},f.data.$data),delete f.data.$data,$e(f.data,o)),f.hasOwnProperty("data")&&(f.data_=$e({},f.data),delete f.data),oe.log("inner-component",p,"options:",f),ae.renderComponent(p,f))})},ae.renderUtils={array2ObjWithKeyPrefix:function(e,t,a){var n={};return xe(e,function(e){(e=(""+e).trimStr())&&(n[t+(e.equals(".")?a:e).replace(/[^a-z0-9]/gi,"_")]=""+e)}),oe.log([t,n]),n},getFn:function(e){var t=e;return e&&he(e)&&(t=be(window,e)),t&&ue(t)?t:void 0},runCallbackFn:function(e,t,a){if(e){var n,r,i=e,o=a;if(he(i)&&(o||(e.match("]$")?n=e.substring(0,e.lastIndexOf("[")):0<e.indexOf(".")&&(n=e.substring(0,e.lastIndexOf("."))),o=n?be(window,n):window),0<(r=i.indexOf("("))&&(i=i.substring(0,r)),i=be(window,i)),i){if(ue(i))return oe.info("calling callback: ","Fn:"+(e.name||""),e),pe(t)&&"(...)"==t[0]?(t.shift(),i.apply(o,t)):i.call(o,t);oe.error("CallbackFunction <"+e+" = "+i+"> is NOT a valid FUNCTION.")}else oe.info("CallbackFunction <"+e+"> is NOT defined.")}},registerComponentEvents:function(r){var e;r&&app[r]&&app[r].hasOwnProperty("events")&&xe(Se(app[r].events),function(n){app[r].events[n].hasOwnProperty("target")&&!ve(app[r].events[n].target)&&(e=app[r].events[n].target,ae.$(r+" "+e).filter(":not([spa-events-"+n+'="'+r+'"])').attr("spa-events-"+n,r).each(function(e,a){xe(Se(app[r].events[n]),function(t){0==t.indexOf("on")&&xe(t.split("_"),function(e){oe.log("registering component ["+r+"] event: "+n+"-"+e),$(a).on(e.trimLeftStr("on").toLowerCase(),app[r].events[n][t])})})}))})}},ae.render=function(V,H){if(oe.log("xsr.render",V,H),arguments.length){var e,a;if(1===arguments.length&&"object"==typeof V)return(H=$e({},V)).hasOwnProperty("target")?(V=H.target,delete H.target):(e=$('[data-rendered-component="'+H.componentName+'"]').attr("id"),(V=(e?"#":"")+e)||(console.warn("Render target is missing."),V="dynRender_"+ye()+"_"+ae.rand(1e3,9999))),void ae.render(V,H);H&&(a=H,xe({template:"dataTemplate",templates:"dataTemplates",templateCache:"dataTemplatesCache",templatesCache:"dataTemplatesCache",html:"dataTemplate",htmls:"dataTemplates",htmlCache:"dataTemplatesCache",htmlsCache:"dataTemplatesCache",script:"dataScripts",scripts:"dataScripts",scriptCache:"dataScriptsCache",scriptsCache:"dataScriptsCache",style:"dataStyles",styles:"dataStyles",styleCache:"dataStylesCache",stylesCache:"dataStylesCache",renderType:"dataRenderType",beforeRender:"dataBeforeRender",dataRenderCallBack:"dataRenderCallback",renderCallback:"dataRenderCallback",renderCallBack:"dataRenderCallback",callback:"dataRenderCallback",callBack:"dataRenderCallback",onRemove:"dataRemoveCallback",dataRenderMode:"dataRenderMode",renderMode:"dataRenderMode",renderId:"dataRenderId"},function(e,t){a.hasOwnProperty(t)&&(a[e]=H[t],delete a[t])}));var K={id:"",view:{},model:{},cron:"",elDataAttr:{},target:V,iOptions:H},z=[],q=!1,t=w(V);t&&(K.elDataAttr=$(V).data());var M=1<arguments.length,W=M&&H.hasOwnProperty("data"),J=H&&H.componentName?H.componentName:"",X={data:{},dataPreRequest:ae.defaults.components.dataPreRequest,dataUrl:"",dataUrlParams:{},dataUrlMethod:"GET",dataUrlErrorHandle:"",dataUrlHeaders:{},dataParams:{},dataType:"",dataExtra:{},dataXtra:{},data_:{},dataDefaults:{},dataModel:"",dataValidate:!1,dataProcess:"",dataUrlCache:!1,dataCache:!1,extend$data:ae.defaults.components.extend$data,dataCollection:{},dataTemplates:{},dataTemplate:"",dataTemplatesCache:!0,templateScript:!1,templateEngine:"",dataScripts:{},dataScriptsCache:!0,dataStyles:{},dataStylesCache:!0,dataBeforeRender:"",dataRenderCallback:"",dataRemoveCallback:"",dataRenderMode:"",skipDataBind:!1,render:"",dataRenderId:""};if(t||(w("#spaRunTimeHtmlContainer")||$("body").append("<div id='spaRunTimeHtmlContainer' style='display:none;'></div>"),$("#spaRunTimeHtmlContainer").append("<div id='"+V.replace(/\#/gi,"")+"'></div>")),M){var n={dataTemplatesCache:ae.defaults.components.templateCache},r=(H=$e({},n,H)).hasOwnProperty("saveOptions")&&H.saveOptions;for(var i in H)X[i]=H[i],r&&"data"!==i&&"saveOptions"!==i&&$(V).data(""+(""+((""+i)[4]||"")).toLowerCase()+i.slice(5),ae.toStr(H[i]))}oe.log(J+".$"+(X.isRefreshCall?"refresh":"render")+" with options:",X,"$data",be(app,J+".$data"));var G=$(V),o=G.attr("data-rendered-component")||"",s=o==J;if(na(G)){oe.log("Component container [",V,"] blocks navigation.");var l=G.hasClass(Wt)?G:G.find(Jt);if(1<l.length&&(l=$(l[0])),l.length){var c,d,p=(l.attr(Qt)||"").trim();if(p){if("#"==p[0]||">"==p[0]){var u=">"==p[0]?p.substring(1).trim():p,f=l.find(u).filter(":not(.disabled):not(:disabled)");if(f.length)return void f.trigger("click")}else if((c=be(window,p.split("(")[0].split(";")[0]))&&ue(c)&&(d=c.call(app[o],app[o],app[J])),c&&(!x(d)||!d))return}else if((c=be(app,o+".onNavBlock"))&&ue(c)&&(d=c.call(app[o],app[o],app[J])),c&&(!x(d)||!d))return}oe.log("Render continues.")}s&&(oe.log("$refresh - Auto-Detected",J,X),"auto".equalsIgnoreCase(""+X.render)&&(oe.log("Finding for refresh events."),S("dataBeforeRender",".onRender","onRefresh"),S("dataRenderCallback",".renderCallback","refreshCallback")));function Z(e){return(""+G.data(e)).replace(/undefined/,"")}function Y(e,t){return ve(X[e])?Z(t):X[e]}var h=Y("dataRenderId","renderId");K._renderId=h.ifBlankStr("spaRender"+ye()+ae.rand(1e3,9999));var Q=Y("dataRenderMode","renderMode")||"replace";oe.log("Render Mode: <"+Q+">");var m,ee="x-spa-template",te=(X.templateEngine||ae.defaults.components.templateEngine||"handlebars").toLowerCase();oe.group("spaLoadingViewScripts"),M&&H.hasOwnProperty("dataScriptsCache")?oe.info("Override [data-scripts-cache] with user option [dataScriptsCache]: "+X.dataScriptsCache):ve(m=Z("scriptsCache"))||(X.dataScriptsCache=m.toBoolean(),oe.info("Override [data-scripts-cache] with [data-scripts-cache] option in tag-attribute: "+X.dataScriptsCache));var g=Z("scripts");g&&ve((g||"").replace(/[^:'\"]/g,""))&&(g="'"+g.split(",").join("','")+"'");var v,y,b,C=le(g||"{}");return!fe(X.dataScripts)&&he(X.dataScripts)&&(ve(((g=(X.dataScripts||"").trimStr())||"").replace(/[^:'\"]/g,""))&&(g="'"+g.split(",").join("','")+"'"),X.dataScripts=le(g)),ge(X.dataScripts)||(C=X.dataScripts),pe(C)&&Oe(C,function(e){return!e}),oe.info(C),g=[],C&&!ge(C)?(pe(C)&&(oe.info("Convert array of script(s) without scriptID to object with scriptID(s)."),y=ae.renderUtils.array2ObjWithKeyPrefix(C,"__scripts_",V),oe.info("Scripts(s) with scriptID(s)."),oe.log(y),C=_isEmpty(y)?{}:y),oe.info("External scripts to be loaded [cache:"+X.dataScriptsCache+"] along with view container ["+V+"] => "+JSON.stringify(C)),v=Se(C)):oe.info("No scripts defined [data-scripts] in view container ["+V+"] to load."),oe.groupEnd("spaLoadingViewScripts"),v&&(g=we(v,function(e){return!(b=Ee(C[e],J)).endsWithStrIgnoreCase(".js")&&b.indexOf("?")<0&&(b+=ae.defaults.components.scriptExt),(X.dataScriptsCache?"":"~")+b})),oe.log("Loading component [",J,"] scripts:",g),ae.loadScriptsSync(g,function(){oe.info("External Scripts Loaded."),!re&&Se(app.api).length&&$a();var e=X?X.dataPreRequest:"";if(he(e)&&(e=ae.renderUtils.getFn(e)),ue(e))try{var t=e.call(app[J]);t&&fe(t)&&Se(t).forEach(function(e){0==e.indexOf("data")&&(X[e]=t[e])})}catch(e){console.error("dataPreRequest-Error in app."+J,e)}oe.group("spaDataModel");var a,n,r,i=Y("dataModel","model"),o=Y("dataUrl","url"),s=W||o.beginsWithStrIgnoreCase("local:"),l=o.beginsWithStrIgnoreCase("local:")?o.replace(/local:/gi,""):"data",p=ue(n=be(app,"api.ajaxOptions.defaultPayload",{}))?n():fe(n)?$e({},n):n,u=X&&X.hasOwnProperty("stringifyPayload")?X.stringifyPayload:be(app,"api.ajaxOptions.stringifyPayload"),f=(i=i.ifBlankStr(l)).replace(/\./g,"_"),h={};if(W)h[f]=ue(X.data)?X.data():X.data,oe.info("Loaded data model ["+i+"] from argument");else if(M&&H.hasOwnProperty("dataCache")?oe.info("Override [data-cache] with user option [dataCache]: "+X.dataCache):ve(r=Z("cache"))||(X.dataCache=r.toBoolean(),oe.info("Override [data-cache] with [data-cache] option in tag-attribute: "+X.dataCache)),ve(o)){h[f]={};var m=(m=Z("collection"))&&le(m);ve(X.dataCollection)||(m=X.dataCollection),pe(m)&&(m={urls:m});var g,v,c=m.urls;ve(c)?(oe.info("Model Data ["+i+"] or [data-url] or [data-collection] NOT found! Check the arguments or html markup. Rendering with options."),h[f]=$e({},X.dataDefaults,X.data_,X.dataExtra,X.dataXtra)):pe(c)?(oe.info("Processing data-URLs"),g=0,v=m.nameprefix||"data",xe(c,function(l){var e,t=v+g,c=Ce(l,"name")?(""+l.name).replace(/[^a-zA-Z0-9]/gi,""):Ce(l,"target")?""+l.target:t,d=Ce(l,"url")?l.url:Ce(l,"path")?l.path:"";c.containsStr(".")&&(c=_e(c.split("."))),c=c.ifBlankStr(t),oe.info("processing data-api for: "+c),oe.log(l),d?(d=ae.api.url(d,Ce(l,"urlParams")?l.urlParams:{}),ve(e=Ce(l,"headers")?l.headers:X.dataUrlHeaders)&&(e=be(window,"app.api.ajaxOptions.headers",{})),a=Ce(l,"params")?l.params:Ce(l,"data")?l.data:{},Ce(l,"defaultPayload")||ve(p)||(a=$e({},p,!ve(a)&&fe(a)?a:{})),!ve(a)&&u&&(a=JSON.stringify(a)),z.push(Ua({url:d,method:(""+(l.method||"GET")).toUpperCase(),headers:ue(e)?e():e,data:a,cache:Ce(l,"cache")?l.cache:X.dataCache,dataType:Ce(l,"type")?l.type:X.dataType||be(window,"app.api.ajaxOptions.dataType","text"),success:function(e,t,a){var n,r=Ce(l,"target")?""+l.target:"",i=he(e)?le(""+e,"data"):e;if(0<r.indexOf("."))n=ae.hasKey(i,r)?be(i,r):i;else try{n=i.hasOwnProperty(r)?i[r]:i}catch(e){console.warn("Error in Data Model ["+r+"] in URL ["+d+"].\n"+e.stack)}h[f][c]?(h[f][c]=[h[f][c]],h[f][c].push(n)):h[f][c]=n,oe.info("Loaded data model ["+c+"] from ["+d+"]");var o,s=l.success||l.onsuccess||l.onSuccess;(s=s||(m.success||m.onsuccess||m.onSuccess))&&(ue(s)?s.call(this,i,l,t,a):he(s)&&(ue(o=be(window,s))?o.call(this,i,l,t,a):oe.log("Unknown ajax success handle: "+s)))},error:function(e,t,a){oe.warn("Error processing data-api ["+d+"]");var n,r,i=l.error||l.onerror||l.onError;i||(i=m.error||m.onerror||m.onError,n=X.dataUrlErrorHandle||X.onDataUrlError||X.onError,!i&&n&&(i=n)),i?ue(i)?i.call(this,e,t,a):he(i)&&(ue(r=be(window,i))?r.call(this,oResult,l):oe.log("Unknown ajax error handle: "+i)):ue(app.api.onError)?app.api.onError.call(this,e,t,a):ae.api.onReqError.call(this,e,t,a)}}))):oe.error("data-api-url not found. Please check the arguments or html markup. Skipped this data-api request"),g++})):oe.warn("Invalid [data-urls].Check the arguments or html markup. Rendering with empty data {}.")}else if(o.beginsWithStrIgnoreCase("local:")){var d=o.replace(/local:/gi,""),y={};if(se(d)){try{y=Function('"use strict";return ('+d+")")()}catch(e){console.error("Error in xsr.$('"+X.componentName+"'): Invalid Data Model >> \"local:"+d+'"\n>> '+e.stack.substring(0,e.stack.indexOf("\n")))}oe.info("Using LOCAL Data Model: "+d)}if(!s&&0<i.indexOf("."))h[f]=ae.hasKey(y,i)?be(y,i):y;else try{h[f]=y.hasOwnProperty(i)?y[i]:y}catch(e){console.warn("Error in Data Model ["+i+"] in Local Object ["+d+"].\n"+e.stack)}}else{o=ae.api.url(o,ve(X.dataUrlParams)?{}:X.dataUrlParams),oe.info("Request Data ["+i+"] [cache:"+(X.dataUrlCache||X.dataCache)+"] from URL =>"+o);var b=X.dataUrlHeaders;ve(b)&&(b=be(window,"app.api.ajaxOptions.headers",{})),a=X.dataParams,X.hasOwnProperty("defaultPayload")||ve(p)||(a=$e({},p,!ve(a)&&fe(a)?a:{})),!ve(a)&&u&&(a=JSON.stringify(a));var C={url:o,method:(""+(Y("dataUrlMethod","urlMethod")||"GET")).toUpperCase(),headers:ue(b)?b():b,data:a,cache:X.dataUrlCache||X.dataCache,dataType:X.dataType||be(window,"app.api.ajaxOptions.dataType","text"),success:function(e){oe.log("API response:",e);var t=he(e)?le(""+e,"data"):e,a=Y("dataValidate","validate");if(0<i.indexOf("."))h[f]=ae.hasKey(t,i)?be(t,i):t;else try{"data"!=i||t.hasOwnProperty(i)||(f=i="Data"),h[f]=!a&&t.hasOwnProperty(i)?t[i]:t}catch(e){console.error("Error in Data Model ["+i+"] in URL ["+o+"].\n"+e.stack)}oe.info("Loaded data model ["+i+"] from ["+o+"]")},error:function(e,t,a){var n,r=Y("dataUrlErrorHandle","urlErrorHandle")||X.onDataUrlError||X.onError;r?ue(n=he(r)?be(window,r):r)?n.call(this,e,t,a):oe.log("Unknown ajax error handle: "+r):ue(app.api.onError)?app.api.onError.call(this,e,t,a):ae.api.onReqError.call(this,e,t,a)}};z.push(Ua(C))}oe.info("End of Data Processing -",J),oe.log({o:h}),oe.groupEnd("spaDataModel");var S=Z("template")||Z("html"),x=Z("templates")||Z("htmls");x&&ve((x||"").replace(/[^:'\"]/g,""))&&(x="'"+x.split(",").join("','")+"'");var w,O,k,T,E,P,A,R,B,L,U,I,j,N,D,F=le(x||"{}");!fe(X.dataTemplates)&&he(X.dataTemplates)&&(ve(((x=(X.dataTemplates||"").trimStr())||"").replace(/[^:'\"]/g,""))&&(x="'"+x.split(",").join("','")+"'"),X.dataTemplates=le(x)),ge(X.dataTemplates)||(F=X.dataTemplates,x=""+JSON.stringify(F)),(_isEmpty(le((x||"").trimStr()))||pe(F)&&1==F.length&&ve(F[0]))&&(F={},x=""),oe.info("Templates:"),oe.info(F),pe(F)&&!_isEmpty(F)&&(oe.info("Array of template(s) without templateID(s)."),w=ae.renderUtils.array2ObjWithKeyPrefix(F,"__tmpl_",V),oe.info("Template(s) with template ID(s)."),oe.log(w),x=_isEmpty(w)?(F={},""):(F=w,""+JSON.stringify(F))),F&&!ge(F)||(F={},T=k="",ve(O=X.dataTemplate)&&(ve(S)||(oe.info("Template to load from location <"+S+">"),O=S)),O=(O||"").trimStr(),oe.info("Primary Template: <"+O+">"),ve(O)||O.equalsIgnoreCase("inline")||O.equals(".")?(oe.info("Using target container (inline) content as template."),k="_tmplInline_"+V.trimStr("#")):O.beginsWithStr("#")?(oe.info("Using page container <"+O+"> content as template."),k=O.trimStr("#")):(oe.info("External path <"+O+"> content as template."),k="__tmpl_"+(""+O).replace(/[^a-z0-9]/gi,"_"),T=O),F[k]=T.replace(/['\"]/g,""),oe.info(F)),oe.group("spaView"),F&&!ge(F)?(oe.info("Templates of ["+ee+"] to be used in view container ["+V+"] => "+JSON.stringify(F)),E=Se(F),oe.group("spaLoadingTemplates"),oe.group("spaLoadingTemplatesCache"),M&&H.hasOwnProperty("dataTemplatesCache")?oe.info("Override [data-templates-cache] with user option [dataTemplatesCache]: "+X.dataTemplatesCache):ve(P=Z("templatesCache")||Z("templateCache")||Z("htmlsCache")||Z("htmlCache"))||(X.dataTemplatesCache=P.toBoolean(),oe.info("Override [data-templates-cache] with [data-templates-cache] option in tag-attribute: "+X.dataTemplatesCache)),oe.groupEnd("spaLoadingTemplatesCache"),oe.info("Load Templates"),oe.info(F),(A=X.templateUrlPayload)&&(ue(A)||he(A)&&A.indexOf("=")<0)&&(A=ft(A,X)),R={method:X.templateUrlMethod,params:ft(X.templateUrlParams,X),payload:A,headers:ft(X.templateUrlHeaders,X),onError:ft(X.onTemplateUrlError||X.onError)},xe(E,function(e,t){oe.info([t,e,F[e],ee,V,X]),z=ae.loadTemplate(e,F[e],ee,V,z,!X.dataTemplatesCache,R)}),B="#"+E[0].trimStr("#"),oe.info("External Data/Templates Loading Status: ",z),oe.groupEnd("spaLoadingTemplates"),oe.info("Render TemplateID: "+B),oe.group("spaLoadingViewStyles"),M&&H.hasOwnProperty("dataStylesCache")?oe.info("Override [data-styles-cache] with user option [dataStylesCache]: "+X.dataStylesCache):ve(L=Z("stylesCache"))||(X.dataStylesCache=L.toBoolean(),oe.info("Override [data-styles-cache] with [data-styles-cache] option in tag-attribute: "+X.dataStylesCache)),(U=Z("styles"))&&ve((U||"").replace(/[^:'\"]/g,""))&&(U="'"+U.split(",").join("','")+"'"),I=le(U||"{}"),ge(X.dataStyles)||(I=X.dataStyles),pe(I)&&Oe(I,function(e){return!e}),I&&!ge(I)?(pe(I)&&(oe.info("Convert array of style(s) without styleID to object with styleID(s)."),j=ae.renderUtils.array2ObjWithKeyPrefix(I,"__styles_",V),oe.info("Style(s) with styleID(s)."),oe.log(j),I=_isEmpty(j)?{}:j),oe.info("External styles to be loaded [cache:"+X.dataStylesCache+"] along with view container ["+V+"] => "+JSON.stringify(I)),N=Se(I),oe.group("spaLoadingStyles"),xe(N,function(e){D=Ee(I[e],J),z=ae.loadStyle(e,D,X.dataStylesCache,z)}),oe.info("External Styles Loading Status: "+JSON.stringify(z)),oe.groupEnd("spaLoadingStyles")):oe.info("No styles defined [data-styles] in view container ["+V+"] to load."),oe.groupEnd("spaLoadingViewStyles"),Aa.apply($,z).then(function(){oe.group("spaRender["+te+"] - xsr.renderHistory["+K._renderId+"]"),oe.info("Rendering "+V+" using master template: "+B);var e,t,a,n=Array.isArray(this)?this[0]:this;try{var F,r,z=!1,i=Y("dataValidate","validate"),o=!i;o&&ue(app.api.isCallSuccess)?o=app.api.isCallSuccess.call(n,h[f],n):o||(oe.info("Validating Data"),(r=i)&&he(r)&&(r=be(window,r)),o=r&&ue(r)?r.call(h[f],h[f],n):ue(app.api.isCallSuccess)?app.api.isCallSuccess.call(n,h[f],n):ae.api.isCallSuccess.call(n,h[f],n));var s,l=h[f],M=h[f];!i||(s=Y("dataModel","model"))&&(M=h[f]=ae.hasKey(M,s)?be(M,s):M),oe.log(J,"Template Data from API:",M),o?Aa.apply($,((a=Y("dataPreProcessAsync","preProcessAsync"))&&he(a)&&(a=be(window,a)),K.modelOriginal=Te(M,!0),K.model=M,a&&ue(a)&&(z=!0,e=ke({},app[J]||{},H||{}),t=a.call(e,M),(z=!me(t))||(t=[]),z&&(F=!pe(t)||pe(t)&&1==t.length,pe(t)||(t=[t]))),t)).done(function(){var a=ne.slice.call(arguments);z&&(oe.log(J,".dataPreProcessAsync() =>",a.__now()),F&&1<a.length&&"success"==a[1]?(a[0]=le(a[0]),a.splice(1)):xe(a,function(e,t){e&&pe(e)&&1<e.length&&"success"==e[1]&&(a[t]=le(e[0]))}),oe.log(a.__now()));var e,t,n,r=Y("dataProcess","process");r&&he(r)&&(r=be(window,r)),K.modelOriginal=Te(M,!0),K.model=M,r&&ue(r)?(t=ke({},app[J]||{},H||{}),a.unshift(M),e=r.apply(t,a)):z&&(oe.warn(J,".dataPreProcessAsync without dataProcess. Merging responses."),a.unshift(M),$e.apply(_,a)),K.model=me(e)?M:e,"object"!=typeof K.model&&(K.model=K.modelOriginal),oe.log(J,"Template Data initial:",K.model),J&&(fe(app)&&app.hasOwnProperty(J)&&((n=$e({},fe(K.model)?K.model:{_noname:K.model})).hasOwnProperty("spaComponent")?app[J].$data={}:app[J].$data=X.extend$data?$e({},X.dataDefaults,X.data_,X.dataExtra,X.dataXtra,X.dataParams,n):{},app[J].__global__=window||{}),K.model._this=$e({},be(window,"app."+J,{})),K.model._this_=$e({},ae.components[J]||{},H)),K.model._global_=window||{};var i,o=K.model;oe.log(J,"Template Data Final:",K.model);var s=($(B).html()||"").replace(/_LINKTAGINTEMPLATE_/g,"link"),l=X.templateScript||ae.defaults.components.templateScript,c=(s=l?s.replace(/_BlockedScript_ src-ref="([^"])*"/g,"script").replace(/_BlockedScript_/g,"script"):s.replace(/<\/_BlockedScript_>/g,"&lt;/_BlockedScript_&gt;")).match(/({\s*\@\$(.*?)\s*})/g);!X.skipDataBind&&c&&xe(c,function(e){s=s.replace(new RegExp(e.replace(/\$/,"\\$"),"g"),e.replace(/{\s*\$this|{\s*\@\$/g,"_global_.app.").replace(/}/,".").replace(/\s/g,"").replace(/\.\./,"."+(J||"")+"."))});var d,p,u=s.match(/({\s*\$(.*?)\s*})/g);if(!X.skipDataBind&&u&&xe(u,function(e){s=s.replace(new RegExp(e.replace(/\$/,"\\$"),"g"),e.replace(/{\s*\$this|{\s*\$/g,"app.").replace(/}/,".").replace(/\s/g,"").replace(/\.\./,"."+(J||"")+"."))}),i=s,oe.groupCollapsed("Template Source ..."),oe.log(s),oe.groupEnd("Template Source ..."),oe.log("DATA for Template:",o),!ve(o))if(X.skipDataBind)oe.log("Skipped Data Binding.");else if(X.dataTemplatesCache||(delete ae.compiledTemplates4DataBind[J],delete ae.compiledTemplates[J]),ae.compiledTemplates4DataBind.hasOwnProperty(J)||/ data-bind\s*=/i.test(s)&&(s=s.replace(/<img /gi,"<IMG-X-TMP ").replace(/<iframe /gi,"<IFRAME-X-TMP ").replace(/<\/iframe/gi,"</IFRAME-X-TMP").replace(/{{/g,">\x3c!--_XHBTINSPA_{{").replace(/}}/g,"}} _XHBTINSPA_--\x3e"),oe.log("TemplateBeforeBind",s),p=fe(o)?$e({},X.dataDefaults,X.data_,X.dataExtra,X.dataXtra,X.dataParams,o):o,oe.log("SPA built-in binding ... ...",p),s=Ye(s=ae.bindData(s,p,"$"+J)),oe.log("TemplateAfterBind",s),ae.compiledTemplates4DataBind.hasOwnProperty(J)||(ae.compiledTemplates4DataBind[J]={}),d=!0),0<=te.indexOf("handlebar")||0<=te.indexOf("{"))if("undefined"!=typeof Handlebars&&Handlebars){oe.groupCollapsed("Data bind using handlebars on Template ..."),oe.log(s),oe.groupEnd("Data bind using handlebars on Template ...");try{var f=ae.compiledTemplates[J]||Handlebars.compile(s),h=fe(o)?$e({},K,X.dataDefaults,X.data_,X.dataExtra,X.dataXtra,X.dataParams,o):o,m=h;ae.compiledTemplates.hasOwnProperty(J)||(ae.compiledTemplates[J]=f),i=f(h),oe.log(i)}catch(e){console.error("Error in Template",e)}}else oe.error("handlebars.js is not loaded.");oe.groupCollapsed("Compiled Template ..."),oe.log(i),oe.groupEnd("Compiled Template ..."),q=!1,K.view=i.replace(/\_\{/g,"{{").replace(/\}\_/g,"}}");var g=J?$e({},app[J]||{},{__prop__:$e({},H||{})}):{};g.__prop__&&g.__prop__.data&&(delete g.__prop__.data._global_,delete g.__prop__.data._this_,delete g.__prop__.data._this),K.model&&(delete K.model._global_,delete K.model._this_,delete K.model._this),ae.renderUtils.runCallbackFn(ae.defaults.components.render,void 0,g);var v,y,b,C,S,x,w,O=Y("dataBeforeRender","beforeRender");if(O){var k,T={template:s,data:K.model,view:K.view};if(!me(k=ae.renderUtils.runCallbackFn(O,T,g)))switch(ce(k)){case"string":K.view=k;break;case"boolean":v=!k}}if(y=K.view.beginsWithStr("\x3c!----\x3e"),v?(K={},oe.warn("Render aborted by "+O)):y||(b=G.attr("data-rendered-component"))&&!ae.removeComponent(b,J)&&(v=!0,K={},oe.warn("Render $"+J+" aborted by $"+b+".onRemove()")),!v){if(y)oe.log("Rendering component [",J,"] view aborted.");else{var E=Y("dataRenderType","renderType");switch(oe.log("Injecting component in DOM (",V,")."+(E||"html")),E){case"value":$(V).val(K.view);break;case"text":$(V).text(K.view);break;default:switch(q=!0){case Q.equalsIgnoreCase("append"):$(V).append(K.view);break;case Q.equalsIgnoreCase("prepend"):$(V).prepend(K.view);break;default:$(V).html(K.view)}}}$(V).attr("data-rendered-component",J).data("renderedComponent",J),w=J,w=String(w).replace(/[^a-z0-9]/gi,"_"),app[w]&&(app[w].__renderCount__=ae.toInt(ae.$renderCount(w))+1),oe.info("Render: SUCCESS");var P,A,R,L,U,I=Se(ae.renderHistory),j=I.length;if(j>ae.renderHistoryMax&&xe(I.splice(0,j-ae.renderHistoryMax),function(e,t){delete ae.renderHistory[t]}),K.cron=""+ye(),0<ae.renderHistoryMax&&(ae.renderHistory[K._renderId]=K),q&&!y)if(ae.renderUtils.registerComponentEvents(J),$(V).find(".lang-icon,.lang-text,[data-i18n-lang]").length&&ae.i18n.displayLang(),Oa(V),d||ae.bindData(V,m,"",!0),ae.bindElements(V),$(V).find('[data-i18n]:not([data-i18n=""])').length&&(!ve(ae.defaults.components.lang)||!ve(X.lang)||ae.defaults.lang.url&&0<=ae.defaults.lang.url.indexOf("$")?(P=ae.defaults.components.lang,A=$e({target:V},fe(P)&&!ve(P)?ae.defaults.components.lang:{},fe(X.lang)&&!ve(X.lang)?X.lang:{}),R={componentName:J,componentPath:J.replace(/_/g,"/"),componentData:m,componentLang:A},de(P,"string|function")&&fe(L=ae.renderUtils.runCallbackFn(P,R,R))&&(A=$e(A,L),R.lang=A),de(X.lang,"string|function")&&fe(L=ae.renderUtils.runCallbackFn(X.lang,R,R))&&(A=$e(A,L)),U={$name:J,$path:J.replace(/_/g,"/")},A.urlParams&&fe(A.urlParams)&&(U=$e(U,A.urlParams)),A.urlParams=U,ae.i18n.updateLang(A)):ae.i18n.apply(V)),function(e){var t=(ae.sesStore.get("_spaReloadUrl")||"").trim();if(e&&0!=t.indexOf(e))return;if(t)return ae.sesStore.remove("_spaReloadUrl"),t=t.replace(/.*#/gi,""),ae.route(t,!0),!0}(J))return K;oe.log(K);var N=Z("renderCallback");X.dataRenderCallback&&(N=X.dataRenderCallback);var D=he(N)&&N.equalsIgnoreCase("off");oe.info("Processing callback: "+N),D||ae.renderUtils.runCallbackFn(N,K),ae.renderUtils.runCallbackFn(ae.defaults.components.callback,K,g),C=J,(x=$("body").find('[render-after*="'+C+'"]')).length&&(S="",x.each(function(e,t){(S=(" "+ie(t,"render-after").replace(/,/g," ").replace(/\s+/g," ")+" ").replace(" "+C+" ","").trim())?ie(t,"render-after",S):(t.removeAttribute("render-after"),ae.renderComponentsInHtml(t,"",!0))})),q&&!y&&($(V).find("[rel='spaRender'],[data-render],[data-sparender],[data-spa-render]").spaRender(),ae.renderComponentsInHtml(V,J))}}):ue(app.api.onResError)?app.api.onResError.call(n,l,"Invalid-Data",void 0):ae.api.onResError.call(n,l,"Invalid-Data",void 0)}catch(e){console.error(e)}oe.groupEnd("spaRender["+te+"] - xsr.renderHistory["+K._renderId+"]")}).fail(function(){console.error("External Data|Template|Style|Script Loading failed! Unexpected!! Check the template Path / Network. Rendering aborted.")})):oe.error("No templates defined [data-templates] in view container ["+V+"] to render. Check HTML markup."),oe.groupEnd("spaView")},function(){console.error("External Scripts Loading Failed! Unexpected!? Check the Script Path/Network.")}),K}function S(e,t,a){he(X[e])&&X[e]=="app."+J+t&&app[J].hasOwnProperty(a)&&(X[e]="app."+J+"."+a)}},ae.initElementsIn=xt;var Ot=/\r?\n/g,kt=/^(?:input|select|textarea|keygen)/i,$t=/^(?:submit|button|image|reset|file)$/i,_t=/^(?:checkbox|radio)$/i;function Tt(e,t){var a="",n=t||be(window,"app.api.liveApiPrefix",""),r=e.beginsWithStr("!");if(e=e.trimLeftStr("!"),n){var i,o,s=[],l=0;if(he(n)?s=n.split(","):pe(n)&&(s=n),0<(i=s.length))for(;!a&&l<i;)a=(o=s[l++].trim())&&(e.beginsWithStr(o)||!Et(e)&&0<e.indexOf(o))?o:"";else a=e.beginsWithStr(n)||!Et(e)&&0<e.indexOf(n)?n:""}else r&&(a="??");return a}function Et(e){var t=e.getLeftStr(6).toLowerCase();return!(t.beginsWithStr("http:")||t.beginsWithStr("https:")||t.beginsWithStr("//"))}function Pt(e){return e.replace(/{{([^}])*}}(\/*)/g,"")}function At(i,e,t){i.url.beginsWithStr(ae.api.urlKeyIndicator)&&(i.url=ae.api.url(i.url.trimLeftStr(ae.api.urlKeyIndicator),i.data));var a,n=i.url;be(window,"app.api.reqHeaders")&&(i.beforeSend=function(e){var t,a,n,r;t=e,a=i,n=be(window,"app.api.reqHeaders"),fe(r=ue(n)?n(t,a):n)?xe(Se(r),function(e){t.setRequestHeader(e,r[e])}):he(r)&&(Tt(a.url)?(a.data=a.data||"",a.data+=(ve(a.data)?"":"&")+r):t.setRequestHeader("reqHeadersInLiveUrl",r))}),"script"==i.dataType||i.hasOwnProperty("error")||(i.error=app.api.onError||ae.api.onReqError);var r,o="",s=/({+)([^}])*(}+)/;if(ae.api.mock||app.api.mock||n.beginsWithStr("!"))if(n.beginsWithStr("~"))i.url=(Et(n.trimLeftStr("~"))&&ae.api.baseUrl||"")+n.trimLeftStr("~")+(ae.api.liveUrlSuffix||""),ae.api.baseUrl&&(i.crossDomain=!0);else{var l=("/"+(i.method||i.type).toUpperCase()).replace("/GET","");if(i.type=i.method="GET",o=Tt(n),n=n.trimLeftStr("!"),o){if(n.containsStr("\\?")||(n=n.trimRightStr("/")+"?"),s.test(n)){oe.log("URL has undefined params >>",n,i.data);try{r=he(i.data)?JSON.parse(i.data):i.data,n=ae.api.url(n.replace(/{{/g,"{").replace(/}}/g,"}"),r)}catch(e){}oe.log("Updated URL>>",n)}var c=function(e,t,a){var n;e=e||"/",t=t||"","??"===(a=a||Tt(e))&&((n=e.indexOf("//"))<0?e=(a="/MOCK-ROOT/")+e.trimLeftStr("/"):a=e.substring(0,e.indexOf("/",n+2)+1)),da&&(e.indexOf("//")<0?e=(a="__DEFAULT_MOCK_API_ROOT__/")+e.trimLeftStr("/"):(e=e.replace(new RegExp(a),"__DEFAULT_MOCK_API_ROOT__/"+a.trimLeftStr("/")),a="__DEFAULT_MOCK_API_ROOT__/"));var r,i="",o=be(app,"api.mockBaseUrl")||be(spa,"api.mockBaseUrl")||"",s=o?"":(be(app,"api.mockRootFolder")||be(spa,"api.mockRootFolder")||"api_").trimRightStr("/")+"/",l=be(app,"api.mockDataFile")||be(spa,"api.mockDataFile")||"",i=(e||"").replace(/[\{\}]/g,"").replace(RegExp("(.*)(/*)"+a.trimLeftStr("/")),s).replace(/(\/)*\?/,t+"/"+l+"?").replace(/\?$/,"");return o&&(o=o.trimRightStr("/")+"/",(r=i.indexOf("//"))<0?i=o+i:r<7&&(i=o+i.substring(i.indexOf("/",i.indexOf("//")+2)+1))),i}(n,l,o);i.url=c,(app.api&&app.api.debug||app.debug||spa.debug)&&console.warn(">>>>>>Intercepting Live API URL: ["+n+"] ==> ["+c+"]"),a=!0}}else o=Tt(n),(app.debug||spa.debug)&&console.log("actualUrl:"+n+",baseUrl:"+ae.api.baseUrl+",liveApiPrefix:"+o),o&&(i.url=(Et(n)&&ae.api.baseUrl||"")+n+(ae.api.liveUrlSuffix||""),ae.api.baseUrl&&(i.crossDomain=!0));if(oe.log("Remove mock params if any in URL>",i.url),i.url=Pt(i.url),s.test(i.url)){oe.log("URL has undefined params>",i.url,i.data);try{r=he(i.data)?JSON.parse(i.data):i.data,i.url=ae.api.url(i.url.replace(/{</g,"{").replace(/>}/g,"}"),r)}catch(e){}}oe.log("Final Ajax URL>",i.url),(s.test(i.url)||/<([^>])*>/.test(i.url))&&(console.warn("URL has undefined params >>",i.url,i.data),i.url=i.url.replace(/[{<>}]/g,"_"));var d,p,u,f,h,m=app.api.defaultPayload||ae.api.defaultPayload;m&&(p="string"==(d=ce(i.data))?le(i.data):i.data,ue(m)?fe(u=m.call(i,p,i))&&(ve(f=JSON.parse(JSON.stringify(u)))||(i.data="string"==d?JSON.stringify(f):f)):(f=de(m,"object|array")?JSON.parse(JSON.stringify(m)):m,f=de(f,"object|array")&&de(p,"object|array")?$e({},f,p):f,i.data=ve(f)||"string"!=d?f:JSON.stringify(f))),ae.ajaxPreProcess&&ae.ajaxPreProcess(i,e,t),(ve(i.data)||he(i.data)&&!/[a-z0-9]/i.test(i.data))&&(oe.log("REMVOING EMPTY PAYLOAD"),delete i.data),a&&((h=he(i.data)?i.data:JSON.stringify(i.data))&&he(h)&&6144<h.length&&(h="LAREGE-PAYLOAD-WITH-CHAR-LENGTH:"+h.length),i.headers=$e({},i.headers,{"Z-Live-URL":n,"Z-Payload":h}),delete i.data),(app.api&&app.api.debug||app.debug||spa.debug)&&console.log("ajax Options",i)}$.fn.extend({serializeToArray:function(){return this.map(function(){var e=$.prop(this,"elements");return e?$.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!$(this).is(":disabled")&&kt.test(this.nodeName)&&!$t.test(e)&&(this.checked||!_t.test(e))}).map(function(e,t){var a=ae.getElValue(t);return null==a?null:Array.isArray(a)?we(a,function(e){return{name:t.name,value:he(e)?e.replace(Ot,"\r\n"):e}}):{name:t.name,value:he(a)?a.replace(Ot,"\r\n"):a}}).get()},serializeUncheckedCheckboxes:function(e){var a,n,r,i,o="object"==typeof e,s=o?e:{},l=o&&!e?"":e;return $(this).find("input[data-unchecked]:checkbox:enabled:not(:checked)[name]").each(function(e,t){a=$(t),r=a.attr("name"),n=a.data("unchecked"),i=void 0===n?"":n,o?ae.appendToObj(s,r,i):l+=(l?"&":"")+r+"="+i}),o?s:l},serializeFormToJSON:M,serializeFormToObject:M,serializeFormToSimpleJSON:B,serializeFormToSimpleObject:B,i18n:function(e){return this.each(function(){e&&$(this).attr("data-i18n",e).data("i18n",e),ae.i18n.apply(this)}),this},spaRender:function(e){this.each(function(){ae.renderComponentsInHtml(this,e,!0)})},renameAttr:function(e,t){return this.each(function(){ie(this,t,ie(this,e)),this.removeAttribute(e)}),this},spa$:function(){return this.map(function(){return $(this).closest("[data-rendered-component]")})},spa$name:function(){var e=this.map(function(){return $(this).closest("[data-rendered-component]").attr("data-rendered-component")});return 1==e.length?e[0]:e},spaBindData:function(e,t){return ae.bindData(this,e,t)},inBlockedSpaNavContainer:function(){return!!this.closest(Jt).length},blockNav:function(){return ea(this),this},allowNav:function(){return ta(this),this},isNavBlocked:function(){return na(this)},isNavAllowed:function(){return ra(this)},disable:function(e){return e||me(e)?this.css("pointer-events","none").addClass("disabled").attr("disabled","disabled"):this.enable(!0)},enable:function(e){return e||me(e)?this.css("pointer-events","auto").removeClass("disabled").removeAttr("disabled"):this.disable(!0)},value:function(e,t){return me(e)?this.val():(this.each(function(){$(this).val(e).trigger(t||"change")}),this)},htm:function(e){return me(e)?this.html():(this.each(function(){$(this).html(ae.sanitizeScript(e))}),this)},dataJSON:function(e,t,a){var n,r,i;return arguments.length?(i=fe(i=le(this.data(e)))?i:{},me(t)||(i=a?t:$e(i,t),n=JSON.stringify(i),r=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),this.attr("data-"+r,n).data(e,n))):i=this.data(),i},isDisabled:function(e){var t=this.hasClass("disabled")||this.is("[disabled]");return t&&e&&e.call(this,this),t},isEnabled:function(e){var t=!this.isDisabled();return t&&e&&e.call(this,this),t},trackChanges:function(){ae.trackFormElChange(this)},isChanged:function(e){var t="ALL"==(e=(e||"ANY").toUpperCase()),a=!t,n=!1,r=this;if(r.length)for(var i=0;i<r.length;i++){var o=r[i].tagName.toUpperCase();if("FORM"==o)n=$(r[i]).find("input,textarea,select").isChanged(e);else if(0<"/INPUT/TEXTAREA/SELECT/".indexOf(o)){if(n=ae.isElValueChanged(r[i]),a&&n)break;if(t&&!n)break}}return n},initSpaRoutes:function(){ba(this)},initFormValidation:function(){var e=this.filter("form");if(!e.length)return"Form Not Found";e.each(function(e,t){wt(t)})},validateForm:function(e,t,a){var n,r,i=this;return 1<i.length?[{errcode:1,errmsg:"Too many forms to validate."}]:1==i.length?(n="#"+i.attr("id"),"FORM"==(i.prop("tagName")||"").toUpperCase()?he(e)?(r=i.find(e).map(function(){return this.id}).get().join(),ae.validateForm(n,r,t,a)):ae.validateForm(n,e,t):[{errcode:1,errmsg:"NOT a FORM"}]):[{errcode:1,errmsg:"Form Not Found."}]},updateValidation:function(a,n){this.each(function(e,t){ae._validate._showValidateMsg(t,n,a)})},updateValidationPromise:function(e,t,a){ae.updateValidationPromise(e,this,a,t)}}),ae.initDataValidation=function(){oe.log("include validate framework lib (spa-validate.js) to use this feature!")},ae.doDataValidation=function(){oe.log("include validate framework lib (spa-validate.js) to use this feature!")},ae.properties={version:ae.VERSION},ae.api={baseUrl:"",liveUrlSuffix:"",urls:{},mock:!1,mockBaseUrl:"",mockRootFolder:"api_",mockDataFile:"data.json",defaultPayload:!1,forceParamValuesInMockUrls:!1,urlKeyIndicator:"@",url:function(e,r){e=(e||"").trim()[0]===ae.api.urlKeyIndicator?(e||"").trimLeftStr(ae.api.urlKeyIndicator):e||"",r=r||{};var i,o,s,l,t,a,c=(a=t=((t=e)+"").trim().trimLeftStr(ae.api.urlKeyIndicator),fe(ae.api.urls)&&Object.keys(ae.api.urls).length&&((a=0<=t.indexOf(".")?be(ae.api.urls,t,""):ae.api.urls[t]||"$"!==t[0]&&ae.api.urls["$"+t]||"")||/[^a-z0-9_]/gi.test(t)||console.warn("URL undefined for key:",t)),a||e),d=c.beginsWithStr("!")||ae.api.mock||app.api.mock,p=c.beginsWithStr("!!")||c.beginsWithStr("~")||ae.api.forceParamValuesInMockUrls,n=c.extractStrBetweenIn("{","}",!0),u=[],f=[],h={url:c,urlParams:r};return ae.api.mock||app.api.mock||c.beginsWithStr("!")||(c=Pt(c)),ve(n)||xe(n,function(e){if(f=[],u=[],i=e.replace(/[{}<>]/g,"").trim()){var t;0<i.indexOf("|")&&(i=(u=i.split("|").map(function(e){return e.replace(/\(.*\)/g,"").trim()})).shift()),0<i.indexOf(":")&&(i=(t=i.split(":"))[0].trim(),l=t[1].trim()),"#"==i[0]?o=ae.getElValue(i):(s=ve(r))||("string"==typeof(o=be(r,i,r._undefined))&&0==o.indexOf("$#")&&(0<o.indexOf("|")&&(o=(f=o.split("|").map(function(e){return e.replace(/\(.*\)/g,"").trim()})).shift()),o=ae.getElValue(o.substring(1))),o=!d||p||e.containsStr(">")?o:"_"+i);for(var a=0,n=(u=f.concat(u)).length;a<n;a++)if(u[a])if("."==u[a][0])try{o=o[u[a].substring(1)]()}catch(e){console.error("Error parsing urlParam: "+o+u[a]+"()","param:",o,h,e)}else":"==u[a][0]?l=u[a].substring(1).trim():o=ae.renderUtils.runCallbackFn(u[a],o,h);void 0!==o&&"undefined"!==o||(o=l),s&&ve(u)&&!o||(c=c.replace(new RegExp(e.replace(/([^a-zA-Z0-9])/g,"\\$1"),"g"),""+o))}}),c},success:function(e){return[e,"success"]},isCallSuccess:function(){return!0},onReqError:function(e,t,a){oe.error([e,t,a]),oe.error($(e.responseText).text())},onResError:function(){},_call:function(n){var e,t,a,r,i,o=be(window,"app.api.ajaxOptions",{}),s=fe(n)&&n.hasOwnProperty("error")?n.error:app.api.onError||ae.api.onReqError;return(n=ke({},o,n,{error:s,success:function(e,t,a){e=he(e)&&"html"!=String(this.dataType).toLowerCase()?le(e):e,(ue(app.api.isCallSuccess)?app.api.isCallSuccess.call(this,e,this):ae.api.isCallSuccess.call(this,e,this))?n._success.call(this,e,t,a):ue(app.api.onResError)?app.api.onResError.call(this,e,t,a):ae.api.onResError.call(this,e,t,a)}})).dataType||(n.dataType="text"),"json".equalsIgnoreCase(n.dataType)&&!n.contentType&&(n.contentType="application/json"),n.data&&fe(n.data)&&n.stringifyPayload&&(delete n.stringifyPayload,n.data=JSON.stringify(n.data)),n.defaultPayload&&(e=ce(n.data),a=ue(t=n.defaultPayload)?t(r):fe(t)?$e({},t):t,r="string"==e?le(n.data):n.data,fe(a)&&(ve(i=fe(r)?$e({},a,r):a)||"string"!=e||(i=JSON.stringify(i)),n.data=i)),n.url.beginsWithStr(ae.api.urlKeyIndicator)&&(n.url=ae.api.url(n.url.trimLeftStr(ae.api.urlKeyIndicator),n.data)),(app.api&&app.api.debug||app.debug||spa.debug)&&console.info(["API(ajax) call with options",n]),Ua(n)},_params2AxOptions:function(){var t,a,n,r,i={method:"GET",url:"",data:{},_success:function(){},async:!0};return xe(arguments,function(e){switch(!0){case he(e):t="url",i.url&&(a=!0,t="data");break;case ue(e):t=r?"error":(r=!0,"_success");break;case x(e):t="async";break;case fe(e):a||e.__hasPrimaryKeys("ajaxOptions|dataUrlParams")?(t="axOptions",n=e.hasOwnProperty("ajaxOptions")?e.ajaxOptions:e):(t="data",a=!0);break;default:t="unknown"}"axOptions"!=t&&(i[t]=e)}),n&&(n.dataUrlParams&&((""+i.url).beginsWithStr(ae.api.urlKeyIndicator)&&(i.url=ae.api.url(i.url.trimLeftStr(ae.api.urlKeyIndicator),n.dataUrlParams)),delete n.dataUrlParams),$e(i,n)),oe.log("API ajax options >>"),oe.log(i),i},get:function(){return ae.api._call(ae.api._params2AxOptions.apply(void 0,arguments))},post:function(){return ae.api._call(ke(ae.api._params2AxOptions.apply(void 0,arguments),{method:"POST"}))},put:function(){return ae.api._call(ke(ae.api._params2AxOptions.apply(void 0,arguments),{method:"PUT"}))},del:function(){return ae.api._call(ke(ae.api._params2AxOptions.apply(void 0,arguments),{method:"DELETE"}))},mix:function(){for(var e=[],t=arguments[arguments.length-1],a=0;a<arguments.length;a++)pe(arguments[a])?e=e.concat(arguments[a]):ue(arguments[a])||e.push(arguments[a]);return Aa.apply($,e).done(function(){var a=ne.slice.call(arguments);1==e.length&&1<a.length&&"success"==a[1]?(a[0]=le(a[0]),a.splice(1)):xe(a,function(e,t){e&&pe(e)&&1<e.length&&"success"==e[1]&&(a[t]=le(e[0]))}),t&&ue(t)&&t.apply(void 0,a)})}},ae.i18n.onLangChange,ae.i18n.displayLang=function(){var e,t,a,n,r,i=$("html").attr("lang");return i&&(t=(e=i).replace("-","_"),a=$('[data-i18n-lang="'+e+'"],[data-i18n-lang="'+t+'"]'),n=($("body").attr("i18n-lang-key-prefix")||"lang.name.")+t,r="-",$(".lang-text").attr("data-i18n",n).data("i18n",n),$("[data-i18n-lang]").removeClass("active"),a.length&&(a.addClass("active"),r=($(a[0]).data("i18nLang")||"").replace(/[a-z]/gi,""),$(".lang-icon").removeClass(ne.join.call($("[data-i18n-lang]").map(function(e,t){return $(t).data("i18nLang")})," "))),$(".lang-icon").addClass("-"==r?e:t),ae.i18n.apply(".lang-text")),i};var Rt={},Lt={pub:function(a,e,n,r){var i,o;ue(e)?(r=arguments[2],n=e):i=e;var s,l,c=0,d=[];return xe(Rt[a],function(t){try{c++,s=t.fn,l=null,s&&(l=s.call(i||{},a,i,n,r)),d.push({id:""+(t.name||c),response:l}),!o&&x(l)&&(o=!l)}catch(e){console.warn("Execution error in subscribed function:"+t.name+" on-"+a),console.error(e.stack)}}),o?r&&ue(r)&&r(d):n&&ue(n)&&n(d),d},sub:function(e,t,a){return Rt.hasOwnProperty(e)||(Rt[e]=[]),Rt[e].push({fn:t,name:a}),Rt[e].length},unSub:function(e,t){var a=!1;return Rt.hasOwnProperty(e)&&(a=!0,t?Rt[e][t-1]=null:Rt[e]=[]),a}};ae.event={on:Lt.sub,off:Lt.unSub,trigger:Lt.pub,announce:Lt.pub};var Ut,It,jt="#",Nt="",Dt=!0,Ft=[],zt=100,Mt=!1,Bt="",Vt="",Ht=!1,Kt="",qt="",Wt="",Jt="",Xt="",Gt="",Zt="",Yt=!1,Qt="";function ea(e){var t=$(e||"body :first");return t.addClass(Wt),Ut=na()||!0,t}function ta(e){var t=$(e||Jt);return t.removeClass(Wt),t.find(Jt).removeClass(Wt),Ut=na(),t}function aa(){return!It}function na(e){if(e){var t=$(e);return t.hasClass(Wt)||0<t.find(Jt).length}return!!$(Jt).length}function ra(e){return!na(e)}function ia(){Ut&&ma(Bt)}var oa="x"+ye();function sa(e){var t;t=ae.urlHashFull(jt),oe.log("on Hash Change: Url To [",t,"] from[",Bt,"] on click:",Mt," block-Navigation:",Ut,"isDelayed:",Ht),!Mt&&Ut?(oe.log("-------------\x3e",Bt,t,Ht,Kt),oe.log("lastBlocked:",qt),qt=qt||Bt,"#"==jt[0]?(ma(Ht?Kt:Bt,t),qt==t&&ca(t)):(ma(Ht?Kt:Bt,t),ca(t))):(oe.log("Triggering next hash... by href:",Yt,"autoRoute:",Dt,"byClick",Mt),fa(Dt||!Mt)),Vt=Vt&&Vt!=oa?(oe.warn("Blocked:",Vt),oa):(Vt!=oa&&(ae.onUrlHashChange?ae.onUrlHashChange(ae.urlHash([],jt),e):ae.onUrlChange&&ae.onUrlChange(ae.urlHash([],jt),e)),"")}function la(){var e,t;switch(ae.onReload&&(e=ae.onReload()),ce(e)){case"boolean":if(!e)return t="xsr.message.on.window.reload",ae.i18n.text(t).replace(t,"");break;case"string":return(e=e.trim())&&(t=e.beginsWithIgnoreCase("i18n")?e.replace(/i18n(:)*/i,""):"")?ae.i18n.text(t).replace(t):e;default:if(t="xsr.message.on.window.reload",Ut)return ae.i18n.text(t).replace(t,"")}}function ca(e,t){var a,n,r,i,o,s;qt=e,oe.log("Trying to navigate away from:["+Bt+"] To:["+e+"] by",t),$(Jt).each(function(){a=$(this),"#"==(n=(a.attr(Qt)||"").trim())[0]||">"==n[0]?(r=">"==n[0]?n.substring(1).trim():n,(i=a.find(r).filter(":not(.disabled):not(:disabled)")).length&&(t&&(s="id:'"+t.attr("id")+"', spaRoute:'"+t.attr(Gt)+"'"),i.data("navToUrl",e).attr("data-nav-to-url",e),i.data("navBy",s).attr("data-nav-by",s),i.trigger("click"))):(o=be(window,n.split("(")[0].split(";")[0]))&&ue(o)&&o.call(a,e,a,t)})}ae.blockNav=ea,ae.allowNav=ta,ae.isNavBlocked=na,ae.isNavAllowed=ra,ae.isToShowNav=aa,ae.isInBlockedSpaNavContainer=function(e){return!!$(e).closest(Jt).length},window.onerror=function(e,t,a){console.warn("Invalid Content: Check the network/path/content.",e,t,a)};var da,pa=[];function ua(e,t){var a,n,r,i,o,s,l=0<=e.indexOf(":"),c=t;return x(t)&&(c=t?"click":""),l&&(a=l?e.split(":")[0]:"",n={},xe(0<e.indexOf("&")?e.split("&"):0<e.indexOf(",")?e.split(","):[e],function(e){r=e.split(":")[0],i=e.getRightStr(":"),n[r]=decodeURIComponent(i)}),(l=!ve(s=((o=$("["+Gt+'*="/'+a+':"]['+Zt+"]")).attr(Zt)||"").trim()))&&(pa.push(e),xe(le(s),function(e,t){var a;e=e.trim(),/(^app\.(.)+\.)|(^\$)|(^\#)/.test(e)?ae.setElValue(e,n[t]):/^fn:/i.test(e)&&((a=(a=e.split(" ")[0].getRightStr(":").trim().split("(")[0])?be(window,a):"")&&ue(a)?a(t,n[t]):console.warn("Not a function",e))}),c&&o.isEnabled()&&!o.hasClass("AUTO-ROUTING")&&o.trigger(c))),l}function fa(e){e&&(Ft=[],zt=50),Dt=me(e)?Dt:e;var t,a,n,r=ae.urlHash([],jt),i=r.length-1;if(zt<0&&(Dt=!1),Dt){zt--;for(var o=i;0<=o&&(n=r[o-1]||"",Dt&&0<n.indexOf(":")&&!Ft.__has(n)&&o--,t=r[o],a=o==i,Dt&&!Ft.__has(t));o--)if(t){var s=0<=t.indexOf(":"),l=s?t.split(":")[0]:"",c="["+Gt+'$="/'+t+'"]:not(:disabled):not(.disabled):not(.AUTO-ROUTING):first';s&&(c="["+Gt+'*="/'+l+':"]['+Zt+"]");var d=$(c);if(d.length){if(s=s&&ua(t),Ft.push(t),Dt=!a,d.isEnabled()&&!d.hasClass("AUTO-ROUTING")&&d.addClass("AUTO-ROUTING").trigger(d.data("routeEvent")||"click"),a){Ue="";break}o+=2}}}Mt=!1}function ha(e,t){oe.log("_updateBrowserAddress >>>>>>>>>[",e,"]delay:",t,"prev:",Bt);var a,n="#"==jt[0];e&&(Bt=e,n?(oe.log(e),(a=$("#_spaRouteLink_")).length||(a=$('<a id="_spaRouteLink_" href=""></a>'),$("body").append(a)),oe.log("################# "+e),a.attr("href",e)[0].click()):(oe.log(e),"#"!=(e=e.trimLeftStr("/"))[0]&&(e="//"+window.location.host+Ie("/",e),oe.log("updating the address bar with >>>>>",e)),oe.log(">>>>>>>>>>>>>>>>> "+e),history.pushState(null,null,e)))}function ma(e,t){e!=t&&(oe.log("attempt to set URL:",e,"insteadOf",t),Vt=t,ha(e))}function ga(e){if(!(e=(e||"").trim()))return[];var t=ae.urlHash([],jt),a=e.trimStr("/").split("/"),n=[],r=a[0];var i=t.indexOf(r);if(0<r.indexOf("*")){r=r.getLeftStr("*");for(var o=0;o<t.length;o++)if(t[o].beginsWithStr(r)){i=o;break}}if(0<=i){for(var s,l=t.splice(i),c=0;c<a.length;c++)s=a[c].indexOf("*"),n[c]=s<0?a[c]:s?function(e,t){var a=t,n=t.getLeftStr("*");if(n)for(var r=0;r<e.length;r++)if(e[r].beginsWithStr(n)){a=e[r];break}return a}(l,a[c]):l[c];n=t.concat(n)}else n="/"==e[0]?a:t.concat(a);return n}function va(e){var a,n,r,i,o,t,s,l=ae.urlHash([],jt),c=$(this);if(c.hasClass("disabled")||c.is(":disabled"))return e.stopImmediatePropagation(),e.stopPropagation(),void e.preventDefault();function d(e,t){"#"==(a=(e||"").trim())[0]&&(a=a.substring(1)),n="<"==a[0],r=">"==a[0],i=t||a[r?1:0],o=a.substring(r?2:1),s=!1}"#"!=jt[0]&&e.preventDefault(),d(c.attr(Gt),c.attr("data-route-dir"));var p,u,f,h,m=(c.attr(Zt)||"").trim();if(m&&xe(le(m),function(e,t){var a;/(^app\.(.)+\.)|(^\$)|(^\#)/.test((p=e).trim())?p=ae.getElValue(e):/^fn:/i.test(e.trim())&&((a=(a=e.split(" ")[0].getRightStr(":").trim().split("(")[0])?be(window,a):"")&&ue(a)?p=a(t):console.warn("Not a function",e)),o=o.replace(new RegExp(t+":","g"),t+":"+encodeURIComponent(p))}),Ct(this,"onrouteclick"),c.hasClass("AUTO-ROUTING"))c.removeClass("AUTO-ROUTING");else{switch("^"==i&&(ve(l)?d(a.substring(1)):(e.preventDefault(),s=!0,i="/",o=ae.urlHash("",jt))),"#/-<>".indexOf(i)<0&&(o=i+o,i="?"),i){case"#":case"/":l=ga(o);break;case"-":var g=ae.toInt(o.replace(/[^0-9]/g,""))||1;l.length&&(l.length=l.length-g);break;case"<":t=Bt;break;case"?":l=ga(o)}n||(t=Ie(jt,l.join("/"))),Ut&&(n||c.hasClass(Xt)||c.inBlockedSpaNavContainer()||(r=!0,ca(t,c))),oe.log("Routing to...",t,"delay:",r,"prev:",Bt),u=t,f=r,h=s,oe.log("Updating url with:",u,"delay:",f,"autoRoute:",h),Dt=h,Kt=(Ht=f)?Bt:"",f?Bt=u:(Mt=!0,ae.isToShowNav()?Dt||ha(u,f):Bt=u)}}function ya(){ae.route(ie(this,Gt+"-AUTO").substring(1))}function ba(e){$(e||"body").find("["+Gt+'^="*"]:not(.ROUTE):not(.ROUTE-AUTO)').renameAttr(Gt,Gt+"-AUTO").addClass("ROUTE-AUTO").on("click",ya);var t,a,n,r=$(e||"body").find("["+Gt+"]:not(.ROUTE)").renameAttr("onclick","onrouteclick").addClass("ROUTE").off("click",va).on("click",va);Yt&&r.length&&r.each(function(){t=$(this),a=t.attr("href").replace(/\s*/g,"").trim(),n="","#"==a[0]?0<="^><-".indexOf(a[1])&&(n=a[1],a=a.substring(2)):0<="^".indexOf(a[0])&&(n=a[0],a=a.substring(1)),t.attr("href","#"+a).removeAttr("target").attr("data-route-dir",n)}),fa(),Ut=ae.isNavBlocked()}function Ca(e){if(e=(e||"").trim()){var t,a,n=e[0],r=1;switch("#/-<>".indexOf(n)<0&&(n="?",r=0),t=e.substring(r),n){case"/":a=ga(t);break;case"-":a=ae.urlHash([],jt);var i=ae.toInt(e.replace(/[^0-9]/g,""))||1;a.length&&(a.length=a.length-i);break;case"?":a=ga(t);break;default:a=[t]}return Ie(jt,a.join("/"))}}function Sa(s){function a(t,e){function o(e,t){e=(""+e).trim();var a,n,r,i=/^\[(.)+]$/.test(e);0<e.indexOf(".")?(i&&(e=e.slice(1,-1)),n=(a=e.split(".").map(function(e){return e.trim()})).shift(),i&&(n="["+n+"]"),o(n,0<=Object.keys(s).indexOf(n)?ae.objProp(l(n),a.join("."),t):ae.objProp({},a.join("."),t))):(r=JSON.stringify(t),i&&(r=G(r)),s.setItem(e,r))}1==arguments.length?c(t,"object")?Object.keys(t).forEach(function(e){o(e,t[e])}):c(t,"array")&&t.forEach(function(e,t){o(t,e)}):2==arguments.length&&o(t,e)}function l(e){if(0==arguments.length)return i();if(1!=arguments.length)return i.apply(null,arguments);if(c(e,"string")){if(0<(e=e.trim()).indexOf(","))return i.apply(null,e.split(","));if(0<e.indexOf(".")){var t=/^\[(.)+]$/.test(e);t&&(e=e.slice(1,-1));var a=e.split(".").map(function(e){return e.trim()}),n=a.shift();return t&&(n="["+n+"]"),be(l(n),a.join("."))}var r=s.getItem(e);return/^\[(.)+]$/.test(e)&&(r=function(e){if(ae.strUnzip)return ae.strUnzip(e);for(var t={},a=(e+"").split(""),n=a[0],r=n,i=[n],o=256,s=1;s<a.length;s++){var l=a[s].charCodeAt(0),c=l<256?a[s]:t[l]?t[l]:r+n;i.push(c),n=c.charAt(0),t[o]=r+n,o++,r=c}return i.join("")}(r)),JSON.parse(r)}return c(e,"array")?i.apply(null,e):void 0}function i(){var t=arguments.length,a=ne.slice.call(arguments).map(function(e){return(""+e).trim()}),n={};return Object.keys(s).forEach(function(e){(!t||-1<a.indexOf(e))&&(n[e]=l(e))}),n}function n(){var t;arguments.length?(t=ne.slice.call(arguments).map(function(e){return(""+e).trim()}),Object.keys(s).forEach(function(e){t.indexOf(e)<0&&s.removeItem(e)})):s.clear()}function c(e,t){var a=o.toString.call(e).split(" ")[1].toLowerCase().replace(/\]$/gi,"");return 2==arguments.length?-1<(""+t).toLowerCase().indexOf(a):a}function e(e,t){return 0==arguments.length?i():1==arguments.length?c(e,"object|array")?(a(e),e):l(e):2==arguments.length?(a(e,t),l(e)):void 0}return e.set=a,e.get=l,e.getAll=i,e.remove=function(e){function t(){arguments.length&&ne.slice.call(arguments).forEach(function(e){s.removeItem(e)})}var a;0==arguments.length?n():1==arguments.length?c(e,"string")?0<e.indexOf(",")?t.apply(null,e.split(",")):(a=e,s.removeItem(a)):c(e,"array")&&t.apply(null,e):t.apply(null,arguments)},e.removeAll=n,e.removeExcept=n,e.clear=n,e.clearExcept=n,e}ae.parseRoutes=ga;try{ae.sesStore=Sa(sessionStorage)}catch(e){console.warn("No Access to sessionStorage.",e)}try{ae.locStore=Sa(localStorage)}catch(e){console.warn("No Access to localStorage.",e)}function xa(){var e=this,t=$(e),a=ae.getElValue(e),n={},r=t.spa$()[0],i=t.spa$name(),o="2way".equalsIgnoreCase(ae.components[i].dataBindType);e.classList.add("DATA-MODEL-CHANGE-SRC");var s,l,c,d,p,u,f=(l="value|$",p=ie(s=e,"data-bind"),u="",p&&!p.containsStr(":")&&(p=Ze(s)+":'"+p+"'"),(c=le(p||"{}"))&&!ge(c)&&q(Se(c),function(e){return!u&&new RegExp(l,"i").test(e)&&(d=c[e].split("|"),u=d.shift().trim()),!!u}),u);ae.setSimpleObjProperty(n,f,a),o&&($e(ae.$data(i),n),app[i].is$DataUpdated=ae.components[i].is$DataUpdated=!0),ae.bindData(r,n,'[data-bind*="'+f+'"]:not(.DATA-MODEL-CHANGE-SRC)',!0),e.classList.remove("DATA-MODEL-CHANGE-SRC"),o&&ae.renderUtils.runCallbackFn("app."+i+".$dataChangeCallback",app[i].$data,app[i])}function wa(e,t){function a(e,t){$(e).on((ie(e,"data-bind-event")||t).toLowerCase(),xa)}var n="[data-bind]:not(.SPA-DATA-BOUND)",r=$(e||"body").find((t||"")+" "+n);r.length||t||(r=$(e+n)),r.length&&(r.filter("textarea,input:not([type=radio]):not([type=checkbox])").addClass("SPA-DATA-BOUND").each(function(){a(this,"keyup")}),r.filter("select,input[type=radio],input[type=checkbox]").addClass("SPA-DATA-BOUND").each(function(){a(this,"change")}))}function Oa(e){var t;j("",e),$(e||"body").find("[onKeyPause]:not([onKeyPauseReg])").each(function(e,t){$(t).attr("onKeyPauseReg","").on("input propertychange paste",function(){var a=this,e=+((""+ie(a,"data-pause-time")).replace(/[^0-9]/g,"")||"1250");I(c),c=setTimeout(function(){var e=ie(a,"onKeyPause").split("(")[0],t=be(window,e);t&&t.call(a,a),I(c)},e)})}),xt(e),ae.initTrackFormElChanges(e),t=e,ae.hasOwnProperty("initDataValidation")?$(t||"body").find("[data-validate-form],[data-validate-scope],form:has([data-validate])").filter(":not([data-validation-initialized])").each(function(e,t){wt(t)}):console.warn("SPA validation module is not loaded."),ba(e),ae.initTogglePassword(e),wa(e),function(){for(var e,t,a=ae.urlHash([],jt),n=0;n<a.length;n++)e=a[n],0<=(t=pa.indexOf(e))?pa.splice(t,1):ua(e,n==a.length-1)}()}function ka(){window.onpageshow=ia,m?window.onhashchange=sa:window.onpopstate=sa,is(window,"window")&&(window.onbeforeunload=la),function(){$(document).on("click","[data-i18n-lang]",function(){var e=$(this).data(),a=e.i18nLang||"",n=(e.i18nLang||"").replace("-","_"),r=($("body").attr("i18n-lang-key-prefix")||"lang.name.")+n;Ke(n,{callback:function(){var e="-",t=$("[data-i18n-lang]:first");t.length&&(e=(t.data("i18nLang")||"").replace(/[a-z]/gi,"")),$(".lang-text").attr("data-i18n",r).data("i18n",r),$(".lang-icon").removeClass(ne.join.call($("[data-i18n-lang]").map(function(e,t){return $(t).data("i18nLang")})," ")).addClass("_"==e?n:a),$("[data-i18n-lang]").removeClass("active"),$('[data-i18n-lang="'+a+'"],[data-i18n-lang="'+n+'"]').addClass("active"),ae.i18n.apply(".lang-text")}})});var e,t=Me()||"",a=($("body").attr("i18n-lang")||"").replace(/ /g,"")||/,|\*/.test(t)&&t||ae.defaults.lang.url&&(t||Be(1))||"",n=a.split(",")[0];if(a){if("*"==n&&(n=Be(),(","+a.toLowerCase()+",").indexOf(","+n.toLowerCase()+",")<0)){n=n.getLeftStr(2).toLowerCase();var r=a.split(","),i="",o="";if(1<r.length){for(var s=0;s<r.length;s++)if(0==(i=(r[s]||"").trim()).toLowerCase().indexOf(n)){o=i;break}n=o||(a.split(",")[1]||"")}}n&&(Ke(n,{},!0),e=setTimeout(function(){ae.i18n.displayLang(),I(e)},500))}}(),Oa("body"),ae.i18n.apply("body")}function $a(){(re=!!Se(app.api).length)&&oe.log("Initializing app.api");var e=be(window,"app.api.baseUrl");ve(e)||(ae.api.baseUrl=e);var t,a,n,r,i,o,s,l,c,d=be(window,"app.api.urls");ve(ae.api.urls)&&!ve(d)&&(ae.api.urls=app.api.urls),ve(ae.api.urls)||(ve(t=be(window,"app.api.liveApiPrefix|app.api.mockRootAtPaths"))&&!ve(ae.api.urls)&&(a=[],xe(ae.api.urls,function(e){e=e.replace(/^!|~/,""),r=e.indexOf("//"),1<(n=r<0?e.substring(0,e.indexOf("/",1))+"/":(i=e.indexOf("/",r+2)+1,(o=e.indexOf("/",i))<0?e.substring(i-1):e.substring(i,o+1))).length&&a.indexOf(n)<0&&a.push(n)}),(da=!!a.length)&&(oe.log("Auto find - live api identifier list:",a),t=app.api.liveApiPrefix=ae.api.liveApiPrefix=app.api.mockRootAtPaths=a)),ve(t)||(xe(s=pe(t)?t:(""+t).split(","),function(a,e){a=a.trim(),"!"!=(l=a[0])&&"~"!=l||(a=a.substring(1),xe(ae.api.urls,function(e,t){"!"!=(c=e[0])&&"~"!=c&&(0==e.indexOf(a)||0<e.indexOf("/"+a))&&(ae.api.urls[t]=l+e)})),s[e]=a}),app.api.liveApiPrefix=s,delete app.api.mockRootAtPaths))}function _a(){function t(e){if(spa[e])return spa[e]()}Pa(t("onInit")).done(function(){var e;ae.env&&"dev".equalsIgnoreCase(ae.env)&&(e={components:{templateCache:!(ae.api.mock=!0),callback:function(){console.log("spa$>",this.__prop__.componentName)}}},ae.defaults.set(e)),Pa(ka()).done(function(){Pa(t("onInitComplete")).done(function(){Pa(t("onReady")).done(ae.renderComponentsInHtml)})})})}function Ta(){var t,a,n,e=$("body"),r=e[0],i=e.data();ve(i)||(i.spaDefaults=le(ie(r,"data-spa-defaults")||ie(r,"data-app-defaults")||{}),xe(Se(ae.defaults),function(e){e.equalsIgnoreCase("set")||(a=e.toTitleCase(),ve(t=i.spaDefaults[e]||i["spaDefaults"+a]||i["appDefaults"+a])||(fe(n=le(t))?$e(ae.defaults[e],n):ae.defaults[e]=t))})),ae.defaults.alias&&(h[ae.defaults.alias]=ae),Bt=ae.urlHashFull(jt),jt=(be(spa,"defaults.routes.base","")||"#").trim(),Wt=(be(spa,"defaults.routes.className.block","")||"BLOCK-SPA-NAV").trim(),Jt="."+Wt,Xt=(be(spa,"defaults.routes.className.allow","")||"ALLOW-SPA-NAV").trim(),Nt=(be(spa,"defaults.routes.className.hide","")||"HIDE-SPA-NAV").trim(),Gt=(be(spa,"defaults.routes.attr.route","")||"data-spa-route").trim(),Zt=(be(spa,"defaults.routes.attr.params","")||"data-spa-route-params").trim(),Yt=Gt.equalsIgnoreCase("href"),Qt=(be(spa,"defaults.routes.attr.onNavAway","")||"onNavAway").trim(),It=$("body").hasClass(Nt),$a()}ae.reload=function(e){e&&ae.sesStore.set("_spaReloadUrl",e||""),ae.allowNav(),window.location.reload()},ae.hasReloadUrl=function(){return!!(ae.sesStore.get("_spaReloadUrl")||"").trim()},ae.initRoutes=ba,ae.route=function(e,t){var a,n=Ca(e);oe.log("Route:",e,"URL:",n),n&&(!t&&Ut?ca(n):(a=$("["+Gt+'$="'+e.trim()+'"].ROUTE:first')).length?a.hasClass("disabled")||a.is("[disabled]")?console.warn("Route:",e,"is disabled."):a.click():(It?Ue=n:ha(n),"/"==e.trim()?(ae.allowNav(),window.location.reload()):sa()))},ae.routeUrl=Ca,ae.routeEl=function(e){return $("["+Gt+'$="'+e.trim()+'"].ROUTE')},ae.initDataBind=wa,ae.async=function(n){var r,i=ne.slice.call(arguments,1);r=setTimeout(function(){var e=n.apply(void 0,i),t=i.length,a=t?i[t-1]:"";a&&ue(a)&&a(e),I(r)},0)};var Ea,Pa,Aa,Ra,La,Ua=h.$&&$.ajax||h.spaXHR&&spaXHR.ajax;function Ia(){h.spaXHR&&(ae.ajax=spaXHR.ajax),(Ea=$.ajax&&$||spaXHR)&&(Pa=Ea.when,Ua=Ea.ajax,Aa=Ea.when,Ra=Ea.ajaxSetup,La=Ea.ajaxPrefilter,$&&!$.ajax&&($.ajax=Ua,$.ajaxQ=Aa,$.ajaxSetup=Ra,$.ajaxPrefilter=La),Ra({dataParsers:{javascript:!1,spacomponent:!1},converters:{"text javascript":function(){},"text spaComponent":function(){}},dataFilter:function(e,t){var a,n,r=(t||"").toLowerCase();return"spacomponent"===r?Re(e,this.url):"javascript"===r&&(a=e).trim()&&(ie(n=document.createElement("script"),"id","js-"+ye()),ae.defaults.csp.nonce&&ie(n,"nonce",ae.defaults.csp.nonce),n.text=a,document.head.appendChild(n).parentNode.removeChild(n)),e}}))}function ja(){Ia(),ae.strZip=!ae.strZip&&h.LZString&&LZString.compress,ae.strUnzip=!ae.strUnzip&&h.LZString&&LZString.decompress,Ea?(ae.debug=ae.urlParam("spa.debug")||ae.hashParam("spa.debug")||ae.debug,Ta(),La(At),_a(),T=!0,oe.info("Initialized SPA.")):console.error("Could not find XHR(ajax) module. Use jQuery Full version or include spaXHR module."),E.removeEventListener("DOMContentLoaded",ja)}$(function(){"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?ja():E.addEventListener("DOMContentLoaded",ja)})}(),xsr.console.info("SPA.js is loaded.");
/*@license SPA.js (XHR/ajax) [MIT]*/
!function(t){var n=Object.prototype,s=Array.prototype,S=0;function o(e,t){return 1===arguments.length?s.slice.call(e):s.slice.call(e,t)}function a(e){return-1<r.indexOf(e)}function A(e,t){return n.hasOwnProperty.call(e,t)}var r="hasOwnProperty,prototype,__proto__".split(",");function e(t,n){return Object.keys(n).forEach(function(e){a(e)||Object.defineProperty(t,e,{value:n[e]})}),t}function C(e){e&&(Array.isArray(e)?e:[e]).forEach(function(e){e&&clearTimeout(e)})}var i,c,l,u=spa.extractStrBetweenIn,p=spa.is,D=spa.isString,f=spa.isArray,H=spa.isObject,d=spa.isObjectLike,q=spa.isFunction,U=spa.isUndefined,k=spa.extend,Q=spa.merge,h=spa.find;function N(e){if(H(e)){var s,a,r,i=e;return A(e,"_payload_")||function e(t){var n=!0;if("object"==typeof t)for(var s=Object.keys(t),a=0;n&&a<s.length;a++)n="object"!=typeof t[s[a]]||f(t[s[a]])&&e(t[s[a]]);return n}(e)||(i={_payload_:e}),Object.keys(i).reduce(function(e,t,n){return s=0===n?"":"&",a=encodeURIComponent(t),r=f(i[t])?i[t].map(o).join(","):o(i[t]),[e,s,a,"=",r].join("")},"")}return String(e);function o(e){return encodeURIComponent("object"==typeof e?JSON.stringify(e):e)}}function L(e){return e instanceof I||e instanceof O||e instanceof v||t.Promise&&e instanceof Promise||t.jqXHR&&e instanceof jqXHR||t.Thenable&&e instanceof Thenable||t.Deferred&&e instanceof Deferred}function M(e,t,n){var s=e.fnQ.then,a=e.fnQ.fail,r=e.fnQ.done,i={then:"then,fail,done",fail:"fail,done",done:"done"}[n];if(L(t)){if(-1<i.indexOf("then"))for(;0<s.length;)t.then(s.shift());else e.fnQ.then=[];if(-1<i.indexOf("fail"))for(;0<a.length;)t.catch(a.shift());else e.fnQ.fail=[];if(-1<i.indexOf("done"))for(;0<r.length;)t.finally(r.shift())}}function v(t,n,s){Object.defineProperty(this,"fnQ",{value:{then:[],fail:[],done:[]}}),this.isPending=!0,this.isResolved=!1,this.isRejected=!1,this.response,this.prevFnRes;var i,o,c=this;function a(e,t){function n(e,t){for(;0<e.length;)c.prevFnRes=[e.shift().apply(c,c.prevFnRes)],M(c,c.prevFnRes[0],t)}var s,a,r;c.isPending?(c.isPending=!1,c.response=t,c.prevFnRes=t,c.isResolved=e,c.isRejected=!e,s=c.fnQ.then,a=c.fnQ.fail,r=c.fnQ.done,c.isResolved?n(s,"then"):n(a,"fail"),n(r,"done")):console.warn("Already this promise has been "+(c.isResolved?"Resolved.":"Rejected.")),C([p,i,o])}function r(){a.call(c,!0,Array.prototype.slice.call(arguments))}function l(){a.call(c,!1,Array.prototype.slice.call(arguments))}var u={resolve:r,reject:l},p=setTimeout(function(){var e;q(t)?(e=t.call(u,r,l),s&&(i=setTimeout(function(){c.isPending&&a.call(c,!!e,[e])},U(e)?s:n||S))):o=setTimeout(function(){c.isPending&&a.call(c,!!t,[t])},n||S)},S)}function y(e,t,n){var s,a,r=e;return"function"==typeof n&&(s=!r.isPending,"then"===t?s=s&&r.isResolved:"fail"===t&&(s=s&&r.isRejected),s?L(a=n.apply(r,r.prevFnRes))?r=a:r.prevFnRes=[a]:r.fnQ[t].push(n)),r}function T(e){return y(this,"fail",e)}function g(e){return y(this,"done",e)}function O(e){Object.defineProperty(this,"fnQ",{value:{then:[],fail:[],done:[]}}),this.requests=e,this.responses=[],this.length=e.length,this.isPending=e.length,this.isFailed=!1,this.failed=[],this.prevFnRes;var t,r=this;function n(e){for(var t,n=r.fnQ[e];0<n.length;)try{t=void 0===r.prevFnRes?[]:[r.prevFnRes],r.prevFnRes=n.shift().apply(r,t.concat(r.responses)),M(r,r.prevFnRes,e)}catch(e){console.error("Function Execution Error.",e)}}function i(){r.isPending--;try{r.isPending||(r.isFailed?n("fail"):n("then"),n("done"),C(t))}catch(e){console.error("Function Execution Error.",e),C(t)}}t=setTimeout(function(){e.forEach(function(e,t){var n,s,a;L(e)||d(e)&&(q(e.then)||q(e.fail)||q(e.catch))?("function"==typeof e.then&&e.then(function(){r.responses[t]=o(arguments),i()}),(n="function"==typeof e.fail?"fail":"function"==typeof e.catch?"catch":"")&&e[n](function(){r.responses[t]=o(arguments),r.isFailed=!0,r.failed.push(t),i()})):("function"==typeof e?(a=void 0!==(s=e.call(r,r.requests,r.responses,t))&&!s,r.responses[t]=s,r.isFailed=r.isFailed||a,a&&r.failed.push(t)):(r.responses[t]=e,r.isFailed=r.isFailed||!e,r.isFailed&&r.failed.push(t)),i())})},S)}function R(e,t,n){var s,a,r=e;return"function"==typeof n&&(a=!r.isPending,"then"===t?a=a&&!r.isFailed:"fail"===t&&(a=a&&r.isFailed),a?(s=void 0===r.prevFnRes?[]:[r.prevFnRes],r.prevFnRes=n.apply(r,s.concat(r.responses)),L(r.prevFnRes)&&(r=r.prevFnRes)):r.fnQ[t].push(n)),r}function F(e){return R(this,"fail",e)}function P(e){return R(this,"done",e)}function G(){var n,s,a=[],r={};if(arguments.length)for(var e=0;e<arguments.length;e++)Array.isArray(arguments[e])?a=a.concat(arguments[e]):a.push(arguments[e]);a.forEach(function(e,t){"string"==typeof e&&(/^(GET|POST|PUT|DELETE|PATCH|HEAD|OPTIONS)(:+)/i.test(e)?(n=e.split(":")[0],(s=e.replace(/^(GET|POST|PUT|DELETE|PATCH|HEAD|OPTIONS)(:+)/i,""))?e={url:s,method:n}:r.method=n):e={url:e},a[t]=e),"object"!=typeof e||e.url||(r=k(r,e))});var t=[];return a.forEach(function(e){H(e)&&e.url&&!L(e)?t.push(K(k({},r,e))):L(e)?t.push(e):t.push(function(e,t,n){return arguments.length?new v(e,t,n):new v(1,S)}(e))}),new O(t)}function I(e){Object.defineProperty(this,"fnQ",{value:{then:[],fail:[],done:[]}}),this.xhr=new XMLHttpRequest,this.reqOptions=e,this.isPending=!0,this.isSuccess=!1,this.isFailed=!1,this.response="",this.prevFnRes}function m(e,t,n){var s,a,r=e;return"function"==typeof n&&(a=!r.isPending,"then"===t?a=a&&r.isSuccess:"fail"===t&&(a=a&&r.isFailed),a?(r.isFailed?(s=void 0===r.prevFnRes?r:r.prevFnRes,r.prevFnRes=n.call(r.reqOptions,s,r.statusText,r.statusMessage,r.response)):(s=void 0===r.prevFnRes?r.response:r.prevFnRes,r.prevFnRes=n.call(r.reqOptions,s,r.statusText,r,r.response)),L(r.prevFnRes)&&(r=r.prevFnRes)):r.fnQ[t].push(n)),r}function x(e){return m(this,"fail",e)}function E(e){return m(this,"done",e)}i=v,c={then:function(e){return y(this,"then",e)},else:T,fail:T,catch:T,done:g,always:g,finally:g},Object.keys(c).forEach(function(e){a(e)||(l?i.prototype[e]=c[e]:Object.defineProperty(i.prototype,e,{value:c[e]}))}),Object.defineProperties(O.prototype,{then:{value:function(e){return R(this,"then",e)}},fail:{value:F},catch:{value:F},done:{value:P},always:{value:P},finally:{value:P}}),Object.defineProperties(I.prototype,{then:{value:function(e){return m(this,"then",e)}},fail:{value:x},catch:{value:x},done:{value:E},always:{value:E},finally:{value:E}});var _={defaults:{dataType:"text",async:!0,cache:!1,method:"GET",headers:{},auth:null,timeout:0,success:null,error:null,finally:null},dataParsers:{css:function(e){var t=document.createTextNode(e),n=document.createElement("style");return n.setAttribute("id","css-"+(new Date).getTime()),n.setAttribute("type","text/css"),n.appendChild(t),document.head.appendChild(n),e},json:function(e){var t=e;try{t=JSON.parse(e)}catch(e){}return t},script:$,javascript:$},urls:{},url:B,setup:b,preFilter:w,get:function(){return s.unshift.call(arguments,"get"),K.apply(void 0,arguments)},post:function(){return s.unshift.call(arguments,"post"),K.apply(void 0,arguments)},put:function(){return s.unshift.call(arguments,"put"),K.apply(void 0,arguments)},del:function(){return s.unshift.call(arguments,"delete"),K.apply(void 0,arguments)},patch:function(){return s.unshift.call(arguments,"patch"),K.apply(void 0,arguments)},head:function(){return s.unshift.call(arguments,"head"),K.apply(void 0,arguments)},options:function(){return s.unshift.call(arguments,"options"),K.apply(void 0,arguments)}},j="url,setup,converters,preFilter,get,post,put,del,patch,head,options".split(",");function b(n){H(n)&&Object.keys(n).forEach(function(t){if(j.indexOf(t)<0)switch(t){case"dataParsers":case"urls":H(n[t])&&Object.keys(n[t]).forEach(function(e){_[t][e]=n[t][e]});break;default:_.defaults[t]=n[t]}})}function w(e){q(e)&&(_.defaults.preFilter=e)}function X(e,t){var n=A(e,t)?e[t]:_.defaults[t];return n}function $(e){var t;return e.trim()&&((t=document.createElement("script")).setAttribute("id","js-"+(new Date).getTime()),t.text=e,document.head.appendChild(t).parentNode.removeChild(t)),e}var J={200:"OK",301:"Moved Permanently",400:"Bad Request",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",511:"Network Authentication Required"},z={text:"text/plain",html:"text/html",css:"text/css",style:"text/css",csv:"text/csv",xml:"text/xml",json:"application/json",pdf:"application/pdf",script:"application/javascript",spacomponent:"application/javascript",zip:"application/zip"};function B(e){var t="@"===String(e||"")[0];e=String(e||"").replace(/^[@\s]+/,"");var n,s,a=t?_.urls[e]||h(_.urls,e,e):e,r=o(arguments,1).map(function(e){return p(e,"object|array")?e:{}}),r=Q.apply(null,r);return Object.keys(r).length&&-1<a.indexOf("{")&&u(a,"{","}",!0).forEach(function(e){n=e.replace(/[{}<>]/g,""),s=h(r,n,r._undefined),a=a.replace(new RegExp(e.replace(/([^a-zA-Z0-9])/g,"\\$1"),"g"),s)}),a}function K(){if(!arguments.length)return G.apply(null,[]);if(2===arguments.length&&D(arguments[0])&&!/^(GET|POST|PUT|DELETE|PATCH|HEAD|OPTIONS)$/i.test(arguments[0])&&H(arguments[1])&&!A(arguments[1],"url")){var e=arguments[1];return e.url=arguments[0],K(e)}if(1<arguments.length||Array.isArray(arguments[0]))return G.apply(null,arguments);if(L(arguments[0]))return arguments[0];var t=H(arguments[0])?arguments[0]:D(arguments[0])?{url:arguments[0]}:{},n={},s=[];t.skipDefaults?("string"==typeof(s=t.skipDefaults)?s=s.split(","):"boolean"==typeof s&&(s=["payload","headers"]),Array.isArray(s)&&s.length?(s=s.map(function(e){return(e=e.replace(/default/gi,"").trim())?"default"+e[0].toUpperCase()+e.slice(1):""}),Object.keys(_.defaults).forEach(function(e){s.indexOf(e)<0&&(n[e]=_.defaults[e])})):(s=[],n=k({},_.defaults))):n=k({},_.defaults),n.method=t.method||t.type||_.defaults.method;var a=k({},n,t);if(a.url){a.type=a.method=a.method.toUpperCase();var l=a.dataType.toLowerCase(),r=z[l]||(l&&l.indexOf("/")<-1?"text/"+a.dataType:a.dataType),i={},o=a.defaultHeaders;q(o)&&(o=o.call(a,a)),q(a.headers)&&(a.headers=a.headers.call(void 0,a)),H(a.headers)&&Object.keys(a.headers).forEach(function(e){i[e]=a.headers[e]}),H(o)&&(U(i)?i=o:H(i)&&(i=k(o,i))),!i.hasOwnProperty("Content-Type")&&r&&(i["Content-Type"]=r),i["X-Requested-With"]="XMLHttpRequest",i["Cache-Control"]=a.cache?"max-age=86400000":"no-cache, no-store, must-revalidate, max-age=0",i.Expires=a.cache?new Date((new Date).setDate((new Date).getDate()+1)).toUTCString():"0",a.cache||(i.Pragma="no-cache"),a.headers=i;var u,p,f,d,h,v=new I(a),c=v.xhr,y=v.reqOptions,T=v.fnQ;q(y.success)&&T.then.push(y.success),q(y.error)&&T.fail.push(y.error),q(y.finally)&&T.done.push(y.finally),Object.keys(y).forEach(function(t){var e=t.toLowerCase();"onreadystatechange"===e&&q(y[t])?h=y[t]:0===e.indexOf("on")&&q(y[t])&&(c[e]=function(e){y[t].call(c,e,v)})}),c.onreadystatechange=w;var g=y.defaultPayload;q(g)&&(g=g.call(y,y));var O=y.data;H(g)&&(U(O)?O=g:H(O)&&(O=Q(g,O))),y.data=O;var R=X(y,"preFilter");R&&q(R)&&R.call(v,y,k({},y),v);var F=B(y.url,y.urlParams,y.data);/^(GET|POST|PUT|DELETE|PATCH|HEAD|OPTIONS)(:+)/i.test(F)&&(y.method=F.split(":")[0].toUpperCase(),F=F.replace(/^(GET|POST|PUT|DELETE|PATCH|HEAD|OPTIONS)(:+)/i,"")),y.url=F;var P,m=y.method=y.method.toUpperCase(),x=y.cache,O=y.data;x||(P=(new Date).getTime(),y.headers["X-T-"+P]=P,"GET"===m&&(F+=(F.indexOf("?")<0?"?":/\?$|&$/.test(F)?"":"&")+"_="+P)),"GET"===m&&O&&(O=N(O))&&(F+=(F.indexOf("?")<0?"?":/\?$|&$/.test(F)?"":"&")+O);try{y.auth&&H(y.auth)?y.auth.hasOwnProperty("user")&&(y.auth.hasOwnProperty("pwd")?c.open(m,F,y.async,y.auth.user,y.auth.pwd):c.open(m,F,y.async,y.auth.user)):c.open(m,F,y.async);var E,j=X(y,"beforeSend"),b=!0;if(j&&q(j))try{b=(b=j.call(c,c,y))||U(b),O=y.data}catch(e){b=!1,console.warn("beforeSend function failed.",e,v)}b?(E=y.headers,H(E)&&Object.keys(E).forEach(function(e){c.setRequestHeader(e,E[e])}),y.timeout&&(c.timeout=y.timeout,u=setTimeout(function(){p=!0,v.isPending&&0<c.readyState&&c.readyState<4&&c.abort()},y.timeout)),"GET"!==m&&O?(O=D(O)?O:JSON.stringify(O),y.async?d=setTimeout(function(){c.send(O)},S):c.send(O)):y.async?d=setTimeout(function(){c.send()},S):c.send()):(f=!0,c.abort(),w())}catch(e){console.warn("XHR-Exception",c,e)}return v}function w(e){var t=this,n=t.status;if(h&&h.call(y,t,e),f||4===t.readyState){v.isPending=!1,v.readyState=t.readyState,v.status=t.status,v.responseText=t.responseText,v.response=t.responseText;var s,a,r=t.responseText;if(200<=n&&n<300||304===n){if(v.isSuccess=!0,v.statusText="success",v.statusMessage="OK",(s=A(y,"dataParser")?y.dataParser:_.dataParsers[l])&&q(s))try{a=s(r,l)}catch(e){console.warn("dataParsing failed.",r,v,e)}U(a)||(r=a);var i,o=X(y,"dataFilter");if(o&&q(o))try{i=o.call(v.reqOptions,r,l)}catch(e){console.warn("dataFilter failed.",r,v,e)}U(i)||(r=i),"json"===l&&(v.responseJSON=r)}else r=t.responseText,v.isFailed=!0,u&&p?(v.statusText="timeout",v.statusMessage="timeout"):f?(v.statusText="canceled",v.statusMessage="canceled"):(v.statusText="error",v.statusMessage=J[n]||"Unknown Error");v.response=r,v.isSuccess?c("then"):v.isFailed&&c("fail"),c("done"),C([u,d])}function c(e){for(var t,n=T[e];0<n.length;)try{v.isFailed?(t=void 0===v.prevFnRes?v:v.prevFnRes,v.prevFnRes=n.shift().call(y,t,v.statusText,v.statusMessage,v.response)):(t=void 0===v.prevFnRes?v.response:v.prevFnRes,v.prevFnRes=n.shift().call(y,t,v.statusText,v,v.response)),M(v,v.prevFnRes,e)}catch(e){console.error("Function Execution Error.",e)}}}console.error("XHR without URL.",arguments,a)}function V(){return G.apply(t,o(arguments))}e(K,_),e(V,{ajax:K,ajaxQ:G,when:G,defer:G,ajaxSetup:b,ajaxPrefilter:w}),t.spaXHR=V}(this);
/*@license SPA.js (Form Validation Extension) [MIT]*/
!function(){spa._validateDefaults={required:"Required",digits:"Digits",numbers:"Numbers",integer:"Integer",alphabet:"Alpha",alphanumeric:"AlphaNumeric",pattern:"PatternMatch",range:"ValueRange",fixedlength:"Lengths",minlength:"LengthMin",maxlength:"LengthMax",email:"Email",url:"Url",date:"Date",cardno:"CardNo",ipv4:"IPv4",ipv6:"IPv6",ipaddress:"IP",subnetmask:"Subnet",phoneUS:"PhoneUS",wordsize:"WordSize",compare:"Compare",promise:"Promise",xss:"CheckXSS",noop:"Noop"},spa._validate={defaults:{offline:!0},_isOnOfflineValidation:!1,_validateAlertTemplate:'<div class="errortxt error-txt break-txt" data-i18n=""></div>',_offlineValidationRules:{},_fn:{Noop:function(){return!0},CheckXSS:function(a){var e=spa.getElValue(a);return!(/<\s*\/?\s*(\bscript\b)/gi.test(e)||/<(.)+\s+on([a-z])+\s*=|javascript:/gi.test(e))},Promise:function(a){var e,t;return spa._validate._isOnOfflineValidation||(t=(e=$(a)).data("validate")||"",/(promise)(\s)*:(\s)*(\'|\")/.test(t)&&spa._validate._addValidationClass(e,"validation-pending")),!0},Required:function(a){var e=spa.getElValue(a);return!spa.isBlank(e)},Digits:function(a){var e=$(a).val();return 0===e.length||/^\d+$/.test(e)},Numbers:function(a){var e=$(a).val();return 0===e.length||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},Integer:function(a){var e=$(a).val();return 0===e.length||/^-?\d+$/.test(e)},Alpha:function(a){var e=$(a).val();return 0===e.length||!/[^a-z]/gi.test(e)},AlphaNumeric:function(a){var e=$(a).val();return 0===e.length||!/[^a-z0-9]/gi.test(e)},PatternMatch:function(a){var e=$(a).val(),t=0===e.length;return t||(t=new RegExp($(a).data("validatePattern"),$(a).data("validatePatternOptions").replace(/!/g,"")).test(e),0<=$(a).data("validatePatternOptions").indexOf("!")&&(t=!t)),t},ValueRange:function(a){var e,t,n,i,s,l,o=$(a).val(),r=0===o.length;return r||(r=!1,/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(o)&&(e=spa.toFloat(o),t=(" "+($(a).data("validateRange")||"")+": ").split(":"),n=!spa.isBlank(t[0]),i=!spa.isBlank(t[1]),s=spa.toFloat(t[0]),l=spa.toFloat(t[1]),n&&i?r=s<=e&&e<=l:n?r=s<=e:i&&(r=e<=l))),r},LengthMin:function(a){var e=$(a).val(),t=spa.toInt($(a).data("minlength")||$(a).data("minLength")||$(a).attr("minlength"));return e.length>=t},LengthMax:function(a){var e=$(a).val(),t=spa.toInt($(a).data("maxlength")||$(a).data("maxLength"));return e.length<=t},Lengths:function(a){var e,t,n=$(a).val().length;return a.hasAttribute("data-fixed-length")||a.hasAttribute("data-fixedlength")?n==+(a.getAttribute("data-fixed-length")||a.getAttribute("data-fixedlength")):(e=spa.toInt($(a).data("minlength")||$(a).data("minLength")||$(a).attr("minlength")),t=spa.toInt($(a).data("maxlength")||$(a).data("maxLength")),e<=n&&n<=t)},WordSize:function(a){var e=(""+$(a).val()).replace(/[-\n]/g," ").split(" ").map(function(a){return a.length});return(spa.isBlank(e)?0:Math.max.apply(null,e))<=(spa.toInt($(a).data("validWordSize"))||20)},Email:function(a){var e=$(a).val();return 0===e.length||(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)||/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i.test(e))&&/[a-z0-9]/i.test(e[e.length-1])&&1==((e||"").match(/@/g)||[]).length},Url:function(a){var e=$(a).val();return 0===e.length||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},Date:function(a){var e=$(a).val();if(!(u=0===e.length)){u=!1;var t,n,i,s,l=$(a).data("validateFormat")||"YMD",o="^\\d{1,2}[\\/\\-\\.]\\d{1,2}[\\/\\-\\.]\\d{4}$",r=e.replace(/[^a-z]/gi,"");r&&((s=["","JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"].indexOf(r.toUpperCase()))<=0&&(s=["","JANUARY","FEBRUARY","MARCH","APRIL","MAY","JUNE","JULY","AUGUST","SEPTEMBER","OCTOBER","NOVEMBER","DECEMBER"].indexOf(r.toUpperCase())),0<s&&(e=e.replace(new RegExp(r,"gi"),s)));var d,u,p=(e=e.replace(/[^0-9]/g," ").normalizeStr().replace(/ /g,"/")).split("/");switch(l.toUpperCase()){case"YMD":o="^\\d{4}[\\/\\-\\.]\\d{1,2}[\\/\\-\\.]\\d{1,2}$",t=p[0],n=p[1],i=p[2];break;case"MDY":n=p[0],i=p[1],t=p[2];break;case"DMY":i=p[0],n=p[1],t=p[2]}new RegExp(o,"").test(e)&&(i=parseInt(i,10),n=parseInt(n,10),t=parseInt(t,10),u=(d=new Date(t,n-1,i)).getFullYear()===t&&d.getMonth()===n-1&&d.getDate()===i)}return u},CardNo:function(a){var e=$(a).val(),t=0===e.length;if(!t){var n=!/[^0-9 \-]+/.test(e),i=e.replace(/[^0-9]/g,""),s=i.length;if(n&&s&&0<"0345".indexOf(i[0])&&(15==s||16==s)){for(var l=0,o=0,r=!1,d=e.replace(/\D/g,""),u=d.length-1;0<=u;u--){var p=d.charAt(u),o=parseInt(p,10);r&&9<(o*=2)&&(o-=9),l+=o,r=!r}t=l%10==0}}return t},IPv4:function(a){var e=$(a).val();return 0===e.length||/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i.test(e)&&spa.every(e.split("."),function(a){return!(1<a.length)||!a.beginsWithStr("0")})},IPv6:function(a){var e=$(a).val();return 0===e.length||/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i.test(e)},IP:function(a,e){var t,n,i,s,l,o=$(a).val(),r=0===o.length;return r||(t=o,n=spa.toInt($(a).data("validateIpaddressOctates")||4)-1,r=new RegExp("^(([01]?[0-9]?[0-9]|2([0-4][0-9]|5[0-5]))\\.){"+n+"}([01]?[0-9]?[0-9]|2([0-4][0-9]|5[0-5]))$","g").test(t)&&spa.every(t.split("."),function(a){return!(1<a.length)||!a.beginsWithStr("0")}),spa._validate._showValidateMsg(a,e,r),i=$(a).data("validateIpaddressClass"),r&&i&&(l={A:{oct1:{B:0,E:127},oct2:{B:0,E:256},oct3:{B:0,E:256},oct4:{B:1,E:255}},B:{oct1:{B:127,E:192},oct2:{B:1,E:256},oct3:{B:0,E:256},oct4:{B:0,E:255}},C:{oct1:{B:191,E:224},oct2:{B:0,E:256},oct3:{B:1,E:256},oct4:{B:1,E:255}},D:{oct1:{B:223,E:240},oct2:{B:0,E:256},oct3:{B:0,E:256},oct4:{B:0,E:256}},E:{oct1:{B:239,E:255},oct2:{B:0,E:256},oct3:{B:0,E:256},oct4:{B:0,E:255}}},r=+(s=t.split("."))[0]>l[i].oct1.B&&+s[0]<l[i].oct1.E&&(+s[1]>=l[i].oct2.B&&+s[1]<l[i].oct2.E&&(+s[2]>=l[i].oct3.B&&+s[2]<l[i].oct3.E&&(+s[3]>l[i].oct4.B&&+s[3]<l[i].oct4.E))),spa._validate._showValidateMsg(a,e,r))),r},Subnet:function(a){var e=$(a).val(),t=0===e.length;return t=t||new RegExp("^((128|192|224|240|248|252|254)\\.0\\.0\\.0)|(255\\.(((0|128|192|224|240|248|252|254)\\.0\\.0)|(255\\.(((0|128|192|224|240|248|252|254)\\.0)|255\\.(0|128|192|224|240|248|252|254)))))$").test(e)&&spa.every(e.split("."),function(a){return!(1<a.length)||!a.beginsWithStr("0")})},PhoneUS:function(a){var e=$(a).val();return 0===e.length||9<e.length&&e.match(/^(\+?1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/)},Compare:function(a){var e=0===$(a).val().length;if(!e){var t,n=$(a).data(),i=spa.toJSON(n.validateCompare||"{}");if(!spa.isBlank(i)&&i.target){t=$(i.target);var s=i.valid||"=",l=spa.getElValue(a),o=spa.getElValue(t);if(("number".equalsIgnoreCase(i.type)||0<=s.indexOf("<")||0<=s.indexOf(">"))&&(l=spa.toFloat(l),o=spa.toFloat(o)),!"date".equalsIgnoreCase(i.type))switch(s){case"!=":e=l!=o;break;case"!==":e=l!==o;break;case"===":e=l===o;break;case">":e=o<l;break;case"<":e=l<o;break;case">=":e=o<=l;break;case"<=":e=l<=o;break;default:e=l==o}}}return e}},_showValidateMsg:function(a,e,t,n,i){e=e||"";var s=$(a);if(s.length){2<arguments.length&&spa.isString(t)&&(n=t),2<arguments.length&&spa.isBoolean(t)&&t&&(e="");var l=!(n=n||spa._validate._validateAlertTemplate).beginsWithStrIgnoreCase("<"),o=s.parent(),r=s.data("errorClassTarget"),d=r?s.closest(r):o,u=s.data("errorPosition");a=s.get(0),spa._validate._isOnOfflineValidation||(d.removeClass("has-error-msg no-error-msg")[!1===t?"addClass":"removeClass"]("validation-error "+(e?"has-error-msg":"no-error-msg")),s[!1===t?"addClass":"removeClass"]("invalid-data"),i||spa.updateTrackFormCtrls(a.form));var p=l?$(n):s.next();!l&&u&&("first".equalsIgnoreCase(u)?p=o.children().first():"last".equalsIgnoreCase(u)&&(p=o.children().last()));var F,f,c,g="",v="";return $(p).attr("class")===$(n).attr("class")||l?(e.beginsWithStrIgnoreCase("i18n:")&&(spa.console.group("i18n-Msg"),spa.console.log("msg:",e),F=(e.getLeftStr("|")||e).replace(/i18n:/gi,""),v=e.getRightStr("|"),g="{html:'"+F+"'}",f=spa.toJSON(v),f=spa.isObject(f)?f:{},spa.console.log("i18nData@msg:",f),c=s.dataJSON("i18nData"),spa.isBlank(c)||(spa.console.log("i18nData@el",c),f=spa.merge(f,c),spa.console.log("i18nData:",f)),e=spa.i18n.text(F,f),spa.console.groupEnd("i18n-Msg")),spa._validate._isOnOfflineValidation||($(p).attr("data-i18n",g).data("i18n",g),$(p).attr("data-i18n-data",v).data("i18nData",v),$(p).html(e))):spa.isBlank(e)||(u?"first".equalsIgnoreCase(u)?$(n).prependTo(o):"last".equalsIgnoreCase(u)?$(n).appendTo(o):$(n).insertAfter(s):$(n).insertAfter(s),spa._validate._showValidateMsg(a,e,t,n)),t}spa.console.warn("Validation config/setup is wrong for validation Msg:["+e+"] forEl:",a)},_getValidationClassTarget:function(a){var e=$(a),t=e.data("errorClassTarget");return t?e.closest(t):e.parent()},_addValidationClass:function(a,e){spa._validate._getValidationClassTarget(a).addClass(e)},_removeValidationClass:function(a,e){spa._validate._getValidationClassTarget(a).removeClass(e)},_deferValidate:function(){return!0},_registerPromise:function(a,e,t,n){var i,s,l=!spa.isBlank(a);return!l||(s=(i=$(e)).data("promises")||"").indexOf("["+a+"]")<0&&(spa.console.log("validating promise: "+a),s+="["+a+"]",i.attr("data-promises",s).data("promises",s),spa._validate._addValidationClass(i,"validation-pending"),spa.isFunction(t)&&t.call(i,i,n,a)),l},expose:function(e){return e=e||{},spa.keys(spa._validateDefaults).forEach(function(a){e[a]=spa._validate._fn[spa._validateDefaults[a]]}),e}},spa.initValidation=spa.initDataValidation=function(a){spa.console.log(">>>>> initDataValidation request for context:"+a);function v(t){return t=t||{},spa.each(spa.keys(t),function(e){0==e.indexOf("on")&&0<e.indexOf("_")&&(spa.each(e.split("_"),function(a){a.indexOf("on")<0&&(a="on"+a),t[a]?spa.isArray(t[a])?t[a].push(t[e]):t[a]=[t[a],t[e]]:t[a]=[t[e]]}),delete t[e])}),t}a=a||"body";var e=$(a),t=e.data("validateElFilter")||"",h=v(spa.toJSON(e.data("validateCommon")||"{}")),n=spa.merge({},h.onFocus),m=!!spa.toJSON(e.attr("data-validate-defaults")||{}).offline;spa.console.log("commonValidateRules");var _,D,A,E,x,i={fn:"_check.promise",offline:!1};spa.isBlank(n)?h.onFocus=i:(spa.isArray(n)||(n=[n]),n.push(i)),h.onFocus=n,spa.console.log(h);var C=(e.data("validateForm")||e.data("validateScope")||"").replace(/onRender/i,"").replace(/[^a-zA-Z0-9]/g,"");spa.isBlank(C)&&(C=a.replace(/[^a-zA-Z0-9]/g,"")),spa.console.log("offlineValidationKey: "+C);var b=!spa.isBlank(C);b&&(spa.console.log("resetting the rules for "+C),spa._validate._offlineValidationRules[C]={rules:{}}),spa.console.log(C,spa._validate._offlineValidationRules[C]),e.find(t+"[data-validate]").each(function(a,e){var i=$(e).prop("id");i||(i=(e.name||e.type).replace(/[^a-z]/gi,"")+a,$(e).attr("id",i));var t,n,r={},s=$(e).data("validate");s&&s.indexOf("{")<0&&(t=($(e).data("validateEvents")||"onBlur").replace(/[^a-z]/gi," ").normalizeStr().replace(/ /g,"_"),n=",offline:"+($(e).data("validateOffline")||m||"false"),s="{"+t+":["+("{fn:"+s.replace(/[,;]/," ").normalizeStr().replace(/ /g,n+"},{fn:")+n+"}")+"]}"),r=v(spa.toJSON(s));var l,o,d,u={},p="",F=e.attributes;if(F&&F.length){for(var f=F.length;0<=f;f--)if((p=F[f]?F[f].name:"")&&/^data-validate-on/i.test(p)&&(l="."+(d=p.replace(/data-validate-/i,""),/^on/i.test(d)&&(d=(d=d.toLowerCase()).substring(0,2)+d[2].toUpperCase()+d.substring(3)),d),o=spa.toJSON(e.getAttribute(p)),!spa.isBlank(o)))if(Array.isArray(o))for(var c=0,g=o.length;c<g;c++)spa.setObjProperty(u,l,o[c]);else spa.setObjProperty(u,l,o);spa.isBlank(u)||(u=v(u),Object.keys(u).forEach(function(a){spa.setObjProperty(r,"."+a,u[a])}))}spa.console.log(s),spa.each(spa.keys(h),function(n){var a=h[n];spa.isArray(a)||(a=[a]),a.reverse(),spa.console.group("vRules #"+i),spa.each(a,function(a){var e,t;_=!0,D="<",E=a.offline||!1,A=!1,a.el?(e=a.el.replace(/ /g,"").split(","),t=a.el.replace(/[< >!]/g,"").split(",").indexOf(i),(_=0<=t)&&(D=0<=e[t].indexOf(">")?">":"<",A=0<=e[t].indexOf("!"))):a.ex&&(_=a.ex.replace(/[< >!]/g,"").split(",").indexOf(i)<0),_&&(x=spa.omit(a,["el","ex"]),spa.console.log(">>commonRule2El:",x,a),A&&(x.offline=!E),r[n]||(r[n]=[]),spa.console.group("-"+n),"<"===D?(spa.console.log(D+"all:",[x],r[n]),r[n]=spa.union([x],r[n])):(spa.console.log(D+"all:",r[n],[x]),r[n]=spa.union(r[n],[x])),spa.console.log("uniq:",r[n]),spa.console.groupEnd("-"+n))}),spa.console.group("-FinalRules"),spa.console.log(r),spa.console.groupEnd("-All"),spa.console.groupEnd("vRules #"+i)}),spa.each(spa.keys(r),function(o){var a=o.substring(2,3).toLowerCase()+o.substring(3);spa.console.log("settingup event on["+a+"]..."),spa.isArray(r[o])||(r[o]=[r[o]]),spa.console.log(r),b&&spa.each(r[o],function(a){spa.isArray(a)||(a=[a]),spa.each(a,function(a){var e;a.hasOwnProperty("offline")||(a.offline=m),spa.console.log(a),a.offline&&!a.promise&&(e={fn:a.fn,msg:a.msg},spa._validate._offlineValidationRules[C].rules[i]||(spa._validate._offlineValidationRules[C].rules[i]=[]),spa.indexOf(spa._validate._offlineValidationRules[C].rules[i],e)<0&&spa._validate._offlineValidationRules[C].rules[i].push(e))})}),spa.console.log("registering an event: "+o),o.beginsWithStrIgnoreCase("on")&&!"test".equalsIgnoreCase(a)&&$(e).on(a,function(){var e,t,n,i=this,a=$(i),s=i&&i.hasAttribute("data-validate-pause")&&spa.toBoolean(i.getAttribute("data-validate-pause")+""||"true"),l=i&&i.hasAttribute("data-ignore-validation-if-invisible")&&spa.toBoolean(i.getAttribute("data-ignore-validation-if-invisible")+""||"true");s||l&&!a.is(":visible")||spa.every(r[o],function(a){return spa.isArray(a)?spa.every(a,function(a){return e=a.fn,spa.isString(e)&&(e=spa.findSafe(window,e)),spa.isFunction(e)||console.error("data-validate-function Not Found: "+a.fn),t=a.msg||$(i).data("validateMsg")||"",spa._validate._registerPromise(a.promise,i,e,t)&&(e=spa._validate._deferValidate),n=!!spa.isFunction(e)&&e.call(i,i,t),spa.isBoolean(n)&&spa._validate._showValidateMsg(i,t,n),n}):(e=a.fn,spa.isString(e)&&(e=spa.findSafe(window,e)),spa.isFunction(e)||console.error("data-validate-function Not Found: "+a.fn),t=a.msg||$(i).data("validateMsg")||"",spa._validate._registerPromise(a.promise,i,e,t)&&(e=spa._validate._deferValidate),n=!!spa.isFunction(e)&&e.call(i,i,t),spa.isBoolean(n)&&spa._validate._showValidateMsg(i,t,n),n)})})})})},spa.validateForm=spa.validate=spa.doDataValidation=function(a,e,o){var t;spa.isString(arguments[1])&&(t="#"+arguments[1].replace(/[ #]/g,"").replace(/,/g,",#")+",",e=arguments[2],o=arguments[3]);var r,n,i,s,l=a.replace(/[^a-zA-Z0-9]/g,""),d="#"+a.replace(/#/g,""),u=$(d),p=[];return spa._validate._offlineValidationRules[l]?(r=spa._validate._offlineValidationRules[l].rules,spa.isEmptyObject(r)?(n=1,i="Offline rules not found in scope ["+a+"].",u.find(".validation-error,.validation-pending").length&&(n=3,i+=" Found .validation-error|.validation-pending"),p=[{errcode:n,errmsg:i}]):(s=spa.keys(r),t&&(s=s.map(function(a){return 0<=t.indexOf("#"+a+",")?a:""})),spa._validate._isOnOfflineValidation=!e,spa.every(s,function(a){return!a||(e=a,s=u.find("#"+e),(l=s[0])&&l.hasAttribute("data-validate-pause")&&spa.toBoolean(l.getAttribute("data-validate-pause")+""||"true")||spa.toBoolean(s.data("ignoreValidationIfInvisible"))&&!s.is(":visible")||spa.every(r[e],function(a){var e;return n=a.fn,spa.isString(n)&&(n=spa.findSafe(window,n)),spa.isFunction(n)||console.error("data-validate-function Not Found: "+a.fn),t=a.msg||s.data("validateMsg")||"",i=!!spa.isFunction(n)&&n.call(l,l,t),spa.isBoolean(i)&&spa._validate._showValidateMsg(s,t,i,"",!0),i||(e={errcode:2,el:l,fn:a.fn,msg:t},p.push(e)),i})||o);var e,t,n,i,s,l}),spa._validate._isOnOfflineValidation=!1)):u.length?u.is("[data-validate-form]")&&(p=[{errcode:1,errmsg:"Form Not Initialized."}]):p=[{errcode:1,errmsg:"Form Not Found."}],p},spa.pauseValidation=function(a,e){var t=void 0===e||e;$(a).each(function(a,e){t?e.setAttribute("data-validate-pause",t):e.removeAttribute("data-validate-pause")})},spa.clearValidation=spa.removeValidationMsg=function(a){a&&$(a).each(function(a,e){spa._validate._showValidateMsg(e,"",!0)})},spa.updateValidation=function(a,t,n,i){2==arguments.length&&(n=spa.isBlank(t)),$(a).each(function(a,e){spa._validate._showValidateMsg(e,t,n,i)})},spa.updateValidationPromise=function(t,a,n,i,s){var l,o;$(a).each(function(a,e){l=$(e),spa.each(t.split(","),function(a){o=(l.data("promises")||"").replace("["+a.trim()+"]",""),l.attr("data-promises",o).data("promises",o),spa.isBlank(o)&&spa._validate._removeValidationClass(l,"validation-pending")}),spa._validate._showValidateMsg(e,n,i,s)})},this._clearSpaValidateMsg=function(a){return spa._validate._showValidateMsg(a),!0},this._check=spa._validate.expose()}();
/*@license SPA.js (Handlebars Helpers) [MIT]*/
!function(){var O=Array.prototype;function E(e){return Object.prototype.toString.call(e).replace(/\[object /,"").replace(/\]/,"").toLowerCase()}function C(e,t){return 0<=(""+t).toLowerCase().indexOf(E(e))}function n(e,t){function n(e,t){for(var n=t.split(","),r="",a=0,o=!0,i=0;i<n.length;i++)(r=n[i].trim())&&(a++,o=o&&e.hasOwnProperty(r));return a&&o}var r=!1;if(C(e,"object")&&t)switch(!0){case 0<(t=""+t).indexOf("&"):r=n(e,t.replace(/\&/g,","));break;case 0<t.indexOf("|"):r=function(e,t){for(var n=t.split(","),r="",a=0,o=!1,i=0;i<n.length&&((r=n[i].trim())&&(a++,o=o||e.hasOwnProperty(r)),!o);i++);return a&&o}(e,t.replace(/\|/g,","));break;default:r=n(e,t)}return r}function a(e,t){return!!(C(e,"object")&&n(e,"name,hash,data")&&n(e.data,"root"))&&(!t||e.name==t)}function M(e){return a(e)&&n(e,"fn,inverse")}function S(e){return a(e)&&Object.keys(e.hash).length}function D(e,t){var n=S(e)?e.hash:{};return t?(Object.keys(n).forEach(function(e){t[e]=C(n[e],"string")?n[e].trim():n[e]}),t):n}function w(e,t){var n=S(e)?e.hash:{};return t?(Object.keys(n).forEach(function(e){t[e]=n[e]}),t):n}function e(){if(arguments.length<2)throw console.error("missing argument(s)"),new Error("missing argument(s)");for(var s,e,t,c=O.splice.call(arguments,arguments.length-1,1)[0],u=c.data.root||{},f=c.hasOwnProperty("fn")||c.hasOwnProperty("inverse"),n=":if"==c.name,r={"==":function(e,t){return e==t},"===":function(e,t){return e===t},"!=":function(e,t){return e!=t},"!==":function(e,t){return e!==t},"<":function(e,t){return e<t},">":function(e,t){return t<e},"<=":function(e,t){return e<=t},">=":function(e,t){return t<=e},":typeof":function(e,t){return typeof e===t},":instanceof":function(e,t){return E(e).toLowerCase()===(""+t).trim().toLowerCase()},":is":function(e,t){return E(e).toLowerCase()===(""+t).trim().toLowerCase()},"=ic":function(e,t){return(""+e).toLowerCase()==(""+t).toLowerCase()},"!=ic":function(e,t){return(""+e).toLowerCase()!=(""+t).toLowerCase()},"+":function(e,t){return e+t},"-":function(e,t){return e-t},"*":function(e,t){return e*t},"/":function(e,t){return e/t}},a=Object.keys(r),o=O.slice.call(arguments),i=0;i<o.length;i++)if("string"===E(o[i])&&(t=o[i],s=0<=a.indexOf(t)?i:0)){e=o[i];break}if(n&&(!f||!C(o[0],"function")&&!s))throw new Error("[Template Syntax Error] :if must have 'CONDITION' and BLOCK. use {{#:if ... 'CONDITION' ... }} ... {{else}} ... {{/:if}}");if(s){var l=o.slice(0,s),p=o.slice(s+1),d=m.apply(void 0,l),h=m.apply(void 0,p),g=r[e](d,h);if(f){var b,y=d,v=h;return S(c)&&(b=w(c))&&((b.hasOwnProperty("thenWith")||b.hasOwnProperty("with")||b.hasOwnProperty("thenContext")||b.hasOwnProperty("context")||b.hasOwnProperty("thenData")||b.hasOwnProperty("data"))&&(y=b.thenWith||b.with||b.thenContext||b.context||b.thenData||b.data),(b.hasOwnProperty("elseWith")||b.hasOwnProperty("with")||b.hasOwnProperty("elseContext")||b.hasOwnProperty("context")||b.hasOwnProperty("elseData")||b.hasOwnProperty("data"))&&(v=b.elseWith||b.with||b.elseContext||b.context||b.elseData||b.data)),g?c.fn(y):c.inverse(v)}return g}return m.apply(void 0,arguments);function m(){var r,a,o=O.slice.call(arguments);function i(t){if(void 0===r)r=t;else{var e=E(t);switch(E(r)){case"array":switch(e){case"array":r=r.concat(t);break;default:r.push(t)}break;case"object":switch(e){case"array":for(var n=0;n<t.length;n++)r[n]=t[n];break;case"object":Object.keys(t).forEach(function(e){r[e]=t[e]});break;default:r["_"+(Object.keys(r).length+1)]=t}break;default:switch(e){case"object":t=JSON.stringify(t);break;case"array":t=t.join()}r+=" "+t}}}if(o.forEach(function(e,t){if(!a)switch(E(e)){case"function":var n=o.slice(t+1);n.push(u);var r=e.apply(void 0,n);f?s?i(r):"boolean"===E(r)?i(r?c.fn(r):c.inverse(r)):i(c.fn(r)):i(r),a=!0;break;case"array":f?s?i(e):e.length?e.forEach(function(e){i(c.fn(e))}):i(c.inverse(u)):i(e);break;case"object":f?s?i(e):Object.keys(e).length?i(c.fn(e)):i(c.inverse(u)):i(e);break;default:i(f?s?e:e?c.fn(u):c.inverse(u):e)}}),f)return r;switch(E(r)){case"object":return JSON.stringify(r);case"array":return r.join();default:return r}}}function B(e){return E(e)}function o(e,t){var n=arguments[arguments.length-1],r=a(t)?"undefined":t;return M(n)?C(e,r)?n.fn(e):n.inverse(e):C(e,r)}function t(e){return(""+(e||"")).toLowerCase()}function r(e){return(""+(e||"")).toUpperCase()}function i(e){return(""+(e||"")).toLowerCase().replace(/^(.)|\s(.)/g,function(e){return e.toUpperCase()})}function s(e){return(""+e).charAt(0).toLowerCase()+(""+e).slice(1)}function c(e){return d(e).replace(/\s+/g," ")}function u(e){return e=(e=(""+e).replace(/[^+-0123456789.]/g,"")).trim().length?0<=e.indexOf(".")?e.substring(0,e.indexOf(".")):e:"0",parseInt(1*e,10)}function f(e){return e=(e=(""+e).replace(/[^+-0123456789.]/g,"")).trim().length?e:"0",parseFloat(1*e)}function l(e){switch(E(e)){case"object":return JSON.stringify(e);case"array":return e.join();default:return""+e}}function p(e){switch(E(e)){case"function":return!0;case"object":return 0<Object.keys(e).length;case"array":return 0<e.length;default:var t=!0;switch((""+e).trim().toLowerCase()){case"":case"0":case"-0":case"nan":case"null":case"false":case"undefined":t=!1}return t}}function d(e,t){return e=l(e),C(t,"string")?h(g(e,t),t):e.trim()}function h(e,t){return e=l(e),C(t,"string")||(t=""),e.replace(new RegExp("^["+(t||"\\s")+"]+","g"),"")}function g(e,t){return e=l(e),C(t,"string")||(t=""),e.replace(new RegExp("["+(t||"\\s")+"]+$","g"),"")}function b(e,t){return e=l(e),C(t,"string|number")||(t=0),"string"==typeof t&&(t=e.indexOf(t)),(t=u(t))?e.substr(0,t):""}function y(e,t){e=l(e),C(t,"string|number")||(t=0);var n=1;return"string"==typeof t&&(n=t.length,t=e.indexOf(t)),(t=u(t))<0?"":e.substr(t+n)}function v(e){var t=arguments[arguments.length-1];return M(t)?void 0===e?t.fn(e):t.inverse(e):void 0===e}function m(e){var t;if(v(e)||null===e)t=!0;else switch(E(e)){case"undefined":case"null":t=!0;break;case"function":t=!1;break;case"object":t=0==Object.keys(e).length;break;case"array":t=0==e.length;break;case"boolean":t=e;break;case"number":t=0==e;break;case"string":t=0==e.trim().length;break;default:t=!1}var n=arguments[arguments.length-1];return M(n)?t?n.fn(e):n.inverse(e):!!t}function P(e,t){var n=[];return m(e)||(n=t?e.split(t):0<e.indexOf(",")?e.split(","):0<e.indexOf("|")?e.split("|"):0<e.indexOf(" ")?e.split(" "):0<e.indexOf("-")?e.split("-"):[e]),n}function I(e){var t;return C(e,"string")&&(e=e.trim())&&(C(t=T(window,e),"function")||(t=void 0)),t}function x(n,e){var r,t,a,o,i=arguments[arguments.length-1],s="",c={sortOn:"",sortBy:"",splitBy:",",alias:"",fnFilter:"",fnEmpty:"",fnEnd:"",fnError:""},u=!1,f=0;if(S(i)&&(c=D(i,c),r=I(c.fnFilter),t=I(c.fnEmpty),a=I(c.fnEnd),o=I(c.fnError)),M(i)){switch(B(n)){case"string":n=P(n,c.splitBy);case"array":if(c.sortOn||c.sortBy){var l="sortOn:"+c.sortOn.trim()+";sortBy:"+(c.sortBy||"asc").trim();n=N(n,l)}case"object":if(m(n))s+=i.inverse(n);else{var p,d=C(e,"string")&&e.trim()?P(e):c.alias?P(c.alias):["",""],h=(d[0]||"").trim(),g=(d[1]||"").trim(),b=g||"index";u=!0,Object.keys(n).forEach(function(e,t){c.key=e,p=h?{}:n[e],h&&(h&&(p[h]=n[e]),g&&(p[g]=e)),r?(c[b+"Src"]=t,r.call(void 0,p)&&(c[b]=f++,s+=i.fn(p,{data:c}))):(c[b]=f++,s+=i.fn(p,{data:c}))})}break;default:o&&o.call(void 0,n),s+=i.inverse(n)}return u&&(f?a&&a.call(void 0,n):(t&&t.call(void 0,n),s+=i.inverse(n))),s}return n}function k(){return e.apply(void 0,arguments)?"disabled":""}function j(){return e.apply(void 0,arguments)?"":"disabled"}function L(e){if(C(e,"number"))return!0;if(C(e,"string")){var t=e.replace(/[0-9]/g,"").trim();return 0<e.length&&(""==t||1<e.length&&"."==t)}return!1}function T(e,t,n){return spa.findInObject(e,t,n)}function N(e,t){var n,r,a=arguments[arguments.length-1],o=[],i={sortOn:"",sortBy:"asc",splitBy:","};function s(e,t){return e<t?-1:t<e?1:0}if(S(a)?i=D(a,i):C(t,"string")&&P(t,";").forEach(function(e){var t=e.split(":");i[t[0].trim()]=C(t[1],"undefined")?"":t[1].trim()}),n="asc"==i.sortBy.toLowerCase(),r=i.sortOn||"",C(e,"string")&&0<e.length&&(e=P(e,i.splitBy)),C(e,"array")&&0<e.length){if(1==e.length)o=e;else switch(E(e[0])){case"number":o=e.sort(function(e,t){return e-t});break;case"string":o=L(e[0])?e.sort(function(e,t){return 1*e-1*t}):e.sort();break;case"boolean":o=e.sort(function(e,t){return s(e,t)});break;case"object":if(r)switch(E(T(e[0],r))){case"number":o=e.sort(function(e,t){return T(e,r)-T(t,r)});break;case"string":o=L(T(e[0],r))?e.sort(function(e,t){return 1*T(e,r)-1*T(t,r)}):e.sort(function(e,t){return s(T(e,r),T(t,r))});break;case"boolean":o=e.sort(function(e,t){return s(T(e,r),T(t,r))});break;default:o=e}else o=e;break;default:o=e}n||(o=o.reverse())}return M(a)?o.length?a.fn(o):a.inverse(e):o}function F(){var t,e=O.pop.call(arguments);function n(e){if(!C(e,"undefined|null"))switch(E(t)){case"undefined":case"null":t=e;break;case"array":switch(E(e)){case"array":t=t.concat(e);break;default:t.push(e)}break;case"object":switch(E(e)){case"object":t=function n(){var r={},e=0,t=arguments.length;function a(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&("[object Object]"===Object.prototype.toString.call(e[t])?r[t]=n(r[t],e[t]):r[t]=e[t])}for(;e<t;e++)a(arguments[e]);return r}(t,e);break;default:t.hasOwnProperty("__joined__")?t.__joined__.push(e):t.__joined__=[e]}break;default:switch(E(e)){case"array":e.length&&(t+=e.join());break;case"object":Object.keys(e).length&&(t+=JSON.stringify(e));break;default:t+=""+e}}}return O.forEach.call(arguments,function(e){n(e)}),M(e)?e.fn(t):t}function _(){var e=s(O.pop.call(arguments).name.replace(/:console/g,""));"time"==e&&arguments.length&&console.log.apply(void 0,arguments),0==e.indexOf("mem")?console.log(console.memory):console[e].apply(void 0,arguments)}"undefined"!=typeof Handlebars&&Handlebars&&Handlebars.registerHelper({":":e,":if":e,":is":o,":isEmpty":m,":ofType":B,":?":function(e,t,n){return p(e)?t:n},":ifEmpty":function(e,t,n){return m(e)?t:C(n,"object")&&":ifEmpty"==n.name?e:n},":ifNotEmpty":function(e,t,n){return m(e)?C(n,"object")&&":ifNotEmpty"==n.name?e:n:t},":of":function(e,t){var n=arguments[arguments.length-1],r=o(e,"array|object")?T(e,t):e;return M(n)?void 0!==r?n.fn(r):n.inverse(r):r},":each":x,":forEach":x,":split":function(e,t){var n=arguments[arguments.length-1],r=P(e,o(t,"string")?t:void 0);return M(n)?m(r)?n.inverse(e):n.fn(r):r},":sort":N,":join":F,":merge":F,":joinWithStr":function(){var e=O.pop.call(arguments),t=O.shift.call(arguments),n=O.join.call(arguments,t);return M(e)?e.fn(n):n},":fn":function(){var e,t,n,r=O.pop.call(arguments),a=O.shift.call(arguments),o=I(a);return o&&(a.match("]$")?e=a.substring(0,a.lastIndexOf("[")):0<a.indexOf(".")&&(e=a.substring(0,a.lastIndexOf("."))),t=e?T(window,e):window,n=o.apply(t,arguments)),M(r)?C(n,"undefined")||C(n,"boolean|number|string")&&!n||C(n,"array|object")&&spa.isBlank(n)?r.inverse(n):r.fn(n):n},":jsonify":function(){var e=O.pop.call(arguments),t=O.shift.call(arguments),r={},g=O.splice.call(arguments,0);return C(t,"string")&&P(t,";").forEach(function(e){var t=b(e,":").trim(),n=y(e,":").trim();t&&(n=function t(e){e=e.trim();if(!e.length)return e;var n=e[0],r=e;switch(!0){case"true"==e:r=!0;break;case"false"==e:r=!1;break;case L(e):r=1*e;break;case"["==n:e=e.substring(1,e.lastIndexOf("]"))+",";case 0<e.indexOf(",")&&e.indexOf("{")<0:var a=[];e.split(",").forEach(function(e){""!=(e=e.trim())&&a.push(t(e))}),r=a;break;case"{"==n:e=e.substring(1,e.lastIndexOf("}"));var o,i,s={};e.split(",").forEach(function(e){e=e.trim(),o=b(e,":").trim(),i=y(e,":").trim(),o&&(s[o]=t(i))}),r=s;break;case"@"==n&&"["!=e[1]:var c=e.substring(1,e.indexOf("."));if(L(c)){r=g[c];var u=0<e.indexOf(".")?e.substr(e.indexOf(".")+1):"";u&&C(r,"array|object")&&(r=T(r,u))}}if(C(r,"string")&&0<=r.indexOf("@[")){var f,l,p,d,h=r.match(/(@\[\s*(.*?)\s*])/g);h&&h.forEach(function(e){f=e.replace(/@\[/,"").replace(/]/,""),l=f.substring(0,f.indexOf(".")),p="",L(l)&&(p=g[l],(d=0<f.indexOf(".")?f.substr(f.indexOf(".")+1):"")&&C(p,"array|object")&&(p=T(p,d))),r=r.replace(new RegExp(e.replace(/\[/,"\\["),"g"),p)})}return r}(n),r[t]=n)}),M(e)?e.fn(r):r},":jsonParse":function(){var t=O.pop.call(arguments),e=O.shift.call(arguments),n={};if(C(e,"string"))try{n=JSON.parse(e)}catch(e){if(M(t))return t.inverse(e)}return M(t)?t.fn(n):n},":consoleClear":_,":consoleLog":_,":consoleWarn":_,":consoleInfo":_,":consoleError":_,":consoleGroup":_,":consoleGroupEnd":_,":consoleGroupCollapsed":_,":consoleMem":_,":consoleMemory":_,":consoleProfile":_,":consoleProfileEnd":_,":consoleTable":_,":consoleTime":_,":consoleTimeEnd":_,":options":function(t,e){var a,o,i,n,r,s,c,u,f,l,p,d=arguments[arguments.length-1],h="",g=-1,b={value:"",text:"",value_text:"",splitBy:",",vtSplit:"",sortOn:"",sortBy:"",fnFilter:"",fnEmpty:"",fnEnd:"",selIndex:"",selValue:"",selText:""},y=[],v=[],m=[],O="",w=[];function x(e,t){w.push({value:e,text:t})}function k(e,t){return g++,'<option value="'+e+'" '+(n=e,r=t,a&&0<=y.indexOf(""+g)||o&&0<=v.indexOf(""+n)||i&&0<=m.indexOf(""+r)?"selected":"")+">"+t+"</option>";var n,r}switch(C(e,"string")&&P(e,";").forEach(function(e){var t=e.split(":");b[t[0].trim()]=C(t[1],"undefined")?"":t[1].trim()}),S(d)&&(b=D(d,b)),y=b.selIndex?P(b.selIndex):[],v=b.selValue?P(b.selValue):[],m=b.selText?P(b.selText):[],a=y.length,o=v.length,i=m.length,O=b.value||b.value_text,f=b.text||b.value_text,l=(b.vtSplit||"").replace(/colon/gi,":"),p="index"==O.toLowerCase(),n=b.sortOn.trim(),(r=b.sortBy.trim())&&!n&&(n="text"),n&&!r&&(b.sortBy="asc"),s=I(b.fnFilter),c=I(b.fnEmpty),u=I(b.fnEnd),C(t,"string")&&(t=P(t,b.splitBy)),B(t)){case"object":Object.keys(t).forEach(function(e){x(e,t[e])});break;case"array":t.forEach(function(t,e){switch(E(t)){case"object":var n=Object.keys(t);O&&f?x(t[O],t[f]):1==n.length&&n.forEach(function(e){x(e,t[e])});break;case"string":if(p){x(e,t);break}t=l?t.split(l):[t];case"array":O&&f?x(t[O],t[f]):1==t.length?x(t[0],t[0]):1<t.length&&x(t[0],t[1]);break;default:x(p?e:t,t)}})}if(s&&w.length){var j=[];w.forEach(function(e,t){e.index=t;var n=s.call(void 0,e);n&&j.push(C(n,"object")?n:e)}),w=j}if(w.length){if(n||r)w=N(w,"sortOn:"+n+";sortBy:"+r);w.forEach(function(e){h+=k(e.value,e.text)}),u&&u.call(void 0,w,t)}else c&&c.call(void 0,w,t);return M(d)?h?d.fn(new Handlebars.SafeString(h)):d.inverse(this):new Handlebars.SafeString(h)},":checkedIf":function(){return e.apply(void 0,arguments)?"checked":""},":checkedIfNot":function(){return e.apply(void 0,arguments)?"":"checked"},":enabledIf":j,":enabledIfNot":k,":disabledIf":k,":disabledIfNot":j,":selectedIf":function(){return e.apply(void 0,arguments)?"selected":""},":selectedIfNot":function(){return e.apply(void 0,arguments)?"":selected},":lower":t,":lowerCase":t,":toLowerCase":t,":lowerCaseOf":t,":upper":r,":upperCase":r,":toUpperCase":r,":upperCaseOf":r,":title":i,":titleCase":i,":toTitleCase":i,":titleCaseOf":i,":capitalize":function(e){return(""+e).charAt(0).toUpperCase()+(""+e).slice(1)},":unCapitalize":s,":normalize":c,":normalizeStr":c,":int":u,":toInt":u,":intOf":u,":float":f,":toFloat":f,":floatOf":f,":toStr":l,":toString":l,":toBool":p,":toBoolean":p,":trim":d,":trimStr":d,":trimLeft":h,":trimLeftStr":h,":trimRight":g,":trimRightStr":g,":replace":function(e){var t=arguments[arguments.length-1],n={searchStr:"",replaceStr:"",rxPattern:"",rxOption:""};return S(t)&&(n=w(t,n)),n.rxPattern?(""+e).replace(new RegExp(n.rxPattern,n.rxOption),n.replaceStr):(""+e).replace(n.searchStr,n.replaceStr)},":getLeftStr":b,":getRightStr":y,":dateNowMs":function(){return""+(new Date).getTime()},":dateNow":function(e){var t=new Date;if(!C(e,"string"))return""+t;var n=e,r=["January","February","March","April","May","June","July","August","September","October","November","December"],a=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],s=["Su","Mo","Tu","We","Th","Fr","Sa"];function c(e){return(9<e?"":"0")+e}var u={YYYY:t.getFullYear(),YY:t.getFullYear(),Y:t.getFullYear(),Mmmm:r[t.getMonth()],MMMM:r[t.getMonth()].toUpperCase(),Mmm:a[t.getMonth()],MMM:a[t.getMonth()].toUpperCase(),"0M":c(t.getMonth()+1),MM:t.getMonth()+1,Dddd:o[t.getDay()],DDDD:o[t.getDay()].toUpperCase(),Ddd:i[t.getDay()],DDD:i[t.getDay()].toUpperCase(),Dd:s[t.getDay()],DD:s[t.getDay()].toUpperCase(),"0d":c(t.getDate()),dd:t.getDate(),"0h":c(t.getHours()),hh:t.getHours(),"0m":c(t.getMinutes()),mm:t.getMinutes(),"0s":c(t.getSeconds()),ss:t.getSeconds(),ms:t.getMilliseconds()};return Object.keys(u).forEach(function(e){n=n.replace(e,u[e])}),n},":moment":function(e,t,n){return"undefined"==typeof moment?(console.warn("Missing moment.js"),e):C(n,"string")?moment(e,t).format(n):a(n)?moment(e).format(t):a(t)?moment().format(e):a(e)?moment():void 0},":rand":function(e,t){return C(e,"number")||(e=1),C(t,"number")||(t=e+999),Math.floor(Math.random()*(t-e+1))+e},":randPwd":function(e,t){C(e,"number")||(e=8),C(t,"string")||(t=""),e=e||8;for(var n=t||"9a8b77C8D9E8F7G6H5I4J3c6d5e4f32L3M4N5P6Qg2h3i4j5kV6W5X4Y3Z26m7n8p9q8r7s6t5u4v3w2x3y4z5A6BK7R8S9T8U7",r="",a=0;a<e;a++){var o=Math.floor(Math.random()*n.length);r+=n.charAt(o)}return r},":ifDefined":function(e){var t=arguments[arguments.length-1];return M(t)?void 0!==e?t.fn(e):t.inverse(e):void 0!==e},":ifUndefined":v,":bytesToSize":function(e){if(0==e)return"0";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return parseFloat(e/Math.pow(1024,t)).toFixed(2)+" "+["Bytes","KB","MB","GB","TB","PB"][t]}})}();
