/*@license SPA.js (nxT: Template Extension) [MIT] - based on doT.js (https://github.com/olado/doT/blob/master/LICENSE-DOT.txt)*/
!function(x){"use strict";function nxT(e,t,r,n,o){return render(e,t,r,n,o)}nxT.version="1.0.0",nxT.settings={scopeName:"data",strip:!1,log:!0},nxT.compile=function compile(e,t){var n,i,r=s,o="if (arguments.length) return arguments.callee.call(arguments[0]);var "+(nxT.settings.scopeName||"data")+"=___rootCtx=___this=this;try{with(Object(this)){",a=r.append?u.append:u.split,c=0,t=r.rx.use||r.rx.define?function resolveDefs(o,e,i){return("string"==typeof e?e:e.toString()).replace(o.rx.define||l,function(e,n,t,r){return(n=0===n.indexOf("def.")?n.substring(4):n)in i||(":"===t?(o.rx.defineParams&&r.replace(o.rx.defineParams,function(e,t,r){i[n]={arg:t,text:r}}),n in i||(i[n]=r)):new Function("def","def['"+n+"']="+r)(i)),""}).replace(o.rx.use||l,function(e,t){o.rx.useParams&&(t=t.replace(o.rx.useParams,function(e,t,r,n){var o;if(i[r]&&i[r].arg&&n)return o=(r+":"+n).replace(/'|\\/g,"_"),i.__exp=i.__exp||{},i.__exp[o]=i[r].text.replace(new RegExp("(^|[^\\w$])"+i[r].arg+"([^\\w$])","g"),"$1"+n+"$2"),t+"def.__exp['"+o+"']"}));t=new Function("def","return "+t)(i);return t&&resolveDefs(o,t,i)})}(r,e,t||{}):e;t=("var out='"+(nxT.settings.strip?function strip(e){return stripJsComments(e).replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t/g,"")}(t):t).replace(/'|\\/g,"\\$&").replace(/{{\/(~|each)}}/g,"{{~}}").replace(r.rx.blockClose||l,function(e,t){return"';}out+='"}).replace(r.rx.evaluate||l,function(e,t){return"';"+fixVarPath(t=nxT.settings.strip?t:stripJsComments(t))+";out+='"}).replace(r.rx.encode||l,function(e,t,r){return n=!0,a.startencode+fixVarPath(r)+a.end}).replace(r.rx.conditionalElse||l,function(e,t,r,n){return n?"';}else if("+fixVarPath(n)+"){out+='":"';}else{out+='"}).replace(r.rx.conditional||l,function(e,t,r,n){return r?n?"';}else if("+fixVarPath(n)+"){out+='":"';}else{out+='":n?"';if("+fixVarPath(n)+"){out+='":"';}out+='"}).replace(r.rx.conditionalNot||l,function(e,t,r,n){return n?"';if(!("+fixVarPath(n)+")){out+='":"';}out+='"}).replace(r.rx.withScope||l,function(e,t,r){return r?"';with(Object("+fixVarPath(r)+")){out+='":"';}out+='"}).replace(r.rx.iterate||l,function(e,t,r,n,o){return(r=r&&fixVarPath(r))?"';var arr"+(c+=1)+"=(Array.isArray("+r+"))? [].slice.call("+r+") : "+r+";var arr"+c+"Len=Object.keys(arr"+c+").length; if(arr"+c+"Len){var arr"+c+"item,"+(n=n||"value")+","+(i=o||"i"+c)+"=-1,l"+c+"=arr"+c+"Len-1;while("+i+"<l"+c+"){arr"+c+"item=arr"+c+"["+i+"+=1];(function (___p){var ___this="+n+"=this, ___index=___key="+(o?o+"=":"")+i+";with(Object(this)){out+='":"';}}).call(arr"+c--+"item);} } out+='"}).replace(r.rx.interpolate||l,function(e,t){return a.start+fixVarPath(t)+a.end})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,""),n&&(r.selfContained||!x||x._encodeHTML||(x._encodeHTML=nxT.encodeHTMLSource(r.doNotSkipEncoded)),t="var encodeHTML = typeof _encodeHTML !== 'undefined' ? _encodeHTML : ("+nxT.encodeHTMLSource.toString()+"("+(r.doNotSkipEncoded||"")+"));"+t);try{return new Function("_ctxObj_",o+t+'}}catch(e){ (nxT.settings.log && console.warn("Error in Template[nxT]:", e)); }')}catch(e){throw"undefined"!=typeof console&&console.warn("Could not create a template function:",t),e}},nxT.render=render;var s={rx:{interpolate:/\{\{([\s\S]+?(\}?)+)\}\}/g,encode:/\{\{(\&|\{|encode)([\s\S]+?)\}?\}\}/g,conditional:/\{\{(\?|#\?|if|#if)(\?|\^)?\s*([\s\S]*?)\s*\}\}/g,conditionalNot:/\{\{(\!|#\!|unless|#unless)(\?)?\s*([\s\S]*?)\s*\}\}/g,conditionalElse:/\{\{(\^|else)(\?|if|If)?\s*([\s\S]*?)\s*\}\}/g,withScope:/\{\{(with|#with)\s*([\s\S]*?)\s*\}\}/g,blockClose:/\{\{\/\s*([\s\S]*?)\s*\}\}/g,evaluate:/\{\{js:([\s\S]+?)(\/)?\}\}/g,iterate:/\{\{(~|each|#each)\s*(?:\}\}|([\s\S]+?)\s*(?:\:\s*([\w$]+))?\s*(?:\:\s*([\w$]+))?\s*\}\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)(#|\/)\}\}/g,defineParams:/^\s*([\w$]+): ([\s\S]+)/,use:/\{\{#>([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\: \s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g},append:!1,selfContained:!1,doNotSkipEncoded:!1},u=(nxT.encodeHTMLSource=function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},r=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return e?e.toString().replace(r,function(e){return t[e]||e}):""}},nxT.isObj=function(e){return"object"==Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},nxT.isValidVar=function(e){return!/[^0-9a-z]|^[0-9]+/gi.test(e)},x.nxT=x.Tee=nxT,"undefined"!=typeof module&&module.exports?module.exports=nxT:"function"==typeof define&&define.amd&&define(function(){return nxT}),{append:{start:"'+(",end:")+'",startencode:"'+encodeHTML("},split:{start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("}}),l=/$^/;function fixVarPath(e){return e=(e="."===(e=e.trim().replace(/\@/g,"___").replace(/this/g,"___this").replace(/\.\//g,"___this.").replace(/\//g,"___rootCtx."))[0]?"___this"+e:e).replace(/\.+$/g,"").replace(/\.\[/g,"[").replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}function stripJsComments(e){return e.replace(/\/\/(.*)(\r|\n)/g,"$2").replace(/\/\*[\s\S]*?\*\//g,"")}var _="nxT";function getTmplType(e){return e=e.replace(/\s+/g,""),/[^a-z_0-9]/gi.test(e)?/:[a-z_0-9]+$/i.test(e)&&e.substring(e.lastIndexOf(":")+1)||"":e}function render(e,t,r,n,o){var l;if("function"!=typeof o)switch(!0){case"function"==typeof t:o=t,t=l;break;case"function"==typeof r:o=r,r=l;break;case"function"==typeof n:o=n,n=l}var i,p=e instanceof Element;if("function"==typeof e)i=e;else{if("string"!=typeof e&&!p)return void console.error("Invalid Template",e);p&&(e="#"+(s=(a=e).getAttribute("id")||"tmpl-"+(new Date).getTime()),a.setAttribute("id",s)),"#"==e[0]?(p||((c=getTmplType(e=e.replace(/\s+/g,"")))&&(e=e.substring(0,e.lastIndexOf(":"))),a=document.querySelector(e)),a&&(!(a.hasAttribute("recompile")||/live/gi.test(a.getAttribute("type")||""))&&a._compiled&&(i=a._compiled),(r=r||(a.getAttribute("target")||a.getAttribute("render-target")||"").trim())&&void 0===n&&(n=a.hasAttribute("replace-target"))),i||(c=c||getTmplType(a&&a.getAttribute("type")||""),d=a?a.value||a.innerHTML:e)):(s=e.indexOf(":"),c=e.substring(0,s).trim(),d=e.substring(s+1));var a,c,d,f,g,p=0,s=0;if(!(c=c||_))return void console.error("Unknown Template Engine",e);try{!i&&c&&x[c]&&(f=x[c].compile||x[c].template,p=performance.now(),f?"dust"===c&&x.dust?(g="dust-"+(new Date).getTime(),x.dust.loadSource(f(d,g)),i=x.dust.render.bind(x.dust,g)):(i=f(d))&&i.render&&(i=i.render.bind(i)):x[c].render&&(i=x[c].render.bind(x[c],d)),s=performance.now()-p)}catch(e){console.error("Template "+c+".compile failed:",e)}}if("function"==typeof i){if(a&&!a._compiled&&(a._compiled=i),a&&a.setAttribute("compile-time",s.toFixed(4)),"object"!=typeof t)return i;var u,m=performance.now();return"dust"===c?i(t,function(e,t){return e?console.error("Error in dust Template:",e):u=_updateDOM(r,t,n,m),"function"==typeof o&&o(u),u}):(u=_updateDOM(r,i(t),n,m),"function"==typeof o&&o(u)),u}console.error("Could not compile ["+c+"] Template",e)}function _updateDOM(e,t,r,n){if(e){var o=e;if("string"==typeof e&&(e=e.trim(),void 0===r&&(r=/:replace$/i.test(e)),e.replace(/:replace$/i,"").trim(),o=document.querySelector(e)),o)try{r?o.outerHTML=t:o.innerHTML=t,o.setAttribute("render-time",(performance.now()-n).toFixed(4))}catch(e){console.error(e)}else console.error("Invalid Target:",e)}return t}Element.prototype.render||Object.defineProperty(Element.prototype,"render",{value:function(e,t,r,n){return nxT(this,e,t,r,n)}}),Element.prototype.compile||Object.defineProperty(Element.prototype,"compile",{value:function(){return nxT(this)}})}(window||globalThis);